function Jr(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const et={},An=[],Nt=()=>{},ko=()=>!1,Ji=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Qr=e=>e.startsWith("onUpdate:"),pt=Object.assign,es=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Fl=Object.prototype.hasOwnProperty,Xe=(e,t)=>Fl.call(e,t),Be=Array.isArray,In=e=>di(e)==="[object Map]",Un=e=>di(e)==="[object Set]",Ts=e=>di(e)==="[object Date]",ze=e=>typeof e=="function",lt=e=>typeof e=="string",Ft=e=>typeof e=="symbol",Je=e=>e!==null&&typeof e=="object",Co=e=>(Je(e)||ze(e))&&ze(e.then)&&ze(e.catch),To=Object.prototype.toString,di=e=>To.call(e),jl=e=>di(e).slice(8,-1),Ao=e=>di(e)==="[object Object]",ts=e=>lt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,qn=Jr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Qi=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},zl=/-\w/g,dn=Qi(e=>e.replace(zl,t=>t.slice(1).toUpperCase())),Hl=/\B([A-Z])/g,En=Qi(e=>e.replace(Hl,"-$1").toLowerCase()),Io=Qi(e=>e.charAt(0).toUpperCase()+e.slice(1)),gr=Qi(e=>e?`on${Io(e)}`:""),un=(e,t)=>!Object.is(e,t),Pi=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Do=(e,t,n,i=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:i,value:n})},er=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Vl=e=>{const t=lt(e)?Number(e):NaN;return isNaN(t)?e:t};let As;const tr=()=>As||(As=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ci(e){if(Be(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],r=lt(i)?Gl(i):ci(i);if(r)for(const s in r)t[s]=r[s]}return t}else if(lt(e)||Je(e))return e}const $l=/;(?![^(]*\))/g,ql=/:([^]+)/,Wl=/\/\*[^]*?\*\//g;function Gl(e){const t={};return e.replace(Wl,"").split($l).forEach(n=>{if(n){const i=n.split(ql);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function fn(e){let t="";if(lt(e))t=e;else if(Be(e))for(let n=0;n<e.length;n++){const i=fn(e[n]);i&&(t+=i+" ")}else if(Je(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Zl="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Kl=Jr(Zl);function Po(e){return!!e||e===""}function Yl(e,t){if(e.length!==t.length)return!1;let n=!0;for(let i=0;n&&i<e.length;i++)n=hi(e[i],t[i]);return n}function hi(e,t){if(e===t)return!0;let n=Ts(e),i=Ts(t);if(n||i)return n&&i?e.getTime()===t.getTime():!1;if(n=Ft(e),i=Ft(t),n||i)return e===t;if(n=Be(e),i=Be(t),n||i)return n&&i?Yl(e,t):!1;if(n=Je(e),i=Je(t),n||i){if(!n||!i)return!1;const r=Object.keys(e).length,s=Object.keys(t).length;if(r!==s)return!1;for(const o in e){const a=e.hasOwnProperty(o),u=t.hasOwnProperty(o);if(a&&!u||!a&&u||!hi(e[o],t[o]))return!1}}return String(e)===String(t)}function ns(e,t){return e.findIndex(n=>hi(n,t))}const Ro=e=>!!(e&&e.__v_isRef===!0),rt=e=>lt(e)?e:e==null?"":Be(e)||Je(e)&&(e.toString===To||!ze(e.toString))?Ro(e)?rt(e.value):JSON.stringify(e,Lo,2):String(e),Lo=(e,t)=>Ro(t)?Lo(e,t.value):In(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,r],s)=>(n[mr(i,s)+" =>"]=r,n),{})}:Un(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>mr(n))}:Ft(t)?mr(t):Je(t)&&!Be(t)&&!Ao(t)?String(t):t,mr=(e,t="")=>{var n;return Ft(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};let St;class Xl{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=St,!t&&St&&(this.index=(St.scopes||(St.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=St;try{return St=this,t()}finally{St=n}}}on(){++this._on===1&&(this.prevScope=St,St=this)}off(){this._on>0&&--this._on===0&&(St=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(this.effects.length=0,n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Jl(){return St}let tt;const vr=new WeakSet;class Mo{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,St&&St.active&&St.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,vr.has(this)&&(vr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Oo(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Is(this),Bo(this);const t=tt,n=Pt;tt=this,Pt=!0;try{return this.fn()}finally{No(this),tt=t,Pt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)ss(t);this.deps=this.depsTail=void 0,Is(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?vr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ir(this)&&this.run()}get dirty(){return Ir(this)}}let Uo=0,Wn,Gn;function Oo(e,t=!1){if(e.flags|=8,t){e.next=Gn,Gn=e;return}e.next=Wn,Wn=e}function is(){Uo++}function rs(){if(--Uo>0)return;if(Gn){let t=Gn;for(Gn=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Wn;){let t=Wn;for(Wn=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(i){e||(e=i)}t=n}}if(e)throw e}function Bo(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function No(e){let t,n=e.depsTail,i=n;for(;i;){const r=i.prevDep;i.version===-1?(i===n&&(n=r),ss(i),Ql(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=r}e.deps=t,e.depsTail=n}function Ir(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Fo(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Fo(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===ni)||(e.globalVersion=ni,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Ir(e))))return;e.flags|=2;const t=e.dep,n=tt,i=Pt;tt=e,Pt=!0;try{Bo(e);const r=e.fn(e._value);(t.version===0||un(r,e._value))&&(e.flags|=128,e._value=r,t.version++)}catch(r){throw t.version++,r}finally{tt=n,Pt=i,No(e),e.flags&=-3}}function ss(e,t=!1){const{dep:n,prevSub:i,nextSub:r}=e;if(i&&(i.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=i,e.nextSub=void 0),n.subs===e&&(n.subs=i,!i&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)ss(s,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Ql(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Pt=!0;const jo=[];function Xt(){jo.push(Pt),Pt=!1}function Jt(){const e=jo.pop();Pt=e===void 0?!0:e}function Is(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=tt;tt=void 0;try{t()}finally{tt=n}}}let ni=0;class eu{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class os{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!tt||!Pt||tt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==tt)n=this.activeLink=new eu(tt,this),tt.deps?(n.prevDep=tt.depsTail,tt.depsTail.nextDep=n,tt.depsTail=n):tt.deps=tt.depsTail=n,zo(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const i=n.nextDep;i.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=i),n.prevDep=tt.depsTail,n.nextDep=void 0,tt.depsTail.nextDep=n,tt.depsTail=n,tt.deps===n&&(tt.deps=i)}return n}trigger(t){this.version++,ni++,this.notify(t)}notify(t){is();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{rs()}}}function zo(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let i=t.deps;i;i=i.nextDep)zo(i)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Dr=new WeakMap,xn=Symbol(""),Pr=Symbol(""),ii=Symbol("");function gt(e,t,n){if(Pt&&tt){let i=Dr.get(e);i||Dr.set(e,i=new Map);let r=i.get(n);r||(i.set(n,r=new os),r.map=i,r.key=n),r.track()}}function Wt(e,t,n,i,r,s){const o=Dr.get(e);if(!o){ni++;return}const a=u=>{u&&u.trigger()};if(is(),t==="clear")o.forEach(a);else{const u=Be(e),f=u&&ts(n);if(u&&n==="length"){const l=Number(i);o.forEach((m,p)=>{(p==="length"||p===ii||!Ft(p)&&p>=l)&&a(m)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),f&&a(o.get(ii)),t){case"add":u?f&&a(o.get("length")):(a(o.get(xn)),In(e)&&a(o.get(Pr)));break;case"delete":u||(a(o.get(xn)),In(e)&&a(o.get(Pr)));break;case"set":In(e)&&a(o.get(xn));break}}rs()}function kn(e){const t=Ze(e);return t===e?t:(gt(t,"iterate",ii),It(e)?t:t.map(Rt))}function nr(e){return gt(e=Ze(e),"iterate",ii),e}function rn(e,t){return Qt(e)?Rn(Sn(e)?Rt(t):t):Rt(t)}const tu={__proto__:null,[Symbol.iterator](){return _r(this,Symbol.iterator,e=>rn(this,e))},concat(...e){return kn(this).concat(...e.map(t=>Be(t)?kn(t):t))},entries(){return _r(this,"entries",e=>(e[1]=rn(this,e[1]),e))},every(e,t){return Ht(this,"every",e,t,void 0,arguments)},filter(e,t){return Ht(this,"filter",e,t,n=>n.map(i=>rn(this,i)),arguments)},find(e,t){return Ht(this,"find",e,t,n=>rn(this,n),arguments)},findIndex(e,t){return Ht(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Ht(this,"findLast",e,t,n=>rn(this,n),arguments)},findLastIndex(e,t){return Ht(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Ht(this,"forEach",e,t,void 0,arguments)},includes(...e){return br(this,"includes",e)},indexOf(...e){return br(this,"indexOf",e)},join(e){return kn(this).join(e)},lastIndexOf(...e){return br(this,"lastIndexOf",e)},map(e,t){return Ht(this,"map",e,t,void 0,arguments)},pop(){return Nn(this,"pop")},push(...e){return Nn(this,"push",e)},reduce(e,...t){return Ds(this,"reduce",e,t)},reduceRight(e,...t){return Ds(this,"reduceRight",e,t)},shift(){return Nn(this,"shift")},some(e,t){return Ht(this,"some",e,t,void 0,arguments)},splice(...e){return Nn(this,"splice",e)},toReversed(){return kn(this).toReversed()},toSorted(e){return kn(this).toSorted(e)},toSpliced(...e){return kn(this).toSpliced(...e)},unshift(...e){return Nn(this,"unshift",e)},values(){return _r(this,"values",e=>rn(this,e))}};function _r(e,t,n){const i=nr(e),r=i[t]();return i!==e&&!It(e)&&(r._next=r.next,r.next=()=>{const s=r._next();return s.done||(s.value=n(s.value)),s}),r}const nu=Array.prototype;function Ht(e,t,n,i,r,s){const o=nr(e),a=o!==e&&!It(e),u=o[t];if(u!==nu[t]){const m=u.apply(e,s);return a?Rt(m):m}let f=n;o!==e&&(a?f=function(m,p){return n.call(this,rn(e,m),p,e)}:n.length>2&&(f=function(m,p){return n.call(this,m,p,e)}));const l=u.call(o,f,i);return a&&r?r(l):l}function Ds(e,t,n,i){const r=nr(e);let s=n;return r!==e&&(It(e)?n.length>3&&(s=function(o,a,u){return n.call(this,o,a,u,e)}):s=function(o,a,u){return n.call(this,o,rn(e,a),u,e)}),r[t](s,...i)}function br(e,t,n){const i=Ze(e);gt(i,"iterate",ii);const r=i[t](...n);return(r===-1||r===!1)&&us(n[0])?(n[0]=Ze(n[0]),i[t](...n)):r}function Nn(e,t,n=[]){Xt(),is();const i=Ze(e)[t].apply(e,n);return rs(),Jt(),i}const iu=Jr("__proto__,__v_isRef,__isVue"),Ho=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ft));function ru(e){Ft(e)||(e=String(e));const t=Ze(this);return gt(t,"has",e),t.hasOwnProperty(e)}class Vo{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,i){if(n==="__v_skip")return t.__v_skip;const r=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return s;if(n==="__v_raw")return i===(r?s?pu:Go:s?Wo:qo).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const o=Be(t);if(!r){let u;if(o&&(u=tu[n]))return u;if(n==="hasOwnProperty")return ru}const a=Reflect.get(t,n,Ue(t)?t:i);if((Ft(n)?Ho.has(n):iu(n))||(r||gt(t,"get",n),s))return a;if(Ue(a)){const u=o&&ts(n)?a:a.value;return r&&Je(u)?Lr(u):u}return Je(a)?r?Lr(a):ir(a):a}}class $o extends Vo{constructor(t=!1){super(!1,t)}set(t,n,i,r){let s=t[n];const o=Be(t)&&ts(n);if(!this._isShallow){const f=Qt(s);if(!It(i)&&!Qt(i)&&(s=Ze(s),i=Ze(i)),!o&&Ue(s)&&!Ue(i))return f||(s.value=i),!0}const a=o?Number(n)<t.length:Xe(t,n),u=Reflect.set(t,n,i,Ue(t)?t:r);return t===Ze(r)&&(a?un(i,s)&&Wt(t,"set",n,i):Wt(t,"add",n,i)),u}deleteProperty(t,n){const i=Xe(t,n);t[n];const r=Reflect.deleteProperty(t,n);return r&&i&&Wt(t,"delete",n,void 0),r}has(t,n){const i=Reflect.has(t,n);return(!Ft(n)||!Ho.has(n))&&gt(t,"has",n),i}ownKeys(t){return gt(t,"iterate",Be(t)?"length":xn),Reflect.ownKeys(t)}}class su extends Vo{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const ou=new $o,au=new su,lu=new $o(!0);const Rr=e=>e,Si=e=>Reflect.getPrototypeOf(e);function uu(e,t,n){return function(...i){const r=this.__v_raw,s=Ze(r),o=In(s),a=e==="entries"||e===Symbol.iterator&&o,u=e==="keys"&&o,f=r[e](...i),l=n?Rr:t?Rn:Rt;return!t&&gt(s,"iterate",u?Pr:xn),pt(Object.create(f),{next(){const{value:m,done:p}=f.next();return p?{value:m,done:p}:{value:a?[l(m[0]),l(m[1])]:l(m),done:p}}})}}function Ei(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function fu(e,t){const n={get(r){const s=this.__v_raw,o=Ze(s),a=Ze(r);e||(un(r,a)&&gt(o,"get",r),gt(o,"get",a));const{has:u}=Si(o),f=t?Rr:e?Rn:Rt;if(u.call(o,r))return f(s.get(r));if(u.call(o,a))return f(s.get(a));s!==o&&s.get(r)},get size(){const r=this.__v_raw;return!e&&gt(Ze(r),"iterate",xn),r.size},has(r){const s=this.__v_raw,o=Ze(s),a=Ze(r);return e||(un(r,a)&&gt(o,"has",r),gt(o,"has",a)),r===a?s.has(r):s.has(r)||s.has(a)},forEach(r,s){const o=this,a=o.__v_raw,u=Ze(a),f=t?Rr:e?Rn:Rt;return!e&&gt(u,"iterate",xn),a.forEach((l,m)=>r.call(s,f(l),f(m),o))}};return pt(n,e?{add:Ei("add"),set:Ei("set"),delete:Ei("delete"),clear:Ei("clear")}:{add(r){!t&&!It(r)&&!Qt(r)&&(r=Ze(r));const s=Ze(this);return Si(s).has.call(s,r)||(s.add(r),Wt(s,"add",r,r)),this},set(r,s){!t&&!It(s)&&!Qt(s)&&(s=Ze(s));const o=Ze(this),{has:a,get:u}=Si(o);let f=a.call(o,r);f||(r=Ze(r),f=a.call(o,r));const l=u.call(o,r);return o.set(r,s),f?un(s,l)&&Wt(o,"set",r,s):Wt(o,"add",r,s),this},delete(r){const s=Ze(this),{has:o,get:a}=Si(s);let u=o.call(s,r);u||(r=Ze(r),u=o.call(s,r)),a&&a.call(s,r);const f=s.delete(r);return u&&Wt(s,"delete",r,void 0),f},clear(){const r=Ze(this),s=r.size!==0,o=r.clear();return s&&Wt(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=uu(r,e,t)}),n}function as(e,t){const n=fu(e,t);return(i,r,s)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?i:Reflect.get(Xe(n,r)&&r in i?n:i,r,s)}const du={get:as(!1,!1)},cu={get:as(!1,!0)},hu={get:as(!0,!1)};const qo=new WeakMap,Wo=new WeakMap,Go=new WeakMap,pu=new WeakMap;function gu(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function mu(e){return e.__v_skip||!Object.isExtensible(e)?0:gu(jl(e))}function ir(e){return Qt(e)?e:ls(e,!1,ou,du,qo)}function vu(e){return ls(e,!1,lu,cu,Wo)}function Lr(e){return ls(e,!0,au,hu,Go)}function ls(e,t,n,i,r){if(!Je(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=mu(e);if(s===0)return e;const o=r.get(e);if(o)return o;const a=new Proxy(e,s===2?i:n);return r.set(e,a),a}function Sn(e){return Qt(e)?Sn(e.__v_raw):!!(e&&e.__v_isReactive)}function Qt(e){return!!(e&&e.__v_isReadonly)}function It(e){return!!(e&&e.__v_isShallow)}function us(e){return e?!!e.__v_raw:!1}function Ze(e){const t=e&&e.__v_raw;return t?Ze(t):e}function _u(e){return!Xe(e,"__v_skip")&&Object.isExtensible(e)&&Do(e,"__v_skip",!0),e}const Rt=e=>Je(e)?ir(e):e,Rn=e=>Je(e)?Lr(e):e;function Ue(e){return e?e.__v_isRef===!0:!1}function ct(e){return bu(e,!1)}function bu(e,t){return Ue(e)?e:new yu(e,t)}class yu{constructor(t,n){this.dep=new os,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Ze(t),this._value=n?t:Rt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,i=this.__v_isShallow||It(t)||Qt(t);t=i?t:Ze(t),un(t,n)&&(this._rawValue=t,this._value=i?t:Rt(t),this.dep.trigger())}}function oe(e){return Ue(e)?e.value:e}const wu={get:(e,t,n)=>t==="__v_raw"?e:oe(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const r=e[t];return Ue(r)&&!Ue(n)?(r.value=n,!0):Reflect.set(e,t,n,i)}};function Zo(e){return Sn(e)?e:new Proxy(e,wu)}class xu{constructor(t,n,i){this.fn=t,this.setter=n,this._value=void 0,this.dep=new os(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ni-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&tt!==this)return Oo(this,!0),!0}get value(){const t=this.dep.track();return Fo(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Su(e,t,n=!1){let i,r;return ze(e)?i=e:(i=e.get,r=e.set),new xu(i,r,n)}const ki={},zi=new WeakMap;let yn;function Eu(e,t=!1,n=yn){if(n){let i=zi.get(n);i||zi.set(n,i=[]),i.push(e)}}function ku(e,t,n=et){const{immediate:i,deep:r,once:s,scheduler:o,augmentJob:a,call:u}=n,f=E=>r?E:It(E)||r===!1||r===0?Gt(E,1):Gt(E);let l,m,p,c,g=!1,x=!1;if(Ue(e)?(m=()=>e.value,g=It(e)):Sn(e)?(m=()=>f(e),g=!0):Be(e)?(x=!0,g=e.some(E=>Sn(E)||It(E)),m=()=>e.map(E=>{if(Ue(E))return E.value;if(Sn(E))return f(E);if(ze(E))return u?u(E,2):E()})):ze(e)?t?m=u?()=>u(e,2):e:m=()=>{if(p){Xt();try{p()}finally{Jt()}}const E=yn;yn=l;try{return u?u(e,3,[c]):e(c)}finally{yn=E}}:m=Nt,t&&r){const E=m,L=r===!0?1/0:r;m=()=>Gt(E(),L)}const v=Jl(),D=()=>{l.stop(),v&&v.active&&es(v.effects,l)};if(s&&t){const E=t;t=(...L)=>{E(...L),D()}}let w=x?new Array(e.length).fill(ki):ki;const b=E=>{if(!(!(l.flags&1)||!l.dirty&&!E))if(t){const L=l.run();if(r||g||(x?L.some((U,M)=>un(U,w[M])):un(L,w))){p&&p();const U=yn;yn=l;try{const M=[L,w===ki?void 0:x&&w[0]===ki?[]:w,c];w=L,u?u(t,3,M):t(...M)}finally{yn=U}}}else l.run()};return a&&a(b),l=new Mo(m),l.scheduler=o?()=>o(b,!1):b,c=E=>Eu(E,!1,l),p=l.onStop=()=>{const E=zi.get(l);if(E){if(u)u(E,4);else for(const L of E)L();zi.delete(l)}},t?i?b(!0):w=l.run():o?o(b.bind(null,!0),!0):l.run(),D.pause=l.pause.bind(l),D.resume=l.resume.bind(l),D.stop=D,D}function Gt(e,t=1/0,n){if(t<=0||!Je(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,Ue(e))Gt(e.value,t,n);else if(Be(e))for(let i=0;i<e.length;i++)Gt(e[i],t,n);else if(Un(e)||In(e))e.forEach(i=>{Gt(i,t,n)});else if(Ao(e)){for(const i in e)Gt(e[i],t,n);for(const i of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,i)&&Gt(e[i],t,n)}return e}function pi(e,t,n,i){try{return i?e(...i):e()}catch(r){rr(r,t,n)}}function Lt(e,t,n,i){if(ze(e)){const r=pi(e,t,n,i);return r&&Co(r)&&r.catch(s=>{rr(s,t,n)}),r}if(Be(e)){const r=[];for(let s=0;s<e.length;s++)r.push(Lt(e[s],t,n,i));return r}}function rr(e,t,n,i=!0){const r=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||et;if(t){let a=t.parent;const u=t.proxy,f=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const l=a.ec;if(l){for(let m=0;m<l.length;m++)if(l[m](e,u,f)===!1)return}a=a.parent}if(s){Xt(),pi(s,null,10,[e,u,f]),Jt();return}}Cu(e,n,r,i,o)}function Cu(e,t,n,i=!0,r=!1){if(r)throw e;console.error(e)}const _t=[];let Ut=-1;const Dn=[];let sn=null,Cn=0;const Ko=Promise.resolve();let Hi=null;function fs(e){const t=Hi||Ko;return e?t.then(this?e.bind(this):e):t}function Tu(e){let t=Ut+1,n=_t.length;for(;t<n;){const i=t+n>>>1,r=_t[i],s=ri(r);s<e||s===e&&r.flags&2?t=i+1:n=i}return t}function ds(e){if(!(e.flags&1)){const t=ri(e),n=_t[_t.length-1];!n||!(e.flags&2)&&t>=ri(n)?_t.push(e):_t.splice(Tu(t),0,e),e.flags|=1,Yo()}}function Yo(){Hi||(Hi=Ko.then(Jo))}function Au(e){Be(e)?Dn.push(...e):sn&&e.id===-1?sn.splice(Cn+1,0,e):e.flags&1||(Dn.push(e),e.flags|=1),Yo()}function Ps(e,t,n=Ut+1){for(;n<_t.length;n++){const i=_t[n];if(i&&i.flags&2){if(e&&i.id!==e.uid)continue;_t.splice(n,1),n--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function Xo(e){if(Dn.length){const t=[...new Set(Dn)].sort((n,i)=>ri(n)-ri(i));if(Dn.length=0,sn){sn.push(...t);return}for(sn=t,Cn=0;Cn<sn.length;Cn++){const n=sn[Cn];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}sn=null,Cn=0}}const ri=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Jo(e){try{for(Ut=0;Ut<_t.length;Ut++){const t=_t[Ut];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),pi(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ut<_t.length;Ut++){const t=_t[Ut];t&&(t.flags&=-2)}Ut=-1,_t.length=0,Xo(),Hi=null,(_t.length||Dn.length)&&Jo()}}let At=null,Qo=null;function Vi(e){const t=At;return At=e,Qo=e&&e.type.__scopeId||null,t}function sr(e,t=At,n){if(!t||e._n)return e;const i=(...r)=>{i._d&&Wi(-1);const s=Vi(t);let o;try{o=e(...r)}finally{Vi(s),i._d&&Wi(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function ce(e,t){if(At===null)return e;const n=dr(At),i=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[s,o,a,u=et]=t[r];s&&(ze(s)&&(s={mounted:s,updated:s}),s.deep&&Gt(o),i.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:u}))}return e}function mn(e,t,n,i){const r=e.dirs,s=t&&t.dirs;for(let o=0;o<r.length;o++){const a=r[o];s&&(a.oldValue=s[o].value);let u=a.dir[i];u&&(Xt(),Lt(u,n,8,[e.el,a,e,t]),Jt())}}function Iu(e,t){if(yt){let n=yt.provides;const i=yt.parent&&yt.parent.provides;i===n&&(n=yt.provides=Object.create(i)),n[e]=t}}function Ri(e,t,n=!1){const i=Pa();if(i||Pn){let r=Pn?Pn._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return n&&ze(t)?t.call(i&&i.proxy):t}}const Du=Symbol.for("v-scx"),Pu=()=>Ri(Du);function Zt(e,t,n){return ea(e,t,n)}function ea(e,t,n=et){const{immediate:i,deep:r,flush:s,once:o}=n,a=pt({},n),u=t&&i||!t&&s!=="post";let f;if(ai){if(s==="sync"){const c=Pu();f=c.__watcherHandles||(c.__watcherHandles=[])}else if(!u){const c=()=>{};return c.stop=Nt,c.resume=Nt,c.pause=Nt,c}}const l=yt;a.call=(c,g,x)=>Lt(c,l,g,x);let m=!1;s==="post"?a.scheduler=c=>{vt(c,l&&l.suspense)}:s!=="sync"&&(m=!0,a.scheduler=(c,g)=>{g?c():ds(c)}),a.augmentJob=c=>{t&&(c.flags|=4),m&&(c.flags|=2,l&&(c.id=l.uid,c.i=l))};const p=ku(e,t,a);return ai&&(f?f.push(p):u&&p()),p}function Ru(e,t,n){const i=this.proxy,r=lt(e)?e.includes(".")?ta(i,e):()=>i[e]:e.bind(i,i);let s;ze(t)?s=t:(s=t.handler,n=t);const o=vi(this),a=ea(r,s.bind(i),n);return o(),a}function ta(e,t){const n=t.split(".");return()=>{let i=e;for(let r=0;r<n.length&&i;r++)i=i[n[r]];return i}}const na=Symbol("_vte"),ia=e=>e.__isTeleport,Zn=e=>e&&(e.disabled||e.disabled===""),Rs=e=>e&&(e.defer||e.defer===""),Ls=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Ms=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Mr=(e,t)=>{const n=e&&e.to;return lt(n)?t?t(n):null:n},ra={name:"Teleport",__isTeleport:!0,process(e,t,n,i,r,s,o,a,u,f){const{mc:l,pc:m,pbc:p,o:{insert:c,querySelector:g,createText:x,createComment:v}}=f,D=Zn(t.props);let{shapeFlag:w,children:b,dynamicChildren:E}=t;if(e==null){const L=t.el=x(""),U=t.anchor=x("");c(L,n,i),c(U,n,i);const M=(V,ue)=>{w&16&&l(b,V,ue,r,s,o,a,u)},W=()=>{const V=t.target=Mr(t.props,g),ue=sa(V,t,x,c);V&&(o!=="svg"&&Ls(V)?o="svg":o!=="mathml"&&Ms(V)&&(o="mathml"),r&&r.isCE&&(r.ce._teleportTargets||(r.ce._teleportTargets=new Set)).add(V),D||(M(V,ue),Li(t,!1)))};D&&(M(n,U),Li(t,!0)),Rs(t.props)?(t.el.__isMounted=!1,vt(()=>{W(),delete t.el.__isMounted},s)):W()}else{if(Rs(t.props)&&e.el.__isMounted===!1){vt(()=>{ra.process(e,t,n,i,r,s,o,a,u,f)},s);return}t.el=e.el,t.targetStart=e.targetStart;const L=t.anchor=e.anchor,U=t.target=e.target,M=t.targetAnchor=e.targetAnchor,W=Zn(e.props),V=W?n:U,ue=W?L:M;if(o==="svg"||Ls(U)?o="svg":(o==="mathml"||Ms(U))&&(o="mathml"),E?(p(e.dynamicChildren,E,V,r,s,o,a),gs(e,t,!0)):u||m(e,t,V,ue,r,s,o,a,!1),D)W?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):Ci(t,n,L,f,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const we=t.target=Mr(t.props,g);we&&Ci(t,we,null,f,0)}else W&&Ci(t,U,M,f,1);Li(t,D)}},remove(e,t,n,{um:i,o:{remove:r}},s){const{shapeFlag:o,children:a,anchor:u,targetStart:f,targetAnchor:l,target:m,props:p}=e;if(m&&(r(f),r(l)),s&&r(u),o&16){const c=s||!Zn(p);for(let g=0;g<a.length;g++){const x=a[g];i(x,t,n,c,!!x.dynamicChildren)}}},move:Ci,hydrate:Lu};function Ci(e,t,n,{o:{insert:i},m:r},s=2){s===0&&i(e.targetAnchor,t,n);const{el:o,anchor:a,shapeFlag:u,children:f,props:l}=e,m=s===2;if(m&&i(o,t,n),(!m||Zn(l))&&u&16)for(let p=0;p<f.length;p++)r(f[p],t,n,2);m&&i(a,t,n)}function Lu(e,t,n,i,r,s,{o:{nextSibling:o,parentNode:a,querySelector:u,insert:f,createText:l}},m){function p(x,v,D,w){v.anchor=m(o(x),v,a(x),n,i,r,s),v.targetStart=D,v.targetAnchor=w}const c=t.target=Mr(t.props,u),g=Zn(t.props);if(c){const x=c._lpa||c.firstChild;if(t.shapeFlag&16)if(g)p(e,t,x,x&&o(x));else{t.anchor=o(e);let v=x;for(;v;){if(v&&v.nodeType===8){if(v.data==="teleport start anchor")t.targetStart=v;else if(v.data==="teleport anchor"){t.targetAnchor=v,c._lpa=t.targetAnchor&&o(t.targetAnchor);break}}v=o(v)}t.targetAnchor||sa(c,t,l,f),m(x&&o(x),t,c,n,i,r,s)}Li(t,g)}else g&&t.shapeFlag&16&&p(e,t,e,o(e));return t.anchor&&o(t.anchor)}const cs=ra;function Li(e,t){const n=e.ctx;if(n&&n.ut){let i,r;for(t?(i=e.el,r=e.anchor):(i=e.targetStart,r=e.targetAnchor);i&&i!==r;)i.nodeType===1&&i.setAttribute("data-v-owner",n.uid),i=i.nextSibling;n.ut()}}function sa(e,t,n,i){const r=t.targetStart=n(""),s=t.targetAnchor=n("");return r[na]=s,e&&(i(r,e),i(s,e)),s}const qt=Symbol("_leaveCb"),Ti=Symbol("_enterCb");function Mu(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return gi(()=>{e.isMounted=!0}),ha(()=>{e.isUnmounting=!0}),e}const Tt=[Function,Array],oa={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Tt,onEnter:Tt,onAfterEnter:Tt,onEnterCancelled:Tt,onBeforeLeave:Tt,onLeave:Tt,onAfterLeave:Tt,onLeaveCancelled:Tt,onBeforeAppear:Tt,onAppear:Tt,onAfterAppear:Tt,onAppearCancelled:Tt},aa=e=>{const t=e.subTree;return t.component?aa(t.component):t},Uu={name:"BaseTransition",props:oa,setup(e,{slots:t}){const n=Pa(),i=Mu();return()=>{const r=t.default&&fa(t.default(),!0);if(!r||!r.length)return;const s=la(r),o=Ze(e),{mode:a}=o;if(i.isLeaving)return yr(s);const u=Us(s);if(!u)return yr(s);let f=Ur(u,o,i,n,m=>f=m);u.type!==bt&&si(u,f);let l=n.subTree&&Us(n.subTree);if(l&&l.type!==bt&&!wn(l,u)&&aa(n).type!==bt){let m=Ur(l,o,i,n);if(si(l,m),a==="out-in"&&u.type!==bt)return i.isLeaving=!0,m.afterLeave=()=>{i.isLeaving=!1,n.job.flags&8||n.update(),delete m.afterLeave,l=void 0},yr(s);a==="in-out"&&u.type!==bt?m.delayLeave=(p,c,g)=>{const x=ua(i,l);x[String(l.key)]=l,p[qt]=()=>{c(),p[qt]=void 0,delete f.delayedLeave,l=void 0},f.delayedLeave=()=>{g(),delete f.delayedLeave,l=void 0}}:l=void 0}else l&&(l=void 0);return s}}};function la(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==bt){t=n;break}}return t}const Ou=Uu;function ua(e,t){const{leavingVNodes:n}=e;let i=n.get(t.type);return i||(i=Object.create(null),n.set(t.type,i)),i}function Ur(e,t,n,i,r){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:u,onEnter:f,onAfterEnter:l,onEnterCancelled:m,onBeforeLeave:p,onLeave:c,onAfterLeave:g,onLeaveCancelled:x,onBeforeAppear:v,onAppear:D,onAfterAppear:w,onAppearCancelled:b}=t,E=String(e.key),L=ua(n,e),U=(V,ue)=>{V&&Lt(V,i,9,ue)},M=(V,ue)=>{const we=ue[1];U(V,ue),Be(V)?V.every(ae=>ae.length<=1)&&we():V.length<=1&&we()},W={mode:o,persisted:a,beforeEnter(V){let ue=u;if(!n.isMounted)if(s)ue=v||u;else return;V[qt]&&V[qt](!0);const we=L[E];we&&wn(e,we)&&we.el[qt]&&we.el[qt](),U(ue,[V])},enter(V){let ue=f,we=l,ae=m;if(!n.isMounted)if(s)ue=D||f,we=w||l,ae=b||m;else return;let re=!1;const Z=V[Ti]=fe=>{re||(re=!0,fe?U(ae,[V]):U(we,[V]),W.delayedLeave&&W.delayedLeave(),V[Ti]=void 0)};ue?M(ue,[V,Z]):Z()},leave(V,ue){const we=String(e.key);if(V[Ti]&&V[Ti](!0),n.isUnmounting)return ue();U(p,[V]);let ae=!1;const re=V[qt]=Z=>{ae||(ae=!0,ue(),Z?U(x,[V]):U(g,[V]),V[qt]=void 0,L[we]===e&&delete L[we])};L[we]=e,c?M(c,[V,re]):re()},clone(V){const ue=Ur(V,t,n,i,r);return r&&r(ue),ue}};return W}function yr(e){if(or(e))return e=cn(e),e.children=null,e}function Us(e){if(!or(e))return ia(e.type)&&e.children?la(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&ze(n.default))return n.default()}}function si(e,t){e.shapeFlag&6&&e.component?(e.transition=t,si(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function fa(e,t=!1,n){let i=[],r=0;for(let s=0;s<e.length;s++){let o=e[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===ht?(o.patchFlag&128&&r++,i=i.concat(fa(o.children,t,a))):(t||o.type!==bt)&&i.push(a!=null?cn(o,{key:a}):o)}if(r>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}function da(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const $i=new WeakMap;function Kn(e,t,n,i,r=!1){if(Be(e)){e.forEach((g,x)=>Kn(g,t&&(Be(t)?t[x]:t),n,i,r));return}if(Yn(i)&&!r){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&Kn(e,t,n,i.component.subTree);return}const s=i.shapeFlag&4?dr(i.component):i.el,o=r?null:s,{i:a,r:u}=e,f=t&&t.r,l=a.refs===et?a.refs={}:a.refs,m=a.setupState,p=Ze(m),c=m===et?ko:g=>Xe(p,g);if(f!=null&&f!==u){if(Os(t),lt(f))l[f]=null,c(f)&&(m[f]=null);else if(Ue(f)){f.value=null;const g=t;g.k&&(l[g.k]=null)}}if(ze(u))pi(u,a,12,[o,l]);else{const g=lt(u),x=Ue(u);if(g||x){const v=()=>{if(e.f){const D=g?c(u)?m[u]:l[u]:u.value;if(r)Be(D)&&es(D,s);else if(Be(D))D.includes(s)||D.push(s);else if(g)l[u]=[s],c(u)&&(m[u]=l[u]);else{const w=[s];u.value=w,e.k&&(l[e.k]=w)}}else g?(l[u]=o,c(u)&&(m[u]=o)):x&&(u.value=o,e.k&&(l[e.k]=o))};if(o){const D=()=>{v(),$i.delete(e)};D.id=-1,$i.set(e,D),vt(D,n)}else Os(e),v()}}}function Os(e){const t=$i.get(e);t&&(t.flags|=8,$i.delete(e))}tr().requestIdleCallback;tr().cancelIdleCallback;const Yn=e=>!!e.type.__asyncLoader,or=e=>e.type.__isKeepAlive;function Bu(e,t){ca(e,"a",t)}function Nu(e,t){ca(e,"da",t)}function ca(e,t,n=yt){const i=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(ar(t,i,n),n){let r=n.parent;for(;r&&r.parent;)or(r.parent.vnode)&&Fu(i,t,n,r),r=r.parent}}function Fu(e,t,n,i){const r=ar(t,e,i,!0);mi(()=>{es(i[t],r)},n)}function ar(e,t,n=yt,i=!1){if(n){const r=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...o)=>{Xt();const a=vi(n),u=Lt(t,n,e,o);return a(),Jt(),u});return i?r.unshift(s):r.push(s),s}}const en=e=>(t,n=yt)=>{(!ai||e==="sp")&&ar(e,(...i)=>t(...i),n)},ju=en("bm"),gi=en("m"),zu=en("bu"),Hu=en("u"),ha=en("bum"),mi=en("um"),Vu=en("sp"),$u=en("rtg"),qu=en("rtc");function Wu(e,t=yt){ar("ec",e,t)}const Gu=Symbol.for("v-ndc");function ln(e,t,n,i){let r;const s=n,o=Be(e);if(o||lt(e)){const a=o&&Sn(e);let u=!1,f=!1;a&&(u=!It(e),f=Qt(e),e=nr(e)),r=new Array(e.length);for(let l=0,m=e.length;l<m;l++)r[l]=t(u?f?Rn(Rt(e[l])):Rt(e[l]):e[l],l,void 0,s)}else if(typeof e=="number"){r=new Array(e);for(let a=0;a<e;a++)r[a]=t(a+1,a,void 0,s)}else if(Je(e))if(e[Symbol.iterator])r=Array.from(e,(a,u)=>t(a,u,void 0,s));else{const a=Object.keys(e);r=new Array(a.length);for(let u=0,f=a.length;u<f;u++){const l=a[u];r[u]=t(e[l],l,u,s)}}else r=[];return r}const Or=e=>e?Ra(e)?dr(e):Or(e.parent):null,Xn=pt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Or(e.parent),$root:e=>Or(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>ga(e),$forceUpdate:e=>e.f||(e.f=()=>{ds(e.update)}),$nextTick:e=>e.n||(e.n=fs.bind(e.proxy)),$watch:e=>Ru.bind(e)}),wr=(e,t)=>e!==et&&!e.__isScriptSetup&&Xe(e,t),Zu={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:i,data:r,props:s,accessCache:o,type:a,appContext:u}=e;if(t[0]!=="$"){const p=o[t];if(p!==void 0)switch(p){case 1:return i[t];case 2:return r[t];case 4:return n[t];case 3:return s[t]}else{if(wr(i,t))return o[t]=1,i[t];if(r!==et&&Xe(r,t))return o[t]=2,r[t];if(Xe(s,t))return o[t]=3,s[t];if(n!==et&&Xe(n,t))return o[t]=4,n[t];Br&&(o[t]=0)}}const f=Xn[t];let l,m;if(f)return t==="$attrs"&&gt(e.attrs,"get",""),f(e);if((l=a.__cssModules)&&(l=l[t]))return l;if(n!==et&&Xe(n,t))return o[t]=4,n[t];if(m=u.config.globalProperties,Xe(m,t))return m[t]},set({_:e},t,n){const{data:i,setupState:r,ctx:s}=e;return wr(r,t)?(r[t]=n,!0):i!==et&&Xe(i,t)?(i[t]=n,!0):Xe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:r,props:s,type:o}},a){let u;return!!(n[a]||e!==et&&a[0]!=="$"&&Xe(e,a)||wr(t,a)||Xe(s,a)||Xe(i,a)||Xe(Xn,a)||Xe(r.config.globalProperties,a)||(u=o.__cssModules)&&u[a])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Xe(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Bs(e){return Be(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Br=!0;function Ku(e){const t=ga(e),n=e.proxy,i=e.ctx;Br=!1,t.beforeCreate&&Ns(t.beforeCreate,e,"bc");const{data:r,computed:s,methods:o,watch:a,provide:u,inject:f,created:l,beforeMount:m,mounted:p,beforeUpdate:c,updated:g,activated:x,deactivated:v,beforeDestroy:D,beforeUnmount:w,destroyed:b,unmounted:E,render:L,renderTracked:U,renderTriggered:M,errorCaptured:W,serverPrefetch:V,expose:ue,inheritAttrs:we,components:ae,directives:re,filters:Z}=t;if(f&&Yu(f,i,null),o)for(const te in o){const H=o[te];ze(H)&&(i[te]=H.bind(n))}if(r){const te=r.call(n,n);Je(te)&&(e.data=ir(te))}if(Br=!0,s)for(const te in s){const H=s[te],A=ze(H)?H.bind(n,n):ze(H.get)?H.get.bind(n,n):Nt,I=!ze(H)&&ze(H.set)?H.set.bind(n):Nt,j=Te({get:A,set:I});Object.defineProperty(i,te,{enumerable:!0,configurable:!0,get:()=>j.value,set:z=>j.value=z})}if(a)for(const te in a)pa(a[te],i,n,te);if(u){const te=ze(u)?u.call(n):u;Reflect.ownKeys(te).forEach(H=>{Iu(H,te[H])})}l&&Ns(l,e,"c");function $(te,H){Be(H)?H.forEach(A=>te(A.bind(n))):H&&te(H.bind(n))}if($(ju,m),$(gi,p),$(zu,c),$(Hu,g),$(Bu,x),$(Nu,v),$(Wu,W),$(qu,U),$($u,M),$(ha,w),$(mi,E),$(Vu,V),Be(ue))if(ue.length){const te=e.exposed||(e.exposed={});ue.forEach(H=>{Object.defineProperty(te,H,{get:()=>n[H],set:A=>n[H]=A,enumerable:!0})})}else e.exposed||(e.exposed={});L&&e.render===Nt&&(e.render=L),we!=null&&(e.inheritAttrs=we),ae&&(e.components=ae),re&&(e.directives=re),V&&da(e)}function Yu(e,t,n=Nt){Be(e)&&(e=Nr(e));for(const i in e){const r=e[i];let s;Je(r)?"default"in r?s=Ri(r.from||i,r.default,!0):s=Ri(r.from||i):s=Ri(r),Ue(s)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):t[i]=s}}function Ns(e,t,n){Lt(Be(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function pa(e,t,n,i){let r=i.includes(".")?ta(n,i):()=>n[i];if(lt(e)){const s=t[e];ze(s)&&Zt(r,s)}else if(ze(e))Zt(r,e.bind(n));else if(Je(e))if(Be(e))e.forEach(s=>pa(s,t,n,i));else{const s=ze(e.handler)?e.handler.bind(n):t[e.handler];ze(s)&&Zt(r,s,e)}}function ga(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:r,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,a=s.get(t);let u;return a?u=a:!r.length&&!n&&!i?u=t:(u={},r.length&&r.forEach(f=>qi(u,f,o,!0)),qi(u,t,o)),Je(t)&&s.set(t,u),u}function qi(e,t,n,i=!1){const{mixins:r,extends:s}=t;s&&qi(e,s,n,!0),r&&r.forEach(o=>qi(e,o,n,!0));for(const o in t)if(!(i&&o==="expose")){const a=Xu[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const Xu={data:Fs,props:js,emits:js,methods:$n,computed:$n,beforeCreate:mt,created:mt,beforeMount:mt,mounted:mt,beforeUpdate:mt,updated:mt,beforeDestroy:mt,beforeUnmount:mt,destroyed:mt,unmounted:mt,activated:mt,deactivated:mt,errorCaptured:mt,serverPrefetch:mt,components:$n,directives:$n,watch:Qu,provide:Fs,inject:Ju};function Fs(e,t){return t?e?function(){return pt(ze(e)?e.call(this,this):e,ze(t)?t.call(this,this):t)}:t:e}function Ju(e,t){return $n(Nr(e),Nr(t))}function Nr(e){if(Be(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function mt(e,t){return e?[...new Set([].concat(e,t))]:t}function $n(e,t){return e?pt(Object.create(null),e,t):t}function js(e,t){return e?Be(e)&&Be(t)?[...new Set([...e,...t])]:pt(Object.create(null),Bs(e),Bs(t??{})):t}function Qu(e,t){if(!e)return t;if(!t)return e;const n=pt(Object.create(null),e);for(const i in t)n[i]=mt(e[i],t[i]);return n}function ma(){return{app:null,config:{isNativeTag:ko,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ef=0;function tf(e,t){return function(i,r=null){ze(i)||(i=pt({},i)),r!=null&&!Je(r)&&(r=null);const s=ma(),o=new WeakSet,a=[];let u=!1;const f=s.app={_uid:ef++,_component:i,_props:r,_container:null,_context:s,_instance:null,version:Uf,get config(){return s.config},set config(l){},use(l,...m){return o.has(l)||(l&&ze(l.install)?(o.add(l),l.install(f,...m)):ze(l)&&(o.add(l),l(f,...m))),f},mixin(l){return s.mixins.includes(l)||s.mixins.push(l),f},component(l,m){return m?(s.components[l]=m,f):s.components[l]},directive(l,m){return m?(s.directives[l]=m,f):s.directives[l]},mount(l,m,p){if(!u){const c=f._ceVNode||nt(i,r);return c.appContext=s,p===!0?p="svg":p===!1&&(p=void 0),e(c,l,p),u=!0,f._container=l,l.__vue_app__=f,dr(c.component)}},onUnmount(l){a.push(l)},unmount(){u&&(Lt(a,f._instance,16),e(null,f._container),delete f._container.__vue_app__)},provide(l,m){return s.provides[l]=m,f},runWithContext(l){const m=Pn;Pn=f;try{return l()}finally{Pn=m}}};return f}}let Pn=null;const nf=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${dn(t)}Modifiers`]||e[`${En(t)}Modifiers`];function rf(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||et;let r=n;const s=t.startsWith("update:"),o=s&&nf(i,t.slice(7));o&&(o.trim&&(r=n.map(l=>lt(l)?l.trim():l)),o.number&&(r=n.map(er)));let a,u=i[a=gr(t)]||i[a=gr(dn(t))];!u&&s&&(u=i[a=gr(En(t))]),u&&Lt(u,e,6,r);const f=i[a+"Once"];if(f){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Lt(f,e,6,r)}}const sf=new WeakMap;function va(e,t,n=!1){const i=n?sf:t.emitsCache,r=i.get(e);if(r!==void 0)return r;const s=e.emits;let o={},a=!1;if(!ze(e)){const u=f=>{const l=va(f,t,!0);l&&(a=!0,pt(o,l))};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!s&&!a?(Je(e)&&i.set(e,null),null):(Be(s)?s.forEach(u=>o[u]=null):pt(o,s),Je(e)&&i.set(e,o),o)}function lr(e,t){return!e||!Ji(t)?!1:(t=t.slice(2).replace(/Once$/,""),Xe(e,t[0].toLowerCase()+t.slice(1))||Xe(e,En(t))||Xe(e,t))}function zs(e){const{type:t,vnode:n,proxy:i,withProxy:r,propsOptions:[s],slots:o,attrs:a,emit:u,render:f,renderCache:l,props:m,data:p,setupState:c,ctx:g,inheritAttrs:x}=e,v=Vi(e);let D,w;try{if(n.shapeFlag&4){const E=r||i,L=E;D=Bt(f.call(L,E,l,m,c,p,g)),w=a}else{const E=t;D=Bt(E.length>1?E(m,{attrs:a,slots:o,emit:u}):E(m,null)),w=t.props?a:of(a)}}catch(E){Jn.length=0,rr(E,e,1),D=nt(bt)}let b=D;if(w&&x!==!1){const E=Object.keys(w),{shapeFlag:L}=b;E.length&&L&7&&(s&&E.some(Qr)&&(w=af(w,s)),b=cn(b,w,!1,!0))}return n.dirs&&(b=cn(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(n.dirs):n.dirs),n.transition&&si(b,n.transition),D=b,Vi(v),D}const of=e=>{let t;for(const n in e)(n==="class"||n==="style"||Ji(n))&&((t||(t={}))[n]=e[n]);return t},af=(e,t)=>{const n={};for(const i in e)(!Qr(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function lf(e,t,n){const{props:i,children:r,component:s}=e,{props:o,children:a,patchFlag:u}=t,f=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return i?Hs(i,o,f):!!o;if(u&8){const l=t.dynamicProps;for(let m=0;m<l.length;m++){const p=l[m];if(o[p]!==i[p]&&!lr(f,p))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?Hs(i,o,f):!0:!!o;return!1}function Hs(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(t[s]!==e[s]&&!lr(n,s))return!0}return!1}function uf({vnode:e,parent:t},n){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===e&&(i.el=e.el),i===e)(e=t.vnode).el=n,t=t.parent;else break}}const _a={},ba=()=>Object.create(_a),ya=e=>Object.getPrototypeOf(e)===_a;function ff(e,t,n,i=!1){const r={},s=ba();e.propsDefaults=Object.create(null),wa(e,t,r,s);for(const o in e.propsOptions[0])o in r||(r[o]=void 0);n?e.props=i?r:vu(r):e.type.props?e.props=r:e.props=s,e.attrs=s}function df(e,t,n,i){const{props:r,attrs:s,vnode:{patchFlag:o}}=e,a=Ze(r),[u]=e.propsOptions;let f=!1;if((i||o>0)&&!(o&16)){if(o&8){const l=e.vnode.dynamicProps;for(let m=0;m<l.length;m++){let p=l[m];if(lr(e.emitsOptions,p))continue;const c=t[p];if(u)if(Xe(s,p))c!==s[p]&&(s[p]=c,f=!0);else{const g=dn(p);r[g]=Fr(u,a,g,c,e,!1)}else c!==s[p]&&(s[p]=c,f=!0)}}}else{wa(e,t,r,s)&&(f=!0);let l;for(const m in a)(!t||!Xe(t,m)&&((l=En(m))===m||!Xe(t,l)))&&(u?n&&(n[m]!==void 0||n[l]!==void 0)&&(r[m]=Fr(u,a,m,void 0,e,!0)):delete r[m]);if(s!==a)for(const m in s)(!t||!Xe(t,m))&&(delete s[m],f=!0)}f&&Wt(e.attrs,"set","")}function wa(e,t,n,i){const[r,s]=e.propsOptions;let o=!1,a;if(t)for(let u in t){if(qn(u))continue;const f=t[u];let l;r&&Xe(r,l=dn(u))?!s||!s.includes(l)?n[l]=f:(a||(a={}))[l]=f:lr(e.emitsOptions,u)||(!(u in i)||f!==i[u])&&(i[u]=f,o=!0)}if(s){const u=Ze(n),f=a||et;for(let l=0;l<s.length;l++){const m=s[l];n[m]=Fr(r,u,m,f[m],e,!Xe(f,m))}}return o}function Fr(e,t,n,i,r,s){const o=e[n];if(o!=null){const a=Xe(o,"default");if(a&&i===void 0){const u=o.default;if(o.type!==Function&&!o.skipFactory&&ze(u)){const{propsDefaults:f}=r;if(n in f)i=f[n];else{const l=vi(r);i=f[n]=u.call(null,t),l()}}else i=u;r.ce&&r.ce._setProp(n,i)}o[0]&&(s&&!a?i=!1:o[1]&&(i===""||i===En(n))&&(i=!0))}return i}const cf=new WeakMap;function xa(e,t,n=!1){const i=n?cf:t.propsCache,r=i.get(e);if(r)return r;const s=e.props,o={},a=[];let u=!1;if(!ze(e)){const l=m=>{u=!0;const[p,c]=xa(m,t,!0);pt(o,p),c&&a.push(...c)};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}if(!s&&!u)return Je(e)&&i.set(e,An),An;if(Be(s))for(let l=0;l<s.length;l++){const m=dn(s[l]);Vs(m)&&(o[m]=et)}else if(s)for(const l in s){const m=dn(l);if(Vs(m)){const p=s[l],c=o[m]=Be(p)||ze(p)?{type:p}:pt({},p),g=c.type;let x=!1,v=!0;if(Be(g))for(let D=0;D<g.length;++D){const w=g[D],b=ze(w)&&w.name;if(b==="Boolean"){x=!0;break}else b==="String"&&(v=!1)}else x=ze(g)&&g.name==="Boolean";c[0]=x,c[1]=v,(x||Xe(c,"default"))&&a.push(m)}}const f=[o,a];return Je(e)&&i.set(e,f),f}function Vs(e){return e[0]!=="$"&&!qn(e)}const hs=e=>e==="_"||e==="_ctx"||e==="$stable",ps=e=>Be(e)?e.map(Bt):[Bt(e)],hf=(e,t,n)=>{if(t._n)return t;const i=sr((...r)=>ps(t(...r)),n);return i._c=!1,i},Sa=(e,t,n)=>{const i=e._ctx;for(const r in e){if(hs(r))continue;const s=e[r];if(ze(s))t[r]=hf(r,s,i);else if(s!=null){const o=ps(s);t[r]=()=>o}}},Ea=(e,t)=>{const n=ps(t);e.slots.default=()=>n},ka=(e,t,n)=>{for(const i in t)(n||!hs(i))&&(e[i]=t[i])},pf=(e,t,n)=>{const i=e.slots=ba();if(e.vnode.shapeFlag&32){const r=t._;r?(ka(i,t,n),n&&Do(i,"_",r,!0)):Sa(t,i)}else t&&Ea(e,t)},gf=(e,t,n)=>{const{vnode:i,slots:r}=e;let s=!0,o=et;if(i.shapeFlag&32){const a=t._;a?n&&a===1?s=!1:ka(r,t,n):(s=!t.$stable,Sa(t,r)),o=t}else t&&(Ea(e,t),o={default:1});if(s)for(const a in r)!hs(a)&&o[a]==null&&delete r[a]},vt=yf;function mf(e){return vf(e)}function vf(e,t){const n=tr();n.__VUE__=!0;const{insert:i,remove:r,patchProp:s,createElement:o,createText:a,createComment:u,setText:f,setElementText:l,parentNode:m,nextSibling:p,setScopeId:c=Nt,insertStaticContent:g}=e,x=(S,P,N,K=null,le=null,q=null,Q=void 0,ne=null,ie=!!P.dynamicChildren)=>{if(S===P)return;S&&!wn(S,P)&&(K=xe(S),z(S,le,q,!0),S=null),P.patchFlag===-2&&(ie=!1,P.dynamicChildren=null);const{type:de,ref:Ee,shapeFlag:be}=P;switch(de){case ur:v(S,P,N,K);break;case bt:D(S,P,N,K);break;case Mi:S==null&&w(P,N,K,Q);break;case ht:ae(S,P,N,K,le,q,Q,ne,ie);break;default:be&1?L(S,P,N,K,le,q,Q,ne,ie):be&6?re(S,P,N,K,le,q,Q,ne,ie):(be&64||be&128)&&de.process(S,P,N,K,le,q,Q,ne,ie,R)}Ee!=null&&le?Kn(Ee,S&&S.ref,q,P||S,!P):Ee==null&&S&&S.ref!=null&&Kn(S.ref,null,q,S,!0)},v=(S,P,N,K)=>{if(S==null)i(P.el=a(P.children),N,K);else{const le=P.el=S.el;P.children!==S.children&&f(le,P.children)}},D=(S,P,N,K)=>{S==null?i(P.el=u(P.children||""),N,K):P.el=S.el},w=(S,P,N,K)=>{[S.el,S.anchor]=g(S.children,P,N,K,S.el,S.anchor)},b=({el:S,anchor:P},N,K)=>{let le;for(;S&&S!==P;)le=p(S),i(S,N,K),S=le;i(P,N,K)},E=({el:S,anchor:P})=>{let N;for(;S&&S!==P;)N=p(S),r(S),S=N;r(P)},L=(S,P,N,K,le,q,Q,ne,ie)=>{if(P.type==="svg"?Q="svg":P.type==="math"&&(Q="mathml"),S==null)U(P,N,K,le,q,Q,ne,ie);else{const de=S.el&&S.el._isVueCE?S.el:null;try{de&&de._beginPatch(),V(S,P,le,q,Q,ne,ie)}finally{de&&de._endPatch()}}},U=(S,P,N,K,le,q,Q,ne)=>{let ie,de;const{props:Ee,shapeFlag:be,transition:Pe,dirs:Ie}=S;if(ie=S.el=o(S.type,q,Ee&&Ee.is,Ee),be&8?l(ie,S.children):be&16&&W(S.children,ie,null,K,le,xr(S,q),Q,ne),Ie&&mn(S,null,K,"created"),M(ie,S,S.scopeId,Q,K),Ee){for(const Ne in Ee)Ne!=="value"&&!qn(Ne)&&s(ie,Ne,null,Ee[Ne],q,K);"value"in Ee&&s(ie,"value",null,Ee.value,q),(de=Ee.onVnodeBeforeMount)&&Mt(de,K,S)}Ie&&mn(S,null,K,"beforeMount");const Me=_f(le,Pe);Me&&Pe.beforeEnter(ie),i(ie,P,N),((de=Ee&&Ee.onVnodeMounted)||Me||Ie)&&vt(()=>{de&&Mt(de,K,S),Me&&Pe.enter(ie),Ie&&mn(S,null,K,"mounted")},le)},M=(S,P,N,K,le)=>{if(N&&c(S,N),K)for(let q=0;q<K.length;q++)c(S,K[q]);if(le){let q=le.subTree;if(P===q||Aa(q.type)&&(q.ssContent===P||q.ssFallback===P)){const Q=le.vnode;M(S,Q,Q.scopeId,Q.slotScopeIds,le.parent)}}},W=(S,P,N,K,le,q,Q,ne,ie=0)=>{for(let de=ie;de<S.length;de++){const Ee=S[de]=ne?on(S[de]):Bt(S[de]);x(null,Ee,P,N,K,le,q,Q,ne)}},V=(S,P,N,K,le,q,Q)=>{const ne=P.el=S.el;let{patchFlag:ie,dynamicChildren:de,dirs:Ee}=P;ie|=S.patchFlag&16;const be=S.props||et,Pe=P.props||et;let Ie;if(N&&vn(N,!1),(Ie=Pe.onVnodeBeforeUpdate)&&Mt(Ie,N,P,S),Ee&&mn(P,S,N,"beforeUpdate"),N&&vn(N,!0),(be.innerHTML&&Pe.innerHTML==null||be.textContent&&Pe.textContent==null)&&l(ne,""),de?ue(S.dynamicChildren,de,ne,N,K,xr(P,le),q):Q||H(S,P,ne,null,N,K,xr(P,le),q,!1),ie>0){if(ie&16)we(ne,be,Pe,N,le);else if(ie&2&&be.class!==Pe.class&&s(ne,"class",null,Pe.class,le),ie&4&&s(ne,"style",be.style,Pe.style,le),ie&8){const Me=P.dynamicProps;for(let Ne=0;Ne<Me.length;Ne++){const Fe=Me[Ne],We=be[Fe],Ye=Pe[Fe];(Ye!==We||Fe==="value")&&s(ne,Fe,We,Ye,le,N)}}ie&1&&S.children!==P.children&&l(ne,P.children)}else!Q&&de==null&&we(ne,be,Pe,N,le);((Ie=Pe.onVnodeUpdated)||Ee)&&vt(()=>{Ie&&Mt(Ie,N,P,S),Ee&&mn(P,S,N,"updated")},K)},ue=(S,P,N,K,le,q,Q)=>{for(let ne=0;ne<P.length;ne++){const ie=S[ne],de=P[ne],Ee=ie.el&&(ie.type===ht||!wn(ie,de)||ie.shapeFlag&198)?m(ie.el):N;x(ie,de,Ee,null,K,le,q,Q,!0)}},we=(S,P,N,K,le)=>{if(P!==N){if(P!==et)for(const q in P)!qn(q)&&!(q in N)&&s(S,q,P[q],null,le,K);for(const q in N){if(qn(q))continue;const Q=N[q],ne=P[q];Q!==ne&&q!=="value"&&s(S,q,ne,Q,le,K)}"value"in N&&s(S,"value",P.value,N.value,le)}},ae=(S,P,N,K,le,q,Q,ne,ie)=>{const de=P.el=S?S.el:a(""),Ee=P.anchor=S?S.anchor:a("");let{patchFlag:be,dynamicChildren:Pe,slotScopeIds:Ie}=P;Ie&&(ne=ne?ne.concat(Ie):Ie),S==null?(i(de,N,K),i(Ee,N,K),W(P.children||[],N,Ee,le,q,Q,ne,ie)):be>0&&be&64&&Pe&&S.dynamicChildren&&S.dynamicChildren.length===Pe.length?(ue(S.dynamicChildren,Pe,N,le,q,Q,ne),(P.key!=null||le&&P===le.subTree)&&gs(S,P,!0)):H(S,P,N,Ee,le,q,Q,ne,ie)},re=(S,P,N,K,le,q,Q,ne,ie)=>{P.slotScopeIds=ne,S==null?P.shapeFlag&512?le.ctx.activate(P,N,K,Q,ie):Z(P,N,K,le,q,Q,ie):fe(S,P,ie)},Z=(S,P,N,K,le,q,Q)=>{const ne=S.component=Af(S,K,le);if(or(S)&&(ne.ctx.renderer=R),If(ne,!1,Q),ne.asyncDep){if(le&&le.registerDep(ne,$,Q),!S.el){const ie=ne.subTree=nt(bt);D(null,ie,P,N),S.placeholder=ie.el}}else $(ne,S,P,N,le,q,Q)},fe=(S,P,N)=>{const K=P.component=S.component;if(lf(S,P,N))if(K.asyncDep&&!K.asyncResolved){te(K,P,N);return}else K.next=P,K.update();else P.el=S.el,K.vnode=P},$=(S,P,N,K,le,q,Q)=>{const ne=()=>{if(S.isMounted){let{next:be,bu:Pe,u:Ie,parent:Me,vnode:Ne}=S;{const k=Ca(S);if(k){be&&(be.el=Ne.el,te(S,be,Q)),k.asyncDep.then(()=>{S.isUnmounted||ne()});return}}let Fe=be,We;vn(S,!1),be?(be.el=Ne.el,te(S,be,Q)):be=Ne,Pe&&Pi(Pe),(We=be.props&&be.props.onVnodeBeforeUpdate)&&Mt(We,Me,be,Ne),vn(S,!0);const Ye=zs(S),at=S.subTree;S.subTree=Ye,x(at,Ye,m(at.el),xe(at),S,le,q),be.el=Ye.el,Fe===null&&uf(S,Ye.el),Ie&&vt(Ie,le),(We=be.props&&be.props.onVnodeUpdated)&&vt(()=>Mt(We,Me,be,Ne),le)}else{let be;const{el:Pe,props:Ie}=P,{bm:Me,m:Ne,parent:Fe,root:We,type:Ye}=S,at=Yn(P);vn(S,!1),Me&&Pi(Me),!at&&(be=Ie&&Ie.onVnodeBeforeMount)&&Mt(be,Fe,P),vn(S,!0);{We.ce&&We.ce._def.shadowRoot!==!1&&We.ce._injectChildStyle(Ye);const k=S.subTree=zs(S);x(null,k,N,K,S,le,q),P.el=k.el}if(Ne&&vt(Ne,le),!at&&(be=Ie&&Ie.onVnodeMounted)){const k=P;vt(()=>Mt(be,Fe,k),le)}(P.shapeFlag&256||Fe&&Yn(Fe.vnode)&&Fe.vnode.shapeFlag&256)&&S.a&&vt(S.a,le),S.isMounted=!0,P=N=K=null}};S.scope.on();const ie=S.effect=new Mo(ne);S.scope.off();const de=S.update=ie.run.bind(ie),Ee=S.job=ie.runIfDirty.bind(ie);Ee.i=S,Ee.id=S.uid,ie.scheduler=()=>ds(Ee),vn(S,!0),de()},te=(S,P,N)=>{P.component=S;const K=S.vnode.props;S.vnode=P,S.next=null,df(S,P.props,K,N),gf(S,P.children,N),Xt(),Ps(S),Jt()},H=(S,P,N,K,le,q,Q,ne,ie=!1)=>{const de=S&&S.children,Ee=S?S.shapeFlag:0,be=P.children,{patchFlag:Pe,shapeFlag:Ie}=P;if(Pe>0){if(Pe&128){I(de,be,N,K,le,q,Q,ne,ie);return}else if(Pe&256){A(de,be,N,K,le,q,Q,ne,ie);return}}Ie&8?(Ee&16&&ye(de,le,q),be!==de&&l(N,be)):Ee&16?Ie&16?I(de,be,N,K,le,q,Q,ne,ie):ye(de,le,q,!0):(Ee&8&&l(N,""),Ie&16&&W(be,N,K,le,q,Q,ne,ie))},A=(S,P,N,K,le,q,Q,ne,ie)=>{S=S||An,P=P||An;const de=S.length,Ee=P.length,be=Math.min(de,Ee);let Pe;for(Pe=0;Pe<be;Pe++){const Ie=P[Pe]=ie?on(P[Pe]):Bt(P[Pe]);x(S[Pe],Ie,N,null,le,q,Q,ne,ie)}de>Ee?ye(S,le,q,!0,!1,be):W(P,N,K,le,q,Q,ne,ie,be)},I=(S,P,N,K,le,q,Q,ne,ie)=>{let de=0;const Ee=P.length;let be=S.length-1,Pe=Ee-1;for(;de<=be&&de<=Pe;){const Ie=S[de],Me=P[de]=ie?on(P[de]):Bt(P[de]);if(wn(Ie,Me))x(Ie,Me,N,null,le,q,Q,ne,ie);else break;de++}for(;de<=be&&de<=Pe;){const Ie=S[be],Me=P[Pe]=ie?on(P[Pe]):Bt(P[Pe]);if(wn(Ie,Me))x(Ie,Me,N,null,le,q,Q,ne,ie);else break;be--,Pe--}if(de>be){if(de<=Pe){const Ie=Pe+1,Me=Ie<Ee?P[Ie].el:K;for(;de<=Pe;)x(null,P[de]=ie?on(P[de]):Bt(P[de]),N,Me,le,q,Q,ne,ie),de++}}else if(de>Pe)for(;de<=be;)z(S[de],le,q,!0),de++;else{const Ie=de,Me=de,Ne=new Map;for(de=Me;de<=Pe;de++){const Se=P[de]=ie?on(P[de]):Bt(P[de]);Se.key!=null&&Ne.set(Se.key,de)}let Fe,We=0;const Ye=Pe-Me+1;let at=!1,k=0;const ge=new Array(Ye);for(de=0;de<Ye;de++)ge[de]=0;for(de=Ie;de<=be;de++){const Se=S[de];if(We>=Ye){z(Se,le,q,!0);continue}let B;if(Se.key!=null)B=Ne.get(Se.key);else for(Fe=Me;Fe<=Pe;Fe++)if(ge[Fe-Me]===0&&wn(Se,P[Fe])){B=Fe;break}B===void 0?z(Se,le,q,!0):(ge[B-Me]=de+1,B>=k?k=B:at=!0,x(Se,P[B],N,null,le,q,Q,ne,ie),We++)}const _e=at?bf(ge):An;for(Fe=_e.length-1,de=Ye-1;de>=0;de--){const Se=Me+de,B=P[Se],se=P[Se+1],_=Se+1<Ee?se.el||Ta(se):K;ge[de]===0?x(null,B,N,_,le,q,Q,ne,ie):at&&(Fe<0||de!==_e[Fe]?j(B,N,_,2):Fe--)}}},j=(S,P,N,K,le=null)=>{const{el:q,type:Q,transition:ne,children:ie,shapeFlag:de}=S;if(de&6){j(S.component.subTree,P,N,K);return}if(de&128){S.suspense.move(P,N,K);return}if(de&64){Q.move(S,P,N,R);return}if(Q===ht){i(q,P,N);for(let be=0;be<ie.length;be++)j(ie[be],P,N,K);i(S.anchor,P,N);return}if(Q===Mi){b(S,P,N);return}if(K!==2&&de&1&&ne)if(K===0)ne.beforeEnter(q),i(q,P,N),vt(()=>ne.enter(q),le);else{const{leave:be,delayLeave:Pe,afterLeave:Ie}=ne,Me=()=>{S.ctx.isUnmounted?r(q):i(q,P,N)},Ne=()=>{q._isLeaving&&q[qt](!0),be(q,()=>{Me(),Ie&&Ie()})};Pe?Pe(q,Me,Ne):Ne()}else i(q,P,N)},z=(S,P,N,K=!1,le=!1)=>{const{type:q,props:Q,ref:ne,children:ie,dynamicChildren:de,shapeFlag:Ee,patchFlag:be,dirs:Pe,cacheIndex:Ie}=S;if(be===-2&&(le=!1),ne!=null&&(Xt(),Kn(ne,null,N,S,!0),Jt()),Ie!=null&&(P.renderCache[Ie]=void 0),Ee&256){P.ctx.deactivate(S);return}const Me=Ee&1&&Pe,Ne=!Yn(S);let Fe;if(Ne&&(Fe=Q&&Q.onVnodeBeforeUnmount)&&Mt(Fe,P,S),Ee&6)ve(S.component,N,K);else{if(Ee&128){S.suspense.unmount(N,K);return}Me&&mn(S,null,P,"beforeUnmount"),Ee&64?S.type.remove(S,P,N,R,K):de&&!de.hasOnce&&(q!==ht||be>0&&be&64)?ye(de,P,N,!1,!0):(q===ht&&be&384||!le&&Ee&16)&&ye(ie,P,N),K&&Y(S)}(Ne&&(Fe=Q&&Q.onVnodeUnmounted)||Me)&&vt(()=>{Fe&&Mt(Fe,P,S),Me&&mn(S,null,P,"unmounted")},N)},Y=S=>{const{type:P,el:N,anchor:K,transition:le}=S;if(P===ht){he(N,K);return}if(P===Mi){E(S);return}const q=()=>{r(N),le&&!le.persisted&&le.afterLeave&&le.afterLeave()};if(S.shapeFlag&1&&le&&!le.persisted){const{leave:Q,delayLeave:ne}=le,ie=()=>Q(N,q);ne?ne(S.el,q,ie):ie()}else q()},he=(S,P)=>{let N;for(;S!==P;)N=p(S),r(S),S=N;r(P)},ve=(S,P,N)=>{const{bum:K,scope:le,job:q,subTree:Q,um:ne,m:ie,a:de}=S;$s(ie),$s(de),K&&Pi(K),le.stop(),q&&(q.flags|=8,z(Q,S,P,N)),ne&&vt(ne,P),vt(()=>{S.isUnmounted=!0},P)},ye=(S,P,N,K=!1,le=!1,q=0)=>{for(let Q=q;Q<S.length;Q++)z(S[Q],P,N,K,le)},xe=S=>{if(S.shapeFlag&6)return xe(S.component.subTree);if(S.shapeFlag&128)return S.suspense.next();const P=p(S.anchor||S.el),N=P&&P[na];return N?p(N):P};let ke=!1;const T=(S,P,N)=>{let K;S==null?P._vnode&&(z(P._vnode,null,null,!0),K=P._vnode.component):x(P._vnode||null,S,P,null,null,null,N),P._vnode=S,ke||(ke=!0,Ps(K),Xo(),ke=!1)},R={p:x,um:z,m:j,r:Y,mt:Z,mc:W,pc:H,pbc:ue,n:xe,o:e};return{render:T,hydrate:void 0,createApp:tf(T)}}function xr({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function vn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function _f(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function gs(e,t,n=!1){const i=e.children,r=t.children;if(Be(i)&&Be(r))for(let s=0;s<i.length;s++){const o=i[s];let a=r[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[s]=on(r[s]),a.el=o.el),!n&&a.patchFlag!==-2&&gs(o,a)),a.type===ur&&(a.patchFlag!==-1?a.el=o.el:a.__elIndex=s+(e.type===ht?1:0)),a.type===bt&&!a.el&&(a.el=o.el)}}function bf(e){const t=e.slice(),n=[0];let i,r,s,o,a;const u=e.length;for(i=0;i<u;i++){const f=e[i];if(f!==0){if(r=n[n.length-1],e[r]<f){t[i]=r,n.push(i);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,e[n[a]]<f?s=a+1:o=a;f<e[n[s]]&&(s>0&&(t[i]=n[s-1]),n[s]=i)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=t[o];return n}function Ca(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Ca(t)}function $s(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function Ta(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?Ta(t.subTree):null}const Aa=e=>e.__isSuspense;function yf(e,t){t&&t.pendingBranch?Be(e)?t.effects.push(...e):t.effects.push(e):Au(e)}const ht=Symbol.for("v-fgt"),ur=Symbol.for("v-txt"),bt=Symbol.for("v-cmt"),Mi=Symbol.for("v-stc"),Jn=[];let Ct=null;function Ge(e=!1){Jn.push(Ct=e?null:[])}function wf(){Jn.pop(),Ct=Jn[Jn.length-1]||null}let oi=1;function Wi(e,t=!1){oi+=e,e<0&&Ct&&t&&(Ct.hasOnce=!0)}function Ia(e){return e.dynamicChildren=oi>0?Ct||An:null,wf(),oi>0&&Ct&&Ct.push(e),e}function Ke(e,t,n,i,r,s){return Ia(h(e,t,n,i,r,s,!0))}function fr(e,t,n,i,r){return Ia(nt(e,t,n,i,r,!0))}function Gi(e){return e?e.__v_isVNode===!0:!1}function wn(e,t){return e.type===t.type&&e.key===t.key}const Da=({key:e})=>e??null,Ui=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?lt(e)||Ue(e)||ze(e)?{i:At,r:e,k:t,f:!!n}:e:null);function h(e,t=null,n=null,i=0,r=null,s=e===ht?0:1,o=!1,a=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Da(t),ref:t&&Ui(t),scopeId:Qo,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:At};return a?(ms(u,n),s&128&&e.normalize(u)):n&&(u.shapeFlag|=lt(n)?8:16),oi>0&&!o&&Ct&&(u.patchFlag>0||s&6)&&u.patchFlag!==32&&Ct.push(u),u}const nt=xf;function xf(e,t=null,n=null,i=0,r=null,s=!1){if((!e||e===Gu)&&(e=bt),Gi(e)){const a=cn(e,t,!0);return n&&ms(a,n),oi>0&&!s&&Ct&&(a.shapeFlag&6?Ct[Ct.indexOf(e)]=a:Ct.push(a)),a.patchFlag=-2,a}if(Lf(e)&&(e=e.__vccOpts),t){t=Sf(t);let{class:a,style:u}=t;a&&!lt(a)&&(t.class=fn(a)),Je(u)&&(us(u)&&!Be(u)&&(u=pt({},u)),t.style=ci(u))}const o=lt(e)?1:Aa(e)?128:ia(e)?64:Je(e)?4:ze(e)?2:0;return h(e,t,n,i,r,o,s,!0)}function Sf(e){return e?us(e)||ya(e)?pt({},e):e:null}function cn(e,t,n=!1,i=!1){const{props:r,ref:s,patchFlag:o,children:a,transition:u}=e,f=t?kf(r||{},t):r,l={__v_isVNode:!0,__v_skip:!0,type:e.type,props:f,key:f&&Da(f),ref:t&&t.ref?n&&s?Be(s)?s.concat(Ui(t)):[s,Ui(t)]:Ui(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ht?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:u,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&cn(e.ssContent),ssFallback:e.ssFallback&&cn(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return u&&i&&si(l,u.clone(l)),l}function He(e=" ",t=0){return nt(ur,null,e,t)}function Ef(e,t){const n=nt(Mi,null,e);return n.staticCount=t,n}function hn(e="",t=!1){return t?(Ge(),fr(bt,null,e)):nt(bt,null,e)}function Bt(e){return e==null||typeof e=="boolean"?nt(bt):Be(e)?nt(ht,null,e.slice()):Gi(e)?on(e):nt(ur,null,String(e))}function on(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:cn(e)}function ms(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(Be(t))n=16;else if(typeof t=="object")if(i&65){const r=t.default;r&&(r._c&&(r._d=!1),ms(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!ya(t)?t._ctx=At:r===3&&At&&(At.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ze(t)?(t={default:t,_ctx:At},n=32):(t=String(t),i&64?(n=16,t=[He(t)]):n=8);e.children=t,e.shapeFlag|=n}function kf(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const r in i)if(r==="class")t.class!==i.class&&(t.class=fn([t.class,i.class]));else if(r==="style")t.style=ci([t.style,i.style]);else if(Ji(r)){const s=t[r],o=i[r];o&&s!==o&&!(Be(s)&&s.includes(o))&&(t[r]=s?[].concat(s,o):o)}else r!==""&&(t[r]=i[r])}return t}function Mt(e,t,n,i=null){Lt(e,t,7,[n,i])}const Cf=ma();let Tf=0;function Af(e,t,n){const i=e.type,r=(t?t.appContext:e.appContext)||Cf,s={uid:Tf++,vnode:e,type:i,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Xl(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:xa(i,r),emitsOptions:va(i,r),emit:null,emitted:null,propsDefaults:et,inheritAttrs:i.inheritAttrs,ctx:et,data:et,props:et,attrs:et,slots:et,refs:et,setupState:et,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=rf.bind(null,s),e.ce&&e.ce(s),s}let yt=null;const Pa=()=>yt||At;let Zi,jr;{const e=tr(),t=(n,i)=>{let r;return(r=e[n])||(r=e[n]=[]),r.push(i),s=>{r.length>1?r.forEach(o=>o(s)):r[0](s)}};Zi=t("__VUE_INSTANCE_SETTERS__",n=>yt=n),jr=t("__VUE_SSR_SETTERS__",n=>ai=n)}const vi=e=>{const t=yt;return Zi(e),e.scope.on(),()=>{e.scope.off(),Zi(t)}},qs=()=>{yt&&yt.scope.off(),Zi(null)};function Ra(e){return e.vnode.shapeFlag&4}let ai=!1;function If(e,t=!1,n=!1){t&&jr(t);const{props:i,children:r}=e.vnode,s=Ra(e);ff(e,i,s,t),pf(e,r,n||t);const o=s?Df(e,t):void 0;return t&&jr(!1),o}function Df(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Zu);const{setup:i}=n;if(i){Xt();const r=e.setupContext=i.length>1?Rf(e):null,s=vi(e),o=pi(i,e,0,[e.props,r]),a=Co(o);if(Jt(),s(),(a||e.sp)&&!Yn(e)&&da(e),a){if(o.then(qs,qs),t)return o.then(u=>{Ws(e,u)}).catch(u=>{rr(u,e,0)});e.asyncDep=o}else Ws(e,o)}else La(e)}function Ws(e,t,n){ze(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Je(t)&&(e.setupState=Zo(t)),La(e)}function La(e,t,n){const i=e.type;e.render||(e.render=i.render||Nt);{const r=vi(e);Xt();try{Ku(e)}finally{Jt(),r()}}}const Pf={get(e,t){return gt(e,"get",""),e[t]}};function Rf(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Pf),slots:e.slots,emit:e.emit,expose:t}}function dr(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Zo(_u(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Xn)return Xn[n](e)},has(t,n){return n in t||n in Xn}})):e.proxy}function Lf(e){return ze(e)&&"__vccOpts"in e}const Te=(e,t)=>Su(e,t,ai);function Mf(e,t,n){try{Wi(-1);const i=arguments.length;return i===2?Je(t)&&!Be(t)?Gi(t)?nt(e,null,[t]):nt(e,t):nt(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&Gi(n)&&(n=[n]),nt(e,t,n))}finally{Wi(1)}}const Uf="3.5.27";let zr;const Gs=typeof window<"u"&&window.trustedTypes;if(Gs)try{zr=Gs.createPolicy("vue",{createHTML:e=>e})}catch{}const Ma=zr?e=>zr.createHTML(e):e=>e,Of="http://www.w3.org/2000/svg",Bf="http://www.w3.org/1998/Math/MathML",$t=typeof document<"u"?document:null,Zs=$t&&$t.createElement("template"),Nf={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const r=t==="svg"?$t.createElementNS(Of,e):t==="mathml"?$t.createElementNS(Bf,e):n?$t.createElement(e,{is:n}):$t.createElement(e);return e==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:e=>$t.createTextNode(e),createComment:e=>$t.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>$t.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,r,s){const o=n?n.previousSibling:t.lastChild;if(r&&(r===s||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===s||!(r=r.nextSibling)););else{Zs.innerHTML=Ma(i==="svg"?`<svg>${e}</svg>`:i==="mathml"?`<math>${e}</math>`:e);const a=Zs.content;if(i==="svg"||i==="mathml"){const u=a.firstChild;for(;u.firstChild;)a.appendChild(u.firstChild);a.removeChild(u)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},nn="transition",Fn="animation",li=Symbol("_vtc"),Ua={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Ff=pt({},oa,Ua),jf=e=>(e.displayName="Transition",e.props=Ff,e),vs=jf((e,{slots:t})=>Mf(Ou,zf(e),t)),_n=(e,t=[])=>{Be(e)?e.forEach(n=>n(...t)):e&&e(...t)},Ks=e=>e?Be(e)?e.some(t=>t.length>1):e.length>1:!1;function zf(e){const t={};for(const ae in e)ae in Ua||(t[ae]=e[ae]);if(e.css===!1)return t;const{name:n="v",type:i,duration:r,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:u=s,appearActiveClass:f=o,appearToClass:l=a,leaveFromClass:m=`${n}-leave-from`,leaveActiveClass:p=`${n}-leave-active`,leaveToClass:c=`${n}-leave-to`}=e,g=Hf(r),x=g&&g[0],v=g&&g[1],{onBeforeEnter:D,onEnter:w,onEnterCancelled:b,onLeave:E,onLeaveCancelled:L,onBeforeAppear:U=D,onAppear:M=w,onAppearCancelled:W=b}=t,V=(ae,re,Z,fe)=>{ae._enterCancelled=fe,bn(ae,re?l:a),bn(ae,re?f:o),Z&&Z()},ue=(ae,re)=>{ae._isLeaving=!1,bn(ae,m),bn(ae,c),bn(ae,p),re&&re()},we=ae=>(re,Z)=>{const fe=ae?M:w,$=()=>V(re,ae,Z);_n(fe,[re,$]),Ys(()=>{bn(re,ae?u:s),Vt(re,ae?l:a),Ks(fe)||Xs(re,i,x,$)})};return pt(t,{onBeforeEnter(ae){_n(D,[ae]),Vt(ae,s),Vt(ae,o)},onBeforeAppear(ae){_n(U,[ae]),Vt(ae,u),Vt(ae,f)},onEnter:we(!1),onAppear:we(!0),onLeave(ae,re){ae._isLeaving=!0;const Z=()=>ue(ae,re);Vt(ae,m),ae._enterCancelled?(Vt(ae,p),eo(ae)):(eo(ae),Vt(ae,p)),Ys(()=>{ae._isLeaving&&(bn(ae,m),Vt(ae,c),Ks(E)||Xs(ae,i,v,Z))}),_n(E,[ae,Z])},onEnterCancelled(ae){V(ae,!1,void 0,!0),_n(b,[ae])},onAppearCancelled(ae){V(ae,!0,void 0,!0),_n(W,[ae])},onLeaveCancelled(ae){ue(ae),_n(L,[ae])}})}function Hf(e){if(e==null)return null;if(Je(e))return[Sr(e.enter),Sr(e.leave)];{const t=Sr(e);return[t,t]}}function Sr(e){return Vl(e)}function Vt(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[li]||(e[li]=new Set)).add(t)}function bn(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.remove(i));const n=e[li];n&&(n.delete(t),n.size||(e[li]=void 0))}function Ys(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Vf=0;function Xs(e,t,n,i){const r=e._endId=++Vf,s=()=>{r===e._endId&&i()};if(n!=null)return setTimeout(s,n);const{type:o,timeout:a,propCount:u}=$f(e,t);if(!o)return i();const f=o+"end";let l=0;const m=()=>{e.removeEventListener(f,p),s()},p=c=>{c.target===e&&++l>=u&&m()};setTimeout(()=>{l<u&&m()},a+1),e.addEventListener(f,p)}function $f(e,t){const n=window.getComputedStyle(e),i=g=>(n[g]||"").split(", "),r=i(`${nn}Delay`),s=i(`${nn}Duration`),o=Js(r,s),a=i(`${Fn}Delay`),u=i(`${Fn}Duration`),f=Js(a,u);let l=null,m=0,p=0;t===nn?o>0&&(l=nn,m=o,p=s.length):t===Fn?f>0&&(l=Fn,m=f,p=u.length):(m=Math.max(o,f),l=m>0?o>f?nn:Fn:null,p=l?l===nn?s.length:u.length:0);const c=l===nn&&/\b(?:transform|all)(?:,|$)/.test(i(`${nn}Property`).toString());return{type:l,timeout:m,propCount:p,hasTransform:c}}function Js(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,i)=>Qs(n)+Qs(e[i])))}function Qs(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function eo(e){return(e?e.ownerDocument:document).body.offsetHeight}function qf(e,t,n){const i=e[li];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Ki=Symbol("_vod"),Oa=Symbol("_vsh"),Oi={name:"show",beforeMount(e,{value:t},{transition:n}){e[Ki]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):jn(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:i}){!t!=!n&&(i?t?(i.beforeEnter(e),jn(e,!0),i.enter(e)):i.leave(e,()=>{jn(e,!1)}):jn(e,t))},beforeUnmount(e,{value:t}){jn(e,t)}};function jn(e,t){e.style.display=t?e[Ki]:"none",e[Oa]=!t}const Wf=Symbol(""),Gf=/(?:^|;)\s*display\s*:/;function Zf(e,t,n){const i=e.style,r=lt(n);let s=!1;if(n&&!r){if(t)if(lt(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Bi(i,a,"")}else for(const o in t)n[o]==null&&Bi(i,o,"");for(const o in n)o==="display"&&(s=!0),Bi(i,o,n[o])}else if(r){if(t!==n){const o=i[Wf];o&&(n+=";"+o),i.cssText=n,s=Gf.test(n)}}else t&&e.removeAttribute("style");Ki in e&&(e[Ki]=s?i.display:"",e[Oa]&&(i.display="none"))}const to=/\s*!important$/;function Bi(e,t,n){if(Be(n))n.forEach(i=>Bi(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=Kf(e,t);to.test(n)?e.setProperty(En(i),n.replace(to,""),"important"):e[i]=n}}const no=["Webkit","Moz","ms"],Er={};function Kf(e,t){const n=Er[t];if(n)return n;let i=dn(t);if(i!=="filter"&&i in e)return Er[t]=i;i=Io(i);for(let r=0;r<no.length;r++){const s=no[r]+i;if(s in e)return Er[t]=s}return t}const io="http://www.w3.org/1999/xlink";function ro(e,t,n,i,r,s=Kl(t)){i&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(io,t.slice(6,t.length)):e.setAttributeNS(io,t,n):n==null||s&&!Po(n)?e.removeAttribute(t):e.setAttribute(t,s?"":Ft(n)?String(n):n)}function so(e,t,n,i,r){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Ma(n):n);return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?e.getAttribute("value")||"":e.value,u=n==null?e.type==="checkbox"?"on":"":String(n);(a!==u||!("_value"in e))&&(e.value=u),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=Po(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(r||t)}function an(e,t,n,i){e.addEventListener(t,n,i)}function Yf(e,t,n,i){e.removeEventListener(t,n,i)}const oo=Symbol("_vei");function Xf(e,t,n,i,r=null){const s=e[oo]||(e[oo]={}),o=s[t];if(i&&o)o.value=i;else{const[a,u]=Jf(t);if(i){const f=s[t]=td(i,r);an(e,a,f,u)}else o&&(Yf(e,a,o,u),s[t]=void 0)}}const ao=/(?:Once|Passive|Capture)$/;function Jf(e){let t;if(ao.test(e)){t={};let i;for(;i=e.match(ao);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):En(e.slice(2)),t]}let kr=0;const Qf=Promise.resolve(),ed=()=>kr||(Qf.then(()=>kr=0),kr=Date.now());function td(e,t){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;Lt(nd(i,n.value),t,5,[i])};return n.value=e,n.attached=ed(),n}function nd(e,t){if(Be(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>r=>!r._stopped&&i&&i(r))}else return t}const lo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,id=(e,t,n,i,r,s)=>{const o=r==="svg";t==="class"?qf(e,i,o):t==="style"?Zf(e,n,i):Ji(t)?Qr(t)||Xf(e,t,n,i,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):rd(e,t,i,o))?(so(e,t,i),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&ro(e,t,i,o,s,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!lt(i))?so(e,dn(t),i,s,t):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),ro(e,t,i,o))};function rd(e,t,n,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in e&&lo(t)&&ze(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return lo(t)&&lt(n)?!1:t in e}const Ln=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Be(t)?n=>Pi(t,n):t};function sd(e){e.target.composing=!0}function uo(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Kt=Symbol("_assign");function fo(e,t,n){return t&&(e=e.trim()),n&&(e=er(e)),e}const qe={created(e,{modifiers:{lazy:t,trim:n,number:i}},r){e[Kt]=Ln(r);const s=i||r.props&&r.props.type==="number";an(e,t?"change":"input",o=>{o.target.composing||e[Kt](fo(e.value,n,s))}),(n||s)&&an(e,"change",()=>{e.value=fo(e.value,n,s)}),t||(an(e,"compositionstart",sd),an(e,"compositionend",uo),an(e,"change",uo))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:i,trim:r,number:s}},o){if(e[Kt]=Ln(o),e.composing)return;const a=(s||e.type==="number")&&!/^0\d/.test(e.value)?er(e.value):e.value,u=t??"";a!==u&&(document.activeElement===e&&e.type!=="range"&&(i&&t===n||r&&e.value.trim()===u)||(e.value=u))}},Re={deep:!0,created(e,t,n){e[Kt]=Ln(n),an(e,"change",()=>{const i=e._modelValue,r=ui(e),s=e.checked,o=e[Kt];if(Be(i)){const a=ns(i,r),u=a!==-1;if(s&&!u)o(i.concat(r));else if(!s&&u){const f=[...i];f.splice(a,1),o(f)}}else if(Un(i)){const a=new Set(i);s?a.add(r):a.delete(r),o(a)}else o(Ba(e,s))})},mounted:co,beforeUpdate(e,t,n){e[Kt]=Ln(n),co(e,t,n)}};function co(e,{value:t,oldValue:n},i){e._modelValue=t;let r;if(Be(t))r=ns(t,i.props.value)>-1;else if(Un(t))r=t.has(i.props.value);else{if(t===n)return;r=hi(t,Ba(e,!0))}e.checked!==r&&(e.checked=r)}const kt={deep:!0,created(e,{value:t,modifiers:{number:n}},i){const r=Un(t);an(e,"change",()=>{const s=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?er(ui(o)):ui(o));e[Kt](e.multiple?r?new Set(s):s:s[0]),e._assigning=!0,fs(()=>{e._assigning=!1})}),e[Kt]=Ln(i)},mounted(e,{value:t}){ho(e,t)},beforeUpdate(e,t,n){e[Kt]=Ln(n)},updated(e,{value:t}){e._assigning||ho(e,t)}};function ho(e,t){const n=e.multiple,i=Be(t);if(!(n&&!i&&!Un(t))){for(let r=0,s=e.options.length;r<s;r++){const o=e.options[r],a=ui(o);if(n)if(i){const u=typeof a;u==="string"||u==="number"?o.selected=t.some(f=>String(f)===String(a)):o.selected=ns(t,a)>-1}else o.selected=t.has(a);else if(hi(ui(o),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function ui(e){return"_value"in e?e._value:e.value}function Ba(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const od=["ctrl","shift","alt","meta"],ad={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>od.some(n=>e[`${n}Key`]&&!t.includes(n))},Cr=(e,t)=>{const n=e._withMods||(e._withMods={}),i=t.join(".");return n[i]||(n[i]=((r,...s)=>{for(let o=0;o<t.length;o++){const a=ad[t[o]];if(a&&a(r,t))return}return e(r,...s)}))},ld=pt({patchProp:id},Nf);let po;function ud(){return po||(po=mf(ld))}const fd=((...e)=>{const t=ud().createApp(...e),{mount:n}=t;return t.mount=i=>{const r=cd(i);if(!r)return;const s=t._component;!ze(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,dd(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t});function dd(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function cd(e){return lt(e)?document.querySelector(e):e}var hd={},pd=Object.create,Na=Object.defineProperty,gd=Object.getOwnPropertyDescriptor,Fa=Object.getOwnPropertyNames,md=Object.getPrototypeOf,vd=Object.prototype.hasOwnProperty,Et=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,n)=>(typeof require<"u"?require:t)[n]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),Ae=(e,t)=>function(){return t||(0,e[Fa(e)[0]])((t={exports:{}}).exports,t),t.exports},_d=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Fa(t))!vd.call(e,r)&&r!==n&&Na(e,r,{get:()=>t[r],enumerable:!(i=gd(t,r))||i.enumerable});return e},_s=(e,t,n)=>(n=e!=null?pd(md(e)):{},_d(!e||!e.__esModule?Na(n,"default",{value:e,enumerable:!0}):n,e)),cr=Ae({"node_modules/process-nextick-args/index.js"(e,t){typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?t.exports={nextTick:n}:t.exports=process;function n(i,r,s,o){if(typeof i!="function")throw new TypeError('"callback" argument must be a function');var a=arguments.length,u,f;switch(a){case 0:case 1:return process.nextTick(i);case 2:return process.nextTick(function(){i.call(null,r)});case 3:return process.nextTick(function(){i.call(null,r,s)});case 4:return process.nextTick(function(){i.call(null,r,s,o)});default:for(u=new Array(a-1),f=0;f<u.length;)u[f++]=arguments[f];return process.nextTick(function(){i.apply(null,u)})}}}}),bd=Ae({"node_modules/isarray/index.js"(e,t){var n={}.toString;t.exports=Array.isArray||function(i){return n.call(i)=="[object Array]"}}}),ja=Ae({"node_modules/readable-stream/lib/internal/streams/stream.js"(e,t){t.exports=Et("stream")}}),hr=Ae({"node_modules/safe-buffer/index.js"(e,t){var n=Et("buffer"),i=n.Buffer;function r(o,a){for(var u in o)a[u]=o[u]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(r(n,e),e.Buffer=s);function s(o,a,u){return i(o,a,u)}r(i,s),s.from=function(o,a,u){if(typeof o=="number")throw new TypeError("Argument must not be a number");return i(o,a,u)},s.alloc=function(o,a,u){if(typeof o!="number")throw new TypeError("Argument must be a number");var f=i(o);return a!==void 0?typeof u=="string"?f.fill(a,u):f.fill(a):f.fill(0),f},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return i(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}}}),_i=Ae({"node_modules/core-util-is/lib/util.js"(e){function t(v){return Array.isArray?Array.isArray(v):x(v)==="[object Array]"}e.isArray=t;function n(v){return typeof v=="boolean"}e.isBoolean=n;function i(v){return v===null}e.isNull=i;function r(v){return v==null}e.isNullOrUndefined=r;function s(v){return typeof v=="number"}e.isNumber=s;function o(v){return typeof v=="string"}e.isString=o;function a(v){return typeof v=="symbol"}e.isSymbol=a;function u(v){return v===void 0}e.isUndefined=u;function f(v){return x(v)==="[object RegExp]"}e.isRegExp=f;function l(v){return typeof v=="object"&&v!==null}e.isObject=l;function m(v){return x(v)==="[object Date]"}e.isDate=m;function p(v){return x(v)==="[object Error]"||v instanceof Error}e.isError=p;function c(v){return typeof v=="function"}e.isFunction=c;function g(v){return v===null||typeof v=="boolean"||typeof v=="number"||typeof v=="string"||typeof v=="symbol"||typeof v>"u"}e.isPrimitive=g,e.isBuffer=Et("buffer").Buffer.isBuffer;function x(v){return Object.prototype.toString.call(v)}}}),yd=Ae({"node_modules/inherits/inherits_browser.js"(e,t){typeof Object.create=="function"?t.exports=function(i,r){r&&(i.super_=r,i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(i,r){if(r){i.super_=r;var s=function(){};s.prototype=r.prototype,i.prototype=new s,i.prototype.constructor=i}}}}),bi=Ae({"node_modules/inherits/inherits.js"(e,t){try{if(n=Et("util"),typeof n.inherits!="function")throw"";t.exports=n.inherits}catch{t.exports=yd()}var n}}),wd=Ae({"node_modules/readable-stream/lib/internal/streams/BufferList.js"(e,t){function n(o,a){if(!(o instanceof a))throw new TypeError("Cannot call a class as a function")}var i=hr().Buffer,r=Et("util");function s(o,a,u){o.copy(a,u)}t.exports=(function(){function o(){n(this,o),this.head=null,this.tail=null,this.length=0}return o.prototype.push=function(u){var f={data:u,next:null};this.length>0?this.tail.next=f:this.head=f,this.tail=f,++this.length},o.prototype.unshift=function(u){var f={data:u,next:this.head};this.length===0&&(this.tail=f),this.head=f,++this.length},o.prototype.shift=function(){if(this.length!==0){var u=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,u}},o.prototype.clear=function(){this.head=this.tail=null,this.length=0},o.prototype.join=function(u){if(this.length===0)return"";for(var f=this.head,l=""+f.data;f=f.next;)l+=u+f.data;return l},o.prototype.concat=function(u){if(this.length===0)return i.alloc(0);for(var f=i.allocUnsafe(u>>>0),l=this.head,m=0;l;)s(l.data,f,m),m+=l.data.length,l=l.next;return f},o})(),r&&r.inspect&&r.inspect.custom&&(t.exports.prototype[r.inspect.custom]=function(){var o=r.inspect({length:this.length});return this.constructor.name+" "+o})}}),za=Ae({"node_modules/readable-stream/lib/internal/streams/destroy.js"(e,t){var n=cr();function i(o,a){var u=this,f=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return f||l?(a?a(o):o&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,n.nextTick(s,this,o)):n.nextTick(s,this,o)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(o||null,function(m){!a&&m?u._writableState?u._writableState.errorEmitted||(u._writableState.errorEmitted=!0,n.nextTick(s,u,m)):n.nextTick(s,u,m):a&&a(m)}),this)}function r(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function s(o,a){o.emit("error",a)}t.exports={destroy:i,undestroy:r}}}),xd=Ae({"node_modules/util-deprecate/node.js"(e,t){t.exports=Et("util").deprecate}}),Ha=Ae({"node_modules/readable-stream/lib/_stream_writable.js"(e,t){var n=cr();t.exports=D;function i(A){var I=this;this.next=null,this.entry=null,this.finish=function(){H(I,A)}}var r=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:n.nextTick,s;D.WritableState=x;var o=Object.create(_i());o.inherits=bi();var a={deprecate:xd()},u=ja(),f=hr().Buffer,l=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function m(A){return f.from(A)}function p(A){return f.isBuffer(A)||A instanceof l}var c=za();o.inherits(D,u);function g(){}function x(A,I){s=s||Mn(),A=A||{};var j=I instanceof s;this.objectMode=!!A.objectMode,j&&(this.objectMode=this.objectMode||!!A.writableObjectMode);var z=A.highWaterMark,Y=A.writableHighWaterMark,he=this.objectMode?16:16*1024;z||z===0?this.highWaterMark=z:j&&(Y||Y===0)?this.highWaterMark=Y:this.highWaterMark=he,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ve=A.decodeStrings===!1;this.decodeStrings=!ve,this.defaultEncoding=A.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ye){V(I,ye)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}x.prototype.getBuffer=function(){for(var I=this.bufferedRequest,j=[];I;)j.push(I),I=I.next;return j},(function(){try{Object.defineProperty(x.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var v;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(v=Function.prototype[Symbol.hasInstance],Object.defineProperty(D,Symbol.hasInstance,{value:function(A){return v.call(this,A)?!0:this!==D?!1:A&&A._writableState instanceof x}})):v=function(A){return A instanceof this};function D(A){if(s=s||Mn(),!v.call(D,this)&&!(this instanceof s))return new D(A);this._writableState=new x(A,this),this.writable=!0,A&&(typeof A.write=="function"&&(this._write=A.write),typeof A.writev=="function"&&(this._writev=A.writev),typeof A.destroy=="function"&&(this._destroy=A.destroy),typeof A.final=="function"&&(this._final=A.final)),u.call(this)}D.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function w(A,I){var j=new Error("write after end");A.emit("error",j),n.nextTick(I,j)}function b(A,I,j,z){var Y=!0,he=!1;return j===null?he=new TypeError("May not write null values to stream"):typeof j!="string"&&j!==void 0&&!I.objectMode&&(he=new TypeError("Invalid non-string/buffer chunk")),he&&(A.emit("error",he),n.nextTick(z,he),Y=!1),Y}D.prototype.write=function(A,I,j){var z=this._writableState,Y=!1,he=!z.objectMode&&p(A);return he&&!f.isBuffer(A)&&(A=m(A)),typeof I=="function"&&(j=I,I=null),he?I="buffer":I||(I=z.defaultEncoding),typeof j!="function"&&(j=g),z.ended?w(this,j):(he||b(this,z,A,j))&&(z.pendingcb++,Y=L(this,z,he,A,I,j)),Y},D.prototype.cork=function(){var A=this._writableState;A.corked++},D.prototype.uncork=function(){var A=this._writableState;A.corked&&(A.corked--,!A.writing&&!A.corked&&!A.bufferProcessing&&A.bufferedRequest&&ae(this,A))},D.prototype.setDefaultEncoding=function(I){if(typeof I=="string"&&(I=I.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((I+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+I);return this._writableState.defaultEncoding=I,this};function E(A,I,j){return!A.objectMode&&A.decodeStrings!==!1&&typeof I=="string"&&(I=f.from(I,j)),I}Object.defineProperty(D.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function L(A,I,j,z,Y,he){if(!j){var ve=E(I,z,Y);z!==ve&&(j=!0,Y="buffer",z=ve)}var ye=I.objectMode?1:z.length;I.length+=ye;var xe=I.length<I.highWaterMark;if(xe||(I.needDrain=!0),I.writing||I.corked){var ke=I.lastBufferedRequest;I.lastBufferedRequest={chunk:z,encoding:Y,isBuf:j,callback:he,next:null},ke?ke.next=I.lastBufferedRequest:I.bufferedRequest=I.lastBufferedRequest,I.bufferedRequestCount+=1}else U(A,I,!1,ye,z,Y,he);return xe}function U(A,I,j,z,Y,he,ve){I.writelen=z,I.writecb=ve,I.writing=!0,I.sync=!0,j?A._writev(Y,I.onwrite):A._write(Y,he,I.onwrite),I.sync=!1}function M(A,I,j,z,Y){--I.pendingcb,j?(n.nextTick(Y,z),n.nextTick($,A,I),A._writableState.errorEmitted=!0,A.emit("error",z)):(Y(z),A._writableState.errorEmitted=!0,A.emit("error",z),$(A,I))}function W(A){A.writing=!1,A.writecb=null,A.length-=A.writelen,A.writelen=0}function V(A,I){var j=A._writableState,z=j.sync,Y=j.writecb;if(W(j),I)M(A,j,z,I,Y);else{var he=re(j);!he&&!j.corked&&!j.bufferProcessing&&j.bufferedRequest&&ae(A,j),z?r(ue,A,j,he,Y):ue(A,j,he,Y)}}function ue(A,I,j,z){j||we(A,I),I.pendingcb--,z(),$(A,I)}function we(A,I){I.length===0&&I.needDrain&&(I.needDrain=!1,A.emit("drain"))}function ae(A,I){I.bufferProcessing=!0;var j=I.bufferedRequest;if(A._writev&&j&&j.next){var z=I.bufferedRequestCount,Y=new Array(z),he=I.corkedRequestsFree;he.entry=j;for(var ve=0,ye=!0;j;)Y[ve]=j,j.isBuf||(ye=!1),j=j.next,ve+=1;Y.allBuffers=ye,U(A,I,!0,I.length,Y,"",he.finish),I.pendingcb++,I.lastBufferedRequest=null,he.next?(I.corkedRequestsFree=he.next,he.next=null):I.corkedRequestsFree=new i(I),I.bufferedRequestCount=0}else{for(;j;){var xe=j.chunk,ke=j.encoding,T=j.callback,R=I.objectMode?1:xe.length;if(U(A,I,!1,R,xe,ke,T),j=j.next,I.bufferedRequestCount--,I.writing)break}j===null&&(I.lastBufferedRequest=null)}I.bufferedRequest=j,I.bufferProcessing=!1}D.prototype._write=function(A,I,j){j(new Error("_write() is not implemented"))},D.prototype._writev=null,D.prototype.end=function(A,I,j){var z=this._writableState;typeof A=="function"?(j=A,A=null,I=null):typeof I=="function"&&(j=I,I=null),A!=null&&this.write(A,I),z.corked&&(z.corked=1,this.uncork()),z.ending||te(this,z,j)};function re(A){return A.ending&&A.length===0&&A.bufferedRequest===null&&!A.finished&&!A.writing}function Z(A,I){A._final(function(j){I.pendingcb--,j&&A.emit("error",j),I.prefinished=!0,A.emit("prefinish"),$(A,I)})}function fe(A,I){!I.prefinished&&!I.finalCalled&&(typeof A._final=="function"?(I.pendingcb++,I.finalCalled=!0,n.nextTick(Z,A,I)):(I.prefinished=!0,A.emit("prefinish")))}function $(A,I){var j=re(I);return j&&(fe(A,I),I.pendingcb===0&&(I.finished=!0,A.emit("finish"))),j}function te(A,I,j){I.ending=!0,$(A,I),j&&(I.finished?n.nextTick(j):A.once("finish",j)),I.ended=!0,A.writable=!1}function H(A,I,j){var z=A.entry;for(A.entry=null;z;){var Y=z.callback;I.pendingcb--,Y(j),z=z.next}I.corkedRequestsFree.next=A}Object.defineProperty(D.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(A){this._writableState&&(this._writableState.destroyed=A)}}),D.prototype.destroy=c.destroy,D.prototype._undestroy=c.undestroy,D.prototype._destroy=function(A,I){this.end(),I(A)}}}),Mn=Ae({"node_modules/readable-stream/lib/_stream_duplex.js"(e,t){var n=cr(),i=Object.keys||function(c){var g=[];for(var x in c)g.push(x);return g};t.exports=l;var r=Object.create(_i());r.inherits=bi();var s=Va(),o=Ha();for(r.inherits(l,s),a=i(o.prototype),f=0;f<a.length;f++)u=a[f],l.prototype[u]||(l.prototype[u]=o.prototype[u]);var a,u,f;function l(c){if(!(this instanceof l))return new l(c);s.call(this,c),o.call(this,c),c&&c.readable===!1&&(this.readable=!1),c&&c.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,c&&c.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",m)}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function m(){this.allowHalfOpen||this._writableState.ended||n.nextTick(p,this)}function p(c){c.end()}Object.defineProperty(l.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(c){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=c,this._writableState.destroyed=c)}}),l.prototype._destroy=function(c,g){this.push(null),this.end(),n.nextTick(g,c)}}}),go=Ae({"node_modules/string_decoder/lib/string_decoder.js"(e){var t=hr().Buffer,n=t.isEncoding||function(w){switch(w=""+w,w&&w.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(w){if(!w)return"utf8";for(var b;;)switch(w){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return w;default:if(b)return;w=(""+w).toLowerCase(),b=!0}}function r(w){var b=i(w);if(typeof b!="string"&&(t.isEncoding===n||!n(w)))throw new Error("Unknown encoding: "+w);return b||w}e.StringDecoder=s;function s(w){this.encoding=r(w);var b;switch(this.encoding){case"utf16le":this.text=p,this.end=c,b=4;break;case"utf8":this.fillLast=f,b=4;break;case"base64":this.text=g,this.end=x,b=3;break;default:this.write=v,this.end=D;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(b)}s.prototype.write=function(w){if(w.length===0)return"";var b,E;if(this.lastNeed){if(b=this.fillLast(w),b===void 0)return"";E=this.lastNeed,this.lastNeed=0}else E=0;return E<w.length?b?b+this.text(w,E):this.text(w,E):b||""},s.prototype.end=m,s.prototype.text=l,s.prototype.fillLast=function(w){if(this.lastNeed<=w.length)return w.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);w.copy(this.lastChar,this.lastTotal-this.lastNeed,0,w.length),this.lastNeed-=w.length};function o(w){return w<=127?0:w>>5===6?2:w>>4===14?3:w>>3===30?4:w>>6===2?-1:-2}function a(w,b,E){var L=b.length-1;if(L<E)return 0;var U=o(b[L]);return U>=0?(U>0&&(w.lastNeed=U-1),U):--L<E||U===-2?0:(U=o(b[L]),U>=0?(U>0&&(w.lastNeed=U-2),U):--L<E||U===-2?0:(U=o(b[L]),U>=0?(U>0&&(U===2?U=0:w.lastNeed=U-3),U):0))}function u(w,b,E){if((b[0]&192)!==128)return w.lastNeed=0,"";if(w.lastNeed>1&&b.length>1){if((b[1]&192)!==128)return w.lastNeed=1,"";if(w.lastNeed>2&&b.length>2&&(b[2]&192)!==128)return w.lastNeed=2,""}}function f(w){var b=this.lastTotal-this.lastNeed,E=u(this,w);if(E!==void 0)return E;if(this.lastNeed<=w.length)return w.copy(this.lastChar,b,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);w.copy(this.lastChar,b,0,w.length),this.lastNeed-=w.length}function l(w,b){var E=a(this,w,b);if(!this.lastNeed)return w.toString("utf8",b);this.lastTotal=E;var L=w.length-(E-this.lastNeed);return w.copy(this.lastChar,0,L),w.toString("utf8",b,L)}function m(w){var b=w&&w.length?this.write(w):"";return this.lastNeed?b+"":b}function p(w,b){if((w.length-b)%2===0){var E=w.toString("utf16le",b);if(E){var L=E.charCodeAt(E.length-1);if(L>=55296&&L<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=w[w.length-2],this.lastChar[1]=w[w.length-1],E.slice(0,-1)}return E}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=w[w.length-1],w.toString("utf16le",b,w.length-1)}function c(w){var b=w&&w.length?this.write(w):"";if(this.lastNeed){var E=this.lastTotal-this.lastNeed;return b+this.lastChar.toString("utf16le",0,E)}return b}function g(w,b){var E=(w.length-b)%3;return E===0?w.toString("base64",b):(this.lastNeed=3-E,this.lastTotal=3,E===1?this.lastChar[0]=w[w.length-1]:(this.lastChar[0]=w[w.length-2],this.lastChar[1]=w[w.length-1]),w.toString("base64",b,w.length-E))}function x(w){var b=w&&w.length?this.write(w):"";return this.lastNeed?b+this.lastChar.toString("base64",0,3-this.lastNeed):b}function v(w){return w.toString(this.encoding)}function D(w){return w&&w.length?this.write(w):""}}}),Va=Ae({"node_modules/readable-stream/lib/_stream_readable.js"(e,t){var n=cr();t.exports=E;var i=bd(),r;E.ReadableState=b,Et("events").EventEmitter;var s=function(T,R){return T.listeners(R).length},o=ja(),a=hr().Buffer,u=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function f(T){return a.from(T)}function l(T){return a.isBuffer(T)||T instanceof u}var m=Object.create(_i());m.inherits=bi();var p=Et("util"),c=void 0;p&&p.debuglog?c=p.debuglog("stream"):c=function(){};var g=wd(),x=za(),v;m.inherits(E,o);var D=["error","close","destroy","pause","resume"];function w(T,R,pe){if(typeof T.prependListener=="function")return T.prependListener(R,pe);!T._events||!T._events[R]?T.on(R,pe):i(T._events[R])?T._events[R].unshift(pe):T._events[R]=[pe,T._events[R]]}function b(T,R){r=r||Mn(),T=T||{};var pe=R instanceof r;this.objectMode=!!T.objectMode,pe&&(this.objectMode=this.objectMode||!!T.readableObjectMode);var S=T.highWaterMark,P=T.readableHighWaterMark,N=this.objectMode?16:16*1024;S||S===0?this.highWaterMark=S:pe&&(P||P===0)?this.highWaterMark=P:this.highWaterMark=N,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=T.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,T.encoding&&(v||(v=go().StringDecoder),this.decoder=new v(T.encoding),this.encoding=T.encoding)}function E(T){if(r=r||Mn(),!(this instanceof E))return new E(T);this._readableState=new b(T,this),this.readable=!0,T&&(typeof T.read=="function"&&(this._read=T.read),typeof T.destroy=="function"&&(this._destroy=T.destroy)),o.call(this)}Object.defineProperty(E.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(T){this._readableState&&(this._readableState.destroyed=T)}}),E.prototype.destroy=x.destroy,E.prototype._undestroy=x.undestroy,E.prototype._destroy=function(T,R){this.push(null),R(T)},E.prototype.push=function(T,R){var pe=this._readableState,S;return pe.objectMode?S=!0:typeof T=="string"&&(R=R||pe.defaultEncoding,R!==pe.encoding&&(T=a.from(T,R),R=""),S=!0),L(this,T,R,!1,S)},E.prototype.unshift=function(T){return L(this,T,null,!0,!1)};function L(T,R,pe,S,P){var N=T._readableState;if(R===null)N.reading=!1,ae(T,N);else{var K;P||(K=M(N,R)),K?T.emit("error",K):N.objectMode||R&&R.length>0?(typeof R!="string"&&!N.objectMode&&Object.getPrototypeOf(R)!==a.prototype&&(R=f(R)),S?N.endEmitted?T.emit("error",new Error("stream.unshift() after end event")):U(T,N,R,!0):N.ended?T.emit("error",new Error("stream.push() after EOF")):(N.reading=!1,N.decoder&&!pe?(R=N.decoder.write(R),N.objectMode||R.length!==0?U(T,N,R,!1):fe(T,N)):U(T,N,R,!1))):S||(N.reading=!1)}return W(N)}function U(T,R,pe,S){R.flowing&&R.length===0&&!R.sync?(T.emit("data",pe),T.read(0)):(R.length+=R.objectMode?1:pe.length,S?R.buffer.unshift(pe):R.buffer.push(pe),R.needReadable&&re(T)),fe(T,R)}function M(T,R){var pe;return!l(R)&&typeof R!="string"&&R!==void 0&&!T.objectMode&&(pe=new TypeError("Invalid non-string/buffer chunk")),pe}function W(T){return!T.ended&&(T.needReadable||T.length<T.highWaterMark||T.length===0)}E.prototype.isPaused=function(){return this._readableState.flowing===!1},E.prototype.setEncoding=function(T){return v||(v=go().StringDecoder),this._readableState.decoder=new v(T),this._readableState.encoding=T,this};var V=8388608;function ue(T){return T>=V?T=V:(T--,T|=T>>>1,T|=T>>>2,T|=T>>>4,T|=T>>>8,T|=T>>>16,T++),T}function we(T,R){return T<=0||R.length===0&&R.ended?0:R.objectMode?1:T!==T?R.flowing&&R.length?R.buffer.head.data.length:R.length:(T>R.highWaterMark&&(R.highWaterMark=ue(T)),T<=R.length?T:R.ended?R.length:(R.needReadable=!0,0))}E.prototype.read=function(T){c("read",T),T=parseInt(T,10);var R=this._readableState,pe=T;if(T!==0&&(R.emittedReadable=!1),T===0&&R.needReadable&&(R.length>=R.highWaterMark||R.ended))return c("read: emitReadable",R.length,R.ended),R.length===0&&R.ended?ye(this):re(this),null;if(T=we(T,R),T===0&&R.ended)return R.length===0&&ye(this),null;var S=R.needReadable;c("need readable",S),(R.length===0||R.length-T<R.highWaterMark)&&(S=!0,c("length less than watermark",S)),R.ended||R.reading?(S=!1,c("reading or ended",S)):S&&(c("do read"),R.reading=!0,R.sync=!0,R.length===0&&(R.needReadable=!0),this._read(R.highWaterMark),R.sync=!1,R.reading||(T=we(pe,R)));var P;return T>0?P=z(T,R):P=null,P===null?(R.needReadable=!0,T=0):R.length-=T,R.length===0&&(R.ended||(R.needReadable=!0),pe!==T&&R.ended&&ye(this)),P!==null&&this.emit("data",P),P};function ae(T,R){if(!R.ended){if(R.decoder){var pe=R.decoder.end();pe&&pe.length&&(R.buffer.push(pe),R.length+=R.objectMode?1:pe.length)}R.ended=!0,re(T)}}function re(T){var R=T._readableState;R.needReadable=!1,R.emittedReadable||(c("emitReadable",R.flowing),R.emittedReadable=!0,R.sync?n.nextTick(Z,T):Z(T))}function Z(T){c("emit readable"),T.emit("readable"),j(T)}function fe(T,R){R.readingMore||(R.readingMore=!0,n.nextTick($,T,R))}function $(T,R){for(var pe=R.length;!R.reading&&!R.flowing&&!R.ended&&R.length<R.highWaterMark&&(c("maybeReadMore read 0"),T.read(0),pe!==R.length);)pe=R.length;R.readingMore=!1}E.prototype._read=function(T){this.emit("error",new Error("_read() is not implemented"))},E.prototype.pipe=function(T,R){var pe=this,S=this._readableState;switch(S.pipesCount){case 0:S.pipes=T;break;case 1:S.pipes=[S.pipes,T];break;default:S.pipes.push(T);break}S.pipesCount+=1,c("pipe count=%d opts=%j",S.pipesCount,R);var P=(!R||R.end!==!1)&&T!==process.stdout&&T!==process.stderr,N=P?le:Ie;S.endEmitted?n.nextTick(N):pe.once("end",N),T.on("unpipe",K);function K(Me,Ne){c("onunpipe"),Me===pe&&Ne&&Ne.hasUnpiped===!1&&(Ne.hasUnpiped=!0,ne())}function le(){c("onend"),T.end()}var q=te(pe);T.on("drain",q);var Q=!1;function ne(){c("cleanup"),T.removeListener("close",be),T.removeListener("finish",Pe),T.removeListener("drain",q),T.removeListener("error",Ee),T.removeListener("unpipe",K),pe.removeListener("end",le),pe.removeListener("end",Ie),pe.removeListener("data",de),Q=!0,S.awaitDrain&&(!T._writableState||T._writableState.needDrain)&&q()}var ie=!1;pe.on("data",de);function de(Me){c("ondata"),ie=!1;var Ne=T.write(Me);Ne===!1&&!ie&&((S.pipesCount===1&&S.pipes===T||S.pipesCount>1&&ke(S.pipes,T)!==-1)&&!Q&&(c("false write response, pause",S.awaitDrain),S.awaitDrain++,ie=!0),pe.pause())}function Ee(Me){c("onerror",Me),Ie(),T.removeListener("error",Ee),s(T,"error")===0&&T.emit("error",Me)}w(T,"error",Ee);function be(){T.removeListener("finish",Pe),Ie()}T.once("close",be);function Pe(){c("onfinish"),T.removeListener("close",be),Ie()}T.once("finish",Pe);function Ie(){c("unpipe"),pe.unpipe(T)}return T.emit("pipe",pe),S.flowing||(c("pipe resume"),pe.resume()),T};function te(T){return function(){var R=T._readableState;c("pipeOnDrain",R.awaitDrain),R.awaitDrain&&R.awaitDrain--,R.awaitDrain===0&&s(T,"data")&&(R.flowing=!0,j(T))}}E.prototype.unpipe=function(T){var R=this._readableState,pe={hasUnpiped:!1};if(R.pipesCount===0)return this;if(R.pipesCount===1)return T&&T!==R.pipes?this:(T||(T=R.pipes),R.pipes=null,R.pipesCount=0,R.flowing=!1,T&&T.emit("unpipe",this,pe),this);if(!T){var S=R.pipes,P=R.pipesCount;R.pipes=null,R.pipesCount=0,R.flowing=!1;for(var N=0;N<P;N++)S[N].emit("unpipe",this,{hasUnpiped:!1});return this}var K=ke(R.pipes,T);return K===-1?this:(R.pipes.splice(K,1),R.pipesCount-=1,R.pipesCount===1&&(R.pipes=R.pipes[0]),T.emit("unpipe",this,pe),this)},E.prototype.on=function(T,R){var pe=o.prototype.on.call(this,T,R);if(T==="data")this._readableState.flowing!==!1&&this.resume();else if(T==="readable"){var S=this._readableState;!S.endEmitted&&!S.readableListening&&(S.readableListening=S.needReadable=!0,S.emittedReadable=!1,S.reading?S.length&&re(this):n.nextTick(H,this))}return pe},E.prototype.addListener=E.prototype.on;function H(T){c("readable nexttick read 0"),T.read(0)}E.prototype.resume=function(){var T=this._readableState;return T.flowing||(c("resume"),T.flowing=!0,A(this,T)),this};function A(T,R){R.resumeScheduled||(R.resumeScheduled=!0,n.nextTick(I,T,R))}function I(T,R){R.reading||(c("resume read 0"),T.read(0)),R.resumeScheduled=!1,R.awaitDrain=0,T.emit("resume"),j(T),R.flowing&&!R.reading&&T.read(0)}E.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function j(T){var R=T._readableState;for(c("flow",R.flowing);R.flowing&&T.read()!==null;);}E.prototype.wrap=function(T){var R=this,pe=this._readableState,S=!1;T.on("end",function(){if(c("wrapped end"),pe.decoder&&!pe.ended){var K=pe.decoder.end();K&&K.length&&R.push(K)}R.push(null)}),T.on("data",function(K){if(c("wrapped data"),pe.decoder&&(K=pe.decoder.write(K)),!(pe.objectMode&&K==null)&&!(!pe.objectMode&&(!K||!K.length))){var le=R.push(K);le||(S=!0,T.pause())}});for(var P in T)this[P]===void 0&&typeof T[P]=="function"&&(this[P]=(function(K){return function(){return T[K].apply(T,arguments)}})(P));for(var N=0;N<D.length;N++)T.on(D[N],this.emit.bind(this,D[N]));return this._read=function(K){c("wrapped _read",K),S&&(S=!1,T.resume())},this},Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),E._fromList=z;function z(T,R){if(R.length===0)return null;var pe;return R.objectMode?pe=R.buffer.shift():!T||T>=R.length?(R.decoder?pe=R.buffer.join(""):R.buffer.length===1?pe=R.buffer.head.data:pe=R.buffer.concat(R.length),R.buffer.clear()):pe=Y(T,R.buffer,R.decoder),pe}function Y(T,R,pe){var S;return T<R.head.data.length?(S=R.head.data.slice(0,T),R.head.data=R.head.data.slice(T)):T===R.head.data.length?S=R.shift():S=pe?he(T,R):ve(T,R),S}function he(T,R){var pe=R.head,S=1,P=pe.data;for(T-=P.length;pe=pe.next;){var N=pe.data,K=T>N.length?N.length:T;if(K===N.length?P+=N:P+=N.slice(0,T),T-=K,T===0){K===N.length?(++S,pe.next?R.head=pe.next:R.head=R.tail=null):(R.head=pe,pe.data=N.slice(K));break}++S}return R.length-=S,P}function ve(T,R){var pe=a.allocUnsafe(T),S=R.head,P=1;for(S.data.copy(pe),T-=S.data.length;S=S.next;){var N=S.data,K=T>N.length?N.length:T;if(N.copy(pe,pe.length-T,0,K),T-=K,T===0){K===N.length?(++P,S.next?R.head=S.next:R.head=R.tail=null):(R.head=S,S.data=N.slice(K));break}++P}return R.length-=P,pe}function ye(T){var R=T._readableState;if(R.length>0)throw new Error('"endReadable()" called on non-empty stream');R.endEmitted||(R.ended=!0,n.nextTick(xe,R,T))}function xe(T,R){!T.endEmitted&&T.length===0&&(T.endEmitted=!0,R.readable=!1,R.emit("end"))}function ke(T,R){for(var pe=0,S=T.length;pe<S;pe++)if(T[pe]===R)return pe;return-1}}}),$a=Ae({"node_modules/readable-stream/lib/_stream_transform.js"(e,t){t.exports=s;var n=Mn(),i=Object.create(_i());i.inherits=bi(),i.inherits(s,n);function r(u,f){var l=this._transformState;l.transforming=!1;var m=l.writecb;if(!m)return this.emit("error",new Error("write callback called multiple times"));l.writechunk=null,l.writecb=null,f!=null&&this.push(f),m(u);var p=this._readableState;p.reading=!1,(p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}function s(u){if(!(this instanceof s))return new s(u);n.call(this,u),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,u&&(typeof u.transform=="function"&&(this._transform=u.transform),typeof u.flush=="function"&&(this._flush=u.flush)),this.on("prefinish",o)}function o(){var u=this;typeof this._flush=="function"?this._flush(function(f,l){a(u,f,l)}):a(this,null,null)}s.prototype.push=function(u,f){return this._transformState.needTransform=!1,n.prototype.push.call(this,u,f)},s.prototype._transform=function(u,f,l){throw new Error("_transform() is not implemented")},s.prototype._write=function(u,f,l){var m=this._transformState;if(m.writecb=l,m.writechunk=u,m.writeencoding=f,!m.transforming){var p=this._readableState;(m.needTransform||p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}},s.prototype._read=function(u){var f=this._transformState;f.writechunk!==null&&f.writecb&&!f.transforming?(f.transforming=!0,this._transform(f.writechunk,f.writeencoding,f.afterTransform)):f.needTransform=!0},s.prototype._destroy=function(u,f){var l=this;n.prototype._destroy.call(this,u,function(m){f(m),l.emit("close")})};function a(u,f,l){if(f)return u.emit("error",f);if(l!=null&&u.push(l),u._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(u._transformState.transforming)throw new Error("Calling transform done when still transforming");return u.push(null)}}}),Sd=Ae({"node_modules/readable-stream/lib/_stream_passthrough.js"(e,t){t.exports=r;var n=$a(),i=Object.create(_i());i.inherits=bi(),i.inherits(r,n);function r(s){if(!(this instanceof r))return new r(s);n.call(this,s)}r.prototype._transform=function(s,o,a){a(null,s)}}}),qa=Ae({"node_modules/readable-stream/readable.js"(e,t){var n=Et("stream");hd.READABLE_STREAM==="disable"&&n?(t.exports=n,e=t.exports=n.Readable,e.Readable=n.Readable,e.Writable=n.Writable,e.Duplex=n.Duplex,e.Transform=n.Transform,e.PassThrough=n.PassThrough,e.Stream=n):(e=t.exports=Va(),e.Stream=n||e,e.Readable=e,e.Writable=Ha(),e.Duplex=Mn(),e.Transform=$a(),e.PassThrough=Sd())}}),pn=Ae({"node_modules/jszip/lib/support.js"(e){if(e.base64=!0,e.array=!0,e.string=!0,e.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",e.nodebuffer=typeof Buffer<"u",e.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")e.blob=!1;else{t=new ArrayBuffer(0);try{e.blob=new Blob([t],{type:"application/zip"}).size===0}catch{try{n=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,i=new n,i.append(t),e.blob=i.getBlob("application/zip").size===0}catch{e.blob=!1}}}var t,n,i;try{e.nodestream=!!qa().Readable}catch{e.nodestream=!1}}}),Wa=Ae({"node_modules/jszip/lib/base64.js"(e){var t=ut(),n=pn(),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.encode=function(r){for(var s=[],o,a,u,f,l,m,p,c=0,g=r.length,x=g,v=t.getTypeOf(r)!=="string";c<r.length;)x=g-c,v?(o=r[c++],a=c<g?r[c++]:0,u=c<g?r[c++]:0):(o=r.charCodeAt(c++),a=c<g?r.charCodeAt(c++):0,u=c<g?r.charCodeAt(c++):0),f=o>>2,l=(o&3)<<4|a>>4,m=x>1?(a&15)<<2|u>>6:64,p=x>2?u&63:64,s.push(i.charAt(f)+i.charAt(l)+i.charAt(m)+i.charAt(p));return s.join("")},e.decode=function(r){var s,o,a,u,f,l,m,p=0,c=0,g="data:";if(r.substr(0,g.length)===g)throw new Error("Invalid base64 input, it looks like a data url.");r=r.replace(/[^A-Za-z0-9+/=]/g,"");var x=r.length*3/4;if(r.charAt(r.length-1)===i.charAt(64)&&x--,r.charAt(r.length-2)===i.charAt(64)&&x--,x%1!==0)throw new Error("Invalid base64 input, bad content length.");var v;for(n.uint8array?v=new Uint8Array(x|0):v=new Array(x|0);p<r.length;)u=i.indexOf(r.charAt(p++)),f=i.indexOf(r.charAt(p++)),l=i.indexOf(r.charAt(p++)),m=i.indexOf(r.charAt(p++)),s=u<<2|f>>4,o=(f&15)<<4|l>>2,a=(l&3)<<6|m,v[c++]=s,l!==64&&(v[c++]=o),m!==64&&(v[c++]=a);return v}}}),pr=Ae({"node_modules/jszip/lib/nodejsUtils.js"(e,t){t.exports={isNode:typeof Buffer<"u",newBufferFrom:function(n,i){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(n,i);if(typeof n=="number")throw new Error('The "data" argument must not be a number');return new Buffer(n,i)},allocBuffer:function(n){if(Buffer.alloc)return Buffer.alloc(n);var i=new Buffer(n);return i.fill(0),i},isBuffer:function(n){return Buffer.isBuffer(n)},isStream:function(n){return n&&typeof n.on=="function"&&typeof n.pause=="function"&&typeof n.resume=="function"}}}}),Ed=Ae({"node_modules/immediate/lib/index.js"(e,t){var n=global.MutationObserver||global.WebKitMutationObserver,i;process.browser?n?(r=0,s=new n(l),o=global.document.createTextNode(""),s.observe(o,{characterData:!0}),i=function(){o.data=r=++r%2}):!global.setImmediate&&typeof global.MessageChannel<"u"?(a=new global.MessageChannel,a.port1.onmessage=l,i=function(){a.port2.postMessage(0)}):"document"in global&&"onreadystatechange"in global.document.createElement("script")?i=function(){var p=global.document.createElement("script");p.onreadystatechange=function(){l(),p.onreadystatechange=null,p.parentNode.removeChild(p),p=null},global.document.documentElement.appendChild(p)}:i=function(){setTimeout(l,0)}:i=function(){process.nextTick(l)};var r,s,o,a,u,f=[];function l(){u=!0;for(var p,c,g=f.length;g;){for(c=f,f=[],p=-1;++p<g;)c[p]();g=f.length}u=!1}t.exports=m;function m(p){f.push(p)===1&&!u&&i()}}}),kd=Ae({"node_modules/lie/lib/index.js"(e,t){var n=Ed();function i(){}var r={},s=["REJECTED"],o=["FULFILLED"],a=["PENDING"];process.browser||(u=["UNHANDLED"]);var u;t.exports=f;function f(b){if(typeof b!="function")throw new TypeError("resolver must be a function");this.state=a,this.queue=[],this.outcome=void 0,process.browser||(this.handled=u),b!==i&&c(this,b)}f.prototype.finally=function(b){if(typeof b!="function")return this;var E=this.constructor;return this.then(L,U);function L(M){function W(){return M}return E.resolve(b()).then(W)}function U(M){function W(){throw M}return E.resolve(b()).then(W)}},f.prototype.catch=function(b){return this.then(null,b)},f.prototype.then=function(b,E){if(typeof b!="function"&&this.state===o||typeof E!="function"&&this.state===s)return this;var L=new this.constructor(i);if(process.browser||this.handled===u&&(this.handled=null),this.state!==a){var U=this.state===o?b:E;m(L,U,this.outcome)}else this.queue.push(new l(L,b,E));return L};function l(b,E,L){this.promise=b,typeof E=="function"&&(this.onFulfilled=E,this.callFulfilled=this.otherCallFulfilled),typeof L=="function"&&(this.onRejected=L,this.callRejected=this.otherCallRejected)}l.prototype.callFulfilled=function(b){r.resolve(this.promise,b)},l.prototype.otherCallFulfilled=function(b){m(this.promise,this.onFulfilled,b)},l.prototype.callRejected=function(b){r.reject(this.promise,b)},l.prototype.otherCallRejected=function(b){m(this.promise,this.onRejected,b)};function m(b,E,L){n(function(){var U;try{U=E(L)}catch(M){return r.reject(b,M)}U===b?r.reject(b,new TypeError("Cannot resolve promise with itself")):r.resolve(b,U)})}r.resolve=function(b,E){var L=g(p,E);if(L.status==="error")return r.reject(b,L.value);var U=L.value;if(U)c(b,U);else{b.state=o,b.outcome=E;for(var M=-1,W=b.queue.length;++M<W;)b.queue[M].callFulfilled(E)}return b},r.reject=function(b,E){b.state=s,b.outcome=E,process.browser||b.handled===u&&n(function(){b.handled===u&&process.emit("unhandledRejection",E,b)});for(var L=-1,U=b.queue.length;++L<U;)b.queue[L].callRejected(E);return b};function p(b){var E=b&&b.then;if(b&&(typeof b=="object"||typeof b=="function")&&typeof E=="function")return function(){E.apply(b,arguments)}}function c(b,E){var L=!1;function U(ue){L||(L=!0,r.reject(b,ue))}function M(ue){L||(L=!0,r.resolve(b,ue))}function W(){E(M,U)}var V=g(W);V.status==="error"&&U(V.value)}function g(b,E){var L={};try{L.value=b(E),L.status="success"}catch(U){L.status="error",L.value=U}return L}f.resolve=x;function x(b){return b instanceof this?b:r.resolve(new this(i),b)}f.reject=v;function v(b){var E=new this(i);return r.reject(E,b)}f.all=D;function D(b){var E=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var L=b.length,U=!1;if(!L)return this.resolve([]);for(var M=new Array(L),W=0,V=-1,ue=new this(i);++V<L;)we(b[V],V);return ue;function we(ae,re){E.resolve(ae).then(Z,function(fe){U||(U=!0,r.reject(ue,fe))});function Z(fe){M[re]=fe,++W===L&&!U&&(U=!0,r.resolve(ue,M))}}}f.race=w;function w(b){var E=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var L=b.length,U=!1;if(!L)return this.resolve([]);for(var M=-1,W=new this(i);++M<L;)V(b[M]);return W;function V(ue){E.resolve(ue).then(function(we){U||(U=!0,r.resolve(W,we))},function(we){U||(U=!0,r.reject(W,we))})}}}}),yi=Ae({"node_modules/jszip/lib/external.js"(e,t){var n=null;typeof Promise<"u"?n=Promise:n=kd(),t.exports={Promise:n}}}),Cd=Ae({"node_modules/setimmediate/setImmediate.js"(e){(function(t,n){if(t.setImmediate)return;var i=1,r={},s=!1,o=t.document,a;function u(b){typeof b!="function"&&(b=new Function(""+b));for(var E=new Array(arguments.length-1),L=0;L<E.length;L++)E[L]=arguments[L+1];var U={callback:b,args:E};return r[i]=U,a(i),i++}function f(b){delete r[b]}function l(b){var E=b.callback,L=b.args;switch(L.length){case 0:E();break;case 1:E(L[0]);break;case 2:E(L[0],L[1]);break;case 3:E(L[0],L[1],L[2]);break;default:E.apply(n,L);break}}function m(b){if(s)setTimeout(m,0,b);else{var E=r[b];if(E){s=!0;try{l(E)}finally{f(b),s=!1}}}}function p(){a=function(b){process.nextTick(function(){m(b)})}}function c(){if(t.postMessage&&!t.importScripts){var b=!0,E=t.onmessage;return t.onmessage=function(){b=!1},t.postMessage("","*"),t.onmessage=E,b}}function g(){var b="setImmediate$"+Math.random()+"$",E=function(L){L.source===t&&typeof L.data=="string"&&L.data.indexOf(b)===0&&m(+L.data.slice(b.length))};t.addEventListener?t.addEventListener("message",E,!1):t.attachEvent("onmessage",E),a=function(L){t.postMessage(b+L,"*")}}function x(){var b=new MessageChannel;b.port1.onmessage=function(E){var L=E.data;m(L)},a=function(E){b.port2.postMessage(E)}}function v(){var b=o.documentElement;a=function(E){var L=o.createElement("script");L.onreadystatechange=function(){m(E),L.onreadystatechange=null,b.removeChild(L),L=null},b.appendChild(L)}}function D(){a=function(b){setTimeout(m,0,b)}}var w=Object.getPrototypeOf&&Object.getPrototypeOf(t);w=w&&w.setTimeout?w:t,{}.toString.call(t.process)==="[object process]"?p():c()?g():t.MessageChannel?x():o&&"onreadystatechange"in o.createElement("script")?v():D(),w.setImmediate=u,w.clearImmediate=f})(typeof self>"u"?typeof global>"u"?e:global:self)}}),ut=Ae({"node_modules/jszip/lib/utils.js"(e){var t=pn(),n=Wa(),i=pr(),r=yi();Cd();function s(p){var c=null;return t.uint8array?c=new Uint8Array(p.length):c=new Array(p.length),a(p,c)}e.newBlob=function(p,c){e.checkSupport("blob");try{return new Blob([p],{type:c})}catch{try{var g=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,x=new g;return x.append(p),x.getBlob(c)}catch{throw new Error("Bug : can't construct the Blob.")}}};function o(p){return p}function a(p,c){for(var g=0;g<p.length;++g)c[g]=p.charCodeAt(g)&255;return c}var u={stringifyByChunk:function(p,c,g){var x=[],v=0,D=p.length;if(D<=g)return String.fromCharCode.apply(null,p);for(;v<D;)c==="array"||c==="nodebuffer"?x.push(String.fromCharCode.apply(null,p.slice(v,Math.min(v+g,D)))):x.push(String.fromCharCode.apply(null,p.subarray(v,Math.min(v+g,D)))),v+=g;return x.join("")},stringifyByChar:function(p){for(var c="",g=0;g<p.length;g++)c+=String.fromCharCode(p[g]);return c},applyCanBeUsed:{uint8array:(function(){try{return t.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return t.nodebuffer&&String.fromCharCode.apply(null,i.allocBuffer(1)).length===1}catch{return!1}})()}};function f(p){var c=65536,g=e.getTypeOf(p),x=!0;if(g==="uint8array"?x=u.applyCanBeUsed.uint8array:g==="nodebuffer"&&(x=u.applyCanBeUsed.nodebuffer),x)for(;c>1;)try{return u.stringifyByChunk(p,g,c)}catch{c=Math.floor(c/2)}return u.stringifyByChar(p)}e.applyFromCharCode=f;function l(p,c){for(var g=0;g<p.length;g++)c[g]=p[g];return c}var m={};m.string={string:o,array:function(p){return a(p,new Array(p.length))},arraybuffer:function(p){return m.string.uint8array(p).buffer},uint8array:function(p){return a(p,new Uint8Array(p.length))},nodebuffer:function(p){return a(p,i.allocBuffer(p.length))}},m.array={string:f,array:o,arraybuffer:function(p){return new Uint8Array(p).buffer},uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return i.newBufferFrom(p)}},m.arraybuffer={string:function(p){return f(new Uint8Array(p))},array:function(p){return l(new Uint8Array(p),new Array(p.byteLength))},arraybuffer:o,uint8array:function(p){return new Uint8Array(p)},nodebuffer:function(p){return i.newBufferFrom(new Uint8Array(p))}},m.uint8array={string:f,array:function(p){return l(p,new Array(p.length))},arraybuffer:function(p){return p.buffer},uint8array:o,nodebuffer:function(p){return i.newBufferFrom(p)}},m.nodebuffer={string:f,array:function(p){return l(p,new Array(p.length))},arraybuffer:function(p){return m.nodebuffer.uint8array(p).buffer},uint8array:function(p){return l(p,new Uint8Array(p.length))},nodebuffer:o},e.transformTo=function(p,c){if(c||(c=""),!p)return c;e.checkSupport(p);var g=e.getTypeOf(c),x=m[g][p](c);return x},e.resolve=function(p){for(var c=p.split("/"),g=[],x=0;x<c.length;x++){var v=c[x];v==="."||v===""&&x!==0&&x!==c.length-1||(v===".."?g.pop():g.push(v))}return g.join("/")},e.getTypeOf=function(p){if(typeof p=="string")return"string";if(Object.prototype.toString.call(p)==="[object Array]")return"array";if(t.nodebuffer&&i.isBuffer(p))return"nodebuffer";if(t.uint8array&&p instanceof Uint8Array)return"uint8array";if(t.arraybuffer&&p instanceof ArrayBuffer)return"arraybuffer"},e.checkSupport=function(p){var c=t[p.toLowerCase()];if(!c)throw new Error(p+" is not supported by this platform")},e.MAX_VALUE_16BITS=65535,e.MAX_VALUE_32BITS=-1,e.pretty=function(p){var c="",g,x;for(x=0;x<(p||"").length;x++)g=p.charCodeAt(x),c+="\\x"+(g<16?"0":"")+g.toString(16).toUpperCase();return c},e.delay=function(p,c,g){setImmediate(function(){p.apply(g||null,c||[])})},e.inherits=function(p,c){var g=function(){};g.prototype=c.prototype,p.prototype=new g},e.extend=function(){var p={},c,g;for(c=0;c<arguments.length;c++)for(g in arguments[c])Object.prototype.hasOwnProperty.call(arguments[c],g)&&typeof p[g]>"u"&&(p[g]=arguments[c][g]);return p},e.prepareContent=function(p,c,g,x,v){var D=r.Promise.resolve(c).then(function(w){var b=t.blob&&(w instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(w))!==-1);return b&&typeof FileReader<"u"?new r.Promise(function(E,L){var U=new FileReader;U.onload=function(M){E(M.target.result)},U.onerror=function(M){L(M.target.error)},U.readAsArrayBuffer(w)}):w});return D.then(function(w){var b=e.getTypeOf(w);return b?(b==="arraybuffer"?w=e.transformTo("uint8array",w):b==="string"&&(v?w=n.decode(w):g&&x!==!0&&(w=s(w))),w):r.Promise.reject(new Error("Can't read the data of '"+p+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}}}),Dt=Ae({"node_modules/jszip/lib/stream/GenericWorker.js"(e,t){function n(i){this.name=i||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(i){this.emit("data",i)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(i){this.emit("error",i)}return!0},error:function(i){return this.isFinished?!1:(this.isPaused?this.generatedError=i:(this.isFinished=!0,this.emit("error",i),this.previous&&this.previous.error(i),this.cleanUp()),!0)},on:function(i,r){return this._listeners[i].push(r),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(i,r){if(this._listeners[i])for(var s=0;s<this._listeners[i].length;s++)this._listeners[i][s].call(this,r)},pipe:function(i){return i.registerPrevious(this)},registerPrevious:function(i){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=i.streamInfo,this.mergeStreamInfo(),this.previous=i;var r=this;return i.on("data",function(s){r.processChunk(s)}),i.on("end",function(){r.end()}),i.on("error",function(s){r.error(s)}),this},pause:function(){return this.isPaused||this.isFinished?!1:(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var i=!1;return this.generatedError&&(this.error(this.generatedError),i=!0),this.previous&&this.previous.resume(),!i},flush:function(){},processChunk:function(i){this.push(i)},withStreamInfo:function(i,r){return this.extraStreamInfo[i]=r,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var i in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,i)&&(this.streamInfo[i]=this.extraStreamInfo[i])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var i="Worker "+this.name;return this.previous?this.previous+" -> "+i:i}},t.exports=n}}),wi=Ae({"node_modules/jszip/lib/utf8.js"(e){var t=ut(),n=pn(),i=pr(),r=Dt(),s=new Array(256);for(o=0;o<256;o++)s[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;var o;s[254]=s[254]=1;var a=function(p){var c,g,x,v,D,w=p.length,b=0;for(v=0;v<w;v++)g=p.charCodeAt(v),(g&64512)===55296&&v+1<w&&(x=p.charCodeAt(v+1),(x&64512)===56320&&(g=65536+(g-55296<<10)+(x-56320),v++)),b+=g<128?1:g<2048?2:g<65536?3:4;for(n.uint8array?c=new Uint8Array(b):c=new Array(b),D=0,v=0;D<b;v++)g=p.charCodeAt(v),(g&64512)===55296&&v+1<w&&(x=p.charCodeAt(v+1),(x&64512)===56320&&(g=65536+(g-55296<<10)+(x-56320),v++)),g<128?c[D++]=g:g<2048?(c[D++]=192|g>>>6,c[D++]=128|g&63):g<65536?(c[D++]=224|g>>>12,c[D++]=128|g>>>6&63,c[D++]=128|g&63):(c[D++]=240|g>>>18,c[D++]=128|g>>>12&63,c[D++]=128|g>>>6&63,c[D++]=128|g&63);return c},u=function(p,c){var g;for(c=c||p.length,c>p.length&&(c=p.length),g=c-1;g>=0&&(p[g]&192)===128;)g--;return g<0||g===0?c:g+s[p[g]]>c?g:c},f=function(p){var c,g,x,v,D=p.length,w=new Array(D*2);for(g=0,c=0;c<D;){if(x=p[c++],x<128){w[g++]=x;continue}if(v=s[x],v>4){w[g++]=65533,c+=v-1;continue}for(x&=v===2?31:v===3?15:7;v>1&&c<D;)x=x<<6|p[c++]&63,v--;if(v>1){w[g++]=65533;continue}x<65536?w[g++]=x:(x-=65536,w[g++]=55296|x>>10&1023,w[g++]=56320|x&1023)}return w.length!==g&&(w.subarray?w=w.subarray(0,g):w.length=g),t.applyFromCharCode(w)};e.utf8encode=function(c){return n.nodebuffer?i.newBufferFrom(c,"utf-8"):a(c)},e.utf8decode=function(c){return n.nodebuffer?t.transformTo("nodebuffer",c).toString("utf-8"):(c=t.transformTo(n.uint8array?"uint8array":"array",c),f(c))};function l(){r.call(this,"utf-8 decode"),this.leftOver=null}t.inherits(l,r),l.prototype.processChunk=function(p){var c=t.transformTo(n.uint8array?"uint8array":"array",p.data);if(this.leftOver&&this.leftOver.length){if(n.uint8array){var g=c;c=new Uint8Array(g.length+this.leftOver.length),c.set(this.leftOver,0),c.set(g,this.leftOver.length)}else c=this.leftOver.concat(c);this.leftOver=null}var x=u(c),v=c;x!==c.length&&(n.uint8array?(v=c.subarray(0,x),this.leftOver=c.subarray(x,c.length)):(v=c.slice(0,x),this.leftOver=c.slice(x,c.length))),this.push({data:e.utf8decode(v),meta:p.meta})},l.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:e.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},e.Utf8DecodeWorker=l;function m(){r.call(this,"utf-8 encode")}t.inherits(m,r),m.prototype.processChunk=function(p){this.push({data:e.utf8encode(p.data),meta:p.meta})},e.Utf8EncodeWorker=m}}),Td=Ae({"node_modules/jszip/lib/stream/ConvertWorker.js"(e,t){var n=Dt(),i=ut();function r(s){n.call(this,"ConvertWorker to "+s),this.destType=s}i.inherits(r,n),r.prototype.processChunk=function(s){this.push({data:i.transformTo(this.destType,s.data),meta:s.meta})},t.exports=r}}),Ad=Ae({"node_modules/jszip/lib/nodejs/NodejsStreamOutputAdapter.js"(e,t){var n=qa().Readable,i=ut();i.inherits(r,n);function r(s,o,a){n.call(this,o),this._helper=s;var u=this;s.on("data",function(f,l){u.push(f)||u._helper.pause(),a&&a(l)}).on("error",function(f){u.emit("error",f)}).on("end",function(){u.push(null)})}r.prototype._read=function(){this._helper.resume()},t.exports=r}}),Ga=Ae({"node_modules/jszip/lib/stream/StreamHelper.js"(e,t){var n=ut(),i=Td(),r=Dt(),s=Wa(),o=pn(),a=yi(),u=null;if(o.nodestream)try{u=Ad()}catch{}function f(c,g,x){switch(c){case"blob":return n.newBlob(n.transformTo("arraybuffer",g),x);case"base64":return s.encode(g);default:return n.transformTo(c,g)}}function l(c,g){var x,v=0,D=null,w=0;for(x=0;x<g.length;x++)w+=g[x].length;switch(c){case"string":return g.join("");case"array":return Array.prototype.concat.apply([],g);case"uint8array":for(D=new Uint8Array(w),x=0;x<g.length;x++)D.set(g[x],v),v+=g[x].length;return D;case"nodebuffer":return Buffer.concat(g);default:throw new Error("concat : unsupported type '"+c+"'")}}function m(c,g){return new a.Promise(function(x,v){var D=[],w=c._internalType,b=c._outputType,E=c._mimeType;c.on("data",function(L,U){D.push(L),g&&g(U)}).on("error",function(L){D=[],v(L)}).on("end",function(){try{var L=f(b,l(w,D),E);x(L)}catch(U){v(U)}D=[]}).resume()})}function p(c,g,x){var v=g;switch(g){case"blob":case"arraybuffer":v="uint8array";break;case"base64":v="string";break}try{this._internalType=v,this._outputType=g,this._mimeType=x,n.checkSupport(v),this._worker=c.pipe(new i(v)),c.lock()}catch(D){this._worker=new r("error"),this._worker.error(D)}}p.prototype={accumulate:function(c){return m(this,c)},on:function(c,g){var x=this;return c==="data"?this._worker.on(c,function(v){g.call(x,v.data,v.meta)}):this._worker.on(c,function(){n.delay(g,arguments,x)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(c){if(n.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:this._outputType!=="nodebuffer"},c)}},t.exports=p}}),Za=Ae({"node_modules/jszip/lib/defaults.js"(e){e.base64=!1,e.binary=!1,e.dir=!1,e.createFolders=!0,e.date=null,e.compression=null,e.compressionOptions=null,e.comment=null,e.unixPermissions=null,e.dosPermissions=null}}),Ka=Ae({"node_modules/jszip/lib/stream/DataWorker.js"(e,t){var n=ut(),i=Dt(),r=16*1024;function s(o){i.call(this,"DataWorker");var a=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,o.then(function(u){a.dataIsReady=!0,a.data=u,a.max=u&&u.length||0,a.type=n.getTypeOf(u),a.isPaused||a._tickAndRepeat()},function(u){a.error(u)})}n.inherits(s,i),s.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return i.prototype.resume.call(this)?(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0):!1},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,!(this.isPaused||this.isFinished)&&(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var o=r,a=null,u=Math.min(this.max,this.index+o);if(this.index>=this.max)return this.end();switch(this.type){case"string":a=this.data.substring(this.index,u);break;case"uint8array":a=this.data.subarray(this.index,u);break;case"array":case"nodebuffer":a=this.data.slice(this.index,u);break}return this.index=u,this.push({data:a,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=s}}),bs=Ae({"node_modules/jszip/lib/crc32.js"(e,t){var n=ut();function i(){for(var a,u=[],f=0;f<256;f++){a=f;for(var l=0;l<8;l++)a=a&1?3988292384^a>>>1:a>>>1;u[f]=a}return u}var r=i();function s(a,u,f,l){var m=r,p=l+f;a=a^-1;for(var c=l;c<p;c++)a=a>>>8^m[(a^u[c])&255];return a^-1}function o(a,u,f,l){var m=r,p=l+f;a=a^-1;for(var c=l;c<p;c++)a=a>>>8^m[(a^u.charCodeAt(c))&255];return a^-1}t.exports=function(u,f){if(typeof u>"u"||!u.length)return 0;var l=n.getTypeOf(u)!=="string";return l?s(f|0,u,u.length,0):o(f|0,u,u.length,0)}}}),Ya=Ae({"node_modules/jszip/lib/stream/Crc32Probe.js"(e,t){var n=Dt(),i=bs(),r=ut();function s(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r.inherits(s,n),s.prototype.processChunk=function(o){this.streamInfo.crc32=i(o.data,this.streamInfo.crc32||0),this.push(o)},t.exports=s}}),Id=Ae({"node_modules/jszip/lib/stream/DataLengthProbe.js"(e,t){var n=ut(),i=Dt();function r(s){i.call(this,"DataLengthProbe for "+s),this.propName=s,this.withStreamInfo(s,0)}n.inherits(r,i),r.prototype.processChunk=function(s){if(s){var o=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=o+s.data.length}i.prototype.processChunk.call(this,s)},t.exports=r}}),ys=Ae({"node_modules/jszip/lib/compressedObject.js"(e,t){var n=yi(),i=Ka(),r=Ya(),s=Id();function o(a,u,f,l,m){this.compressedSize=a,this.uncompressedSize=u,this.crc32=f,this.compression=l,this.compressedContent=m}o.prototype={getContentWorker:function(){var a=new i(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),u=this;return a.on("end",function(){if(this.streamInfo.data_length!==u.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),a},getCompressedWorker:function(){return new i(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},o.createWorkerFrom=function(a,u,f){return a.pipe(new r).pipe(new s("uncompressedSize")).pipe(u.compressWorker(f)).pipe(new s("compressedSize")).withStreamInfo("compression",u)},t.exports=o}}),Dd=Ae({"node_modules/jszip/lib/zipObject.js"(e,t){var n=Ga(),i=Ka(),r=wi(),s=ys(),o=Dt(),a=function(m,p,c){this.name=m,this.dir=c.dir,this.date=c.date,this.comment=c.comment,this.unixPermissions=c.unixPermissions,this.dosPermissions=c.dosPermissions,this._data=p,this._dataBinary=c.binary,this.options={compression:c.compression,compressionOptions:c.compressionOptions}};a.prototype={internalStream:function(m){var p=null,c="string";try{if(!m)throw new Error("No output type specified.");c=m.toLowerCase();var g=c==="string"||c==="text";(c==="binarystring"||c==="text")&&(c="string"),p=this._decompressWorker();var x=!this._dataBinary;x&&!g&&(p=p.pipe(new r.Utf8EncodeWorker)),!x&&g&&(p=p.pipe(new r.Utf8DecodeWorker))}catch(v){p=new o("error"),p.error(v)}return new n(p,c,"")},async:function(m,p){return this.internalStream(m).accumulate(p)},nodeStream:function(m,p){return this.internalStream(m||"nodebuffer").toNodejsStream(p)},_compressWorker:function(m,p){if(this._data instanceof s&&this._data.compression.magic===m.magic)return this._data.getCompressedWorker();var c=this._decompressWorker();return this._dataBinary||(c=c.pipe(new r.Utf8EncodeWorker)),s.createWorkerFrom(c,m,p)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof o?this._data:new i(this._data)}};var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")};for(l=0;l<u.length;l++)a.prototype[u[l]]=f;var l;t.exports=a}}),gn=Ae({"node_modules/jszip/node_modules/pako/lib/utils/common.js"(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(s,o){return Object.prototype.hasOwnProperty.call(s,o)}e.assign=function(s){for(var o=Array.prototype.slice.call(arguments,1);o.length;){var a=o.shift();if(a){if(typeof a!="object")throw new TypeError(a+"must be non-object");for(var u in a)n(a,u)&&(s[u]=a[u])}}return s},e.shrinkBuf=function(s,o){return s.length===o?s:s.subarray?s.subarray(0,o):(s.length=o,s)};var i={arraySet:function(s,o,a,u,f){if(o.subarray&&s.subarray){s.set(o.subarray(a,a+u),f);return}for(var l=0;l<u;l++)s[f+l]=o[a+l]},flattenChunks:function(s){var o,a,u,f,l,m;for(u=0,o=0,a=s.length;o<a;o++)u+=s[o].length;for(m=new Uint8Array(u),f=0,o=0,a=s.length;o<a;o++)l=s[o],m.set(l,f),f+=l.length;return m}},r={arraySet:function(s,o,a,u,f){for(var l=0;l<u;l++)s[f+l]=o[a+l]},flattenChunks:function(s){return[].concat.apply([],s)}};e.setTyped=function(s){s?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,i)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,r))},e.setTyped(t)}}),Pd=Ae({"node_modules/jszip/node_modules/pako/lib/zlib/trees.js"(e){var t=gn(),n=4,i=0,r=1,s=2;function o(k){for(var ge=k.length;--ge>=0;)k[ge]=0}var a=0,u=1,f=2,l=3,m=258,p=29,c=256,g=c+1+p,x=30,v=19,D=2*g+1,w=15,b=16,E=7,L=256,U=16,M=17,W=18,V=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ue=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],we=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ae=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],re=512,Z=new Array((g+2)*2);o(Z);var fe=new Array(x*2);o(fe);var $=new Array(re);o($);var te=new Array(m-l+1);o(te);var H=new Array(p);o(H);var A=new Array(x);o(A);function I(k,ge,_e,Se,B){this.static_tree=k,this.extra_bits=ge,this.extra_base=_e,this.elems=Se,this.max_length=B,this.has_stree=k&&k.length}var j,z,Y;function he(k,ge){this.dyn_tree=k,this.max_code=0,this.stat_desc=ge}function ve(k){return k<256?$[k]:$[256+(k>>>7)]}function ye(k,ge){k.pending_buf[k.pending++]=ge&255,k.pending_buf[k.pending++]=ge>>>8&255}function xe(k,ge,_e){k.bi_valid>b-_e?(k.bi_buf|=ge<<k.bi_valid&65535,ye(k,k.bi_buf),k.bi_buf=ge>>b-k.bi_valid,k.bi_valid+=_e-b):(k.bi_buf|=ge<<k.bi_valid&65535,k.bi_valid+=_e)}function ke(k,ge,_e){xe(k,_e[ge*2],_e[ge*2+1])}function T(k,ge){var _e=0;do _e|=k&1,k>>>=1,_e<<=1;while(--ge>0);return _e>>>1}function R(k){k.bi_valid===16?(ye(k,k.bi_buf),k.bi_buf=0,k.bi_valid=0):k.bi_valid>=8&&(k.pending_buf[k.pending++]=k.bi_buf&255,k.bi_buf>>=8,k.bi_valid-=8)}function pe(k,ge){var _e=ge.dyn_tree,Se=ge.max_code,B=ge.stat_desc.static_tree,se=ge.stat_desc.has_stree,_=ge.stat_desc.extra_bits,me=ge.stat_desc.extra_base,Oe=ge.stat_desc.max_length,d,J,ee,y,O,G,Le=0;for(y=0;y<=w;y++)k.bl_count[y]=0;for(_e[k.heap[k.heap_max]*2+1]=0,d=k.heap_max+1;d<D;d++)J=k.heap[d],y=_e[_e[J*2+1]*2+1]+1,y>Oe&&(y=Oe,Le++),_e[J*2+1]=y,!(J>Se)&&(k.bl_count[y]++,O=0,J>=me&&(O=_[J-me]),G=_e[J*2],k.opt_len+=G*(y+O),se&&(k.static_len+=G*(B[J*2+1]+O)));if(Le!==0){do{for(y=Oe-1;k.bl_count[y]===0;)y--;k.bl_count[y]--,k.bl_count[y+1]+=2,k.bl_count[Oe]--,Le-=2}while(Le>0);for(y=Oe;y!==0;y--)for(J=k.bl_count[y];J!==0;)ee=k.heap[--d],!(ee>Se)&&(_e[ee*2+1]!==y&&(k.opt_len+=(y-_e[ee*2+1])*_e[ee*2],_e[ee*2+1]=y),J--)}}function S(k,ge,_e){var Se=new Array(w+1),B=0,se,_;for(se=1;se<=w;se++)Se[se]=B=B+_e[se-1]<<1;for(_=0;_<=ge;_++){var me=k[_*2+1];me!==0&&(k[_*2]=T(Se[me]++,me))}}function P(){var k,ge,_e,Se,B,se=new Array(w+1);for(_e=0,Se=0;Se<p-1;Se++)for(H[Se]=_e,k=0;k<1<<V[Se];k++)te[_e++]=Se;for(te[_e-1]=Se,B=0,Se=0;Se<16;Se++)for(A[Se]=B,k=0;k<1<<ue[Se];k++)$[B++]=Se;for(B>>=7;Se<x;Se++)for(A[Se]=B<<7,k=0;k<1<<ue[Se]-7;k++)$[256+B++]=Se;for(ge=0;ge<=w;ge++)se[ge]=0;for(k=0;k<=143;)Z[k*2+1]=8,k++,se[8]++;for(;k<=255;)Z[k*2+1]=9,k++,se[9]++;for(;k<=279;)Z[k*2+1]=7,k++,se[7]++;for(;k<=287;)Z[k*2+1]=8,k++,se[8]++;for(S(Z,g+1,se),k=0;k<x;k++)fe[k*2+1]=5,fe[k*2]=T(k,5);j=new I(Z,V,c+1,g,w),z=new I(fe,ue,0,x,w),Y=new I(new Array(0),we,0,v,E)}function N(k){var ge;for(ge=0;ge<g;ge++)k.dyn_ltree[ge*2]=0;for(ge=0;ge<x;ge++)k.dyn_dtree[ge*2]=0;for(ge=0;ge<v;ge++)k.bl_tree[ge*2]=0;k.dyn_ltree[L*2]=1,k.opt_len=k.static_len=0,k.last_lit=k.matches=0}function K(k){k.bi_valid>8?ye(k,k.bi_buf):k.bi_valid>0&&(k.pending_buf[k.pending++]=k.bi_buf),k.bi_buf=0,k.bi_valid=0}function le(k,ge,_e,Se){K(k),ye(k,_e),ye(k,~_e),t.arraySet(k.pending_buf,k.window,ge,_e,k.pending),k.pending+=_e}function q(k,ge,_e,Se){var B=ge*2,se=_e*2;return k[B]<k[se]||k[B]===k[se]&&Se[ge]<=Se[_e]}function Q(k,ge,_e){for(var Se=k.heap[_e],B=_e<<1;B<=k.heap_len&&(B<k.heap_len&&q(ge,k.heap[B+1],k.heap[B],k.depth)&&B++,!q(ge,Se,k.heap[B],k.depth));)k.heap[_e]=k.heap[B],_e=B,B<<=1;k.heap[_e]=Se}function ne(k,ge,_e){var Se,B,se=0,_,me;if(k.last_lit!==0)do Se=k.pending_buf[k.d_buf+se*2]<<8|k.pending_buf[k.d_buf+se*2+1],B=k.pending_buf[k.l_buf+se],se++,Se===0?ke(k,B,ge):(_=te[B],ke(k,_+c+1,ge),me=V[_],me!==0&&(B-=H[_],xe(k,B,me)),Se--,_=ve(Se),ke(k,_,_e),me=ue[_],me!==0&&(Se-=A[_],xe(k,Se,me)));while(se<k.last_lit);ke(k,L,ge)}function ie(k,ge){var _e=ge.dyn_tree,Se=ge.stat_desc.static_tree,B=ge.stat_desc.has_stree,se=ge.stat_desc.elems,_,me,Oe=-1,d;for(k.heap_len=0,k.heap_max=D,_=0;_<se;_++)_e[_*2]!==0?(k.heap[++k.heap_len]=Oe=_,k.depth[_]=0):_e[_*2+1]=0;for(;k.heap_len<2;)d=k.heap[++k.heap_len]=Oe<2?++Oe:0,_e[d*2]=1,k.depth[d]=0,k.opt_len--,B&&(k.static_len-=Se[d*2+1]);for(ge.max_code=Oe,_=k.heap_len>>1;_>=1;_--)Q(k,_e,_);d=se;do _=k.heap[1],k.heap[1]=k.heap[k.heap_len--],Q(k,_e,1),me=k.heap[1],k.heap[--k.heap_max]=_,k.heap[--k.heap_max]=me,_e[d*2]=_e[_*2]+_e[me*2],k.depth[d]=(k.depth[_]>=k.depth[me]?k.depth[_]:k.depth[me])+1,_e[_*2+1]=_e[me*2+1]=d,k.heap[1]=d++,Q(k,_e,1);while(k.heap_len>=2);k.heap[--k.heap_max]=k.heap[1],pe(k,ge),S(_e,Oe,k.bl_count)}function de(k,ge,_e){var Se,B=-1,se,_=ge[1],me=0,Oe=7,d=4;for(_===0&&(Oe=138,d=3),ge[(_e+1)*2+1]=65535,Se=0;Se<=_e;Se++)se=_,_=ge[(Se+1)*2+1],!(++me<Oe&&se===_)&&(me<d?k.bl_tree[se*2]+=me:se!==0?(se!==B&&k.bl_tree[se*2]++,k.bl_tree[U*2]++):me<=10?k.bl_tree[M*2]++:k.bl_tree[W*2]++,me=0,B=se,_===0?(Oe=138,d=3):se===_?(Oe=6,d=3):(Oe=7,d=4))}function Ee(k,ge,_e){var Se,B=-1,se,_=ge[1],me=0,Oe=7,d=4;for(_===0&&(Oe=138,d=3),Se=0;Se<=_e;Se++)if(se=_,_=ge[(Se+1)*2+1],!(++me<Oe&&se===_)){if(me<d)do ke(k,se,k.bl_tree);while(--me!==0);else se!==0?(se!==B&&(ke(k,se,k.bl_tree),me--),ke(k,U,k.bl_tree),xe(k,me-3,2)):me<=10?(ke(k,M,k.bl_tree),xe(k,me-3,3)):(ke(k,W,k.bl_tree),xe(k,me-11,7));me=0,B=se,_===0?(Oe=138,d=3):se===_?(Oe=6,d=3):(Oe=7,d=4)}}function be(k){var ge;for(de(k,k.dyn_ltree,k.l_desc.max_code),de(k,k.dyn_dtree,k.d_desc.max_code),ie(k,k.bl_desc),ge=v-1;ge>=3&&k.bl_tree[ae[ge]*2+1]===0;ge--);return k.opt_len+=3*(ge+1)+5+5+4,ge}function Pe(k,ge,_e,Se){var B;for(xe(k,ge-257,5),xe(k,_e-1,5),xe(k,Se-4,4),B=0;B<Se;B++)xe(k,k.bl_tree[ae[B]*2+1],3);Ee(k,k.dyn_ltree,ge-1),Ee(k,k.dyn_dtree,_e-1)}function Ie(k){var ge=4093624447,_e;for(_e=0;_e<=31;_e++,ge>>>=1)if(ge&1&&k.dyn_ltree[_e*2]!==0)return i;if(k.dyn_ltree[18]!==0||k.dyn_ltree[20]!==0||k.dyn_ltree[26]!==0)return r;for(_e=32;_e<c;_e++)if(k.dyn_ltree[_e*2]!==0)return r;return i}var Me=!1;function Ne(k){Me||(P(),Me=!0),k.l_desc=new he(k.dyn_ltree,j),k.d_desc=new he(k.dyn_dtree,z),k.bl_desc=new he(k.bl_tree,Y),k.bi_buf=0,k.bi_valid=0,N(k)}function Fe(k,ge,_e,Se){xe(k,(a<<1)+(Se?1:0),3),le(k,ge,_e)}function We(k){xe(k,u<<1,3),ke(k,L,Z),R(k)}function Ye(k,ge,_e,Se){var B,se,_=0;k.level>0?(k.strm.data_type===s&&(k.strm.data_type=Ie(k)),ie(k,k.l_desc),ie(k,k.d_desc),_=be(k),B=k.opt_len+3+7>>>3,se=k.static_len+3+7>>>3,se<=B&&(B=se)):B=se=_e+5,_e+4<=B&&ge!==-1?Fe(k,ge,_e,Se):k.strategy===n||se===B?(xe(k,(u<<1)+(Se?1:0),3),ne(k,Z,fe)):(xe(k,(f<<1)+(Se?1:0),3),Pe(k,k.l_desc.max_code+1,k.d_desc.max_code+1,_+1),ne(k,k.dyn_ltree,k.dyn_dtree)),N(k),Se&&K(k)}function at(k,ge,_e){return k.pending_buf[k.d_buf+k.last_lit*2]=ge>>>8&255,k.pending_buf[k.d_buf+k.last_lit*2+1]=ge&255,k.pending_buf[k.l_buf+k.last_lit]=_e&255,k.last_lit++,ge===0?k.dyn_ltree[_e*2]++:(k.matches++,ge--,k.dyn_ltree[(te[_e]+c+1)*2]++,k.dyn_dtree[ve(ge)*2]++),k.last_lit===k.lit_bufsize-1}e._tr_init=Ne,e._tr_stored_block=Fe,e._tr_flush_block=Ye,e._tr_tally=at,e._tr_align=We}}),Xa=Ae({"node_modules/jszip/node_modules/pako/lib/zlib/adler32.js"(e,t){function n(i,r,s,o){for(var a=i&65535|0,u=i>>>16&65535|0,f=0;s!==0;){f=s>2e3?2e3:s,s-=f;do a=a+r[o++]|0,u=u+a|0;while(--f);a%=65521,u%=65521}return a|u<<16|0}t.exports=n}}),Ja=Ae({"node_modules/jszip/node_modules/pako/lib/zlib/crc32.js"(e,t){function n(){for(var s,o=[],a=0;a<256;a++){s=a;for(var u=0;u<8;u++)s=s&1?3988292384^s>>>1:s>>>1;o[a]=s}return o}var i=n();function r(s,o,a,u){var f=i,l=u+a;s^=-1;for(var m=u;m<l;m++)s=s>>>8^f[(s^o[m])&255];return s^-1}t.exports=r}}),ws=Ae({"node_modules/jszip/node_modules/pako/lib/zlib/messages.js"(e,t){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}}}),Rd=Ae({"node_modules/jszip/node_modules/pako/lib/zlib/deflate.js"(e){var t=gn(),n=Pd(),i=Xa(),r=Ja(),s=ws(),o=0,a=1,u=3,f=4,l=5,m=0,p=1,c=-2,g=-3,x=-5,v=-1,D=1,w=2,b=3,E=4,L=0,U=2,M=8,W=9,V=15,ue=8,we=29,ae=256,re=ae+1+we,Z=30,fe=19,$=2*re+1,te=15,H=3,A=258,I=A+H+1,j=32,z=42,Y=69,he=73,ve=91,ye=103,xe=113,ke=666,T=1,R=2,pe=3,S=4,P=3;function N(d,J){return d.msg=s[J],J}function K(d){return(d<<1)-(d>4?9:0)}function le(d){for(var J=d.length;--J>=0;)d[J]=0}function q(d){var J=d.state,ee=J.pending;ee>d.avail_out&&(ee=d.avail_out),ee!==0&&(t.arraySet(d.output,J.pending_buf,J.pending_out,ee,d.next_out),d.next_out+=ee,J.pending_out+=ee,d.total_out+=ee,d.avail_out-=ee,J.pending-=ee,J.pending===0&&(J.pending_out=0))}function Q(d,J){n._tr_flush_block(d,d.block_start>=0?d.block_start:-1,d.strstart-d.block_start,J),d.block_start=d.strstart,q(d.strm)}function ne(d,J){d.pending_buf[d.pending++]=J}function ie(d,J){d.pending_buf[d.pending++]=J>>>8&255,d.pending_buf[d.pending++]=J&255}function de(d,J,ee,y){var O=d.avail_in;return O>y&&(O=y),O===0?0:(d.avail_in-=O,t.arraySet(J,d.input,d.next_in,O,ee),d.state.wrap===1?d.adler=i(d.adler,J,O,ee):d.state.wrap===2&&(d.adler=r(d.adler,J,O,ee)),d.next_in+=O,d.total_in+=O,O)}function Ee(d,J){var ee=d.max_chain_length,y=d.strstart,O,G,Le=d.prev_length,Ce=d.nice_match,De=d.strstart>d.w_size-I?d.strstart-(d.w_size-I):0,Ve=d.window,wt=d.w_mask,Qe=d.prev,$e=d.strstart+A,st=Ve[y+Le-1],ft=Ve[y+Le];d.prev_length>=d.good_match&&(ee>>=2),Ce>d.lookahead&&(Ce=d.lookahead);do if(O=J,!(Ve[O+Le]!==ft||Ve[O+Le-1]!==st||Ve[O]!==Ve[y]||Ve[++O]!==Ve[y+1])){y+=2,O++;do;while(Ve[++y]===Ve[++O]&&Ve[++y]===Ve[++O]&&Ve[++y]===Ve[++O]&&Ve[++y]===Ve[++O]&&Ve[++y]===Ve[++O]&&Ve[++y]===Ve[++O]&&Ve[++y]===Ve[++O]&&Ve[++y]===Ve[++O]&&y<$e);if(G=A-($e-y),y=$e-A,G>Le){if(d.match_start=J,Le=G,G>=Ce)break;st=Ve[y+Le-1],ft=Ve[y+Le]}}while((J=Qe[J&wt])>De&&--ee!==0);return Le<=d.lookahead?Le:d.lookahead}function be(d){var J=d.w_size,ee,y,O,G,Le;do{if(G=d.window_size-d.lookahead-d.strstart,d.strstart>=J+(J-I)){t.arraySet(d.window,d.window,J,J,0),d.match_start-=J,d.strstart-=J,d.block_start-=J,y=d.hash_size,ee=y;do O=d.head[--ee],d.head[ee]=O>=J?O-J:0;while(--y);y=J,ee=y;do O=d.prev[--ee],d.prev[ee]=O>=J?O-J:0;while(--y);G+=J}if(d.strm.avail_in===0)break;if(y=de(d.strm,d.window,d.strstart+d.lookahead,G),d.lookahead+=y,d.lookahead+d.insert>=H)for(Le=d.strstart-d.insert,d.ins_h=d.window[Le],d.ins_h=(d.ins_h<<d.hash_shift^d.window[Le+1])&d.hash_mask;d.insert&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[Le+H-1])&d.hash_mask,d.prev[Le&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=Le,Le++,d.insert--,!(d.lookahead+d.insert<H)););}while(d.lookahead<I&&d.strm.avail_in!==0)}function Pe(d,J){var ee=65535;for(ee>d.pending_buf_size-5&&(ee=d.pending_buf_size-5);;){if(d.lookahead<=1){if(be(d),d.lookahead===0&&J===o)return T;if(d.lookahead===0)break}d.strstart+=d.lookahead,d.lookahead=0;var y=d.block_start+ee;if((d.strstart===0||d.strstart>=y)&&(d.lookahead=d.strstart-y,d.strstart=y,Q(d,!1),d.strm.avail_out===0)||d.strstart-d.block_start>=d.w_size-I&&(Q(d,!1),d.strm.avail_out===0))return T}return d.insert=0,J===f?(Q(d,!0),d.strm.avail_out===0?pe:S):(d.strstart>d.block_start&&(Q(d,!1),d.strm.avail_out===0),T)}function Ie(d,J){for(var ee,y;;){if(d.lookahead<I){if(be(d),d.lookahead<I&&J===o)return T;if(d.lookahead===0)break}if(ee=0,d.lookahead>=H&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+H-1])&d.hash_mask,ee=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),ee!==0&&d.strstart-ee<=d.w_size-I&&(d.match_length=Ee(d,ee)),d.match_length>=H)if(y=n._tr_tally(d,d.strstart-d.match_start,d.match_length-H),d.lookahead-=d.match_length,d.match_length<=d.max_lazy_match&&d.lookahead>=H){d.match_length--;do d.strstart++,d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+H-1])&d.hash_mask,ee=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart;while(--d.match_length!==0);d.strstart++}else d.strstart+=d.match_length,d.match_length=0,d.ins_h=d.window[d.strstart],d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+1])&d.hash_mask;else y=n._tr_tally(d,0,d.window[d.strstart]),d.lookahead--,d.strstart++;if(y&&(Q(d,!1),d.strm.avail_out===0))return T}return d.insert=d.strstart<H-1?d.strstart:H-1,J===f?(Q(d,!0),d.strm.avail_out===0?pe:S):d.last_lit&&(Q(d,!1),d.strm.avail_out===0)?T:R}function Me(d,J){for(var ee,y,O;;){if(d.lookahead<I){if(be(d),d.lookahead<I&&J===o)return T;if(d.lookahead===0)break}if(ee=0,d.lookahead>=H&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+H-1])&d.hash_mask,ee=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),d.prev_length=d.match_length,d.prev_match=d.match_start,d.match_length=H-1,ee!==0&&d.prev_length<d.max_lazy_match&&d.strstart-ee<=d.w_size-I&&(d.match_length=Ee(d,ee),d.match_length<=5&&(d.strategy===D||d.match_length===H&&d.strstart-d.match_start>4096)&&(d.match_length=H-1)),d.prev_length>=H&&d.match_length<=d.prev_length){O=d.strstart+d.lookahead-H,y=n._tr_tally(d,d.strstart-1-d.prev_match,d.prev_length-H),d.lookahead-=d.prev_length-1,d.prev_length-=2;do++d.strstart<=O&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+H-1])&d.hash_mask,ee=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart);while(--d.prev_length!==0);if(d.match_available=0,d.match_length=H-1,d.strstart++,y&&(Q(d,!1),d.strm.avail_out===0))return T}else if(d.match_available){if(y=n._tr_tally(d,0,d.window[d.strstart-1]),y&&Q(d,!1),d.strstart++,d.lookahead--,d.strm.avail_out===0)return T}else d.match_available=1,d.strstart++,d.lookahead--}return d.match_available&&(y=n._tr_tally(d,0,d.window[d.strstart-1]),d.match_available=0),d.insert=d.strstart<H-1?d.strstart:H-1,J===f?(Q(d,!0),d.strm.avail_out===0?pe:S):d.last_lit&&(Q(d,!1),d.strm.avail_out===0)?T:R}function Ne(d,J){for(var ee,y,O,G,Le=d.window;;){if(d.lookahead<=A){if(be(d),d.lookahead<=A&&J===o)return T;if(d.lookahead===0)break}if(d.match_length=0,d.lookahead>=H&&d.strstart>0&&(O=d.strstart-1,y=Le[O],y===Le[++O]&&y===Le[++O]&&y===Le[++O])){G=d.strstart+A;do;while(y===Le[++O]&&y===Le[++O]&&y===Le[++O]&&y===Le[++O]&&y===Le[++O]&&y===Le[++O]&&y===Le[++O]&&y===Le[++O]&&O<G);d.match_length=A-(G-O),d.match_length>d.lookahead&&(d.match_length=d.lookahead)}if(d.match_length>=H?(ee=n._tr_tally(d,1,d.match_length-H),d.lookahead-=d.match_length,d.strstart+=d.match_length,d.match_length=0):(ee=n._tr_tally(d,0,d.window[d.strstart]),d.lookahead--,d.strstart++),ee&&(Q(d,!1),d.strm.avail_out===0))return T}return d.insert=0,J===f?(Q(d,!0),d.strm.avail_out===0?pe:S):d.last_lit&&(Q(d,!1),d.strm.avail_out===0)?T:R}function Fe(d,J){for(var ee;;){if(d.lookahead===0&&(be(d),d.lookahead===0)){if(J===o)return T;break}if(d.match_length=0,ee=n._tr_tally(d,0,d.window[d.strstart]),d.lookahead--,d.strstart++,ee&&(Q(d,!1),d.strm.avail_out===0))return T}return d.insert=0,J===f?(Q(d,!0),d.strm.avail_out===0?pe:S):d.last_lit&&(Q(d,!1),d.strm.avail_out===0)?T:R}function We(d,J,ee,y,O){this.good_length=d,this.max_lazy=J,this.nice_length=ee,this.max_chain=y,this.func=O}var Ye;Ye=[new We(0,0,0,0,Pe),new We(4,4,8,4,Ie),new We(4,5,16,8,Ie),new We(4,6,32,32,Ie),new We(4,4,16,16,Me),new We(8,16,32,32,Me),new We(8,16,128,128,Me),new We(8,32,128,256,Me),new We(32,128,258,1024,Me),new We(32,258,258,4096,Me)];function at(d){d.window_size=2*d.w_size,le(d.head),d.max_lazy_match=Ye[d.level].max_lazy,d.good_match=Ye[d.level].good_length,d.nice_match=Ye[d.level].nice_length,d.max_chain_length=Ye[d.level].max_chain,d.strstart=0,d.block_start=0,d.lookahead=0,d.insert=0,d.match_length=d.prev_length=H-1,d.match_available=0,d.ins_h=0}function k(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=M,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new t.Buf16($*2),this.dyn_dtree=new t.Buf16((2*Z+1)*2),this.bl_tree=new t.Buf16((2*fe+1)*2),le(this.dyn_ltree),le(this.dyn_dtree),le(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new t.Buf16(te+1),this.heap=new t.Buf16(2*re+1),le(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new t.Buf16(2*re+1),le(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ge(d){var J;return!d||!d.state?N(d,c):(d.total_in=d.total_out=0,d.data_type=U,J=d.state,J.pending=0,J.pending_out=0,J.wrap<0&&(J.wrap=-J.wrap),J.status=J.wrap?z:xe,d.adler=J.wrap===2?0:1,J.last_flush=o,n._tr_init(J),m)}function _e(d){var J=ge(d);return J===m&&at(d.state),J}function Se(d,J){return!d||!d.state||d.state.wrap!==2?c:(d.state.gzhead=J,m)}function B(d,J,ee,y,O,G){if(!d)return c;var Le=1;if(J===v&&(J=6),y<0?(Le=0,y=-y):y>15&&(Le=2,y-=16),O<1||O>W||ee!==M||y<8||y>15||J<0||J>9||G<0||G>E)return N(d,c);y===8&&(y=9);var Ce=new k;return d.state=Ce,Ce.strm=d,Ce.wrap=Le,Ce.gzhead=null,Ce.w_bits=y,Ce.w_size=1<<Ce.w_bits,Ce.w_mask=Ce.w_size-1,Ce.hash_bits=O+7,Ce.hash_size=1<<Ce.hash_bits,Ce.hash_mask=Ce.hash_size-1,Ce.hash_shift=~~((Ce.hash_bits+H-1)/H),Ce.window=new t.Buf8(Ce.w_size*2),Ce.head=new t.Buf16(Ce.hash_size),Ce.prev=new t.Buf16(Ce.w_size),Ce.lit_bufsize=1<<O+6,Ce.pending_buf_size=Ce.lit_bufsize*4,Ce.pending_buf=new t.Buf8(Ce.pending_buf_size),Ce.d_buf=1*Ce.lit_bufsize,Ce.l_buf=3*Ce.lit_bufsize,Ce.level=J,Ce.strategy=G,Ce.method=ee,_e(d)}function se(d,J){return B(d,J,M,V,ue,L)}function _(d,J){var ee,y,O,G;if(!d||!d.state||J>l||J<0)return d?N(d,c):c;if(y=d.state,!d.output||!d.input&&d.avail_in!==0||y.status===ke&&J!==f)return N(d,d.avail_out===0?x:c);if(y.strm=d,ee=y.last_flush,y.last_flush=J,y.status===z)if(y.wrap===2)d.adler=0,ne(y,31),ne(y,139),ne(y,8),y.gzhead?(ne(y,(y.gzhead.text?1:0)+(y.gzhead.hcrc?2:0)+(y.gzhead.extra?4:0)+(y.gzhead.name?8:0)+(y.gzhead.comment?16:0)),ne(y,y.gzhead.time&255),ne(y,y.gzhead.time>>8&255),ne(y,y.gzhead.time>>16&255),ne(y,y.gzhead.time>>24&255),ne(y,y.level===9?2:y.strategy>=w||y.level<2?4:0),ne(y,y.gzhead.os&255),y.gzhead.extra&&y.gzhead.extra.length&&(ne(y,y.gzhead.extra.length&255),ne(y,y.gzhead.extra.length>>8&255)),y.gzhead.hcrc&&(d.adler=r(d.adler,y.pending_buf,y.pending,0)),y.gzindex=0,y.status=Y):(ne(y,0),ne(y,0),ne(y,0),ne(y,0),ne(y,0),ne(y,y.level===9?2:y.strategy>=w||y.level<2?4:0),ne(y,P),y.status=xe);else{var Le=M+(y.w_bits-8<<4)<<8,Ce=-1;y.strategy>=w||y.level<2?Ce=0:y.level<6?Ce=1:y.level===6?Ce=2:Ce=3,Le|=Ce<<6,y.strstart!==0&&(Le|=j),Le+=31-Le%31,y.status=xe,ie(y,Le),y.strstart!==0&&(ie(y,d.adler>>>16),ie(y,d.adler&65535)),d.adler=1}if(y.status===Y)if(y.gzhead.extra){for(O=y.pending;y.gzindex<(y.gzhead.extra.length&65535)&&!(y.pending===y.pending_buf_size&&(y.gzhead.hcrc&&y.pending>O&&(d.adler=r(d.adler,y.pending_buf,y.pending-O,O)),q(d),O=y.pending,y.pending===y.pending_buf_size));)ne(y,y.gzhead.extra[y.gzindex]&255),y.gzindex++;y.gzhead.hcrc&&y.pending>O&&(d.adler=r(d.adler,y.pending_buf,y.pending-O,O)),y.gzindex===y.gzhead.extra.length&&(y.gzindex=0,y.status=he)}else y.status=he;if(y.status===he)if(y.gzhead.name){O=y.pending;do{if(y.pending===y.pending_buf_size&&(y.gzhead.hcrc&&y.pending>O&&(d.adler=r(d.adler,y.pending_buf,y.pending-O,O)),q(d),O=y.pending,y.pending===y.pending_buf_size)){G=1;break}y.gzindex<y.gzhead.name.length?G=y.gzhead.name.charCodeAt(y.gzindex++)&255:G=0,ne(y,G)}while(G!==0);y.gzhead.hcrc&&y.pending>O&&(d.adler=r(d.adler,y.pending_buf,y.pending-O,O)),G===0&&(y.gzindex=0,y.status=ve)}else y.status=ve;if(y.status===ve)if(y.gzhead.comment){O=y.pending;do{if(y.pending===y.pending_buf_size&&(y.gzhead.hcrc&&y.pending>O&&(d.adler=r(d.adler,y.pending_buf,y.pending-O,O)),q(d),O=y.pending,y.pending===y.pending_buf_size)){G=1;break}y.gzindex<y.gzhead.comment.length?G=y.gzhead.comment.charCodeAt(y.gzindex++)&255:G=0,ne(y,G)}while(G!==0);y.gzhead.hcrc&&y.pending>O&&(d.adler=r(d.adler,y.pending_buf,y.pending-O,O)),G===0&&(y.status=ye)}else y.status=ye;if(y.status===ye&&(y.gzhead.hcrc?(y.pending+2>y.pending_buf_size&&q(d),y.pending+2<=y.pending_buf_size&&(ne(y,d.adler&255),ne(y,d.adler>>8&255),d.adler=0,y.status=xe)):y.status=xe),y.pending!==0){if(q(d),d.avail_out===0)return y.last_flush=-1,m}else if(d.avail_in===0&&K(J)<=K(ee)&&J!==f)return N(d,x);if(y.status===ke&&d.avail_in!==0)return N(d,x);if(d.avail_in!==0||y.lookahead!==0||J!==o&&y.status!==ke){var De=y.strategy===w?Fe(y,J):y.strategy===b?Ne(y,J):Ye[y.level].func(y,J);if((De===pe||De===S)&&(y.status=ke),De===T||De===pe)return d.avail_out===0&&(y.last_flush=-1),m;if(De===R&&(J===a?n._tr_align(y):J!==l&&(n._tr_stored_block(y,0,0,!1),J===u&&(le(y.head),y.lookahead===0&&(y.strstart=0,y.block_start=0,y.insert=0))),q(d),d.avail_out===0))return y.last_flush=-1,m}return J!==f?m:y.wrap<=0?p:(y.wrap===2?(ne(y,d.adler&255),ne(y,d.adler>>8&255),ne(y,d.adler>>16&255),ne(y,d.adler>>24&255),ne(y,d.total_in&255),ne(y,d.total_in>>8&255),ne(y,d.total_in>>16&255),ne(y,d.total_in>>24&255)):(ie(y,d.adler>>>16),ie(y,d.adler&65535)),q(d),y.wrap>0&&(y.wrap=-y.wrap),y.pending!==0?m:p)}function me(d){var J;return!d||!d.state?c:(J=d.state.status,J!==z&&J!==Y&&J!==he&&J!==ve&&J!==ye&&J!==xe&&J!==ke?N(d,c):(d.state=null,J===xe?N(d,g):m))}function Oe(d,J){var ee=J.length,y,O,G,Le,Ce,De,Ve,wt;if(!d||!d.state||(y=d.state,Le=y.wrap,Le===2||Le===1&&y.status!==z||y.lookahead))return c;for(Le===1&&(d.adler=i(d.adler,J,ee,0)),y.wrap=0,ee>=y.w_size&&(Le===0&&(le(y.head),y.strstart=0,y.block_start=0,y.insert=0),wt=new t.Buf8(y.w_size),t.arraySet(wt,J,ee-y.w_size,y.w_size,0),J=wt,ee=y.w_size),Ce=d.avail_in,De=d.next_in,Ve=d.input,d.avail_in=ee,d.next_in=0,d.input=J,be(y);y.lookahead>=H;){O=y.strstart,G=y.lookahead-(H-1);do y.ins_h=(y.ins_h<<y.hash_shift^y.window[O+H-1])&y.hash_mask,y.prev[O&y.w_mask]=y.head[y.ins_h],y.head[y.ins_h]=O,O++;while(--G);y.strstart=O,y.lookahead=H-1,be(y)}return y.strstart+=y.lookahead,y.block_start=y.strstart,y.insert=y.lookahead,y.lookahead=0,y.match_length=y.prev_length=H-1,y.match_available=0,d.next_in=De,d.input=Ve,d.avail_in=Ce,y.wrap=Le,m}e.deflateInit=se,e.deflateInit2=B,e.deflateReset=_e,e.deflateResetKeep=ge,e.deflateSetHeader=Se,e.deflate=_,e.deflateEnd=me,e.deflateSetDictionary=Oe,e.deflateInfo="pako deflate (from Nodeca project)"}}),Qa=Ae({"node_modules/jszip/node_modules/pako/lib/utils/strings.js"(e){var t=gn(),n=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch{n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{i=!1}var r=new t.Buf8(256);for(s=0;s<256;s++)r[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;var s;r[254]=r[254]=1,e.string2buf=function(a){var u,f,l,m,p,c=a.length,g=0;for(m=0;m<c;m++)f=a.charCodeAt(m),(f&64512)===55296&&m+1<c&&(l=a.charCodeAt(m+1),(l&64512)===56320&&(f=65536+(f-55296<<10)+(l-56320),m++)),g+=f<128?1:f<2048?2:f<65536?3:4;for(u=new t.Buf8(g),p=0,m=0;p<g;m++)f=a.charCodeAt(m),(f&64512)===55296&&m+1<c&&(l=a.charCodeAt(m+1),(l&64512)===56320&&(f=65536+(f-55296<<10)+(l-56320),m++)),f<128?u[p++]=f:f<2048?(u[p++]=192|f>>>6,u[p++]=128|f&63):f<65536?(u[p++]=224|f>>>12,u[p++]=128|f>>>6&63,u[p++]=128|f&63):(u[p++]=240|f>>>18,u[p++]=128|f>>>12&63,u[p++]=128|f>>>6&63,u[p++]=128|f&63);return u};function o(a,u){if(u<65534&&(a.subarray&&i||!a.subarray&&n))return String.fromCharCode.apply(null,t.shrinkBuf(a,u));for(var f="",l=0;l<u;l++)f+=String.fromCharCode(a[l]);return f}e.buf2binstring=function(a){return o(a,a.length)},e.binstring2buf=function(a){for(var u=new t.Buf8(a.length),f=0,l=u.length;f<l;f++)u[f]=a.charCodeAt(f);return u},e.buf2string=function(a,u){var f,l,m,p,c=u||a.length,g=new Array(c*2);for(l=0,f=0;f<c;){if(m=a[f++],m<128){g[l++]=m;continue}if(p=r[m],p>4){g[l++]=65533,f+=p-1;continue}for(m&=p===2?31:p===3?15:7;p>1&&f<c;)m=m<<6|a[f++]&63,p--;if(p>1){g[l++]=65533;continue}m<65536?g[l++]=m:(m-=65536,g[l++]=55296|m>>10&1023,g[l++]=56320|m&1023)}return o(g,l)},e.utf8border=function(a,u){var f;for(u=u||a.length,u>a.length&&(u=a.length),f=u-1;f>=0&&(a[f]&192)===128;)f--;return f<0||f===0?u:f+r[a[f]]>u?f:u}}}),el=Ae({"node_modules/jszip/node_modules/pako/lib/zlib/zstream.js"(e,t){function n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=n}}),Ld=Ae({"node_modules/jszip/node_modules/pako/lib/deflate.js"(e){var t=Rd(),n=gn(),i=Qa(),r=ws(),s=el(),o=Object.prototype.toString,a=0,u=4,f=0,l=1,m=2,p=-1,c=0,g=8;function x(b){if(!(this instanceof x))return new x(b);this.options=n.assign({level:p,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:c,to:""},b||{});var E=this.options;E.raw&&E.windowBits>0?E.windowBits=-E.windowBits:E.gzip&&E.windowBits>0&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var L=t.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(L!==f)throw new Error(r[L]);if(E.header&&t.deflateSetHeader(this.strm,E.header),E.dictionary){var U;if(typeof E.dictionary=="string"?U=i.string2buf(E.dictionary):o.call(E.dictionary)==="[object ArrayBuffer]"?U=new Uint8Array(E.dictionary):U=E.dictionary,L=t.deflateSetDictionary(this.strm,U),L!==f)throw new Error(r[L]);this._dict_set=!0}}x.prototype.push=function(b,E){var L=this.strm,U=this.options.chunkSize,M,W;if(this.ended)return!1;W=E===~~E?E:E===!0?u:a,typeof b=="string"?L.input=i.string2buf(b):o.call(b)==="[object ArrayBuffer]"?L.input=new Uint8Array(b):L.input=b,L.next_in=0,L.avail_in=L.input.length;do{if(L.avail_out===0&&(L.output=new n.Buf8(U),L.next_out=0,L.avail_out=U),M=t.deflate(L,W),M!==l&&M!==f)return this.onEnd(M),this.ended=!0,!1;(L.avail_out===0||L.avail_in===0&&(W===u||W===m))&&(this.options.to==="string"?this.onData(i.buf2binstring(n.shrinkBuf(L.output,L.next_out))):this.onData(n.shrinkBuf(L.output,L.next_out)))}while((L.avail_in>0||L.avail_out===0)&&M!==l);return W===u?(M=t.deflateEnd(this.strm),this.onEnd(M),this.ended=!0,M===f):(W===m&&(this.onEnd(f),L.avail_out=0),!0)},x.prototype.onData=function(b){this.chunks.push(b)},x.prototype.onEnd=function(b){b===f&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg};function v(b,E){var L=new x(E);if(L.push(b,!0),L.err)throw L.msg||r[L.err];return L.result}function D(b,E){return E=E||{},E.raw=!0,v(b,E)}function w(b,E){return E=E||{},E.gzip=!0,v(b,E)}e.Deflate=x,e.deflate=v,e.deflateRaw=D,e.gzip=w}}),Md=Ae({"node_modules/jszip/node_modules/pako/lib/zlib/inffast.js"(e,t){var n=30,i=12;t.exports=function(s,o){var a,u,f,l,m,p,c,g,x,v,D,w,b,E,L,U,M,W,V,ue,we,ae,re,Z,fe;a=s.state,u=s.next_in,Z=s.input,f=u+(s.avail_in-5),l=s.next_out,fe=s.output,m=l-(o-s.avail_out),p=l+(s.avail_out-257),c=a.dmax,g=a.wsize,x=a.whave,v=a.wnext,D=a.window,w=a.hold,b=a.bits,E=a.lencode,L=a.distcode,U=(1<<a.lenbits)-1,M=(1<<a.distbits)-1;e:do{b<15&&(w+=Z[u++]<<b,b+=8,w+=Z[u++]<<b,b+=8),W=E[w&U];t:for(;;){if(V=W>>>24,w>>>=V,b-=V,V=W>>>16&255,V===0)fe[l++]=W&65535;else if(V&16){ue=W&65535,V&=15,V&&(b<V&&(w+=Z[u++]<<b,b+=8),ue+=w&(1<<V)-1,w>>>=V,b-=V),b<15&&(w+=Z[u++]<<b,b+=8,w+=Z[u++]<<b,b+=8),W=L[w&M];n:for(;;){if(V=W>>>24,w>>>=V,b-=V,V=W>>>16&255,V&16){if(we=W&65535,V&=15,b<V&&(w+=Z[u++]<<b,b+=8,b<V&&(w+=Z[u++]<<b,b+=8)),we+=w&(1<<V)-1,we>c){s.msg="invalid distance too far back",a.mode=n;break e}if(w>>>=V,b-=V,V=l-m,we>V){if(V=we-V,V>x&&a.sane){s.msg="invalid distance too far back",a.mode=n;break e}if(ae=0,re=D,v===0){if(ae+=g-V,V<ue){ue-=V;do fe[l++]=D[ae++];while(--V);ae=l-we,re=fe}}else if(v<V){if(ae+=g+v-V,V-=v,V<ue){ue-=V;do fe[l++]=D[ae++];while(--V);if(ae=0,v<ue){V=v,ue-=V;do fe[l++]=D[ae++];while(--V);ae=l-we,re=fe}}}else if(ae+=v-V,V<ue){ue-=V;do fe[l++]=D[ae++];while(--V);ae=l-we,re=fe}for(;ue>2;)fe[l++]=re[ae++],fe[l++]=re[ae++],fe[l++]=re[ae++],ue-=3;ue&&(fe[l++]=re[ae++],ue>1&&(fe[l++]=re[ae++]))}else{ae=l-we;do fe[l++]=fe[ae++],fe[l++]=fe[ae++],fe[l++]=fe[ae++],ue-=3;while(ue>2);ue&&(fe[l++]=fe[ae++],ue>1&&(fe[l++]=fe[ae++]))}}else if((V&64)===0){W=L[(W&65535)+(w&(1<<V)-1)];continue n}else{s.msg="invalid distance code",a.mode=n;break e}break}}else if((V&64)===0){W=E[(W&65535)+(w&(1<<V)-1)];continue t}else if(V&32){a.mode=i;break e}else{s.msg="invalid literal/length code",a.mode=n;break e}break}}while(u<f&&l<p);ue=b>>3,u-=ue,b-=ue<<3,w&=(1<<b)-1,s.next_in=u,s.next_out=l,s.avail_in=u<f?5+(f-u):5-(u-f),s.avail_out=l<p?257+(p-l):257-(l-p),a.hold=w,a.bits=b}}}),Ud=Ae({"node_modules/jszip/node_modules/pako/lib/zlib/inftrees.js"(e,t){var n=gn(),i=15,r=852,s=592,o=0,a=1,u=2,f=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],m=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(g,x,v,D,w,b,E,L){var U=L.bits,M=0,W=0,V=0,ue=0,we=0,ae=0,re=0,Z=0,fe=0,$=0,te,H,A,I,j,z=null,Y=0,he,ve=new n.Buf16(i+1),ye=new n.Buf16(i+1),xe=null,ke=0,T,R,pe;for(M=0;M<=i;M++)ve[M]=0;for(W=0;W<D;W++)ve[x[v+W]]++;for(we=U,ue=i;ue>=1&&ve[ue]===0;ue--);if(we>ue&&(we=ue),ue===0)return w[b++]=1<<24|64<<16|0,w[b++]=1<<24|64<<16|0,L.bits=1,0;for(V=1;V<ue&&ve[V]===0;V++);for(we<V&&(we=V),Z=1,M=1;M<=i;M++)if(Z<<=1,Z-=ve[M],Z<0)return-1;if(Z>0&&(g===o||ue!==1))return-1;for(ye[1]=0,M=1;M<i;M++)ye[M+1]=ye[M]+ve[M];for(W=0;W<D;W++)x[v+W]!==0&&(E[ye[x[v+W]]++]=W);if(g===o?(z=xe=E,he=19):g===a?(z=f,Y-=257,xe=l,ke-=257,he=256):(z=m,xe=p,he=-1),$=0,W=0,M=V,j=b,ae=we,re=0,A=-1,fe=1<<we,I=fe-1,g===a&&fe>r||g===u&&fe>s)return 1;for(;;){T=M-re,E[W]<he?(R=0,pe=E[W]):E[W]>he?(R=xe[ke+E[W]],pe=z[Y+E[W]]):(R=96,pe=0),te=1<<M-re,H=1<<ae,V=H;do H-=te,w[j+($>>re)+H]=T<<24|R<<16|pe|0;while(H!==0);for(te=1<<M-1;$&te;)te>>=1;if(te!==0?($&=te-1,$+=te):$=0,W++,--ve[M]===0){if(M===ue)break;M=x[v+E[W]]}if(M>we&&($&I)!==A){for(re===0&&(re=we),j+=V,ae=M-re,Z=1<<ae;ae+re<ue&&(Z-=ve[ae+re],!(Z<=0));)ae++,Z<<=1;if(fe+=1<<ae,g===a&&fe>r||g===u&&fe>s)return 1;A=$&I,w[A]=we<<24|ae<<16|j-b|0}}return $!==0&&(w[j+$]=M-re<<24|64<<16|0),L.bits=we,0}}}),Od=Ae({"node_modules/jszip/node_modules/pako/lib/zlib/inflate.js"(e){var t=gn(),n=Xa(),i=Ja(),r=Md(),s=Ud(),o=0,a=1,u=2,f=4,l=5,m=6,p=0,c=1,g=2,x=-2,v=-3,D=-4,w=-5,b=8,E=1,L=2,U=3,M=4,W=5,V=6,ue=7,we=8,ae=9,re=10,Z=11,fe=12,$=13,te=14,H=15,A=16,I=17,j=18,z=19,Y=20,he=21,ve=22,ye=23,xe=24,ke=25,T=26,R=27,pe=28,S=29,P=30,N=31,K=32,le=852,q=592,Q=15,ne=Q;function ie(B){return(B>>>24&255)+(B>>>8&65280)+((B&65280)<<8)+((B&255)<<24)}function de(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new t.Buf16(320),this.work=new t.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Ee(B){var se;return!B||!B.state?x:(se=B.state,B.total_in=B.total_out=se.total=0,B.msg="",se.wrap&&(B.adler=se.wrap&1),se.mode=E,se.last=0,se.havedict=0,se.dmax=32768,se.head=null,se.hold=0,se.bits=0,se.lencode=se.lendyn=new t.Buf32(le),se.distcode=se.distdyn=new t.Buf32(q),se.sane=1,se.back=-1,p)}function be(B){var se;return!B||!B.state?x:(se=B.state,se.wsize=0,se.whave=0,se.wnext=0,Ee(B))}function Pe(B,se){var _,me;return!B||!B.state||(me=B.state,se<0?(_=0,se=-se):(_=(se>>4)+1,se<48&&(se&=15)),se&&(se<8||se>15))?x:(me.window!==null&&me.wbits!==se&&(me.window=null),me.wrap=_,me.wbits=se,be(B))}function Ie(B,se){var _,me;return B?(me=new de,B.state=me,me.window=null,_=Pe(B,se),_!==p&&(B.state=null),_):x}function Me(B){return Ie(B,ne)}var Ne=!0,Fe,We;function Ye(B){if(Ne){var se;for(Fe=new t.Buf32(512),We=new t.Buf32(32),se=0;se<144;)B.lens[se++]=8;for(;se<256;)B.lens[se++]=9;for(;se<280;)B.lens[se++]=7;for(;se<288;)B.lens[se++]=8;for(s(a,B.lens,0,288,Fe,0,B.work,{bits:9}),se=0;se<32;)B.lens[se++]=5;s(u,B.lens,0,32,We,0,B.work,{bits:5}),Ne=!1}B.lencode=Fe,B.lenbits=9,B.distcode=We,B.distbits=5}function at(B,se,_,me){var Oe,d=B.state;return d.window===null&&(d.wsize=1<<d.wbits,d.wnext=0,d.whave=0,d.window=new t.Buf8(d.wsize)),me>=d.wsize?(t.arraySet(d.window,se,_-d.wsize,d.wsize,0),d.wnext=0,d.whave=d.wsize):(Oe=d.wsize-d.wnext,Oe>me&&(Oe=me),t.arraySet(d.window,se,_-me,Oe,d.wnext),me-=Oe,me?(t.arraySet(d.window,se,_-me,me,0),d.wnext=me,d.whave=d.wsize):(d.wnext+=Oe,d.wnext===d.wsize&&(d.wnext=0),d.whave<d.wsize&&(d.whave+=Oe))),0}function k(B,se){var _,me,Oe,d,J,ee,y,O,G,Le,Ce,De,Ve,wt,Qe=0,$e,st,ft,dt,jt,zt,it,X,C=new t.Buf8(4),F,xt,Cs=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!B||!B.state||!B.output||!B.input&&B.avail_in!==0)return x;_=B.state,_.mode===fe&&(_.mode=$),J=B.next_out,Oe=B.output,y=B.avail_out,d=B.next_in,me=B.input,ee=B.avail_in,O=_.hold,G=_.bits,Le=ee,Ce=y,X=p;e:for(;;)switch(_.mode){case E:if(_.wrap===0){_.mode=$;break}for(;G<16;){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}if(_.wrap&2&&O===35615){_.check=0,C[0]=O&255,C[1]=O>>>8&255,_.check=i(_.check,C,2,0),O=0,G=0,_.mode=L;break}if(_.flags=0,_.head&&(_.head.done=!1),!(_.wrap&1)||(((O&255)<<8)+(O>>8))%31){B.msg="incorrect header check",_.mode=P;break}if((O&15)!==b){B.msg="unknown compression method",_.mode=P;break}if(O>>>=4,G-=4,it=(O&15)+8,_.wbits===0)_.wbits=it;else if(it>_.wbits){B.msg="invalid window size",_.mode=P;break}_.dmax=1<<it,B.adler=_.check=1,_.mode=O&512?re:fe,O=0,G=0;break;case L:for(;G<16;){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}if(_.flags=O,(_.flags&255)!==b){B.msg="unknown compression method",_.mode=P;break}if(_.flags&57344){B.msg="unknown header flags set",_.mode=P;break}_.head&&(_.head.text=O>>8&1),_.flags&512&&(C[0]=O&255,C[1]=O>>>8&255,_.check=i(_.check,C,2,0)),O=0,G=0,_.mode=U;case U:for(;G<32;){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}_.head&&(_.head.time=O),_.flags&512&&(C[0]=O&255,C[1]=O>>>8&255,C[2]=O>>>16&255,C[3]=O>>>24&255,_.check=i(_.check,C,4,0)),O=0,G=0,_.mode=M;case M:for(;G<16;){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}_.head&&(_.head.xflags=O&255,_.head.os=O>>8),_.flags&512&&(C[0]=O&255,C[1]=O>>>8&255,_.check=i(_.check,C,2,0)),O=0,G=0,_.mode=W;case W:if(_.flags&1024){for(;G<16;){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}_.length=O,_.head&&(_.head.extra_len=O),_.flags&512&&(C[0]=O&255,C[1]=O>>>8&255,_.check=i(_.check,C,2,0)),O=0,G=0}else _.head&&(_.head.extra=null);_.mode=V;case V:if(_.flags&1024&&(De=_.length,De>ee&&(De=ee),De&&(_.head&&(it=_.head.extra_len-_.length,_.head.extra||(_.head.extra=new Array(_.head.extra_len)),t.arraySet(_.head.extra,me,d,De,it)),_.flags&512&&(_.check=i(_.check,me,De,d)),ee-=De,d+=De,_.length-=De),_.length))break e;_.length=0,_.mode=ue;case ue:if(_.flags&2048){if(ee===0)break e;De=0;do it=me[d+De++],_.head&&it&&_.length<65536&&(_.head.name+=String.fromCharCode(it));while(it&&De<ee);if(_.flags&512&&(_.check=i(_.check,me,De,d)),ee-=De,d+=De,it)break e}else _.head&&(_.head.name=null);_.length=0,_.mode=we;case we:if(_.flags&4096){if(ee===0)break e;De=0;do it=me[d+De++],_.head&&it&&_.length<65536&&(_.head.comment+=String.fromCharCode(it));while(it&&De<ee);if(_.flags&512&&(_.check=i(_.check,me,De,d)),ee-=De,d+=De,it)break e}else _.head&&(_.head.comment=null);_.mode=ae;case ae:if(_.flags&512){for(;G<16;){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}if(O!==(_.check&65535)){B.msg="header crc mismatch",_.mode=P;break}O=0,G=0}_.head&&(_.head.hcrc=_.flags>>9&1,_.head.done=!0),B.adler=_.check=0,_.mode=fe;break;case re:for(;G<32;){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}B.adler=_.check=ie(O),O=0,G=0,_.mode=Z;case Z:if(_.havedict===0)return B.next_out=J,B.avail_out=y,B.next_in=d,B.avail_in=ee,_.hold=O,_.bits=G,g;B.adler=_.check=1,_.mode=fe;case fe:if(se===l||se===m)break e;case $:if(_.last){O>>>=G&7,G-=G&7,_.mode=R;break}for(;G<3;){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}switch(_.last=O&1,O>>>=1,G-=1,O&3){case 0:_.mode=te;break;case 1:if(Ye(_),_.mode=Y,se===m){O>>>=2,G-=2;break e}break;case 2:_.mode=I;break;case 3:B.msg="invalid block type",_.mode=P}O>>>=2,G-=2;break;case te:for(O>>>=G&7,G-=G&7;G<32;){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}if((O&65535)!==(O>>>16^65535)){B.msg="invalid stored block lengths",_.mode=P;break}if(_.length=O&65535,O=0,G=0,_.mode=H,se===m)break e;case H:_.mode=A;case A:if(De=_.length,De){if(De>ee&&(De=ee),De>y&&(De=y),De===0)break e;t.arraySet(Oe,me,d,De,J),ee-=De,d+=De,y-=De,J+=De,_.length-=De;break}_.mode=fe;break;case I:for(;G<14;){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}if(_.nlen=(O&31)+257,O>>>=5,G-=5,_.ndist=(O&31)+1,O>>>=5,G-=5,_.ncode=(O&15)+4,O>>>=4,G-=4,_.nlen>286||_.ndist>30){B.msg="too many length or distance symbols",_.mode=P;break}_.have=0,_.mode=j;case j:for(;_.have<_.ncode;){for(;G<3;){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}_.lens[Cs[_.have++]]=O&7,O>>>=3,G-=3}for(;_.have<19;)_.lens[Cs[_.have++]]=0;if(_.lencode=_.lendyn,_.lenbits=7,F={bits:_.lenbits},X=s(o,_.lens,0,19,_.lencode,0,_.work,F),_.lenbits=F.bits,X){B.msg="invalid code lengths set",_.mode=P;break}_.have=0,_.mode=z;case z:for(;_.have<_.nlen+_.ndist;){for(;Qe=_.lencode[O&(1<<_.lenbits)-1],$e=Qe>>>24,st=Qe>>>16&255,ft=Qe&65535,!($e<=G);){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}if(ft<16)O>>>=$e,G-=$e,_.lens[_.have++]=ft;else{if(ft===16){for(xt=$e+2;G<xt;){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}if(O>>>=$e,G-=$e,_.have===0){B.msg="invalid bit length repeat",_.mode=P;break}it=_.lens[_.have-1],De=3+(O&3),O>>>=2,G-=2}else if(ft===17){for(xt=$e+3;G<xt;){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}O>>>=$e,G-=$e,it=0,De=3+(O&7),O>>>=3,G-=3}else{for(xt=$e+7;G<xt;){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}O>>>=$e,G-=$e,it=0,De=11+(O&127),O>>>=7,G-=7}if(_.have+De>_.nlen+_.ndist){B.msg="invalid bit length repeat",_.mode=P;break}for(;De--;)_.lens[_.have++]=it}}if(_.mode===P)break;if(_.lens[256]===0){B.msg="invalid code -- missing end-of-block",_.mode=P;break}if(_.lenbits=9,F={bits:_.lenbits},X=s(a,_.lens,0,_.nlen,_.lencode,0,_.work,F),_.lenbits=F.bits,X){B.msg="invalid literal/lengths set",_.mode=P;break}if(_.distbits=6,_.distcode=_.distdyn,F={bits:_.distbits},X=s(u,_.lens,_.nlen,_.ndist,_.distcode,0,_.work,F),_.distbits=F.bits,X){B.msg="invalid distances set",_.mode=P;break}if(_.mode=Y,se===m)break e;case Y:_.mode=he;case he:if(ee>=6&&y>=258){B.next_out=J,B.avail_out=y,B.next_in=d,B.avail_in=ee,_.hold=O,_.bits=G,r(B,Ce),J=B.next_out,Oe=B.output,y=B.avail_out,d=B.next_in,me=B.input,ee=B.avail_in,O=_.hold,G=_.bits,_.mode===fe&&(_.back=-1);break}for(_.back=0;Qe=_.lencode[O&(1<<_.lenbits)-1],$e=Qe>>>24,st=Qe>>>16&255,ft=Qe&65535,!($e<=G);){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}if(st&&(st&240)===0){for(dt=$e,jt=st,zt=ft;Qe=_.lencode[zt+((O&(1<<dt+jt)-1)>>dt)],$e=Qe>>>24,st=Qe>>>16&255,ft=Qe&65535,!(dt+$e<=G);){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}O>>>=dt,G-=dt,_.back+=dt}if(O>>>=$e,G-=$e,_.back+=$e,_.length=ft,st===0){_.mode=T;break}if(st&32){_.back=-1,_.mode=fe;break}if(st&64){B.msg="invalid literal/length code",_.mode=P;break}_.extra=st&15,_.mode=ve;case ve:if(_.extra){for(xt=_.extra;G<xt;){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}_.length+=O&(1<<_.extra)-1,O>>>=_.extra,G-=_.extra,_.back+=_.extra}_.was=_.length,_.mode=ye;case ye:for(;Qe=_.distcode[O&(1<<_.distbits)-1],$e=Qe>>>24,st=Qe>>>16&255,ft=Qe&65535,!($e<=G);){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}if((st&240)===0){for(dt=$e,jt=st,zt=ft;Qe=_.distcode[zt+((O&(1<<dt+jt)-1)>>dt)],$e=Qe>>>24,st=Qe>>>16&255,ft=Qe&65535,!(dt+$e<=G);){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}O>>>=dt,G-=dt,_.back+=dt}if(O>>>=$e,G-=$e,_.back+=$e,st&64){B.msg="invalid distance code",_.mode=P;break}_.offset=ft,_.extra=st&15,_.mode=xe;case xe:if(_.extra){for(xt=_.extra;G<xt;){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}_.offset+=O&(1<<_.extra)-1,O>>>=_.extra,G-=_.extra,_.back+=_.extra}if(_.offset>_.dmax){B.msg="invalid distance too far back",_.mode=P;break}_.mode=ke;case ke:if(y===0)break e;if(De=Ce-y,_.offset>De){if(De=_.offset-De,De>_.whave&&_.sane){B.msg="invalid distance too far back",_.mode=P;break}De>_.wnext?(De-=_.wnext,Ve=_.wsize-De):Ve=_.wnext-De,De>_.length&&(De=_.length),wt=_.window}else wt=Oe,Ve=J-_.offset,De=_.length;De>y&&(De=y),y-=De,_.length-=De;do Oe[J++]=wt[Ve++];while(--De);_.length===0&&(_.mode=he);break;case T:if(y===0)break e;Oe[J++]=_.length,y--,_.mode=he;break;case R:if(_.wrap){for(;G<32;){if(ee===0)break e;ee--,O|=me[d++]<<G,G+=8}if(Ce-=y,B.total_out+=Ce,_.total+=Ce,Ce&&(B.adler=_.check=_.flags?i(_.check,Oe,Ce,J-Ce):n(_.check,Oe,Ce,J-Ce)),Ce=y,(_.flags?O:ie(O))!==_.check){B.msg="incorrect data check",_.mode=P;break}O=0,G=0}_.mode=pe;case pe:if(_.wrap&&_.flags){for(;G<32;){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}if(O!==(_.total&4294967295)){B.msg="incorrect length check",_.mode=P;break}O=0,G=0}_.mode=S;case S:X=c;break e;case P:X=v;break e;case N:return D;case K:default:return x}return B.next_out=J,B.avail_out=y,B.next_in=d,B.avail_in=ee,_.hold=O,_.bits=G,(_.wsize||Ce!==B.avail_out&&_.mode<P&&(_.mode<R||se!==f))&&at(B,B.output,B.next_out,Ce-B.avail_out),Le-=B.avail_in,Ce-=B.avail_out,B.total_in+=Le,B.total_out+=Ce,_.total+=Ce,_.wrap&&Ce&&(B.adler=_.check=_.flags?i(_.check,Oe,Ce,B.next_out-Ce):n(_.check,Oe,Ce,B.next_out-Ce)),B.data_type=_.bits+(_.last?64:0)+(_.mode===fe?128:0)+(_.mode===Y||_.mode===H?256:0),(Le===0&&Ce===0||se===f)&&X===p&&(X=w),X}function ge(B){if(!B||!B.state)return x;var se=B.state;return se.window&&(se.window=null),B.state=null,p}function _e(B,se){var _;return!B||!B.state||(_=B.state,(_.wrap&2)===0)?x:(_.head=se,se.done=!1,p)}function Se(B,se){var _=se.length,me,Oe,d;return!B||!B.state||(me=B.state,me.wrap!==0&&me.mode!==Z)?x:me.mode===Z&&(Oe=1,Oe=n(Oe,se,_,0),Oe!==me.check)?v:(d=at(B,se,_,_),d?(me.mode=N,D):(me.havedict=1,p))}e.inflateReset=be,e.inflateReset2=Pe,e.inflateResetKeep=Ee,e.inflateInit=Me,e.inflateInit2=Ie,e.inflate=k,e.inflateEnd=ge,e.inflateGetHeader=_e,e.inflateSetDictionary=Se,e.inflateInfo="pako inflate (from Nodeca project)"}}),tl=Ae({"node_modules/jszip/node_modules/pako/lib/zlib/constants.js"(e,t){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}}}),Bd=Ae({"node_modules/jszip/node_modules/pako/lib/zlib/gzheader.js"(e,t){function n(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}t.exports=n}}),Nd=Ae({"node_modules/jszip/node_modules/pako/lib/inflate.js"(e){var t=Od(),n=gn(),i=Qa(),r=tl(),s=ws(),o=el(),a=Bd(),u=Object.prototype.toString;function f(p){if(!(this instanceof f))return new f(p);this.options=n.assign({chunkSize:16384,windowBits:0,to:""},p||{});var c=this.options;c.raw&&c.windowBits>=0&&c.windowBits<16&&(c.windowBits=-c.windowBits,c.windowBits===0&&(c.windowBits=-15)),c.windowBits>=0&&c.windowBits<16&&!(p&&p.windowBits)&&(c.windowBits+=32),c.windowBits>15&&c.windowBits<48&&(c.windowBits&15)===0&&(c.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var g=t.inflateInit2(this.strm,c.windowBits);if(g!==r.Z_OK)throw new Error(s[g]);if(this.header=new a,t.inflateGetHeader(this.strm,this.header),c.dictionary&&(typeof c.dictionary=="string"?c.dictionary=i.string2buf(c.dictionary):u.call(c.dictionary)==="[object ArrayBuffer]"&&(c.dictionary=new Uint8Array(c.dictionary)),c.raw&&(g=t.inflateSetDictionary(this.strm,c.dictionary),g!==r.Z_OK)))throw new Error(s[g])}f.prototype.push=function(p,c){var g=this.strm,x=this.options.chunkSize,v=this.options.dictionary,D,w,b,E,L,U=!1;if(this.ended)return!1;w=c===~~c?c:c===!0?r.Z_FINISH:r.Z_NO_FLUSH,typeof p=="string"?g.input=i.binstring2buf(p):u.call(p)==="[object ArrayBuffer]"?g.input=new Uint8Array(p):g.input=p,g.next_in=0,g.avail_in=g.input.length;do{if(g.avail_out===0&&(g.output=new n.Buf8(x),g.next_out=0,g.avail_out=x),D=t.inflate(g,r.Z_NO_FLUSH),D===r.Z_NEED_DICT&&v&&(D=t.inflateSetDictionary(this.strm,v)),D===r.Z_BUF_ERROR&&U===!0&&(D=r.Z_OK,U=!1),D!==r.Z_STREAM_END&&D!==r.Z_OK)return this.onEnd(D),this.ended=!0,!1;g.next_out&&(g.avail_out===0||D===r.Z_STREAM_END||g.avail_in===0&&(w===r.Z_FINISH||w===r.Z_SYNC_FLUSH))&&(this.options.to==="string"?(b=i.utf8border(g.output,g.next_out),E=g.next_out-b,L=i.buf2string(g.output,b),g.next_out=E,g.avail_out=x-E,E&&n.arraySet(g.output,g.output,b,E,0),this.onData(L)):this.onData(n.shrinkBuf(g.output,g.next_out))),g.avail_in===0&&g.avail_out===0&&(U=!0)}while((g.avail_in>0||g.avail_out===0)&&D!==r.Z_STREAM_END);return D===r.Z_STREAM_END&&(w=r.Z_FINISH),w===r.Z_FINISH?(D=t.inflateEnd(this.strm),this.onEnd(D),this.ended=!0,D===r.Z_OK):(w===r.Z_SYNC_FLUSH&&(this.onEnd(r.Z_OK),g.avail_out=0),!0)},f.prototype.onData=function(p){this.chunks.push(p)},f.prototype.onEnd=function(p){p===r.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg};function l(p,c){var g=new f(c);if(g.push(p,!0),g.err)throw g.msg||s[g.err];return g.result}function m(p,c){return c=c||{},c.raw=!0,l(p,c)}e.Inflate=f,e.inflate=l,e.inflateRaw=m,e.ungzip=l}}),Fd=Ae({"node_modules/jszip/node_modules/pako/index.js"(e,t){var n=gn().assign,i=Ld(),r=Nd(),s=tl(),o={};n(o,i,r,s),t.exports=o}}),jd=Ae({"node_modules/jszip/lib/flate.js"(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",n=Fd(),i=ut(),r=Dt(),s=t?"uint8array":"array";e.magic="\b\0";function o(a,u){r.call(this,"FlateWorker/"+a),this._pako=null,this._pakoAction=a,this._pakoOptions=u,this.meta={}}i.inherits(o,r),o.prototype.processChunk=function(a){this.meta=a.meta,this._pako===null&&this._createPako(),this._pako.push(i.transformTo(s,a.data),!1)},o.prototype.flush=function(){r.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},o.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this._pako=null},o.prototype._createPako=function(){this._pako=new n[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var a=this;this._pako.onData=function(u){a.push({data:u,meta:a.meta})}},e.compressWorker=function(a){return new o("Deflate",a)},e.uncompressWorker=function(){return new o("Inflate",{})}}}),nl=Ae({"node_modules/jszip/lib/compressions.js"(e){var t=Dt();e.STORE={magic:"\0\0",compressWorker:function(){return new t("STORE compression")},uncompressWorker:function(){return new t("STORE decompression")}},e.DEFLATE=jd()}}),il=Ae({"node_modules/jszip/lib/signature.js"(e){e.LOCAL_FILE_HEADER="PK",e.CENTRAL_FILE_HEADER="PK",e.CENTRAL_DIRECTORY_END="PK",e.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",e.ZIP64_CENTRAL_DIRECTORY_END="PK",e.DATA_DESCRIPTOR="PK\x07\b"}}),zd=Ae({"node_modules/jszip/lib/generate/ZipFileWorker.js"(e,t){var n=ut(),i=Dt(),r=wi(),s=bs(),o=il(),a=function(g,x){var v="",D;for(D=0;D<x;D++)v+=String.fromCharCode(g&255),g=g>>>8;return v},u=function(g,x){var v=g;return g||(v=x?16893:33204),(v&65535)<<16},f=function(g){return(g||0)&63},l=function(g,x,v,D,w,b){var E=g.file,L=g.compression,U=b!==r.utf8encode,M=n.transformTo("string",b(E.name)),W=n.transformTo("string",r.utf8encode(E.name)),V=E.comment,ue=n.transformTo("string",b(V)),we=n.transformTo("string",r.utf8encode(V)),ae=W.length!==E.name.length,re=we.length!==V.length,Z,fe,$="",te="",H="",A=E.dir,I=E.date,j={crc32:0,compressedSize:0,uncompressedSize:0};(!x||v)&&(j.crc32=g.crc32,j.compressedSize=g.compressedSize,j.uncompressedSize=g.uncompressedSize);var z=0;x&&(z|=8),!U&&(ae||re)&&(z|=2048);var Y=0,he=0;A&&(Y|=16),w==="UNIX"?(he=798,Y|=u(E.unixPermissions,A)):(he=20,Y|=f(E.dosPermissions)),Z=I.getUTCHours(),Z=Z<<6,Z=Z|I.getUTCMinutes(),Z=Z<<5,Z=Z|I.getUTCSeconds()/2,fe=I.getUTCFullYear()-1980,fe=fe<<4,fe=fe|I.getUTCMonth()+1,fe=fe<<5,fe=fe|I.getUTCDate(),ae&&(te=a(1,1)+a(s(M),4)+W,$+="up"+a(te.length,2)+te),re&&(H=a(1,1)+a(s(ue),4)+we,$+="uc"+a(H.length,2)+H);var ve="";ve+=`
\0`,ve+=a(z,2),ve+=L.magic,ve+=a(Z,2),ve+=a(fe,2),ve+=a(j.crc32,4),ve+=a(j.compressedSize,4),ve+=a(j.uncompressedSize,4),ve+=a(M.length,2),ve+=a($.length,2);var ye=o.LOCAL_FILE_HEADER+ve+M+$,xe=o.CENTRAL_FILE_HEADER+a(he,2)+ve+a(ue.length,2)+"\0\0\0\0"+a(Y,4)+a(D,4)+M+$+ue;return{fileRecord:ye,dirRecord:xe}},m=function(g,x,v,D,w){var b="",E=n.transformTo("string",w(D));return b=o.CENTRAL_DIRECTORY_END+"\0\0\0\0"+a(g,2)+a(g,2)+a(x,4)+a(v,4)+a(E.length,2)+E,b},p=function(g){var x="";return x=o.DATA_DESCRIPTOR+a(g.crc32,4)+a(g.compressedSize,4)+a(g.uncompressedSize,4),x};function c(g,x,v,D){i.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=x,this.zipPlatform=v,this.encodeFileName=D,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}n.inherits(c,i),c.prototype.push=function(g){var x=g.meta.percent||0,v=this.entriesCount,D=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,i.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:v?(x+100*(v-D-1))/v:100}}))},c.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var x=this.streamFiles&&!g.file.dir;if(x){var v=l(g,x,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:v.fileRecord,meta:{percent:0}})}else this.accumulate=!0},c.prototype.closedSource=function(g){this.accumulate=!1;var x=this.streamFiles&&!g.file.dir,v=l(g,x,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(v.dirRecord),x)this.push({data:p(g),meta:{percent:100}});else for(this.push({data:v.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},c.prototype.flush=function(){for(var g=this.bytesWritten,x=0;x<this.dirRecords.length;x++)this.push({data:this.dirRecords[x],meta:{percent:100}});var v=this.bytesWritten-g,D=m(this.dirRecords.length,v,g,this.zipComment,this.encodeFileName);this.push({data:D,meta:{percent:100}})},c.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},c.prototype.registerPrevious=function(g){this._sources.push(g);var x=this;return g.on("data",function(v){x.processChunk(v)}),g.on("end",function(){x.closedSource(x.previous.streamInfo),x._sources.length?x.prepareNextSource():x.end()}),g.on("error",function(v){x.error(v)}),this},c.prototype.resume=function(){if(!i.prototype.resume.call(this))return!1;if(!this.previous&&this._sources.length)return this.prepareNextSource(),!0;if(!this.previous&&!this._sources.length&&!this.generatedError)return this.end(),!0},c.prototype.error=function(g){var x=this._sources;if(!i.prototype.error.call(this,g))return!1;for(var v=0;v<x.length;v++)try{x[v].error(g)}catch{}return!0},c.prototype.lock=function(){i.prototype.lock.call(this);for(var g=this._sources,x=0;x<g.length;x++)g[x].lock()},t.exports=c}}),Hd=Ae({"node_modules/jszip/lib/generate/index.js"(e){var t=nl(),n=zd(),i=function(r,s){var o=r||s,a=t[o];if(!a)throw new Error(o+" is not a valid compression method !");return a};e.generateWorker=function(r,s,o){var a=new n(s.streamFiles,o,s.platform,s.encodeFileName),u=0;try{r.forEach(function(f,l){u++;var m=i(l.options.compression,s.compression),p=l.options.compressionOptions||s.compressionOptions||{},c=l.dir,g=l.date;l._compressWorker(m,p).withStreamInfo("file",{name:f,dir:c,date:g,comment:l.comment||"",unixPermissions:l.unixPermissions,dosPermissions:l.dosPermissions}).pipe(a)}),a.entriesCount=u}catch(f){a.error(f)}return a}}}),Vd=Ae({"node_modules/jszip/lib/nodejs/NodejsStreamInputAdapter.js"(e,t){var n=ut(),i=Dt();function r(s,o){i.call(this,"Nodejs stream input adapter for "+s),this._upstreamEnded=!1,this._bindStream(o)}n.inherits(r,i),r.prototype._bindStream=function(s){var o=this;this._stream=s,s.pause(),s.on("data",function(a){o.push({data:a,meta:{percent:0}})}).on("error",function(a){o.isPaused?this.generatedError=a:o.error(a)}).on("end",function(){o.isPaused?o._upstreamEnded=!0:o.end()})},r.prototype.pause=function(){return i.prototype.pause.call(this)?(this._stream.pause(),!0):!1},r.prototype.resume=function(){return i.prototype.resume.call(this)?(this._upstreamEnded?this.end():this._stream.resume(),!0):!1},t.exports=r}}),$d=Ae({"node_modules/jszip/lib/object.js"(e,t){var n=wi(),i=ut(),r=Dt(),s=Ga(),o=Za(),a=ys(),u=Dd(),f=Hd(),l=pr(),m=Vd(),p=function(w,b,E){var L=i.getTypeOf(b),U,M=i.extend(E||{},o);M.date=M.date||new Date,M.compression!==null&&(M.compression=M.compression.toUpperCase()),typeof M.unixPermissions=="string"&&(M.unixPermissions=parseInt(M.unixPermissions,8)),M.unixPermissions&&M.unixPermissions&16384&&(M.dir=!0),M.dosPermissions&&M.dosPermissions&16&&(M.dir=!0),M.dir&&(w=g(w)),M.createFolders&&(U=c(w))&&x.call(this,U,!0);var W=L==="string"&&M.binary===!1&&M.base64===!1;(!E||typeof E.binary>"u")&&(M.binary=!W);var V=b instanceof a&&b.uncompressedSize===0;(V||M.dir||!b||b.length===0)&&(M.base64=!1,M.binary=!0,b="",M.compression="STORE",L="string");var ue=null;b instanceof a||b instanceof r?ue=b:l.isNode&&l.isStream(b)?ue=new m(w,b):ue=i.prepareContent(w,b,M.binary,M.optimizedBinaryString,M.base64);var we=new u(w,ue,M);this.files[w]=we},c=function(w){w.slice(-1)==="/"&&(w=w.substring(0,w.length-1));var b=w.lastIndexOf("/");return b>0?w.substring(0,b):""},g=function(w){return w.slice(-1)!=="/"&&(w+="/"),w},x=function(w,b){return b=typeof b<"u"?b:o.createFolders,w=g(w),this.files[w]||p.call(this,w,null,{dir:!0,createFolders:b}),this.files[w]};function v(w){return Object.prototype.toString.call(w)==="[object RegExp]"}var D={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(w){var b,E,L;for(b in this.files)L=this.files[b],E=b.slice(this.root.length,b.length),E&&b.slice(0,this.root.length)===this.root&&w(E,L)},filter:function(w){var b=[];return this.forEach(function(E,L){w(E,L)&&b.push(L)}),b},file:function(w,b,E){if(arguments.length===1)if(v(w)){var L=w;return this.filter(function(M,W){return!W.dir&&L.test(M)})}else{var U=this.files[this.root+w];return U&&!U.dir?U:null}else w=this.root+w,p.call(this,w,b,E);return this},folder:function(w){if(!w)return this;if(v(w))return this.filter(function(U,M){return M.dir&&w.test(U)});var b=this.root+w,E=x.call(this,b),L=this.clone();return L.root=E.name,L},remove:function(w){w=this.root+w;var b=this.files[w];if(b||(w.slice(-1)!=="/"&&(w+="/"),b=this.files[w]),b&&!b.dir)delete this.files[w];else for(var E=this.filter(function(U,M){return M.name.slice(0,w.length)===w}),L=0;L<E.length;L++)delete this.files[E[L].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(w){var b,E={};try{if(E=i.extend(w||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:n.utf8encode}),E.type=E.type.toLowerCase(),E.compression=E.compression.toUpperCase(),E.type==="binarystring"&&(E.type="string"),!E.type)throw new Error("No output type specified.");i.checkSupport(E.type),(E.platform==="darwin"||E.platform==="freebsd"||E.platform==="linux"||E.platform==="sunos")&&(E.platform="UNIX"),E.platform==="win32"&&(E.platform="DOS");var L=E.comment||this.comment||"";b=f.generateWorker(this,E,L)}catch(U){b=new r("error"),b.error(U)}return new s(b,E.type||"string",E.mimeType)},generateAsync:function(w,b){return this.generateInternalStream(w).accumulate(b)},generateNodeStream:function(w,b){return w=w||{},w.type||(w.type="nodebuffer"),this.generateInternalStream(w).toNodejsStream(b)}};t.exports=D}}),rl=Ae({"node_modules/jszip/lib/reader/DataReader.js"(e,t){var n=ut();function i(r){this.data=r,this.length=r.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(r){this.checkIndex(this.index+r)},checkIndex:function(r){if(this.length<this.zero+r||r<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+r+"). Corrupted zip ?")},setIndex:function(r){this.checkIndex(r),this.index=r},skip:function(r){this.setIndex(this.index+r)},byteAt:function(){},readInt:function(r){var s=0,o;for(this.checkOffset(r),o=this.index+r-1;o>=this.index;o--)s=(s<<8)+this.byteAt(o);return this.index+=r,s},readString:function(r){return n.transformTo("string",this.readData(r))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var r=this.readInt(4);return new Date(Date.UTC((r>>25&127)+1980,(r>>21&15)-1,r>>16&31,r>>11&31,r>>5&63,(r&31)<<1))}},t.exports=i}}),sl=Ae({"node_modules/jszip/lib/reader/ArrayReader.js"(e,t){var n=rl(),i=ut();function r(s){n.call(this,s);for(var o=0;o<this.data.length;o++)s[o]=s[o]&255}i.inherits(r,n),r.prototype.byteAt=function(s){return this.data[this.zero+s]},r.prototype.lastIndexOfSignature=function(s){for(var o=s.charCodeAt(0),a=s.charCodeAt(1),u=s.charCodeAt(2),f=s.charCodeAt(3),l=this.length-4;l>=0;--l)if(this.data[l]===o&&this.data[l+1]===a&&this.data[l+2]===u&&this.data[l+3]===f)return l-this.zero;return-1},r.prototype.readAndCheckSignature=function(s){var o=s.charCodeAt(0),a=s.charCodeAt(1),u=s.charCodeAt(2),f=s.charCodeAt(3),l=this.readData(4);return o===l[0]&&a===l[1]&&u===l[2]&&f===l[3]},r.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var o=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,o},t.exports=r}}),qd=Ae({"node_modules/jszip/lib/reader/StringReader.js"(e,t){var n=rl(),i=ut();function r(s){n.call(this,s)}i.inherits(r,n),r.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},r.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},r.prototype.readAndCheckSignature=function(s){var o=this.readData(4);return s===o},r.prototype.readData=function(s){this.checkOffset(s);var o=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,o},t.exports=r}}),ol=Ae({"node_modules/jszip/lib/reader/Uint8ArrayReader.js"(e,t){var n=sl(),i=ut();function r(s){n.call(this,s)}i.inherits(r,n),r.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var o=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,o},t.exports=r}}),Wd=Ae({"node_modules/jszip/lib/reader/NodeBufferReader.js"(e,t){var n=ol(),i=ut();function r(s){n.call(this,s)}i.inherits(r,n),r.prototype.readData=function(s){this.checkOffset(s);var o=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,o},t.exports=r}}),al=Ae({"node_modules/jszip/lib/reader/readerFor.js"(e,t){var n=ut(),i=pn(),r=sl(),s=qd(),o=Wd(),a=ol();t.exports=function(u){var f=n.getTypeOf(u);return n.checkSupport(f),f==="string"&&!i.uint8array?new s(u):f==="nodebuffer"?new o(u):i.uint8array?new a(n.transformTo("uint8array",u)):new r(n.transformTo("array",u))}}}),Gd=Ae({"node_modules/jszip/lib/zipEntry.js"(e,t){var n=al(),i=ut(),r=ys(),s=bs(),o=wi(),a=nl(),u=pn(),f=0,l=3,m=function(c){for(var g in a)if(Object.prototype.hasOwnProperty.call(a,g)&&a[g].magic===c)return a[g];return null};function p(c,g){this.options=c,this.loadOptions=g}p.prototype={isEncrypted:function(){return(this.bitFlag&1)===1},useUTF8:function(){return(this.bitFlag&2048)===2048},readLocalPart:function(c){var g,x;if(c.skip(22),this.fileNameLength=c.readInt(2),x=c.readInt(2),this.fileName=c.readData(this.fileNameLength),c.skip(x),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(g=m(this.compressionMethod),g===null)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new r(this.compressedSize,this.uncompressedSize,this.crc32,g,c.readData(this.compressedSize))},readCentralPart:function(c){this.versionMadeBy=c.readInt(2),c.skip(2),this.bitFlag=c.readInt(2),this.compressionMethod=c.readString(2),this.date=c.readDate(),this.crc32=c.readInt(4),this.compressedSize=c.readInt(4),this.uncompressedSize=c.readInt(4);var g=c.readInt(2);if(this.extraFieldsLength=c.readInt(2),this.fileCommentLength=c.readInt(2),this.diskNumberStart=c.readInt(2),this.internalFileAttributes=c.readInt(2),this.externalFileAttributes=c.readInt(4),this.localHeaderOffset=c.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");c.skip(g),this.readExtraFields(c),this.parseZIP64ExtraField(c),this.fileComment=c.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var c=this.versionMadeBy>>8;this.dir=!!(this.externalFileAttributes&16),c===f&&(this.dosPermissions=this.externalFileAttributes&63),c===l&&(this.unixPermissions=this.externalFileAttributes>>16&65535),!this.dir&&this.fileNameStr.slice(-1)==="/"&&(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var c=n(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=c.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=c.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=c.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=c.readInt(4))}},readExtraFields:function(c){var g=c.index+this.extraFieldsLength,x,v,D;for(this.extraFields||(this.extraFields={});c.index+4<g;)x=c.readInt(2),v=c.readInt(2),D=c.readData(v),this.extraFields[x]={id:x,length:v,value:D};c.setIndex(g)},handleUTF8:function(){var c=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=o.utf8decode(this.fileName),this.fileCommentStr=o.utf8decode(this.fileComment);else{var g=this.findExtraFieldUnicodePath();if(g!==null)this.fileNameStr=g;else{var x=i.transformTo(c,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(x)}var v=this.findExtraFieldUnicodeComment();if(v!==null)this.fileCommentStr=v;else{var D=i.transformTo(c,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(D)}}},findExtraFieldUnicodePath:function(){var c=this.extraFields[28789];if(c){var g=n(c.value);return g.readInt(1)!==1||s(this.fileName)!==g.readInt(4)?null:o.utf8decode(g.readData(c.length-5))}return null},findExtraFieldUnicodeComment:function(){var c=this.extraFields[25461];if(c){var g=n(c.value);return g.readInt(1)!==1||s(this.fileComment)!==g.readInt(4)?null:o.utf8decode(g.readData(c.length-5))}return null}},t.exports=p}}),Zd=Ae({"node_modules/jszip/lib/zipEntries.js"(e,t){var n=al(),i=ut(),r=il(),s=Gd(),o=pn();function a(u){this.files=[],this.loadOptions=u}a.prototype={checkSignature:function(u){if(!this.reader.readAndCheckSignature(u)){this.reader.index-=4;var f=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(f)+", expected "+i.pretty(u)+")")}},isSignature:function(u,f){var l=this.reader.index;this.reader.setIndex(u);var m=this.reader.readString(4),p=m===f;return this.reader.setIndex(l),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var u=this.reader.readData(this.zipCommentLength),f=o.uint8array?"uint8array":"array",l=i.transformTo(f,u);this.zipComment=this.loadOptions.decodeFileName(l)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var u=this.zip64EndOfCentralSize-44,f=0,l,m,p;f<u;)l=this.reader.readInt(2),m=this.reader.readInt(4),p=this.reader.readData(m),this.zip64ExtensibleData[l]={id:l,length:m,value:p}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var u,f;for(u=0;u<this.files.length;u++)f=this.files[u],this.reader.setIndex(f.localHeaderOffset),this.checkSignature(r.LOCAL_FILE_HEADER),f.readLocalPart(this.reader),f.handleUTF8(),f.processAttributes()},readCentralDir:function(){var u;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(r.CENTRAL_FILE_HEADER);)u=new s({zip64:this.zip64},this.loadOptions),u.readCentralPart(this.reader),this.files.push(u);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var u=this.reader.lastIndexOfSignature(r.CENTRAL_DIRECTORY_END);if(u<0){var f=!this.isSignature(0,r.LOCAL_FILE_HEADER);throw f?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory")}this.reader.setIndex(u);var l=u;if(this.checkSignature(r.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,u=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR),u<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(u),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,r.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var p=l-m;if(p>0)this.isSignature(l,r.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(u){this.reader=n(u)},load:function(u){this.prepareReader(u),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=a}}),Kd=Ae({"node_modules/jszip/lib/load.js"(e,t){var n=ut(),i=yi(),r=wi(),s=Zd(),o=Ya(),a=pr();function u(f){return new i.Promise(function(l,m){var p=f.decompressed.getContentWorker().pipe(new o);p.on("error",function(c){m(c)}).on("end",function(){p.streamInfo.crc32!==f.decompressed.crc32?m(new Error("Corrupted zip : CRC32 mismatch")):l()}).resume()})}t.exports=function(f,l){var m=this;return l=n.extend(l||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:r.utf8decode}),a.isNode&&a.isStream(f)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",f,!0,l.optimizedBinaryString,l.base64).then(function(p){var c=new s(l);return c.load(p),c}).then(function(c){var g=[i.Promise.resolve(c)],x=c.files;if(l.checkCRC32)for(var v=0;v<x.length;v++)g.push(u(x[v]));return i.Promise.all(g)}).then(function(c){for(var g=c.shift(),x=g.files,v=0;v<x.length;v++){var D=x[v],w=D.fileNameStr,b=n.resolve(D.fileNameStr);m.file(b,D.decompressed,{binary:!0,optimizedBinaryString:!0,date:D.date,dir:D.dir,comment:D.fileCommentStr.length?D.fileCommentStr:null,unixPermissions:D.unixPermissions,dosPermissions:D.dosPermissions,createFolders:l.createFolders}),D.dir||(m.file(b).unsafeOriginalName=w)}return g.zipComment.length&&(m.comment=g.zipComment),m})}}}),Yd=Ae({"node_modules/jszip/lib/index.js"(e,t){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var i=new n;for(var r in this)typeof this[r]!="function"&&(i[r]=this[r]);return i}}n.prototype=$d(),n.prototype.loadAsync=Kd(),n.support=pn(),n.defaults=Za(),n.version="3.10.1",n.loadAsync=function(i,r){return new n().loadAsync(i,r)},n.external=yi(),t.exports=n}}),Xd=Ae({"node_modules/crc-32/crc32.js"(e){(function(t){typeof DO_NOT_EXPORT_CRC>"u"?typeof e=="object"?t(e):typeof define=="function"&&define.amd?define(function(){var n={};return t(n),n}):t({}):t({})})(function(t){t.version="0.3.0";function n(){for(var f=0,l=new Array(256),m=0;m!=256;++m)f=m,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,f=f&1?-306674912^f>>>1:f>>>1,l[m]=f;return typeof Int32Array<"u"?new Int32Array(l):l}var i=n(),r=typeof Buffer<"u";function s(f){if(f.length>32768&&r)return a(new Buffer(f));for(var l=-1,m=f.length-1,p=0;p<m;)l=i[(l^f.charCodeAt(p++))&255]^l>>>8,l=i[(l^f.charCodeAt(p++))&255]^l>>>8;return p===m&&(l=l>>>8^i[(l^f.charCodeAt(p))&255]),l^-1}function o(f){if(f.length>1e4)return a(f);for(var l=-1,m=0,p=f.length-3;m<p;)l=l>>>8^i[(l^f[m++])&255],l=l>>>8^i[(l^f[m++])&255],l=l>>>8^i[(l^f[m++])&255],l=l>>>8^i[(l^f[m++])&255];for(;m<p+3;)l=l>>>8^i[(l^f[m++])&255];return l^-1}function a(f){for(var l=-1,m=0,p=f.length-7;m<p;)l=l>>>8^i[(l^f[m++])&255],l=l>>>8^i[(l^f[m++])&255],l=l>>>8^i[(l^f[m++])&255],l=l>>>8^i[(l^f[m++])&255],l=l>>>8^i[(l^f[m++])&255],l=l>>>8^i[(l^f[m++])&255],l=l>>>8^i[(l^f[m++])&255],l=l>>>8^i[(l^f[m++])&255];for(;m<p+7;)l=l>>>8^i[(l^f[m++])&255];return l^-1}function u(f){for(var l=-1,m=0,p=f.length,c,g;m<p;)c=f.charCodeAt(m++),c<128?l=l>>>8^i[(l^c)&255]:c<2048?(l=l>>>8^i[(l^(192|c>>6&31))&255],l=l>>>8^i[(l^(128|c&63))&255]):c>=55296&&c<57344?(c=(c&1023)+64,g=f.charCodeAt(m++)&1023,l=l>>>8^i[(l^(240|c>>8&7))&255],l=l>>>8^i[(l^(128|c>>2&63))&255],l=l>>>8^i[(l^(128|g>>6&15|c&3))&255],l=l>>>8^i[(l^(128|g&63))&255]):(l=l>>>8^i[(l^(224|c>>12&15))&255],l=l>>>8^i[(l^(128|c>>6&63))&255],l=l>>>8^i[(l^(128|c&63))&255]);return l^-1}t.table=i,t.bstr=s,t.buf=o,t.str=u})}}),Jd=Ae({"node_modules/png-chunks-extract/index.js"(e,t){var n=Xd();t.exports=o;var i=new Uint8Array(4),r=new Int32Array(i.buffer),s=new Uint32Array(i.buffer);function o(a){if(a[0]!==137)throw new Error("Invalid .png file header");if(a[1]!==80)throw new Error("Invalid .png file header");if(a[2]!==78)throw new Error("Invalid .png file header");if(a[3]!==71)throw new Error("Invalid .png file header");if(a[4]!==13)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(a[5]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(a[6]!==26)throw new Error("Invalid .png file header");if(a[7]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");for(var u=!1,f=[],l=8;l<a.length;){i[3]=a[l++],i[2]=a[l++],i[1]=a[l++],i[0]=a[l++];var m=s[0]+4,p=new Uint8Array(m);p[0]=a[l++],p[1]=a[l++],p[2]=a[l++],p[3]=a[l++];var c=String.fromCharCode(p[0])+String.fromCharCode(p[1])+String.fromCharCode(p[2])+String.fromCharCode(p[3]);if(!f.length&&c!=="IHDR")throw new Error("IHDR header missing");if(c==="IEND"){u=!0,f.push({name:c,data:new Uint8Array(0)});break}for(var g=4;g<m;g++)p[g]=a[l++];i[3]=a[l++],i[2]=a[l++],i[1]=a[l++],i[0]=a[l++];var x=r[0],v=n.buf(p);if(v!==x)throw new Error("CRC values for "+c+" header do not match, PNG file is likely corrupted");var D=new Uint8Array(p.buffer.slice(4));f.push({name:c,data:D})}if(!u)throw new Error(".png file ended prematurely: no IEND header was found");return f}}}),Qd=Ae({"node_modules/png-chunk-text/encode.js"(e,t){t.exports=n;function n(i,r){if(i=String(i),r=String(r),!/^[\x00-\xFF]+$/.test(i)||!/^[\x00-\xFF]+$/.test(r))throw new Error("Only Latin-1 characters are permitted in PNG tEXt chunks. You might want to consider base64 encoding and/or zEXt compression");if(i.length>=80)throw new Error('Keyword "'+i+'" is longer than the 79-character limit imposed by the PNG specification');for(var s=i.length+r.length+1,o=new Uint8Array(s),a=0,u,f=0;f<i.length;f++){if(!(u=i.charCodeAt(f)))throw new Error("0x00 character is not permitted in tEXt keywords");o[a++]=u}o[a++]=0;for(var l=0;l<r.length;l++){if(!(u=r.charCodeAt(l)))throw new Error("0x00 character is not permitted in tEXt content");o[a++]=u}return{name:"tEXt",data:o}}}}),ec=Ae({"node_modules/png-chunk-text/decode.js"(e,t){t.exports=n;function n(i){i.data&&i.name&&(i=i.data);for(var r=!0,s="",o="",a=0;a<i.length;a++){var u=i[a];if(r)u?o+=String.fromCharCode(u):r=!1;else if(u)s+=String.fromCharCode(u);else throw new Error("Invalid NULL character found. 0x00 character is not permitted in tEXt content")}return{keyword:o,text:s}}}}),tc=Ae({"node_modules/png-chunk-text/index.js"(e){e.encode=Qd(),e.decode=ec()}}),nc=_s(Yd()),ic={Accept:"*/*","Accept-Language":"en-US,en;q=0.5","Accept-Encoding":"gzip, deflate, br","Content-Type":"application/json",Host:"image.novelai.net",Origin:"https://novelai.net",Referer:"https://novelai.net",DNT:"1","Sec-GPC":"1",Connection:"keep-alive","Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"cors","Sec-Fetch-Site":"same-site",Priority:"u=0",Pragma:"no-cache","Cache-Control":"no-cache",TE:"trailers","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:138.0) Gecko/20100101 Firefox/138.0"},ll=(e=>(e.WEB="https://image.novelai.net",e.API="https://api.novelai.net",e))(ll||{}),ul=(e=>(e.V3="nai-diffusion-3",e.V3_INP="nai-diffusion-3-inpainting",e.V4="nai-diffusion-4-full",e.V4_INP="nai-diffusion-4-full-inpainting",e.V4_CUR="nai-diffusion-4-curated-preview",e.V4_CUR_INP="nai-diffusion-4-curated-inpainting",e.V4_5="nai-diffusion-4-5-full",e.V4_5_INP="nai-diffusion-4-5-full-inpainting",e.V4_5_CUR="nai-diffusion-4-5-curated",e.V4_5_CUR_INP="nai-diffusion-4-5-curated-inpainting",e.FURRY="nai-diffusion-furry-3",e.FURRY_INP="nai-diffusion-furry-3-inpainting",e))(ul||{});function Hr(e){return e==="nai-diffusion-4-full"||e==="nai-diffusion-4-full-inpainting"||e==="nai-diffusion-4-curated-preview"||e==="nai-diffusion-4-curated-inpainting"||e==="nai-diffusion-4-5-full"||e==="nai-diffusion-4-5-full-inpainting"||e==="nai-diffusion-4-5-curated"||e==="nai-diffusion-4-5-curated-inpainting"}var fl=(e=>(e.PALETTESWAP="hed",e.FORMLOCK="midas",e.SCRIBBLER="fake_scribble",e.BUILDINGCONTROL="mlsd",e.LANDSCAPER="uniformer",e))(fl||{}),dl=(e=>(e.GENERATE="generate",e.INPAINT="infill",e.IMG2IMG="img2img",e))(dl||{}),cl=(e=>(e.SMALL_PORTRAIT="small_portrait",e.SMALL_LANDSCAPE="small_landscape",e.SMALL_SQUARE="small_square",e.NORMAL_PORTRAIT="normal_portrait",e.NORMAL_LANDSCAPE="normal_landscape",e.NORMAL_SQUARE="normal_square",e.LARGE_PORTRAIT="large_portrait",e.LARGE_LANDSCAPE="large_landscape",e.LARGE_SQUARE="large_square",e.WALLPAPER_PORTRAIT="wallpaper_portrait",e.WALLPAPER_LANDSCAPE="wallpaper_landscape",e))(cl||{}),hl=(e=>(e.EULER="k_euler",e.EULER_ANC="k_euler_ancestral",e.DPM2S_ANC="k_dpmpp_2s_ancestral",e.DPM2M="k_dpmpp_2m",e.DPMSDE="k_dpmpp_sde",e.DPM2MSDE="k_dpmpp_2m_sde",e.DDIM="ddim_v3",e))(hl||{}),pl=(e=>(e.NATIVE="native",e.KARRAS="karras",e.EXPONENTIAL="exponential",e.POLYEXPONENTIAL="polyexponential",e))(pl||{});function xi(){return typeof window>"u"}function xs(){if(xi())try{return{fs:Et("fs"),path:Et("path")}}catch(e){return console.warn("Failed to load Node.js modules:",e),{fs:null,path:null}}return{fs:null,path:null}}function rc(){const{path:e}=xs();return e}function mo(){try{return xi()?Et("canvas"):null}catch(e){return console.warn("Failed to load Node.js canvas module:",e),null}}function sc(e,t="png"){const n=new Date().toISOString().replace(/[-:]/g,"").replace("T","_").substring(0,15);return`${e?e+"_":""}${n}.${t}`}function Vr(e){if(xi()){const{fs:t}=xs();t&&!t.existsSync(e)&&t.mkdirSync(e,{recursive:!0})}}function oc(e,t){if(xi()){const{fs:n,path:i}=xs();if(!n||!i)throw new Error("File system modules not available");const r=i.dirname(t);Vr(r),n.writeFileSync(t,Buffer.from(e))}else throw new Error("Cannot save files directly in browser environment")}new TextEncoder;var ac=4096;function gl(e,t,n){let i=t;const r=i+n,s=[];let o="";for(;i<r;){const a=e[i++];if((a&128)===0)s.push(a);else if((a&224)===192){const u=e[i++]&63;s.push((a&31)<<6|u)}else if((a&240)===224){const u=e[i++]&63,f=e[i++]&63;s.push((a&31)<<12|u<<6|f)}else if((a&248)===240){const u=e[i++]&63,f=e[i++]&63,l=e[i++]&63;let m=(a&7)<<18|u<<12|f<<6|l;m>65535&&(m-=65536,s.push(m>>>10&1023|55296),m=56320|m&1023),s.push(m)}else s.push(a);s.length>=ac&&(o+=String.fromCharCode(...s),s.length=0)}return s.length>0&&(o+=String.fromCharCode(...s)),o}var lc=new TextDecoder,uc=200;function fc(e,t,n){const i=e.subarray(t,t+n);return lc.decode(i)}function dc(e,t,n){return n>uc?fc(e,t,n):gl(e,t,n)}var Ai=class{constructor(e,t){this.type=e,this.data=t}},Ot=class $r extends Error{constructor(t){super(t);const n=Object.create($r.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:$r.name})}},zn=4294967295;function cc(e,t,n){const i=Math.floor(n/4294967296),r=n;e.setUint32(t,i),e.setUint32(t+4,r)}function ml(e,t){const n=e.getInt32(t),i=e.getUint32(t+4);return n*4294967296+i}function hc(e,t){const n=e.getUint32(t),i=e.getUint32(t+4);return n*4294967296+i}var pc=-1,gc=4294967296-1,mc=17179869184-1;function vc({sec:e,nsec:t}){if(e>=0&&t>=0&&e<=mc)if(t===0&&e<=gc){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e),n}else{const n=e/4294967296,i=e&4294967295,r=new Uint8Array(8),s=new DataView(r.buffer);return s.setUint32(0,t<<2|n&3),s.setUint32(4,i),r}else{const n=new Uint8Array(12),i=new DataView(n.buffer);return i.setUint32(0,t),cc(i,4,e),n}}function _c(e){const t=e.getTime(),n=Math.floor(t/1e3),i=(t-n*1e3)*1e6,r=Math.floor(i/1e9);return{sec:n+r,nsec:i-r*1e9}}function bc(e){if(e instanceof Date){const t=_c(e);return vc(t)}else return null}function yc(e){const t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:{const n=t.getUint32(0),i=t.getUint32(4),r=(n&3)*4294967296+i,s=n>>>2;return{sec:r,nsec:s}}case 12:{const n=ml(t,4),i=t.getUint32(0);return{sec:n,nsec:i}}default:throw new Ot(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${e.length}`)}}function wc(e){const t=yc(e);return new Date(t.sec*1e3+t.nsec/1e6)}var xc={type:pc,encode:bc,decode:wc},qr=class{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(xc)}register({type:e,encode:t,decode:n}){if(e>=0)this.encoders[e]=t,this.decoders[e]=n;else{const i=-1-e;this.builtInEncoders[i]=t,this.builtInDecoders[i]=n}}tryToEncode(e,t){for(let n=0;n<this.builtInEncoders.length;n++){const i=this.builtInEncoders[n];if(i!=null){const r=i(e,t);if(r!=null){const s=-1-n;return new Ai(s,r)}}}for(let n=0;n<this.encoders.length;n++){const i=this.encoders[n];if(i!=null){const r=i(e,t);if(r!=null){const s=n;return new Ai(s,r)}}}return e instanceof Ai?e:null}decode(e,t,n){const i=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return i?i(e,t,n):new Ai(t,e)}};qr.defaultCodec=new qr;function Sc(e){return e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer}function vo(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Sc(e)?new Uint8Array(e):Uint8Array.from(e)}function Tr(e){return`${e<0?"-":""}0x${Math.abs(e).toString(16).padStart(2,"0")}`}var Ec=16,kc=16,Cc=class{constructor(e=Ec,t=kc){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=t,this.caches=[];for(let n=0;n<this.maxKeyLength;n++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,t,n){const i=this.caches[n-1];e:for(const r of i){const s=r.bytes;for(let o=0;o<n;o++)if(s[o]!==e[t+o])continue e;return r.str}return null}store(e,t){const n=this.caches[e.length-1],i={bytes:e,str:t};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=i:n.push(i)}decode(e,t,n){const i=this.find(e,t,n);if(i!=null)return this.hit++,i;this.miss++;const r=gl(e,t,n),s=Uint8Array.prototype.slice.call(e,t,t+n);return this.store(s,r),r}},Wr="array",Qn="map_key",vl="map_value",Tc=e=>{if(typeof e=="string"||typeof e=="number")return e;throw new Ot("The type of key must be string or number but "+typeof e)},Ac=class{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const t=this.getUninitializedStateFromPool();t.type=Wr,t.position=0,t.size=e,t.array=new Array(e)}pushMapState(e){const t=this.getUninitializedStateFromPool();t.type=Qn,t.readCount=0,t.size=e,t.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===Wr){const n=e;n.size=0,n.array=void 0,n.position=0,n.type=void 0}if(e.type===Qn||e.type===vl){const n=e;n.size=0,n.map=void 0,n.readCount=0,n.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}},Hn=-1,Ss=new DataView(new ArrayBuffer(0)),Ic=new Uint8Array(Ss.buffer);try{Ss.getInt8(0)}catch(e){if(!(e instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}var _o=new RangeError("Insufficient data"),Dc=new Cc,Pc=class _l{constructor(t){this.totalPos=0,this.pos=0,this.view=Ss,this.bytes=Ic,this.headByte=Hn,this.stack=new Ac,this.entered=!1,this.extensionCodec=t?.extensionCodec??qr.defaultCodec,this.context=t?.context,this.useBigInt64=t?.useBigInt64??!1,this.rawStrings=t?.rawStrings??!1,this.maxStrLength=t?.maxStrLength??zn,this.maxBinLength=t?.maxBinLength??zn,this.maxArrayLength=t?.maxArrayLength??zn,this.maxMapLength=t?.maxMapLength??zn,this.maxExtLength=t?.maxExtLength??zn,this.keyDecoder=t?.keyDecoder!==void 0?t.keyDecoder:Dc,this.mapKeyConverter=t?.mapKeyConverter??Tc}clone(){return new _l({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=Hn,this.stack.reset()}setBuffer(t){const n=vo(t);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(t){if(this.headByte===Hn&&!this.hasRemaining(1))this.setBuffer(t);else{const n=this.bytes.subarray(this.pos),i=vo(t),r=new Uint8Array(n.length+i.length);r.set(n),r.set(i,n.length),this.setBuffer(r)}}hasRemaining(t){return this.view.byteLength-this.pos>=t}createExtraByteError(t){const{view:n,pos:i}=this;return new RangeError(`Extra ${n.byteLength-i} of ${n.byteLength} byte(s) found at buffer[${t}]`)}decode(t){if(this.entered)return this.clone().decode(t);try{this.entered=!0,this.reinitializeState(),this.setBuffer(t);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(t){if(this.entered){yield*this.clone().decodeMulti(t);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(t);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(t){if(this.entered)return this.clone().decodeAsync(t);try{this.entered=!0;let n=!1,i;for await(const a of t){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{i=this.doDecodeSync(),n=!0}catch(u){if(!(u instanceof RangeError))throw u}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return i}const{headByte:r,pos:s,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${Tr(r)} at ${o} (${s} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(t){return this.decodeMultiAsync(t,!0)}decodeStream(t){return this.decodeMultiAsync(t,!1)}async*decodeMultiAsync(t,n){if(this.entered){yield*this.clone().decodeMultiAsync(t,n);return}try{this.entered=!0;let i=n,r=-1;for await(const s of t){if(n&&r===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(s),i&&(r=this.readArraySize(),i=!1,this.complete());try{for(;yield this.doDecodeSync(),--r!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const t=this.readHeadByte();let n;if(t>=224)n=t-256;else if(t<192)if(t<128)n=t;else if(t<144){const r=t-128;if(r!==0){this.pushMapState(r),this.complete();continue e}else n={}}else if(t<160){const r=t-144;if(r!==0){this.pushArrayState(r),this.complete();continue e}else n=[]}else{const r=t-160;n=this.decodeString(r,0)}else if(t===192)n=null;else if(t===194)n=!1;else if(t===195)n=!0;else if(t===202)n=this.readF32();else if(t===203)n=this.readF64();else if(t===204)n=this.readU8();else if(t===205)n=this.readU16();else if(t===206)n=this.readU32();else if(t===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(t===208)n=this.readI8();else if(t===209)n=this.readI16();else if(t===210)n=this.readI32();else if(t===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(t===217){const r=this.lookU8();n=this.decodeString(r,1)}else if(t===218){const r=this.lookU16();n=this.decodeString(r,2)}else if(t===219){const r=this.lookU32();n=this.decodeString(r,4)}else if(t===220){const r=this.readU16();if(r!==0){this.pushArrayState(r),this.complete();continue e}else n=[]}else if(t===221){const r=this.readU32();if(r!==0){this.pushArrayState(r),this.complete();continue e}else n=[]}else if(t===222){const r=this.readU16();if(r!==0){this.pushMapState(r),this.complete();continue e}else n={}}else if(t===223){const r=this.readU32();if(r!==0){this.pushMapState(r),this.complete();continue e}else n={}}else if(t===196){const r=this.lookU8();n=this.decodeBinary(r,1)}else if(t===197){const r=this.lookU16();n=this.decodeBinary(r,2)}else if(t===198){const r=this.lookU32();n=this.decodeBinary(r,4)}else if(t===212)n=this.decodeExtension(1,0);else if(t===213)n=this.decodeExtension(2,0);else if(t===214)n=this.decodeExtension(4,0);else if(t===215)n=this.decodeExtension(8,0);else if(t===216)n=this.decodeExtension(16,0);else if(t===199){const r=this.lookU8();n=this.decodeExtension(r,1)}else if(t===200){const r=this.lookU16();n=this.decodeExtension(r,2)}else if(t===201){const r=this.lookU32();n=this.decodeExtension(r,4)}else throw new Ot(`Unrecognized type byte: ${Tr(t)}`);this.complete();const i=this.stack;for(;i.length>0;){const r=i.top();if(r.type===Wr)if(r.array[r.position]=n,r.position++,r.position===r.size)n=r.array,i.release(r);else continue e;else if(r.type===Qn){if(n==="__proto__")throw new Ot("The key __proto__ is not allowed");r.key=this.mapKeyConverter(n),r.type=vl;continue e}else if(r.map[r.key]=n,r.readCount++,r.readCount===r.size)n=r.map,i.release(r);else{r.key=null,r.type=Qn;continue e}}return n}}readHeadByte(){return this.headByte===Hn&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=Hn}readArraySize(){const t=this.readHeadByte();switch(t){case 220:return this.readU16();case 221:return this.readU32();default:{if(t<160)return t-144;throw new Ot(`Unrecognized array type byte: ${Tr(t)}`)}}}pushMapState(t){if(t>this.maxMapLength)throw new Ot(`Max length exceeded: map length (${t}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(t)}pushArrayState(t){if(t>this.maxArrayLength)throw new Ot(`Max length exceeded: array length (${t}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(t)}decodeString(t,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(t,n):this.decodeBinary(t,n)}decodeUtf8String(t,n){if(t>this.maxStrLength)throw new Ot(`Max length exceeded: UTF-8 byte length (${t}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+t)throw _o;const i=this.pos+n;let r;return this.stateIsMapKey()&&this.keyDecoder?.canBeCached(t)?r=this.keyDecoder.decode(this.bytes,i,t):r=dc(this.bytes,i,t),this.pos+=n+t,r}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===Qn:!1}decodeBinary(t,n){if(t>this.maxBinLength)throw new Ot(`Max length exceeded: bin length (${t}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(t+n))throw _o;const i=this.pos+n,r=this.bytes.subarray(i,i+t);return this.pos+=n+t,r}decodeExtension(t,n){if(t>this.maxExtLength)throw new Ot(`Max length exceeded: ext length (${t}) > maxExtLength (${this.maxExtLength})`);const i=this.view.getInt8(this.pos+n),r=this.decodeBinary(t,n+1);return this.extensionCodec.decode(r,i,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const t=this.view.getUint8(this.pos);return this.pos++,t}readI8(){const t=this.view.getInt8(this.pos);return this.pos++,t}readU16(){const t=this.view.getUint16(this.pos);return this.pos+=2,t}readI16(){const t=this.view.getInt16(this.pos);return this.pos+=2,t}readU32(){const t=this.view.getUint32(this.pos);return this.pos+=4,t}readI32(){const t=this.view.getInt32(this.pos);return this.pos+=4,t}readU64(){const t=hc(this.view,this.pos);return this.pos+=8,t}readI64(){const t=ml(this.view,this.pos);return this.pos+=8,t}readU64AsBigInt(){const t=this.view.getBigUint64(this.pos);return this.pos+=8,t}readI64AsBigInt(){const t=this.view.getBigInt64(this.pos);return this.pos+=8,t}readF32(){const t=this.view.getFloat32(this.pos);return this.pos+=4,t}readF64(){const t=this.view.getFloat64(this.pos);return this.pos+=8,t}};function Rc(e,t){return new Pc(t).decode(e)}var Lc=class{constructor(){this.buffer=new Uint8Array(0),this.expectedMessageLength=null}async*feedChunk(e){const t=new Uint8Array(this.buffer.length+e.length);for(t.set(this.buffer),t.set(e,this.buffer.length),this.buffer=t;;){if(this.expectedMessageLength===null){if(this.buffer.length<4)break;const r=this.buffer.slice(0,4);this.expectedMessageLength=new DataView(r.buffer,r.byteOffset,4).getUint32(0,!1),this.buffer=this.buffer.slice(4)}if(this.buffer.length<this.expectedMessageLength)break;const n=this.buffer.slice(0,this.expectedMessageLength);this.buffer=this.buffer.slice(this.expectedMessageLength),this.expectedMessageLength=null;const i=bl(n);i&&(yield i)}}},Mc=class{constructor(){this.buffer=""}async*feedChunk(e){const t=new TextDecoder().decode(e);this.buffer+=t;const n=this.buffer.split(`

`);this.buffer=n.pop()||"";for(const i of n)if(i.trim()){const r=this.parseSSEEvent(i);r&&(yield r)}}parseSSEEvent(e){const t=e.split(`
`);let n={};for(const i of t){const r=i.trim();if(r.includes(":")){const s=r.indexOf(":"),o=r.substring(0,s).trim(),a=r.substring(s+1).trim();o==="data"?n.data=(n.data||"")+a:n[o]=a}}if(n.data)try{const i=JSON.parse(n.data);if(i.event_type)return fi(i)}catch(i){console.warn("Failed to parse SSE event data:",i)}return null}async*flush(){if(this.buffer.trim()){const e=this.parseSSEEvent(this.buffer);e&&(yield e),this.buffer=""}}};function Uc(e){const t=[],i=new TextDecoder().decode(e).split(`
`);let r={};for(const s of i){const o=s.trim();if(o===""){if(r.data)try{const a=JSON.parse(r.data);if(a.event_type){const u=fi(a);u&&t.push(u)}}catch(a){console.warn("Failed to parse SSE event data:",a)}r={}}else if(o.includes(":")){const a=o.indexOf(":"),u=o.substring(0,a).trim(),f=o.substring(a+1).trim();u==="data"?r.data=(r.data||"")+f:r[u]=f}}if(r.data)try{const s=JSON.parse(r.data);if(s.event_type){const o=fi(s);o&&t.push(o)}}catch(s){console.warn("Failed to parse final SSE event data:",s)}return t}function Oc(e){const t=new TextDecoder().decode(e.slice(0,100));return t.includes("event:")||t.includes("data:")?Uc(e):Bc(e)}function Bc(e){const t=[];let n=0;for(;n<e.length;)try{if(n+4>e.length)break;const i=e.slice(n,n+4),r=new DataView(i.buffer,i.byteOffset,4).getUint32(0,!1),s=n+4,o=Math.min(s+r,e.length);if(s>=e.length)break;const a=e.slice(s,o),u=bl(a);u&&t.push(u),n=s+r}catch{n+=1}return t}function bl(e){try{const t=Rc(e);if(typeof t=="object"&&t!==null&&"event_type"in t)return fi(t)}catch{try{const n=new TextDecoder().decode(e),i=JSON.parse(n);if(typeof i=="object"&&i!==null&&"event_type"in i)return fi(i)}catch(n){console.warn("JSON parsing also failed:",n)}}return null}function fi(e){let t;if(e.image instanceof Uint8Array)t=e.image;else if(typeof e.image=="string")try{t=new Uint8Array(atob(e.image).split("").map(a=>a.charCodeAt(0)))}catch(a){console.warn("Failed to decode base64 image data:",a),t=new Uint8Array(0)}else Array.isArray(e.image)?t=new Uint8Array(e.image):(console.warn("Unknown image data format in msgpack event"),t=new Uint8Array(0));let n="png";t.length>=2&&(t[0]===255&&t[1]===216?n="jpg":t.length>=4&&t[0]===137&&t[1]===80&&t[2]===78&&t[3]===71&&(n="png"));const i=e.event_type,r=new Date().toISOString().replace(/[-:]/g,"").replace("T","_").substring(0,15);let s;if(i==="final")s=`${r}_final.${n}`;else{const a=e.step_ix||0;s=`${r}_step_${a.toString().padStart(2,"0")}.${n}`}const o=new Kr({filename:s,data:t});return new lh({event_type:i==="final"?"final":"intermediate",samp_ix:e.samp_ix||0,step_ix:e.step_ix||0,gen_id:String(e.gen_id||""),sigma:e.sigma||0,image:o})}function Nc(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t="";for(let n=0;n<6;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}function Fc(){const e=new Date,t=String(e.getUTCMilliseconds()).padStart(3,"0");return e.toISOString().replace(/\.\d{3}Z$/,`.${t}Z`)}function bo(e){const t={...e};return t["x-correlation-id"]=Nc(),t["x-initiated-at"]=Fc(),t}async function jc(e){const t={};if(e.headers.forEach((n,i)=>{t[i]=n}),!e.ok){const n=new Error(`HTTP Error: ${e.status} ${e.statusText}`);throw n.status=e.status,n.statusText=e.statusText,n}if(e.headers.get("Content-Type")?.includes("application/zip")||e.headers.get("Content-Type")?.includes("application/octet-stream")||e.headers.get("Content-Type")?.includes("application/msgpack")){const i=await e.clone().arrayBuffer();return{statusCode:e.status,statusText:e.statusText,headers:t,data:i}}return{statusCode:e.status,statusText:e.statusText,headers:t,data:e.body}}var zc={enabled:!0,maxRetries:3,baseDelay:1e3,maxDelay:3e4,retryStatusCodes:[429]};async function yo(e,t){const n={...zc,...t||{}};if(!n.enabled)return e();let i=null;for(let r=0;r<=n.maxRetries;r++)try{return await e()}catch(s){if(i=s,!Hc(s,n,r)||r>=n.maxRetries)throw s;const a=Vc(r,n);console.warn(`Request failed with error: ${i.message}. Retrying in ${a}ms... (Attempt ${r+1}/${n.maxRetries})`),await new Promise(u=>setTimeout(u,a))}throw i||new Error("Failed after retries")}function Hc(e,t,n){return n>=t.maxRetries?!1:!!(e&&e.status&&t.retryStatusCodes.includes(e.status)||e instanceof TypeError&&e.message.includes("fetch")||e.name==="AbortError")}function Vc(e,t){const n=t.baseDelay*Math.pow(1.2,e),i=Math.random()*300;return Math.min(n+i,t.maxDelay)}function $c(e){let t="";const n=e.byteLength;for(let i=0;i<n;i++)t+=String.fromCharCode(e[i]);return btoa(t)}async function yl(e){return xi()?Ni(e):Fi(e)}async function Ni(e){if(typeof e=="string")try{const t=Et("fs"),n=mo();if(!n)throw new Error("Canvas module not available. Please install it with: npm install canvas");const{createCanvas:i,loadImage:r}=n,s=await r(e),o=i(s.width,s.height);o.getContext("2d").drawImage(s,0,0);const f=e.toLowerCase().endsWith(".jpg")||e.toLowerCase().endsWith(".jpeg")?"image/jpeg":"image/png",l=o.toDataURL(f).replace(new RegExp(`^data:${f};base64,`),"");return{width:s.width,height:s.height,base64:l}}catch(t){const n=t instanceof Error?t.message:"Unknown error";throw new Error(`Failed to load image from path: ${n}`)}else if(e instanceof Uint8Array){const t=mo();if(!t)throw new Error("Canvas module not available. Please install it with: npm install canvas");const{createCanvas:n,loadImage:i}=t,r=Buffer.from(e);try{const s=await i(r),o=n(s.width,s.height);o.getContext("2d").drawImage(s,0,0);const u=o.toDataURL("image/png").replace(/^data:image\/png;base64,/,"");return{width:s.width,height:s.height,base64:u}}catch(s){const o=s instanceof Error?s.message:"Unknown error";throw new Error(`Failed to load image from Uint8Array: ${o}`)}}else{if(e instanceof ArrayBuffer)return Ni(new Uint8Array(e));if(typeof e=="object"&&e!==null){if("data"in e&&e.data instanceof Uint8Array)return Ni(e.data);if("url"in e&&typeof e.url=="string")return Ni(e.url)}}throw new Error("Unsupported image input format in Node.js environment")}async function Fi(e){try{const t=document.createElement("canvas"),n=t.getContext("2d");if(!n)throw new Error("Failed to get canvas rendering context");let i=null;if(e instanceof HTMLImageElement)i=e;else{if(e instanceof HTMLCanvasElement)return{width:e.width,height:e.height,base64:e.toDataURL("image/png").replace(/^data:image\/png;base64,/,"")};if(typeof e=="string"){if(i=new Image,e.startsWith("data:")||e.startsWith("blob:")||e.startsWith("http"))i.src=e;else throw new Error("File paths are not supported in browser environment. Use a Blob, File, or Data URL instead.");await new Promise((r,s)=>{i?(i.onload=()=>r(),i.onerror=()=>s(new Error("Failed to load image from URL"))):s(new Error("Image element is not initialized"))})}else if(e instanceof Blob||e instanceof File){const r=URL.createObjectURL(e);i=new Image,i.src=r,await new Promise((s,o)=>{i?(i.onload=()=>s(),i.onerror=()=>o(new Error("Failed to load image from Blob/File"))):o(new Error("Image element is not initialized"))}),URL.revokeObjectURL(r)}else if(e instanceof ArrayBuffer||e instanceof Uint8Array){const r=e instanceof ArrayBuffer?new Uint8Array(e):e,s=new Blob([r],{type:"image/png"});return Fi(s)}else if(typeof e=="object"&&e!==null){if("data"in e&&e.data instanceof Uint8Array)return Fi(e.data);if("url"in e&&typeof e.url=="string")return Fi(e.url)}else throw new Error("Unsupported image input format")}if(!i)throw new Error("Failed to create image element");return t.width=i.width,t.height=i.height,n.drawImage(i,0,0),{width:i.width,height:i.height,base64:t.toDataURL("image/png").replace(/^data:image\/png;base64,/,"")}}catch(t){const n=t instanceof Error?t.message:"Unknown error";throw new Error(`Failed to parse image in browser: ${n}`)}}function qc(e){const t=JSON.parse(JSON.stringify(e,(i,r)=>r===void 0?void 0:r));return delete t.model,delete t.action,delete t.prompt,delete t.resPreset,{input:e.prompt,model:e.model,action:e.action,parameters:t}}function Wc(e,t=!1){const n=e.steps||28,i=e.n_samples||1,r=e.width||1024,s=e.height||1024,o=e.action==="img2img"&&e.strength?e.strength:1;let a=1;e.model==="nai-diffusion-4-full"||e.model==="nai-diffusion-4-curated-preview"||e.model==="nai-diffusion-4-5-curated"?e.autoSmea&&(a=1.2):e.sm_dyn?a=1.4:e.sm&&(a=1.2);const u=Math.max(r*s,65536);let f=u;u>832*1216&&u<=1024*1024&&(f=832*1216);let l=Math.ceil(2951823174884865e-21*f+5753298233447344e-22*f*n)*a;l=Math.max(Math.ceil(l*o),2);const m=t&&n<=28&&f<=1024*1024;return l*(i-(m?1:0))}function Ii(e){if(!e)return e;const t=new Set,n=[];for(const i of e.split(",")){const r=i.trim();if(!r)continue;const s=r.toLowerCase();t.has(s)||(t.add(s),n.push(r))}return n.join(", ")}function On(e){let t=e.length;for(;--t>=0;)e[t]=0}var Gc=3,Zc=258,wl=29,Kc=256,Yc=Kc+1+wl,xl=30,Xc=512,Jc=new Array((Yc+2)*2);On(Jc);var Qc=new Array(xl*2);On(Qc);var eh=new Array(Xc);On(eh);var th=new Array(Zc-Gc+1);On(th);var nh=new Array(wl);On(nh);var ih=new Array(xl);On(ih);try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{}var Gr=new Uint8Array(256);for(let e=0;e<256;e++)Gr[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Gr[254]=Gr[254]=1;_s(Jd());_s(tc());function rh(){for(let e=1;e<arguments.length;e++)for(const t in arguments[e])arguments[0][t]=arguments[e][t];return arguments[0]}function Zr(e){return e.map(t=>String.fromCharCode(t)).join("")}function sh(e){if(e.length>=8){const t=Zr(e.slice(0,8));if(t==="ASCII\0\0\0")return Zr(e.slice(8));if(t==="JIS\0\0\0\0\0")return"[JIS encoded text]";if(t==="UNICODE\0")return"[Unicode encoded text]";if(t==="\0\0\0\0\0\0\0\0")return"[Undefined encoding]"}return"Undefined"}var ot={ApertureValue:e=>Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2),ColorSpace(e){return e===1?"sRGB":e===65535?"Uncalibrated":"Unknown"},ComponentsConfiguration(e){return e.map(t=>{if(t===49)return"Y";if(t===50)return"Cb";if(t===51)return"Cr";if(t===52)return"R";if(t===53)return"G";if(t===54)return"B"}).join("")},Contrast(e){return e===0?"Normal":e===1?"Soft":e===2?"Hard":"Unknown"},CustomRendered(e){return e===0?"Normal process":e===1?"Custom process":"Unknown"},ExposureMode(e){return e===0?"Auto exposure":e===1?"Manual exposure":e===2?"Auto bracket":"Unknown"},ExposureProgram(e){return e===0?"Undefined":e===1?"Manual":e===2?"Normal program":e===3?"Aperture priority":e===4?"Shutter priority":e===5?"Creative program":e===6?"Action program":e===7?"Portrait mode":e===8?"Landscape mode":e===9?"Bulb":"Unknown"},ExposureTime(e){if(e[0]/e[1]>.25){const t=e[0]/e[1];return Number.isInteger(t)?""+t:t.toFixed(1)}return e[0]!==0?`1/${Math.round(e[1]/e[0])}`:`0/${e[1]}`},FNumber:e=>`f/${Number(e[0]/e[1]).toFixed(1)}`,FocalLength:e=>e[0]/e[1]+" mm",FocalPlaneResolutionUnit(e){return e===2?"inches":e===3?"centimeters":e===4?"millimeters":"Unknown"},LightSource:e=>e===1?"Daylight":e===2?"Fluorescent":e===3?"Tungsten (incandescent light)":e===4?"Flash":e===9?"Fine weather":e===10?"Cloudy weather":e===11?"Shade":e===12?"Daylight fluorescent (D 5700  7100K)":e===13?"Day white fluorescent (N 4600  5400K)":e===14?"Cool white fluorescent (W 3900  4500K)":e===15?"White fluorescent (WW 3200  3700K)":e===17?"Standard light A":e===18?"Standard light B":e===19?"Standard light C":e===20?"D55":e===21?"D65":e===22?"D75":e===23?"D50":e===24?"ISO studio tungsten":e===255?"Other light source":"Unknown",MeteringMode(e){return e===1?"Average":e===2?"CenterWeightedAverage":e===3?"Spot":e===4?"MultiSpot":e===5?"Pattern":e===6?"Partial":e===255?"Other":"Unknown"},ResolutionUnit(e){return e===2?"inches":e===3?"centimeters":"Unknown"},Saturation(e){return e===0?"Normal":e===1?"Low saturation":e===2?"High saturation":"Unknown"},FocalLengthIn35mmFilm(e){return e===0?"Unknown":e+" mm"},SceneCaptureType(e){return e===0?"Standard":e===1?"Landscape":e===2?"Portrait":e===3?"Night scene":"Unknown"},Sharpness(e){return e===0?"Normal":e===1?"Soft":e===2?"Hard":"Unknown"},ShutterSpeedValue(e){const t=Math.pow(2,e[0]/e[1]);return t<=1?`${Math.round(1/t)}`:`1/${Math.round(t)}`},WhiteBalance(e){return e===0?"Auto white balance":e===1?"Manual white balance":"Unknown"},XResolution:e=>""+Math.round(e[0]/e[1]),YResolution:e=>""+Math.round(e[0]/e[1])},oh={11:"ProcessingSoftware",254:{name:"SubfileType",description:e=>({0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image",3:"Single page of multi-page reduced-resolution image",4:"Transparency mask",5:"Transparency mask of reduced-resolution image",6:"Transparency mask of multi-page image",7:"Transparency mask of reduced-resolution multi-page image",65537:"Alternate reduced-resolution image",4294967295:"Invalid"})[e]||"Unknown"},255:{name:"OldSubfileType",description:e=>({0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image"})[e]||"Unknown"},256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:{name:"Thresholding",description:e=>({1:"No dithering or halftoning",2:"Ordered dither or halfton",3:"Randomized dither"})[e]||"Unknown"},264:"CellWidth",265:"CellLength",266:{name:"FillOrder",description:e=>({1:"Normal",2:"Reversed"})[e]||"Unknown"},269:"DocumentName",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:{name:"Orientation",description:e=>e===1?"top-left":e===2?"top-right":e===3?"bottom-right":e===4?"bottom-left":e===5?"left-top":e===6?"right-top":e===7?"right-bottom":e===8?"left-bottom":"Undefined"},277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:{name:"XResolution",description:ot.XResolution},283:{name:"YResolution",description:ot.YResolution},284:"PlanarConfiguration",285:"PageName",286:{name:"XPosition",description:e=>""+Math.round(e[0]/e[1])},287:{name:"YPosition",description:e=>""+Math.round(e[0]/e[1])},290:{name:"GrayResponseUnit",description:e=>({1:"0.1",2:"0.001",3:"0.0001",4:"1e-05",5:"1e-06"})[e]||"Unknown"},296:{name:"ResolutionUnit",description:ot.ResolutionUnit},297:"PageNumber",301:"TransferFunction",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",317:"Predictor",318:{name:"WhitePoint",description:e=>e.map(t=>`${t[0]}/${t[1]}`).join(", ")},319:{name:"PrimaryChromaticities",description:e=>e.map(t=>`${t[0]}/${t[1]}`).join(", ")},321:"HalftoneHints",322:"TileWidth",323:"TileLength",330:"A100DataOffset",332:{name:"InkSet",description:e=>({1:"CMYK",2:"Not CMYK"})[e]||"Unknown"},337:"TargetPrinter",338:{name:"ExtraSamples",description:e=>({0:"Unspecified",1:"Associated Alpha",2:"Unassociated Alpha"})[e]||"Unknown"},339:{name:"SampleFormat",description:e=>{const t={1:"Unsigned",2:"Signed",3:"Float",4:"Undefined",5:"Complex int",6:"Complex float"};return Array.isArray(e)?e.map(n=>t[n]||"Unknown").join(", "):"Unknown"}},513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",529:{name:"YCbCrCoefficients",description:e=>e.map(t=>""+t[0]/t[1]).join("/")},530:"YCbCrSubSampling",531:{name:"YCbCrPositioning",description:e=>e===1?"centered":e===2?"co-sited":"undefined "+e},532:{name:"ReferenceBlackWhite",description:e=>e.map(t=>""+t[0]/t[1]).join(", ")},700:"ApplicationNotes",18246:"Rating",18249:"RatingPercent",33432:{name:"Copyright",description:e=>e.join("; ")},33550:"PixelScale",33723:"IPTC-NAA",33920:"IntergraphMatrix",33922:"ModelTiePoint",34118:"SEMInfo",34264:"ModelTransform",34377:"PhotoshopSettings",34665:"Exif IFD Pointer",34675:"ICC_Profile",34735:"GeoTiffDirectory",34736:"GeoTiffDoubleParams",34737:"GeoTiffAsciiParams",34853:"GPS Info IFD Pointer",40091:{name:"XPTitle",description:Vn},40092:{name:"XPComment",description:Vn},40093:{name:"XPAuthor",description:Vn},40094:{name:"XPKeywords",description:Vn},40095:{name:"XPSubject",description:Vn},42112:"GDALMetadata",42113:"GDALNoData",50341:"PrintIM",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"DNGLensInfo",50739:"ShadowScale",50741:{name:"MakerNoteSafety",description:e=>({0:"Unsafe",1:"Safe"})[e]||"Unknown"},50778:{name:"CalibrationIlluminant1",description:ot.LightSource},50779:{name:"CalibrationIlluminant2",description:ot.LightSource},50781:"RawDataUniqueID",50827:"OriginalRawFileName",50828:"OriginalRawFileData",50831:"AsShotICCProfile",50832:"AsShotPreProfileMatrix",50833:"CurrentICCProfile",50834:"CurrentPreProfileMatrix",50879:"ColorimetricReference",50885:"SRawType",50898:"PanasonicTitle",50899:"PanasonicTitle2",50931:"CameraCalibrationSig",50932:"ProfileCalibrationSig",50933:"ProfileIFD",50934:"AsShotProfileName",50936:"ProfileName",50937:"ProfileHueSatMapDims",50938:"ProfileHueSatMapData1",50939:"ProfileHueSatMapData2",50940:"ProfileToneCurve",50941:{name:"ProfileEmbedPolicy",description:e=>({0:"Allow Copying",1:"Embed if Used",2:"Never Embed",3:"No Restrictions"})[e]||"Unknown"},50942:"ProfileCopyright",50964:"ForwardMatrix1",50965:"ForwardMatrix2",50966:"PreviewApplicationName",50967:"PreviewApplicationVersion",50968:"PreviewSettingsName",50969:"PreviewSettingsDigest",50970:{name:"PreviewColorSpace",description:e=>({1:"Gray Gamma 2.2",2:"sRGB",3:"Adobe RGB",4:"ProPhoto RGB"})[e]||"Unknown"},50971:"PreviewDateTime",50972:"RawImageDigest",50973:"OriginalRawFileDigest",50981:"ProfileLookTableDims",50982:"ProfileLookTableData",51043:"TimeCodes",51044:"FrameRate",51058:"TStop",51081:"ReelName",51089:"OriginalDefaultFinalSize",51090:"OriginalBestQualitySize",51091:"OriginalDefaultCropSize",51105:"CameraLabel",51107:{name:"ProfileHueSatMapEncoding",description:e=>({0:"Linear",1:"sRGB"})[e]||"Unknown"},51108:{name:"ProfileLookTableEncoding",description:e=>({0:"Linear",1:"sRGB"})[e]||"Unknown"},51109:"BaselineExposureOffset",51110:{name:"DefaultBlackRender",description:e=>({0:"Auto",1:"None"})[e]||"Unknown"},51111:"NewRawImageDigest",51112:"RawToPreviewGain"};function Vn(e){return new TextDecoder("utf-16").decode(new Uint8Array(e)).replace(/\u0000+$/,"")}var ah={33434:{name:"ExposureTime",description:ot.ExposureTime},33437:{name:"FNumber",description:ot.FNumber},34850:{name:"ExposureProgram",description:ot.ExposureProgram},34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:{name:"OECF",description:()=>"[Raw OECF table data]"},34858:"TimeZoneOffset",34859:"SelfTimerMode",34864:{name:"SensitivityType",description:e=>({1:"Standard Output Sensitivity",2:"Recommended Exposure Index",3:"ISO Speed",4:"Standard Output Sensitivity and Recommended Exposure Index",5:"Standard Output Sensitivity and ISO Speed",6:"Recommended Exposure Index and ISO Speed",7:"Standard Output Sensitivity, Recommended Exposure Index and ISO Speed"})[e]||"Unknown"},34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:{name:"ExifVersion",description:e=>Zr(e)},36867:"DateTimeOriginal",36868:"DateTimeDigitized",36873:"GooglePlusUploadCode",36880:"OffsetTime",36881:"OffsetTimeOriginal",36882:"OffsetTimeDigitized",37121:{name:"ComponentsConfiguration",description:ot.ComponentsConfiguration},37122:"CompressedBitsPerPixel",37377:{name:"ShutterSpeedValue",description:ot.ShutterSpeedValue},37378:{name:"ApertureValue",description:ot.ApertureValue},37379:"BrightnessValue",37380:"ExposureBiasValue",37381:{name:"MaxApertureValue",description:e=>Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2)},37382:{name:"SubjectDistance",description:e=>e[0]/e[1]+" m"},37383:{name:"MeteringMode",description:ot.MeteringMode},37384:{name:"LightSource",description:ot.LightSource},37385:{name:"Flash",description:e=>e===0?"Flash did not fire":e===1?"Flash fired":e===5?"Strobe return light not detected":e===7?"Strobe return light detected":e===9?"Flash fired, compulsory flash mode":e===13?"Flash fired, compulsory flash mode, return light not detected":e===15?"Flash fired, compulsory flash mode, return light detected":e===16?"Flash did not fire, compulsory flash mode":e===24?"Flash did not fire, auto mode":e===25?"Flash fired, auto mode":e===29?"Flash fired, auto mode, return light not detected":e===31?"Flash fired, auto mode, return light detected":e===32?"No flash function":e===65?"Flash fired, red-eye reduction mode":e===69?"Flash fired, red-eye reduction mode, return light not detected":e===71?"Flash fired, red-eye reduction mode, return light detected":e===73?"Flash fired, compulsory flash mode, red-eye reduction mode":e===77?"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected":e===79?"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected":e===89?"Flash fired, auto mode, red-eye reduction mode":e===93?"Flash fired, auto mode, return light not detected, red-eye reduction mode":e===95?"Flash fired, auto mode, return light detected, red-eye reduction mode":"Unknown"},37386:{name:"FocalLength",description:ot.FocalLength},37393:"ImageNumber",37394:{name:"SecurityClassification",description:e=>({C:"Confidential",R:"Restricted",S:"Secret",T:"Top Secret",U:"Unclassified"})[e]||"Unknown"},37395:"ImageHistory",37396:{name:"SubjectArea",description:e=>e.length===2?`Location; X: ${e[0]}, Y: ${e[1]}`:e.length===3?`Circle; X: ${e[0]}, Y: ${e[1]}, diameter: ${e[2]}`:e.length===4?`Rectangle; X: ${e[0]}, Y: ${e[1]}, width: ${e[2]}, height: ${e[3]}`:"Unknown"},37500:{name:"MakerNote",description:()=>"[Raw maker note data]"},37510:{name:"UserComment",description:sh},37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",37724:"ImageSourceData",37888:{name:"AmbientTemperature",description:e=>e[0]/e[1]+" C"},37889:{name:"Humidity",description:e=>e[0]/e[1]+" %"},37890:{name:"Pressure",description:e=>e[0]/e[1]+" hPa"},37891:{name:"WaterDepth",description:e=>e[0]/e[1]+" m"},37892:{name:"Acceleration",description:e=>e[0]/e[1]+" mGal"},37893:{name:"CameraElevationAngle",description:e=>e[0]/e[1]+" "},40960:{name:"FlashpixVersion",description:e=>e.map(t=>String.fromCharCode(t)).join("")},40961:{name:"ColorSpace",description:ot.ColorSpace},40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",40965:"Interoperability IFD Pointer",41483:"FlashEnergy",41484:{name:"SpatialFrequencyResponse",description:()=>"[Raw SFR table data]"},41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:{name:"FocalPlaneResolutionUnit",description:ot.FocalPlaneResolutionUnit},41492:{name:"SubjectLocation",description:([e,t])=>`X: ${e}, Y: ${t}`},41493:"ExposureIndex",41495:{name:"SensingMethod",description:e=>e===1?"Undefined":e===2?"One-chip color area sensor":e===3?"Two-chip color area sensor":e===4?"Three-chip color area sensor":e===5?"Color sequential area sensor":e===7?"Trilinear sensor":e===8?"Color sequential linear sensor":"Unknown"},41728:{name:"FileSource",description:e=>e===3?"DSC":"Unknown"},41729:{name:"SceneType",description:e=>e===1?"A directly photographed image":"Unknown"},41730:{name:"CFAPattern",description:()=>"[Raw CFA pattern table data]"},41985:{name:"CustomRendered",description:ot.CustomRendered},41986:{name:"ExposureMode",description:ot.ExposureMode},41987:{name:"WhiteBalance",description:ot.WhiteBalance},41988:{name:"DigitalZoomRatio",description:e=>e[0]===0?"Digital zoom was not used":""+e[0]/e[1]},41989:{name:"FocalLengthIn35mmFilm",description:ot.FocalLengthIn35mmFilm},41990:{name:"SceneCaptureType",description:ot.SceneCaptureType},41991:{name:"GainControl",description:e=>e===0?"None":e===1?"Low gain up":e===2?"High gain up":e===3?"Low gain down":e===4?"High gain down":"Unknown"},41992:{name:"Contrast",description:ot.Contrast},41993:{name:"Saturation",description:ot.Saturation},41994:{name:"Sharpness",description:ot.Sharpness},41995:{name:"DeviceSettingDescription",description:()=>"[Raw device settings table data]"},41996:{name:"SubjectDistanceRange",description:e=>e===1?"Macro":e===2?"Close view":e===3?"Distant view":"Unknown"},42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:{name:"LensSpecification",description:e=>{const t=parseFloat((e[0][0]/e[0][1]).toFixed(5)),n=parseFloat((e[1][0]/e[1][1]).toFixed(5)),i=`${t}-${n} mm`;if(e[3][1]===0)return`${i} f/?`;const r=1/(e[2][1]/e[2][1]/(e[3][0]/e[3][1]));return`${i} f/${parseFloat(r.toFixed(5))}`}},42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42080:{name:"CompositeImage",description:e=>({1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"})[e]||"Unknown"},42081:"SourceImageNumberOfCompositeImage",42082:"SourceExposureTimesOfCompositeImage",42240:"Gamma",59932:"Padding",59933:"OffsetSchema",65e3:"OwnerName",65001:"SerialNumber",65002:"Lens",65100:"RawFile",65101:"Converter",65102:"WhiteBalance",65105:"Exposure",65106:"Shadows",65107:"Brightness",65108:"Contrast",65109:"Saturation",65110:"Sharpness",65111:"Smoothness",65112:"MoireFilter"};rh({},oh,ah);var Kr=class{constructor(e){this.filename=e.filename,this.data=e.data}get size(){return this.data.byteLength}toBase64(){return $c(this.data)}toDataURL(){return`data:${this.filename.toLowerCase().endsWith(".png")?"image/png":"image/jpeg"};base64,${this.toBase64()}`}async save(e){if(typeof window<"u")throw new Error("save() is only available in Node.js environment");try{const t=rc();if(!t)throw new Error("Path module not available");let n;return e.endsWith("/")||!t.extname(e)?(Vr(e),n=t.join(e,this.filename)):(Vr(t.dirname(e)),n=e),oc(this.data,n),n}catch(t){throw new Error(`Failed to save image: ${t.message}`)}}toBlob(){if(typeof window>"u")throw new Error("toBlob() is only available in browser environment");const e=this.filename.toLowerCase().endsWith(".png")?"image/png":"image/jpeg";return new Blob([this.data],{type:e})}toFile(){if(typeof window>"u")throw new Error("toFile() is only available in browser environment");const e=this.filename.toLowerCase().endsWith(".png")?"image/png":"image/jpeg";return new File([this.data],this.filename,{type:e})}},Yi=(e=>(e.INTERMEDIATE="intermediate",e.FINAL="final",e))(Yi||{}),lh=class{constructor(e){this.event_type=e.event_type,this.samp_ix=e.samp_ix,this.step_ix=e.step_ix,this.gen_id=e.gen_id,this.sigma=e.sigma,this.image=e.image}toString(){return`MsgpackEvent(event_type=${this.event_type}, step_ix=${this.step_ix}, gen_id=${this.gen_id})`}},uh=class{processMetadata(e){const t=JSON.parse(JSON.stringify(e));return this.applyDefaultValues(t),this.handleResolution(t),this.handleUcPreset(t),this.handleQualityTags(t),t.prompt=t.prompt?Ii(t.prompt):"",t.negative_prompt=t.negative_prompt?Ii(t.negative_prompt):"",this.handleActionSpecificParameters(t),this.handleUseCoords(t),this.handleCharacterPrompts(t),this.handleStream(t),this.handleV4Prompt(t),this.handleV4NegativePrompt(t),this.handleModelSpecificSettings(t),this.handleSamplerSpecificSettings(t),this.handleInpaintImg2ImgStrength(t),t}applyDefaultValues(e){e.model=e.model??"nai-diffusion-4-5-full",e.action=e.action??"generate",e.resPreset=e.resPreset??"normal_portrait",e.ucPreset=e.ucPreset??0,e.qualityToggle=e.qualityToggle??!0,e.n_samples=e.n_samples??1,e.steps=e.steps??28,e.scale=e.scale??6,e.dynamic_thresholding=e.dynamic_thresholding??!1,e.seed=e.seed??Math.floor(Math.random()*4294967288),e.sampler=e.sampler??"k_euler_ancestral",e.cfg_rescale=e.cfg_rescale??0,e.noise_schedule=e.noise_schedule??"karras",e.controlnet_strength=e.controlnet_strength??1,e.add_original_image=e.add_original_image??!0,e.autoSmea=e.autoSmea??!1,e.params_version=e.params_version??3,e.prompt=e.prompt??"1girl, cute",e.negative_prompt=e.negative_prompt??"",e.characterPrompts=e.characterPrompts??[],e.skip_cfg_above_sigma=null,e.legacy_uc=e.legacy_uc??!1,e.legacy=e.legacy??!1,e.legacy_v3_extend=e.legacy_v3_extend??!1,e.normalize_reference_strength_multiple=e.normalize_reference_strength_multiple??!0,e.stream=void 0}handleStream(e){Hr(e.model)&&e.action=="generate"&&(e.stream="msgpack")}handleActionSpecificParameters(e){(e.action==="img2img"||e.action==="infill")&&(e.sm=!1,e.sm_dyn=!1,e.strength=e.strength||.3,e.noise=e.noise||0,e.extra_noise_seed=e.extra_noise_seed||Math.floor(Math.random()*4294967288))}handleModelSpecificSettings(e){const t=["nai-diffusion-4-full","nai-diffusion-4-full-inpainting","nai-diffusion-4-curated-preview","nai-diffusion-4-curated-inpainting","nai-diffusion-4-5-curated","nai-diffusion-4-5-curated-inpainting","nai-diffusion-4-5-full","nai-diffusion-4-5-full-inpainting"];e.model&&t.includes(e.model)&&(e.sm=void 0,e.sm_dyn=void 0)}handleSamplerSpecificSettings(e){e.sampler==="k_euler_ancestral"&&(e.deliberate_euler_ancestral_bug=!1,e.prefer_brownian=!0)}handleQualityTags(e){if(!e.qualityToggle)return;let t="";e.model==="nai-diffusion-4-5-full"||e.model==="nai-diffusion-4-5-full-inpainting"?t=", very aesthetic, masterpiece, no text":e.model==="nai-diffusion-4-5-curated"||e.model==="nai-diffusion-4-5-curated-inpainting"?t=", location, masterpiece, no text, -0.8::feet::, rating:general":e.model==="nai-diffusion-4-full"||e.model==="nai-diffusion-4-full-inpainting"?t=", no text, best quality, very aesthetic, absurdres":e.model==="nai-diffusion-4-curated-preview"||e.model==="nai-diffusion-4-curated-inpainting"?t=", rating:general, amazing quality, very aesthetic, absurdres":e.model==="nai-diffusion-3"||e.model==="nai-diffusion-3-inpainting"?t=", best quality, amazing quality, very aesthetic, absurdres":(e.model==="nai-diffusion-furry-3"||e.model==="nai-diffusion-furry-3-inpainting")&&(t=", {best quality}, {amazing quality}"),e.prompt+=t}handleUcPreset(e){let t="";e.model==="nai-diffusion-4-5-full"||e.model==="nai-diffusion-4-5-full-inpainting"?e.ucPreset===0?t=", nsfw, lowres, artistic error, film grain, scan artifacts, worst quality, bad quality, jpeg artifacts, very displeasing, chromatic aberration, dithering, halftone, screentone, multiple views, logo, too many watermarks, negative space, blank page":e.ucPreset===1?t=", nsfw, lowres, artistic error, scan artifacts, worst quality, bad quality, jpeg artifacts, multiple views, very displeasing, too many watermarks, negative space, blank page":e.ucPreset===2?t=", nsfw, {worst quality}, distracting watermark, unfinished, bad quality, {widescreen}, upscale, {sequence}, {{grandfathered content}}, blurred foreground, chromatic aberration, sketch, everyone, [sketch background], simple, [flat colors], ych (character), outline, multiple scenes, [[horror (theme)]], comic":e.ucPreset===3&&(t=", nsfw, lowres, artistic error, film grain, scan artifacts, worst quality, bad quality, jpeg artifacts, very displeasing, chromatic aberration, dithering, halftone, screentone, multiple views, logo, too many watermarks, negative space, blank page, @_@, mismatched pupils, glowing eyes, bad anatomy"):e.model==="nai-diffusion-4-5-curated"||e.model==="nai-diffusion-4-5-curated-inpainting"?e.ucPreset===0?t=", blurry, lowres, upscaled, artistic error, film grain, scan artifacts, worst quality, bad quality, jpeg artifacts, very displeasing, chromatic aberration, halftone, multiple views, logo, too many watermarks, negative space, blank page":e.ucPreset===1?t=", blurry, lowres, upscaled, artistic error, scan artifacts, jpeg artifacts, logo, too many watermarks, negative space, blank page":e.ucPreset===2&&(t=", blurry, lowres, upscaled, artistic error, film grain, scan artifacts, bad anatomy, bad hands, worst quality, bad quality, jpeg artifacts, very displeasing, chromatic aberration, halftone, multiple views, logo, too many watermarks, @_@, mismatched pupils, glowing eyes, negative space, blank page"):e.model==="nai-diffusion-4-full"||e.model==="nai-diffusion-4-full-inpainting"?e.ucPreset===0?t=", blurry, lowres, error, film grain, scan artifacts, worst quality, bad quality, jpeg artifacts, very displeasing, chromatic aberration, multiple views, logo, too many watermarks":e.ucPreset===1&&(t=", blurry, lowres, error, worst quality, bad quality, jpeg artifacts, very displeasing"):e.model==="nai-diffusion-4-curated-preview"||e.model==="nai-diffusion-4-curated-inpainting"?e.ucPreset===0?t=", blurry, lowres, error, film grain, scan artifacts, worst quality, bad quality, jpeg artifacts, very displeasing, chromatic aberration, logo, dated, signature, multiple views, gigantic breasts":e.ucPreset===1&&(t=", blurry, lowres, error, worst quality, bad quality, jpeg artifacts, very displeasing, logo, dated, signature"):e.model==="nai-diffusion-3"||e.model==="nai-diffusion-3-inpainting"?e.ucPreset===0?t=", lowres, {bad}, error, fewer, extra, missing, worst quality, jpeg artifacts, bad quality, watermark, unfinished, displeasing, chromatic aberration, signature, extra digits, artistic error, username, scan, [abstract],":e.ucPreset===1?t=", lowres, jpeg artifacts, worst quality, watermark, blurry, very displeasing,":e.ucPreset===2&&(t=", lowres, {bad}, error, fewer, extra, missing, worst quality, jpeg artifacts, bad quality, watermark, unfinished, displeasing, chromatic aberration, signature, extra digits, artistic error, username, scan, [abstract], bad anatomy, bad hands, @_@, mismatched pupils, heart-shaped pupils, glowing eyes,"):(e.model==="nai-diffusion-furry-3"||e.model==="nai-diffusion-furry-3-inpainting")&&(e.ucPreset===0?t=", {{worst quality}}, [displeasing], {unusual pupils}, guide lines, {{unfinished}}, {bad}, url, artist name, {{tall image}}, mosaic, {sketch page}, comic panel, impact (font), [dated], {logo}, ych, {what}, {where is your god now}, {distorted text}, repeated text, {floating head}, {1994}, {widescreen}, absolutely everyone, sequence, {compression artifacts}, hard translated, {cropped}, {commissioner name}, unknown text, high contrast,":e.ucPreset===1&&(t=", {worst quality}, guide lines, unfinished, bad, url, tall image, widescreen, compression artifacts, unknown text,")),e.negative_prompt=t+", "+e.negative_prompt}handleInpaintImg2ImgStrength(e){(e.model==="nai-diffusion-4-5-full"||e.model==="nai-diffusion-4-5-full-inpainting")&&(e.inpaintImg2ImgStrength=e.inpaintImg2ImgStrength||1)}handleUseCoords(e){if(!e.characterPrompts?.length){e.use_coords=!1;return}e.use_coords=e.characterPrompts.some(t=>t.center?.x!==.5||t.center?.y!==.5)}handleCharacterPrompts(e){e.characterPrompts?.length&&e.characterPrompts.forEach(t=>{t.enabled=t.enabled??!0,t.prompt=t.prompt?Ii(t.prompt):"1girl, cute",t.uc=t.uc?Ii(t.uc):"lowres, aliasing,",t.center=t.center||{x:.5,y:.5},t.center.x=t.center.x??.5,t.center.y=t.center.y??.5})}handleV4Prompt(e){if(e.v4_prompt)return;const t=["nai-diffusion-4-full","nai-diffusion-4-full-inpainting","nai-diffusion-4-curated-preview","nai-diffusion-4-curated-inpainting","nai-diffusion-4-5-curated","nai-diffusion-4-5-curated-inpainting","nai-diffusion-4-5-full","nai-diffusion-4-5-full-inpainting"];if(!e.model||!t.includes(e.model))return;const n=[];e.characterPrompts?.forEach(i=>{i.enabled&&n.push({char_caption:i.prompt,centers:[i.center]})}),e.v4_prompt={caption:{base_caption:e.prompt||"",char_captions:n},use_coords:e.use_coords||!1,use_order:!0}}handleV4NegativePrompt(e){if(e.v4_negative_prompt)return;const t=["nai-diffusion-4-full","nai-diffusion-4-full-inpainting","nai-diffusion-4-curated-preview","nai-diffusion-4-curated-inpainting","nai-diffusion-4-5-curated","nai-diffusion-4-5-curated-inpainting","nai-diffusion-4-5-full","nai-diffusion-4-5-full-inpainting"];if(!e.model||!t.includes(e.model))return;const n=[];e.characterPrompts?.forEach(i=>{i.enabled&&i.uc&&n.push({char_caption:i.uc,centers:[i.center]})}),e.v4_negative_prompt={caption:{base_caption:e.negative_prompt||"",char_captions:n},legacy_uc:e.legacy_uc||!1}}getResolutionDimensions(e){return{small_portrait:[512,768],small_landscape:[768,512],small_square:[640,640],normal_portrait:[832,1216],normal_landscape:[1216,832],normal_square:[1024,1024],large_portrait:[1024,1536],large_landscape:[1536,1024],large_square:[1472,1472],wallpaper_portrait:[1088,1920],wallpaper_landscape:[1920,1088]}[e]||[832,1216]}handleResolution(e){if(e.width==null||e.height==null)if(e.resPreset){const r=this.getResolutionDimensions(e.resPreset);e.width=r[0],e.height=r[1]}else e.width=832,e.height=1216;else e.width=Math.floor((e.width+63)/64)*64,e.height=Math.floor((e.height+63)/64)*64;const t=e.width*e.height,n=4096,i=3047424;if(t<n||t>i)throw new Error(`The maximum allowed total resolution is ${i} px, got ${e.width}x${e.height}=${t}.`)}},fh=new uh,dh=class{constructor(e){this.verbose=!1,this.vibeCache=new Map,this.token=e.token,this.host=e.host||"https://image.novelai.net",this.timeout=e.timeout||3e4,this.retryConfig=e.retry,this.verbose=e.verbose||!1,this.headers={...ic,Authorization:`Bearer ${this.token}`}}async generateImage(e,t=!1,n=!1){const i=this.processMetadata(e);if(this.verbose){const s=Wc(i,n);console.info(`Generating image... estimated Anlas cost: ${s}`)}await this.encodeVibe(i);const r=qc(i);return yo(async()=>i.model&&Hr(i.model)?t?this.streamV4Events(r):this.processV4Response(r):this.processV3Response(r),this.retryConfig)}async makeRequest(e,t){const n=new AbortController,i=setTimeout(()=>n.abort(),this.timeout),r=JSON.stringify(t),s=bo(this.headers);this.verbose&&(console.debug("[Headers] for image generation:",s),console.debug("[Payload] for image generation:",r));try{const o=await fetch(e,{method:"POST",headers:s,body:r,signal:n.signal});return await jc(o)}finally{clearTimeout(i)}}async processV3Response(e){try{const t=await this.makeRequest(`${this.host}/ai/generate-image`,e);return this.extractImagesFromZip(t)}catch(t){throw this.handleRequestError(t)}}async processV4Response(e){try{const t=await this.makeRequest(`${this.host}/ai/generate-image-stream`,e);return this.extractImagesFromMsgpack(t)}catch(t){throw this.handleRequestError(t)}}async extractImagesFromZip(e){const t=await this.getResponseBuffer(e),n=await nc.default.loadAsync(t),i=[],r=this.host.toLowerCase();let s=0;for(const o of Object.keys(n.files)){const a=n.files[o];if(!a.dir){const u=await a.async("uint8array"),f=this.generateTimestamp();i.push(new Kr({filename:`${f}_${r}_p${s}.png`,data:u})),s++}}return i}async extractImagesFromMsgpack(e){const t=await this.getResponseBuffer(e),n=new Uint8Array(t);return Oc(n).filter(r=>r.event_type==="final").map(r=>r.image)}async getResponseBuffer(e){if(e.data instanceof ArrayBuffer)return e.data;if(e.data)return await new Response(e.data).arrayBuffer();throw new Error("No data received from API")}generateTimestamp(){return new Date().toISOString().replace(/[-:]/g,"").replace("T","_").substring(0,15)}handleRequestError(e){return e.name==="AbortError"?new Error("Request timed out, please try again. If the problem persists, consider setting a higher 'timeout' value when initiating the NovelAI client."):e}processMetadata(e){return fh.processMetadata(e)}async useDirectorTool(e){return yo(async()=>{try{const t=await this.makeRequest(`${this.host}/ai/augment-image`,e);if(!t.data)throw new Error("Received empty response from the server.");const n=await this.getResponseBuffer(t);let i;try{i=(await this.extractImagesFromZip(t))[0]?.data||new Uint8Array(n)}catch{i=new Uint8Array(n)}return new Kr({filename:sc(e.req_type),data:i})}catch(t){throw this.handleRequestError(t)}},this.retryConfig)}async createDirectorRequest(e,t,n={}){const i=await yl(e),r={req_type:t,width:i.width,height:i.height,image:i.base64,...n};return this.useDirectorTool(r)}async lineArt(e){return this.createDirectorRequest(e,"lineart")}async sketch(e){return this.createDirectorRequest(e,"sketch")}async backgroundRemoval(e){return this.createDirectorRequest(e,"bg-removal")}async declutter(e){return this.createDirectorRequest(e,"declutter")}async colorize(e,t="",n=0){return this.createDirectorRequest(e,"colorize",{prompt:t,defry:n})}async changeEmotion(e,t="neutral",n="",i=0){const r=`${t};;${n}`;return this.createDirectorRequest(e,"emotion",{prompt:r,defry:i??0})}async encodeVibe(e){if(!e.model||!Hr(e.model)||!e.reference_image_multiple?.length)return;const t=[];for(let n=0;n<e.reference_image_multiple.length;n++){const i=e.reference_image_multiple[n],r=e.reference_information_extracted_multiple?.[n]??1,o=`${await this.getImageHash(i)}:${r}:${e.model}`;let a=this.vibeCache.get(o);a||(a=await this.fetchVibeToken(i,r,e.model),this.vibeCache.set(o,a)),t.push(a)}e.reference_image_multiple=t,e.reference_information_extracted_multiple=void 0}async fetchVibeToken(e,t,n){const i={image:e,information_extracted:t,model:n};try{const r=await this.makeRequest(`${this.host}/ai/encode-vibe`,i),s=await this.getResponseBuffer(r);return new TextDecoder().decode(s)}catch(r){throw this.handleRequestError(r)}}async getImageHash(e){if(typeof window>"u")try{const t=Et("crypto"),n=Buffer.from(e,"base64");return t.createHash("sha256").update(n).digest("hex")}catch(t){throw new Error("Failed to hash image: "+t)}else try{const t=atob(e),n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);const i=await crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(i)).map(s=>s.toString(16).padStart(2,"0")).join("")}catch(t){throw new Error("Failed to hash image: "+t)}}async*streamV4Events(e){const t=new AbortController,n=setTimeout(()=>t.abort(),this.timeout),i=JSON.stringify(e),r=bo(this.headers);this.verbose&&(console.log("[Headers] for image generation:",r),console.info("[Payload] for image generation:",i));try{const s=await fetch(`${this.host}/ai/generate-image-stream`,{method:"POST",headers:r,body:i,signal:t.signal});if(!s.ok)throw new Error(`HTTP Error: ${s.status} ${s.statusText}`);if(!s.body)throw new Error("No response body available for streaming");console.log(`[Streaming] Started processing V4 events for action: ${e.action}`);const o=e.action==="infill"?new Mc:new Lc,a=s.body.getReader();try{for(;;){const{done:u,value:f}=await a.read();if(u)break;for await(const l of o.feedChunk(f))yield l}}finally{a.releaseLock()}}finally{clearTimeout(n)}}};const Tn={dark:{name:"Dark",colors:{primary:"#667eea",primaryHover:"#7a8ef0",primaryLight:"#8b9ef5",secondary:"#764ba2",secondaryHover:"#8650b8",background:"#1e1e1e",backgroundLight:"#2a2a2a",backgroundHover:"#353535",backgroundActive:"#404040",backgroundElevated:"#2f2f2f",text:"#ffffff",textMuted:"#b0b0b0",textDisabled:"#666666",textInverse:"#1a1a1a",border:"#555555",borderLight:"#666666",borderDark:"#404040",buttonBg:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",buttonHover:"linear-gradient(135deg, #7a8ef0 0%, #8650b8 100%)",buttonActive:"linear-gradient(135deg, #5a6ed8 0%, #6a3a92 100%)",buttonText:"#ffffff",navBg:"#2a2a2a",navBorder:"#555555",navHover:"#353535",panelBg:"#2a2a2a",panelBorder:"#555555",panelHeader:"#353535",inputBg:"#2a2a2a",inputBorder:"#555555",inputFocus:"#667eea",inputText:"#ffffff",inputPlaceholder:"#888888",cardBg:"#2a2a2a",cardBorder:"#555555",cardHover:"#353535",success:"#10b981",successBg:"#064e3b",warning:"#f59e0b",warningBg:"#78350f",error:"#ef4444",errorBg:"#7f1d1d",info:"#3b82f6",infoBg:"#1e3a8a",shadow:"rgba(0, 0, 0, 0.3)",shadowLight:"rgba(0, 0, 0, 0.1)"}},light:{name:"Light",colors:{primary:"#667eea",primaryHover:"#7a8ef0",primaryLight:"#8b9ef5",secondary:"#764ba2",secondaryHover:"#8650b8",background:"#ffffff",backgroundLight:"#f8f8f8",backgroundHover:"#eeeeee",backgroundActive:"#e0e0e0",backgroundElevated:"#f5f5f5",text:"#1a1a1a",textMuted:"#666666",textDisabled:"#999999",textInverse:"#ffffff",border:"#cccccc",borderLight:"#dddddd",borderDark:"#aaaaaa",buttonBg:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",buttonHover:"linear-gradient(135deg, #7a8ef0 0%, #8650b8 100%)",buttonActive:"linear-gradient(135deg, #5a6ed8 0%, #6a3a92 100%)",buttonText:"#ffffff",navBg:"#f8f8f8",navBorder:"#cccccc",navHover:"#eeeeee",panelBg:"#f8f8f8",panelBorder:"#cccccc",panelHeader:"#eeeeee",inputBg:"#ffffff",inputBorder:"#cccccc",inputFocus:"#667eea",inputText:"#1a1a1a",inputPlaceholder:"#999999",cardBg:"#ffffff",cardBorder:"#cccccc",cardHover:"#f5f5f5",success:"#059669",successBg:"#d1fae5",warning:"#d97706",warningBg:"#fef3c7",error:"#dc2626",errorBg:"#fee2e2",info:"#2563eb",infoBg:"#dbeafe",shadow:"rgba(0, 0, 0, 0.1)",shadowLight:"rgba(0, 0, 0, 0.05)"}},blue:{name:"Blue",colors:{primary:"#3b82f6",primaryHover:"#60a5fa",primaryLight:"#93c5fd",secondary:"#2563eb",secondaryHover:"#3b82f6",background:"#0f172a",backgroundLight:"#1e293b",backgroundHover:"#334155",backgroundActive:"#475569",backgroundElevated:"#1e293b",text:"#f8fafc",textMuted:"#cbd5e1",textDisabled:"#64748b",textInverse:"#0f172a",border:"#475569",borderLight:"#64748b",borderDark:"#334155",buttonBg:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",buttonHover:"linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%)",buttonActive:"linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%)",buttonText:"#ffffff",navBg:"#1e293b",navBorder:"#475569",navHover:"#334155",panelBg:"#1e293b",panelBorder:"#475569",panelHeader:"#334155",inputBg:"#1e293b",inputBorder:"#475569",inputFocus:"#3b82f6",inputText:"#f8fafc",inputPlaceholder:"#94a3b8",cardBg:"#1e293b",cardBorder:"#475569",cardHover:"#334155",success:"#10b981",successBg:"#064e3b",warning:"#f59e0b",warningBg:"#78350f",error:"#ef4444",errorBg:"#7f1d1d",info:"#3b82f6",infoBg:"#1e3a8a",shadow:"rgba(15, 23, 42, 0.4)",shadowLight:"rgba(15, 23, 42, 0.2)"}},green:{name:"Green",colors:{primary:"#10b981",primaryHover:"#34d399",primaryLight:"#6ee7b7",secondary:"#059669",secondaryHover:"#10b981",background:"#0a1f1a",backgroundLight:"#1a2e28",backgroundHover:"#2a3d36",backgroundActive:"#3a4c44",backgroundElevated:"#1a2e28",text:"#f0fdf4",textMuted:"#c6f6d5",textDisabled:"#86efac",textInverse:"#0a1f1a",border:"#3a4c44",borderLight:"#4a5d55",borderDark:"#2a3d36",buttonBg:"linear-gradient(135deg, #10b981 0%, #059669 100%)",buttonHover:"linear-gradient(135deg, #34d399 0%, #10b981 100%)",buttonActive:"linear-gradient(135deg, #059669 0%, #047857 100%)",buttonText:"#ffffff",navBg:"#1a2e28",navBorder:"#3a4c44",navHover:"#2a3d36",panelBg:"#1a2e28",panelBorder:"#3a4c44",panelHeader:"#2a3d36",inputBg:"#1a2e28",inputBorder:"#3a4c44",inputFocus:"#10b981",inputText:"#f0fdf4",inputPlaceholder:"#86efac",cardBg:"#1a2e28",cardBorder:"#3a4c44",cardHover:"#2a3d36",success:"#10b981",successBg:"#064e3b",warning:"#f59e0b",warningBg:"#78350f",error:"#ef4444",errorBg:"#7f1d1d",info:"#3b82f6",infoBg:"#1e3a8a",shadow:"rgba(10, 31, 26, 0.4)",shadowLight:"rgba(10, 31, 26, 0.2)"}},purple:{name:"Purple",colors:{primary:"#8b5cf6",primaryHover:"#a78bfa",primaryLight:"#c4b5fd",secondary:"#7c3aed",secondaryHover:"#8b5cf6",background:"#1a0f2e",backgroundLight:"#2a1f3e",backgroundHover:"#3a2f4e",backgroundActive:"#4a3f5e",backgroundElevated:"#2a1f3e",text:"#faf5ff",textMuted:"#e9d5ff",textDisabled:"#c084fc",textInverse:"#1a0f2e",border:"#4a3f5e",borderLight:"#5a4f6e",borderDark:"#3a2f4e",buttonBg:"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)",buttonHover:"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)",buttonActive:"linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%)",buttonText:"#ffffff",navBg:"#2a1f3e",navBorder:"#4a3f5e",navHover:"#3a2f4e",panelBg:"#2a1f3e",panelBorder:"#4a3f5e",panelHeader:"#3a2f4e",inputBg:"#2a1f3e",inputBorder:"#4a3f5e",inputFocus:"#8b5cf6",inputText:"#faf5ff",inputPlaceholder:"#c084fc",cardBg:"#2a1f3e",cardBorder:"#4a3f5e",cardHover:"#3a2f4e",success:"#10b981",successBg:"#064e3b",warning:"#f59e0b",warningBg:"#78350f",error:"#ef4444",errorBg:"#7f1d1d",info:"#3b82f6",infoBg:"#1e3a8a",shadow:"rgba(26, 15, 46, 0.4)",shadowLight:"rgba(26, 15, 46, 0.2)"}},red:{name:"Red",colors:{primary:"#ef4444",primaryHover:"#f87171",primaryLight:"#fca5a5",secondary:"#dc2626",secondaryHover:"#ef4444",background:"#1f0a0a",backgroundLight:"#2f1a1a",backgroundHover:"#3f2a2a",backgroundActive:"#4f3a3a",backgroundElevated:"#2f1a1a",text:"#fef2f2",textMuted:"#fee2e2",textDisabled:"#fca5a5",textInverse:"#1f0a0a",border:"#4f3a3a",borderLight:"#5f4a4a",borderDark:"#3f2a2a",buttonBg:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",buttonHover:"linear-gradient(135deg, #f87171 0%, #ef4444 100%)",buttonActive:"linear-gradient(135deg, #dc2626 0%, #b91c1c 100%)",buttonText:"#ffffff",navBg:"#2f1a1a",navBorder:"#4f3a3a",navHover:"#3f2a2a",panelBg:"#2f1a1a",panelBorder:"#4f3a3a",panelHeader:"#3f2a2a",inputBg:"#2f1a1a",inputBorder:"#4f3a3a",inputFocus:"#ef4444",inputText:"#fef2f2",inputPlaceholder:"#fca5a5",cardBg:"#2f1a1a",cardBorder:"#4f3a3a",cardHover:"#3f2a2a",success:"#10b981",successBg:"#064e3b",warning:"#f59e0b",warningBg:"#78350f",error:"#ef4444",errorBg:"#7f1d1d",info:"#3b82f6",infoBg:"#1e3a8a",shadow:"rgba(31, 10, 10, 0.4)",shadowLight:"rgba(31, 10, 10, 0.2)"}},orange:{name:"Orange",colors:{primary:"#f97316",primaryHover:"#fb923c",primaryLight:"#fdba74",secondary:"#ea580c",secondaryHover:"#f97316",background:"#1f0f0a",backgroundLight:"#2f1f1a",backgroundHover:"#3f2f2a",backgroundActive:"#4f3f3a",backgroundElevated:"#2f1f1a",text:"#fff7ed",textMuted:"#ffedd5",textDisabled:"#fdba74",textInverse:"#1f0f0a",border:"#4f3f3a",borderLight:"#5f4f4a",borderDark:"#3f2f2a",buttonBg:"linear-gradient(135deg, #f97316 0%, #ea580c 100%)",buttonHover:"linear-gradient(135deg, #fb923c 0%, #f97316 100%)",buttonActive:"linear-gradient(135deg, #ea580c 0%, #c2410c 100%)",buttonText:"#ffffff",navBg:"#2f1f1a",navBorder:"#4f3f3a",navHover:"#3f2f2a",panelBg:"#2f1f1a",panelBorder:"#4f3f3a",panelHeader:"#3f2f2a",inputBg:"#2f1f1a",inputBorder:"#4f3f3a",inputFocus:"#f97316",inputText:"#fff7ed",inputPlaceholder:"#fdba74",cardBg:"#2f1f1a",cardBorder:"#4f3f3a",cardHover:"#3f2f2a",success:"#10b981",successBg:"#064e3b",warning:"#f59e0b",warningBg:"#78350f",error:"#ef4444",errorBg:"#7f1d1d",info:"#3b82f6",infoBg:"#1e3a8a",shadow:"rgba(31, 15, 10, 0.4)",shadowLight:"rgba(31, 15, 10, 0.2)"}},pink:{name:"Pink",colors:{primary:"#ec4899",primaryHover:"#f472b6",primaryLight:"#f9a8d4",secondary:"#db2777",secondaryHover:"#ec4899",background:"#1f0a1a",backgroundLight:"#2f1a2a",backgroundHover:"#3f2a3a",backgroundActive:"#4f3a4a",backgroundElevated:"#2f1a2a",text:"#fdf2f8",textMuted:"#fce7f3",textDisabled:"#f9a8d4",textInverse:"#1f0a1a",border:"#4f3a4a",borderLight:"#5f4a5a",borderDark:"#3f2a3a",buttonBg:"linear-gradient(135deg, #ec4899 0%, #db2777 100%)",buttonHover:"linear-gradient(135deg, #f472b6 0%, #ec4899 100%)",buttonActive:"linear-gradient(135deg, #db2777 0%, #be185d 100%)",buttonText:"#ffffff",navBg:"#2f1a2a",navBorder:"#4f3a4a",navHover:"#3f2a3a",panelBg:"#2f1a2a",panelBorder:"#4f3a4a",panelHeader:"#3f2a3a",inputBg:"#2f1a2a",inputBorder:"#4f3a4a",inputFocus:"#ec4899",inputText:"#fdf2f8",inputPlaceholder:"#f9a8d4",cardBg:"#2f1a2a",cardBorder:"#4f3a4a",cardHover:"#3f2a3a",success:"#10b981",successBg:"#064e3b",warning:"#f59e0b",warningBg:"#78350f",error:"#ef4444",errorBg:"#7f1d1d",info:"#3b82f6",infoBg:"#1e3a8a",shadow:"rgba(31, 10, 26, 0.4)",shadowLight:"rgba(31, 10, 26, 0.2)"}},cyan:{name:"Cyan",colors:{primary:"#06b6d4",primaryHover:"#22d3ee",primaryLight:"#67e8f9",secondary:"#0891b2",secondaryHover:"#06b6d4",background:"#0a1f1f",backgroundLight:"#1a2f2f",backgroundHover:"#2a3f3f",backgroundActive:"#3a4f4f",backgroundElevated:"#1a2f2f",text:"#ecfeff",textMuted:"#cffafe",textDisabled:"#67e8f9",textInverse:"#0a1f1f",border:"#3a4f4f",borderLight:"#4a5f5f",borderDark:"#2a3f3f",buttonBg:"linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)",buttonHover:"linear-gradient(135deg, #22d3ee 0%, #06b6d4 100%)",buttonActive:"linear-gradient(135deg, #0891b2 0%, #0e7490 100%)",buttonText:"#ffffff",navBg:"#1a2f2f",navBorder:"#3a4f4f",navHover:"#2a3f3f",panelBg:"#1a2f2f",panelBorder:"#3a4f4f",panelHeader:"#2a3f3f",inputBg:"#1a2f2f",inputBorder:"#3a4f4f",inputFocus:"#06b6d4",inputText:"#ecfeff",inputPlaceholder:"#67e8f9",cardBg:"#1a2f2f",cardBorder:"#3a4f4f",cardHover:"#2a3f3f",success:"#10b981",successBg:"#064e3b",warning:"#f59e0b",warningBg:"#78350f",error:"#ef4444",errorBg:"#7f1d1d",info:"#3b82f6",infoBg:"#1e3a8a",shadow:"rgba(10, 31, 31, 0.4)",shadowLight:"rgba(10, 31, 31, 0.2)"}},auto:{name:"Auto",colors:null}};function Sl(e=null,t=null){let n=e;if(!n&&t&&(n=t.theme?.current||"dark"),n||(n="dark"),n==="auto"){if(typeof window<"u"&&window.matchMedia){const i=window.matchMedia("(prefers-color-scheme: dark)").matches;return Tn[i?"dark":"light"]}return Tn.dark}return Tn[n]||Tn.dark}function ch(e){return Te(()=>Sl(null,e))}function hh(e=null,t=null){const n=Sl(e,t);if(!n||!n.colors){const i=Tn.dark;wo(i.colors);return}wo(n.colors)}function wo(e){const t=o=>{o&&(o.style.setProperty("--st-vision-primary",e.primary),o.style.setProperty("--st-vision-primary-hover",e.primaryHover),o.style.setProperty("--st-vision-primary-light",e.primaryLight),o.style.setProperty("--st-vision-secondary",e.secondary),o.style.setProperty("--st-vision-secondary-hover",e.secondaryHover),o.style.setProperty("--st-vision-bg",e.background),o.style.setProperty("--st-vision-bg-light",e.backgroundLight),o.style.setProperty("--st-vision-bg-hover",e.backgroundHover),o.style.setProperty("--st-vision-bg-active",e.backgroundActive),o.style.setProperty("--st-vision-bg-elevated",e.backgroundElevated),o.style.setProperty("--st-vision-text",e.text),o.style.setProperty("--st-vision-text-muted",e.textMuted),o.style.setProperty("--st-vision-text-disabled",e.textDisabled),o.style.setProperty("--st-vision-text-inverse",e.textInverse),o.style.setProperty("--st-vision-border",e.border),o.style.setProperty("--st-vision-border-light",e.borderLight),o.style.setProperty("--st-vision-border-dark",e.borderDark),o.style.setProperty("--st-vision-button-bg",e.buttonBg),o.style.setProperty("--st-vision-button-hover",e.buttonHover),o.style.setProperty("--st-vision-button-active",e.buttonActive),o.style.setProperty("--st-vision-button-text",e.buttonText),o.style.setProperty("--st-vision-nav-bg",e.navBg),o.style.setProperty("--st-vision-nav-border",e.navBorder),o.style.setProperty("--st-vision-nav-hover",e.navHover),o.style.setProperty("--st-vision-panel-bg",e.panelBg),o.style.setProperty("--st-vision-panel-border",e.panelBorder),o.style.setProperty("--st-vision-panel-header",e.panelHeader),o.style.setProperty("--st-vision-input-bg",e.inputBg),o.style.setProperty("--st-vision-input-border",e.inputBorder),o.style.setProperty("--st-vision-input-focus",e.inputFocus),o.style.setProperty("--st-vision-input-text",e.inputText),o.style.setProperty("--st-vision-input-placeholder",e.inputPlaceholder),o.style.setProperty("--st-vision-card-bg",e.cardBg),o.style.setProperty("--st-vision-card-border",e.cardBorder),o.style.setProperty("--st-vision-card-hover",e.cardHover),o.style.setProperty("--st-vision-success",e.success),o.style.setProperty("--st-vision-success-bg",e.successBg),o.style.setProperty("--st-vision-warning",e.warning),o.style.setProperty("--st-vision-warning-bg",e.warningBg),o.style.setProperty("--st-vision-error",e.error),o.style.setProperty("--st-vision-error-bg",e.errorBg),o.style.setProperty("--st-vision-info",e.info),o.style.setProperty("--st-vision-info-bg",e.infoBg),o.style.setProperty("--st-vision-shadow",e.shadow),o.style.setProperty("--st-vision-shadow-light",e.shadowLight),o.style.setProperty("--bg-primary",e.background),o.style.setProperty("--bg-secondary",e.backgroundLight),o.style.setProperty("--border-color",e.border),o.style.setProperty("--text-primary",e.text))};let n=document.getElementById("st-vision-app");if(n||(n=document.querySelector(".st-vision-app")),!n)return;t(n),[".st_vision_modal",".vision_popup_overlay",".st-vision-image-history-modal",".st-vision-settings-panel",".st-vision-confirm-dialog",".st-vision-input-dialog"].forEach(o=>{document.querySelectorAll(o).forEach(u=>{t(u)})}),n.querySelectorAll(".st-vision-inline-container").forEach(o=>{t(o)}),n.querySelectorAll(".st-vision-panel, .st-vision-card, .st-vision-modal-content").forEach(o=>{t(o)})}const ei="st-paint",El=ul,ti=dl,kl=cl,Cl=hl,Tl=ll,Al=pl,ph=fl,Xi=Yi,gh={small_portrait:[512,768],small_landscape:[768,512],small_square:[640,640],normal_portrait:[832,1216],normal_landscape:[1216,832],normal_square:[1024,1024],large_portrait:[1024,1536],large_landscape:[1536,1024],large_square:[1472,1472],wallpaper_portrait:[1080,1920],wallpaper_landscape:[1920,1080]},Il={prompt:"",prompt_prefix:"",prompt_suffix:"",model:El.V4_5,action:ti.GENERATE,resPreset:kl.NORMAL_PORTRAIT,negative_prompt:"",qualityToggle:!1,ucPreset:0,width:832,height:1216,n_samples:1,steps:28,scale:6.6,dynamic_thresholding:!1,seed:-1,extra_noise_seed:-1,sampler:Cl.EULER_ANC,sm:!1,sm_dyn:!1,cfg_rescale:0,noise_schedule:Al.KARRAS,image:void 0,strength:void 0,noise:void 0,controlnet_strength:void 0,controlnet_condition:void 0,controlnet_model:void 0,add_original_image:void 0,mask:void 0,reference_image_multiple:void 0,reference_information_extracted_multiple:void 0,reference_strength_multiple:void 0,params_version:void 0,autoSmea:void 0,characterPrompts:void 0,v4_prompt:void 0,v4_negative_prompt:void 0,skip_cfg_above_sigma:void 0,use_coords:void 0,legacy_uc:void 0,normalize_reference_strength_multiple:void 0,deliberate_euler_ancestral_bug:void 0,prefer_brownian:void 0,inpaintImg2ImgStrength:void 0,legacy:void 0,legacy_v3_extend:void 0,stream:void 0},Dl={token:"",host:Tl.WEB,timeout:12e4,...Il},je=ir({configs:{default:{...Dl}},currentConfigName:"default",modalVisible:!1,fabPosition:{x:null,y:null},fabSize:56,showFloatingButton:!0,chatImageGen:{enabled:!0,tagPrefix:"[img-gen]",tagSuffix:"[/img-gen]",useRequestQueue:!0,queueDelay:8,queueDelayWhen:"after_response"},theme:{current:"dark"}}),mh=Te(()=>je.configs[je.currentConfigName]),vh=ch(je);function Yr(e=null){hh(e,je)}function Pl(){try{const{extensionSettings:e}=SillyTavern.getContext();let t=e?.[ei];if(console.log("[ST Vision] Loading state, tmp=",t),!t)e[ei]=je;else{for(const n in t)t[n]!==void 0&&(typeof t[n]=="object"&&t[n]!==null&&!Array.isArray(t[n])&&je[n]&&typeof je[n]=="object"?Object.assign(je[n],t[n]):je[n]=t[n]);e[ei]=je}console.log("[ST Vision] Load state done. Theme:",je.theme)}catch(e){throw console.error("[ST Vision] Failed to load state:",e),new Error("extension_settings not available")}}async function Bn(){try{const{extensionSettings:e}=SillyTavern.getContext(),{saveSettingsDebounced:t}=SillyTavern.getContext();e[ei]=je,t(),console.log("[ST Vision] Save state done. Theme:",je.theme),console.log("[ST Vision] Saved extensionSettings:",e[ei])}catch(e){throw console.error("[ST Vision] Failed to save state:",e),new Error("failed to save")}}const Xr="default";function _h(){return Object.keys(je.configs)}async function Es(e,t){je.configs||(je.configs={});const n=JSON.parse(JSON.stringify(t));return je.configs[e]=n,await Bn(),console.log(`[ST Vision] Saved config: ${e}`),!0}function bh(e){const t=je.configs?.[e];if(t){const n=JSON.parse(JSON.stringify(t));return console.log(`[ST Vision] Loaded config: ${e}`),n}return console.log(`[ST Vision] Config not found: ${e}`),null}async function Rl(e){if(e===Xr)throw new Error("Cannot delete default configuration");if(je.configs?.[e])return delete je.configs[e],je.currentConfigName===e&&(je.currentConfigName=Xr),await Bn(),console.log(`[ST Vision] Deleted config: ${e}`),!0;throw new Error(`Configuration ${e} not found`)}async function Ll(e,t){if(e===Xr)throw new Error("Cannot rename default configuration");const n=je.configs?.[e];if(!n)throw new Error(`Configuration ${e} not found`);return je.configs[t]=n,delete je.configs[e],je.currentConfigName===e&&(je.currentConfigName=t),await Bn(),console.log(`[ST Vision] Renamed config: ${e} -> ${t}`),!0}function Ml(e,t=!1){const n=bh(e);if(!n)throw new Error(`Configuration ${e} not found`);const i={...n};t||(i.token="");const r=new Blob([JSON.stringify(i,null,2)],{type:"application/json"}),s=URL.createObjectURL(r),o=document.createElement("a");return o.href=s,o.download=`st-vision-config-${e}-${Date.now()}.json`,o.click(),URL.revokeObjectURL(s),!0}async function Ul(e,t=!1,n=""){const r=await(await new Promise((o,a)=>{const u=document.createElement("input");u.type="file",u.accept=".json",u.onchange=()=>u.files?.[0]?o(u.files[0]):a(new Error("Import cancelled")),u.click()})).text(),s=JSON.parse(r);t||(s.token=n),await Es(e,s)}async function yh(e){return je.currentConfigName=e,await Bn(),!0}async function wh(){return await Rl(je.currentConfigName),!0}async function xh(e){return await Ll(je.currentConfigName,e),!0}function Sh(e=!1){return Ml(je.currentConfigName,e),!0}async function Eh(e=!1,t=""){return await Ul(je.currentConfigName,e,t),!0}async function kh(e){return await Es(e,je.configs[je.currentConfigName]),!0}const Yt=()=>({state:je,loadState:Pl,saveState:Bn,Host:Tl,Model:El,Resolution:kl,RESOLUTION_DIMENSIONS:gh,Sampler:Cl,Noise:Al,Action:ti,Controlnet:ph,DEFAULT_CONFIG:Dl,Metadata:Il,currentConfig:mh,listConfigs:_h,saveConfig:Es,deleteConfig:Rl,renameConfig:Ll,exportConfig:Ml,importConfig:Ul,setCurrentConfigName:yh,exportCurrentConfig:Sh,importCurrentConfig:Eh,deleteCurrentConfig:wh,renameCurrentConfig:xh,duplicateCurrentConfig:kh,THEMES:Tn,currentTheme:vh,applyTheme:Yr});function Ch(){if(Pl(),je.modalVisible=!1,je.theme||(je.theme={current:"dark"}),je.showFloatingButton===void 0&&(je.showFloatingButton=!0),typeof window<"u"){window.stVisionState=je,window.stVisionSaveState=Bn;const e=()=>{const t=je.theme?.current||"dark";console.log("[ST Vision] Applying theme on init:",t),Yr(t)};if(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{setTimeout(e,200)}):setTimeout(e,200),window.matchMedia){const t=window.matchMedia("(prefers-color-scheme: dark)"),n=()=>{je.theme?.current==="auto"&&(console.log("[ST Vision] System theme changed, applying auto theme"),Yr("auto"))};t.addEventListener("change",n)}}}Ch();const tn=(e,t)=>{const n=e.__vccOpts||e;for(const[i,r]of t)n[i]=r;return n},Th={__name:"FloatingButton",setup(e){const{state:t,saveState:n}=Yt(),i=Te(()=>t.fabSize||56),r=Te(()=>Math.round(i.value*.43));function s(){t.modalVisible=!t.modalVisible}function o(U,M){t.fabPosition={x:U,y:M},n()}const a=ct(null),u=ct(!1),f=ct(0);let l=0,m=0,p=0,c=0,g=0,x=0;function v(){if(!a.value)return;const U=a.value,M=U.offsetWidth,W=U.offsetHeight,V=window.innerWidth-M,ue=window.innerHeight-W;if(t.fabPosition.x!==null&&t.fabPosition.y!==null){const we=Math.max(0,Math.min(t.fabPosition.x,V)),ae=Math.max(0,Math.min(t.fabPosition.y,ue));U.style.left=we+"px",U.style.top=ae+"px",U.style.right="auto",U.style.bottom="auto",l=we,m=ae}else{const we=V-30,ae=ue-80;U.style.left=we+"px",U.style.top=ae+"px",U.style.right="auto",U.style.bottom="auto",l=we,m=ae}}function D(U){if(!u.value)return;U.preventDefault(),U.type==="touchmove"?(g=U.touches[0].clientX-p,x=U.touches[0].clientY-c):(g=U.clientX-p,x=U.clientY-c),l=g,m=x;const M=a.value;if(!M)return;const W=M.offsetWidth,V=M.offsetHeight,ue=window.innerWidth-W,we=window.innerHeight-V;l=Math.max(0,Math.min(l,ue)),m=Math.max(0,Math.min(m,we)),M.style.left=l+"px",M.style.top=m+"px"}function w(){u.value&&(Date.now()-f.value<200?s():o(l,m),u.value=!1,E())}function b(){document.addEventListener("mousemove",D),document.addEventListener("mouseup",w),document.addEventListener("mouseleave",w),document.addEventListener("touchmove",D,{passive:!1}),document.addEventListener("touchend",w),document.addEventListener("touchcancel",w)}function E(){document.removeEventListener("mousemove",D),document.removeEventListener("mouseup",w),document.removeEventListener("mouseleave",w),document.removeEventListener("touchmove",D),document.removeEventListener("touchend",w),document.removeEventListener("touchcancel",w)}function L(U){f.value=Date.now(),U.type==="touchstart"?(p=U.touches[0].clientX-l,c=U.touches[0].clientY-m):(p=U.clientX-l,c=U.clientY-m),u.value=!0,b()}return gi(()=>{v()}),mi(()=>{E()}),(U,M)=>oe(t).showFloatingButton?(Ge(),Ke("div",{key:0,ref_key:"fab",ref:a,class:fn(["st_vision_fab",{st_vision_fab_dragging:u.value}]),style:ci({width:i.value+"px",height:i.value+"px",fontSize:r.value+"px"}),title:"ST Vision - Image Generation (Drag to move)",onMousedown:L,onTouchstart:L},[...M[0]||(M[0]=[h("i",{class:"fa-solid fa-wand-magic-sparkles"},null,-1)])],38)):hn("",!0)}},Ah=tn(Th,[["__scopeId","data-v-a84ff536"]]),Ih={key:0,class:"vision_popup_overlay"},Dh={class:"vision_input_dialog"},Ph={class:"vision_input_dialog_header"},Rh={class:"vision_input_dialog_body"},Lh={__name:"InputDialog",props:{title:{type:String,default:"Input dialog title"},content:{type:String,default:"Input dialog content"},visible:{type:Boolean,default:!1},value:{type:String,default:""}},emits:["update:visible","confirm","cancel"],setup(e,{emit:t}){const n=e,i=t,r=ct(n.value);Zt(()=>n.value,u=>{r.value=u});function s(){i("update:visible",!1)}function o(){i("confirm",r.value),s()}function a(){i("cancel"),s()}return(u,f)=>(Ge(),fr(cs,{to:"body"},[nt(vs,{name:"popup"},{default:sr(()=>[n.visible?(Ge(),Ke("div",Ih,[h("div",Dh,[h("div",Ph,[h("h3",null,rt(n.title),1),h("p",null,rt(n.content),1)]),h("div",Rh,[ce(h("input",{type:"text",class:"vision_input_dialog_input","onUpdate:modelValue":f[0]||(f[0]=l=>r.value=l)},null,512),[[qe,r.value]])]),h("div",{class:"vision_input_dialog_footer"},[h("button",{class:"vision_button",onClick:a},"Cancel"),h("button",{class:"vision_button vision_button_primary",onClick:o}," OK ")])])])):hn("",!0)]),_:1})]))}},Mh=tn(Lh,[["__scopeId","data-v-2e8b38fd"]]),Uh={key:0,class:"vision_popup_overlay"},Oh={class:"vision_confirm_dialog"},Bh={class:"vision_confirm_dialog_header"},Nh={class:"vision_confirm_dialog_body"},Fh={__name:"ConfirmDialog",props:{title:{type:String,default:"Confirm dialog title"},content:{type:String,default:"Confirm dialog content"},visible:{type:Boolean,default:!1}},emits:["update:visible","confirm","cancel"],setup(e,{emit:t}){const n=e,i=t;function r(){i("update:visible",!1)}function s(){i("confirm"),r()}function o(){i("cancel"),r()}return(a,u)=>(Ge(),fr(cs,{to:"body"},[nt(vs,{name:"popup"},{default:sr(()=>[n.visible?(Ge(),Ke("div",Uh,[h("div",Oh,[h("div",Bh,[h("h3",null,rt(n.title),1),h("button",{class:"vision_popup_close",onClick:o},[...u[0]||(u[0]=[h("i",{class:"fa-solid fa-times"},null,-1)])])]),h("div",Nh,[h("p",null,rt(n.content),1)]),h("div",{class:"vision_confirm_dialog_footer"},[h("button",{class:"vision_button",onClick:o},"no"),h("button",{class:"vision_button vision_button_primary",onClick:s}," yes ")])])])):hn("",!0)]),_:1})]))}},jh=tn(Fh,[["__scopeId","data-v-f9c40d8d"]]);async function zh(e){return await yl(e)}function Hh(e){return e===Yi.INTERMEDIATE?Xi.INTERMEDIATE:e===Yi.FINAL?Xi.FINAL:e}async function Ar(e){if(e.toDataURL)return e.toDataURL();throw new Error("Unable to convert image to data URL")}function Ol(){function e(f){if(!f.token)throw new Error("NovelAI token is not configured. Please set your token in the settings.");return new dh({token:f.token,host:f.host,timeout:f.timeout||12e4,retry:{enabled:!0,maxRetries:3,baseDelay:2e3,maxDelay:3e4,retryStatusCodes:[429,500,502,503,504]},verbose:!0})}async function t(f={},l=!1){console.log("[ST Vision] Streaming:",l);const{currentConfig:m}=Yt(),p=m.value,c=e(p),g=f.action||ti.GENERATE,x=g===ti.IMG2IMG,v=g===ti.INPAINT,D={prompt:f.prompt||p.prompt,model:f.model||p.model,width:f.width||p.width,height:f.height||p.height,scale:(()=>{const E=f.scale!==void 0?f.scale:p.scale;if(typeof E=="string"){const L=parseFloat(E);return isNaN(L)?5:L}return E})(),sampler:f.sampler||p.sampler,steps:f.steps||p.steps,n_samples:f.n_samples||p.n_samples,negative_prompt:f.negative_prompt||p.negative_prompt};(x||v)&&(D.action=g);const w=f.seed!==void 0?f.seed:p.seed;w!==void 0&&w!==-1&&(D.seed=w),p.sm!==void 0&&(D.sm=p.sm),p.sm_dyn!==void 0&&(D.sm_dyn=p.sm_dyn),p.dynamic_thresholding!==void 0&&(D.dynamic_thresholding=p.dynamic_thresholding),p.controlnet_strength!==void 0&&(D.controlnet_strength=p.controlnet_strength),p.legacy!==void 0&&(D.legacy=p.legacy),p.add_original_image!==void 0&&(D.add_original_image=p.add_original_image),p.noise_schedule&&(D.noise_schedule=p.noise_schedule),x&&(f.image&&(D.image=f.image),f.strength!==void 0&&(D.strength=f.strength),f.noise!==void 0&&(D.noise=f.noise)),v&&(f.image&&(D.image=f.image),f.mask&&(D.mask=f.mask)),f.characterPrompts&&f.characterPrompts.length>0&&(D.characterPrompts=f.characterPrompts,console.log("[ST Vision] Adding characterPrompts to request:",JSON.parse(JSON.stringify(D.characterPrompts)))),f.v4_prompt&&(D.v4_prompt=f.v4_prompt,console.log("[ST Vision] Adding v4_prompt to request:",JSON.parse(JSON.stringify(D.v4_prompt)))),f.v4_negative_prompt&&(D.v4_negative_prompt=f.v4_negative_prompt,console.log("[ST Vision] Adding v4_negative_prompt to request:",JSON.parse(JSON.stringify(D.v4_negative_prompt)))),console.log("[ST Vision] Generating with nekoai-js:",D);const b=await c.generateImage(D,l);if(l&&b&&typeof b[Symbol.asyncIterator]=="function")return(async function*(){for await(const E of b){const L=await Ar(E.image);yield{event_type:Hh(E.event_type),step_ix:E.step_ix,image:{dataURL:L,base64:E.image.base64}}}})();if(Array.isArray(b)){const E=await Promise.all(b.map(async L=>({dataURL:await Ar(L),filename:L.filename})));return console.log(E[0]),E}throw new Error("Unexpected response format from nekoai-js")}async function n(){const{currentConfig:f}=Yt(),l=f.value,m=l.prompt;if(!m)throw new Error("Please enter a prompt");if(!l.token)throw new Error("Please configure your NovelAI token in settings");{const p={prompt:m,model:l.model,width:l.width,height:l.height,steps:l.steps,scale:l.scale,sampler:l.sampler,seed:l.seed,negative_prompt:l.negative_prompt,sm:l.sm,sm_dyn:l.sm_dyn};if(l.characterPrompts&&l.characterPrompts.length>0){const g=l.characterPrompts.filter(x=>x.enabled!==!1).map(x=>{const v={prompt:x.prompt,uc:x.uc};return x.useCustomPosition===!0&&x.center&&(v.center=x.center),v});g.length>0&&(p.characterPrompts=g,console.log("[ST Vision] Raw config.characterPrompts:",JSON.parse(JSON.stringify(l.characterPrompts))),console.log("[ST Vision] Processed characterPrompts for nekoai-js:",JSON.parse(JSON.stringify(g))))}if(l.v4_prompt&&(p.v4_prompt=l.v4_prompt),l.v4_negative_prompt&&(p.v4_negative_prompt=l.v4_negative_prompt),l.enableStreaming){const g=await t(p,!0);if(g&&typeof g[Symbol.asyncIterator]=="function"){let x=null;for await(const v of g)v.event_type===Xi.INTERMEDIATE||v.event_type===Xi.FINAL&&(x=v.image);if(x)return x}}else{const g=await t(p,!1);if(Array.isArray(g)&&g.length>0)return g[0]}}}async function i(f,l,m={}){const{currentConfig:p}=Yt(),c=p.value,g=e(c),v={"line-art":"lineArt","bg-removal":"backgroundRemoval",emotion:"changeEmotion",declutter:"declutter",colorize:"colorize"}[f];if(!v||!g[v])throw new Error(`Unknown director tool: ${f}`);let D;return f==="emotion"?D=await g.changeEmotion(l,m.emotion||"happy",m.prompt||"",m.defry||0):f==="declutter"?D=await g.declutter(l,m.prompt||"",m.defry||0):f==="colorize"?D=await g.colorize(l,m.prompt||"",m.defry||1):D=await g[v](l),{dataURL:await Ar(D),base64:D.base64}}return{generateImage:t,handleGenerate:n,lineArt:f=>i("line-art",f),backgroundRemoval:f=>i("bg-removal",f),changeEmotion:(f,l,m="",p=0)=>i("emotion",f,{emotion:l,prompt:m,defry:p}),declutter:(f,l="",m=0)=>i("declutter",f,{prompt:l,defry:m}),colorize:(f,l="",m=1)=>i("colorize",f,{prompt:l,defry:m}),parseImage:zh}}function Vh(e){const t=e.match(/^\{pos_([a-z]+)\}$/);return t&&{ttll:{x:.1,y:.1},ttl:{x:.2,y:.1},ttc:{x:.5,y:.1},ttr:{x:.8,y:.1},ttrr:{x:.9,y:.1},tll:{x:.1,y:.3},tl:{x:.2,y:.3},tc:{x:.5,y:.3},tr:{x:.8,y:.3},trr:{x:.9,y:.3},cll:{x:.1,y:.5},cl:{x:.2,y:.5},cc:{x:.5,y:.5},cr:{x:.8,y:.5},crr:{x:.9,y:.5},bll:{x:.1,y:.7},bl:{x:.2,y:.7},bc:{x:.5,y:.7},br:{x:.8,y:.7},brr:{x:.9,y:.7},bbll:{x:.1,y:.9},bbl:{x:.2,y:.9},bbc:{x:.5,y:.9},bbr:{x:.8,y:.9},bbrr:{x:.9,y:.9},c:{x:.5,y:.5},t:{x:.5,y:.3},b:{x:.5,y:.7},l:{x:.2,y:.5},r:{x:.8,y:.5}}[t[1]]||null}function $h(e){const t=/\{char\s+([\s\S]*?)\s+char\}/g,n=[];let i;for(;(i=t.exec(e))!==null;){let r=i[1].trim();const s={prompt:"",uc:"",center:{x:.5,y:.5},enabled:!0},o=r.match(/ntags\s*=\s*(?:\[([\s\S]*?)\]|([\s\S]*?)(?=char\}|$))/);if(o){let f=(o[1]||o[2]||"").trim();f=f.split(/\s*,\s*/).map(l=>l.trim()).filter(l=>l).join(", "),s.uc=f,r=r.replace(/ntags\s*=\s*[\s\S]*?(?=\{pos_|char\}|$)/g,"")}const a=r.split(/[,\n]/).map(f=>f.trim()).filter(f=>f),u=[];for(const f of a){if(!f||f.startsWith("ntags"))continue;const l=Vh(f);if(l){s.center=l;continue}u.push(f)}s.prompt=u.join(", "),n.push(s)}return n}function qh(e){const t=e.split(`
`),n=[];let i=0;for(const r of t)if(r.trim().startsWith("|")){const s=r.substring(1).trim();n.push({prompt:s,uc:"",center:{x:.3+i*.2,y:.5},enabled:!0}),i++}return n}function Wh(e){const t=e.match(/Text:\s*(.+)/);return t?t[1].trim():null}function Gh(e){if(!e||!e.trim())return"";let t=e.replace(/\{char[\s\S]*?char\}/g,"");t=t.replace(/\{char[\s\S]*$/g,"");const n=t.match(/\{ntags\s*=\s*([\s\S]*?)\}/);if(n){let i=n[1].trim();return i=i.replace(/[{}\[\]]/g,""),i=i.split(/\s*,\s*/).map(r=>r.trim()).filter(r=>r&&r.length>0).join(", "),i}return""}function Zh(e){if(!e||!e.trim())return e;const t=e.split(",").map(r=>r.trim()).filter(r=>r),n=new Set,i=[];for(let r of t){const s=r.match(/^(-?\d+(?:\.\d+)?)::(.*?)::$/);if(s){let o=parseFloat(s[1]);const a=s[2].trim();o>3?(console.warn(`[Prompt Optimizer] Capping weight ${o} to 3.0 for tag: ${a}`),o=3):o<-2&&(console.warn(`[Prompt Optimizer] Capping weight ${o} to -2.0 for tag: ${a}`),o=-2);const u=a.toLowerCase();n.has(u)?console.warn(`[Prompt Optimizer] Removing duplicate tag: ${r}`):(n.add(u),i.push(`${o}::${a}::`))}else{const o=r.toLowerCase();n.has(o)?console.warn(`[Prompt Optimizer] Removing duplicate tag: ${r}`):(n.add(o),i.push(r))}}return i.join(", ")}function xo(e){if(!e||!e.trim())return"";let t=e.replace(/\{char[\s\S]*?char\}/g,"");return t=t.replace(/\{char[\s\S]*$/g,""),t=t.replace(/\{ntags\s*=\s*[\s\S]*?\}/g,""),t=t.replace(/\{ntags[\s\S]*$/g,""),t=t.replace(/^\s*\|.*$/gm,""),t=t.replace(/Text:\s*.+/g,""),t=t.replace(/[{}\[\]]/g,""),t=t.replace(/,\s*,+/g,","),t=t.replace(/,\s*\n\s*,/g,","),t=t.replace(/\n+/g," "),t=t.replace(/\s+/g," "),t=t.replace(/^[\s,]+|[\s,]+$/g,""),t=Zh(t),t}function Kh(e,t=""){const n={prompt:"",negative_prompt:t,characterPrompts:null,v4_prompt:null,v4_negative_prompt:null,hasCharacters:!1,hasWeights:!1,hasText:!1,use_coords:!1};if(!e||!e.trim())return n;const i=$h(e),r=qh(e),s=[...i,...r];if(s.length>0){n.hasCharacters=!0,n.characterPrompts=s,n.use_coords=!0;const f=xo(e),l=s.map(m=>({char_caption:m.prompt,centers:[m.center]}));n.v4_prompt={caption:{base_caption:f,char_captions:l},use_coords:!0,use_order:!1},n.prompt=f}else n.prompt=xo(e);const o=Gh(e),a=[];if(o&&a.push(o),t&&t.trim()&&a.push(t.trim()),n.negative_prompt=a.join(", "),n.hasCharacters){const f=n.negative_prompt||"";n.v4_negative_prompt={caption:{base_caption:f,char_captions:[]},legacy_uc:!1}}return n.hasWeights=/(-?\d+(?:\.\d+)?)::(.*?)::/.test(e),Wh(e)&&(n.hasText=!0,n.prompt.includes("text")||(n.prompt+=", text, english text")),n}function Yh(e,t,n){const i=[];return e&&e.trim()&&i.push(e.trim()),t&&t.trim()&&i.push(t.trim()),n&&n.trim()&&i.push(n.trim()),i.join(", ")}function ks(e){return["nai-diffusion-4-full","nai-diffusion-4-full-inpainting","nai-diffusion-4-curated-preview","nai-diffusion-4-curated-inpainting","nai-diffusion-4-5-full","nai-diffusion-4-5-full-inpainting","nai-diffusion-4-5-curated","nai-diffusion-4-5-curated-inpainting"].includes(e)}function Xh(e,t){const n=[];if(!e.hasCharacters)return n;ks(t)||n.push("Model does not support multi-character generation (v4/v4.5 required)"),e.characterPrompts&&e.characterPrompts.length>4&&n.push(`Too many characters (${e.characterPrompts.length}). NovelAI works best with 2-3 characters. More than 4 may cause timeouts or quality issues.`),e.prompt&&e.prompt.length>500&&n.push(`Base prompt is very long (${e.prompt.length} chars). Consider moving character-specific details into {char...char} blocks.`);const r=["masterpiece","best quality","amazing quality","very aesthetic","absurdres"],s=(e.prompt||"").toLowerCase(),o=r.filter(u=>(s.match(new RegExp(u,"g"))||[]).length>1);o.length>0&&n.push(`Duplicate quality tags detected: ${o.join(", ")}. These have been deduplicated.`);const a=(e.prompt||"").match(/(\d+(?:\.\d+)?)::/g);return a&&a.filter(f=>parseFloat(f)>3).length>0&&n.push("Extreme weights detected (>3). These have been capped to 3.0 for stability."),e.characterPrompts&&e.characterPrompts.forEach((u,f)=>{u.prompt&&u.prompt.length>300&&n.push(`Character ${f+1} prompt is very long (${u.prompt.length} chars). This may affect generation quality.`)}),n}function Bl(e,t,n,i,r){const s=Yh(e,t,n),o=Kh(s,i),a=Xh(o,r);return a.length>0&&(console.warn("[Prompt Validation] Issues detected:"),a.forEach(f=>console.warn(`  - ${f}`)),o.warnings=a),!ks(r)&&o.hasCharacters?(console.warn("Character syntax detected but model does not support v4 features"),{prompt:s,negative_prompt:i,warnings:["Model does not support multi-character generation. Falling back to simple prompt."]}):o}const Jh={class:"vision_tab_content"},Qh={class:"vision_section"},ep={class:"vision_form_group"},tp=["disabled"],np={class:"vision_form_group"},ip=["disabled"],rp={class:"vision_form_group"},sp=["disabled"],op={class:"vision_form_group"},ap={class:"vision_checkbox_group"},lp=["disabled"],up={class:"vision_form_group"},fp={class:"vision_form_group"},dp=["value"],cp={class:"vision_form_row"},hp={class:"vision_form_group"},pp={class:"vision_checkbox_group"},gp=["disabled"],mp={class:"vision_form_group"},vp={class:"vision_checkbox_group"},_p=["disabled"],bp={class:"vision_form_group"},yp={class:"vision_checkbox_group"},wp=["disabled"],xp={class:"vision_form_group"},Sp={class:"vision_checkbox_group"},Ep=["disabled"],kp={class:"vision_section"},Cp={class:"vision_button_group"},Tp=["disabled"],Ap={class:"vision_result_container"},Ip={class:"vision_result_wrapper"},Dp=["src"],Pp={__name:"GenerateTab",emits:["image-generated"],setup(e,{emit:t}){const{currentConfig:n,Model:i,Action:r}=Yt(),{handleGenerate:s}=Ol(),o=Te({get:()=>n.value.prompt,set:re=>n.value.prompt=re}),a=Te({get:()=>n.value.prompt_prefix,set:re=>n.value.prompt_prefix=re}),u=Te({get:()=>n.value.prompt_suffix,set:re=>n.value.prompt_suffix=re}),f=Te(()=>{const re=[];return a.value&&a.value.trim()&&re.push(a.value.trim()),o.value&&o.value.trim()&&re.push(o.value.trim()),u.value&&u.value.trim()&&re.push(u.value.trim()),re.join(", ")}),l=Te(()=>ks(p.value)),m=Te({get:()=>n.value.negative_prompt,set:re=>n.value.negative_prompt=re}),p=Te({get:()=>n.value.model,set:re=>n.value.model=re}),c=Te({get:()=>n.value.height,set:re=>n.value.height=re}),g=Te({get:()=>n.value.width,set:re=>n.value.width=re}),x=Te({get:()=>n.value.steps,set:re=>n.value.steps=re}),v=Te({get:()=>n.value.seed,set:re=>n.value.seed=re}),D=Te({get:()=>n.value.action,set:re=>n.value.action=re}),w=Te({get:()=>n.value.negative_prompt!==void 0,set:re=>{re?n.value.negative_prompt="":n.value.negative_prompt=void 0}}),b=Te({get:()=>n.value.width!==void 0,set:re=>{re?n.value.width=832:n.value.width=void 0}}),E=Te({get:()=>n.value.height!==void 0,set:re=>{re?n.value.height=1216:n.value.height=void 0}}),L=Te({get:()=>n.value.steps!==void 0,set:re=>{re?n.value.steps=28:n.value.steps=void 0}}),U=Te({get:()=>n.value.seed!==void 0,set:re=>{re?n.value.seed=-1:n.value.seed=void 0}}),M=ct(!1),W=ct(null),V=t;async function ue(){M.value=!0;try{const re=Bl(a.value,o.value,u.value,m.value,p.value);console.log("Parsed prompt:",re),re.warnings&&re.warnings.length>0&&(console.warn("[ST Vision] Validation warnings:"),re.warnings.forEach($=>console.warn(`  - ${$}`)));const Z=JSON.parse(JSON.stringify(n.value));re.hasCharacters&&l.value?(Z.prompt=re.prompt||f.value,Z.negative_prompt=re.negative_prompt,Z.characterPrompts=re.characterPrompts,Z.v4_prompt=re.v4_prompt,Z.v4_negative_prompt=re.v4_negative_prompt,Z.use_coords=re.use_coords):(Z.prompt=f.value,Z.negative_prompt=m.value,Z.characterPrompts=void 0,Z.v4_prompt=void 0,Z.v4_negative_prompt=void 0);const fe=JSON.parse(JSON.stringify(n.value));Object.assign(n.value,Z);try{const $=await s();console.log($),W.value=$.dataURL,V("image-generated",$.dataURL),console.log("image generated")}finally{Object.assign(n.value,fe)}}catch(re){throw console.error("Generation failed:",re),re}finally{M.value=!1}}function we(){if(!W.value)return;const re=document.createElement("a");re.href=W.value,re.download=`st-vision-${Date.now()}.png`,re.click()}async function ae(){if(W.value)try{if(navigator.clipboard&&navigator.clipboard.write){const Z=await(await fetch(W.value)).blob(),fe=new ClipboardItem({[Z.type]:Z});await navigator.clipboard.write([fe]),console.log("Image copied to clipboard!");return}await navigator.clipboard.writeText(W.value),console.log("Image URL copied to clipboard!")}catch(re){console.error("Failed to copy image:",re),console.log("Failed to copy image. Please try again.")}}return(re,Z)=>(Ge(),Ke("div",Jh,[h("div",Qh,[Z[25]||(Z[25]=h("h3",null,[h("i",{class:"fa-solid fa-pen-fancy"}),He(" Prompt")],-1)),h("div",ep,[Z[15]||(Z[15]=h("label",{for:"vision_prompt_prefix"},[He(" Prompt Prefix "),h("span",{class:"vision_help_text"},"(Quality tags, style tags, etc.)")],-1)),ce(h("textarea",{id:"vision_prompt_prefix","onUpdate:modelValue":Z[0]||(Z[0]=fe=>a.value=fe),rows:"2",disabled:M.value,placeholder:"masterpiece, best quality, high resolution, "},null,8,tp),[[qe,a.value]])]),h("div",np,[Z[16]||(Z[16]=h("label",{for:"vision_prompt"},[He(" Main Prompt "),h("span",{class:"vision_help_text"},"(Describe what you want to generate)")],-1)),ce(h("textarea",{id:"vision_prompt","onUpdate:modelValue":Z[1]||(Z[1]=fe=>o.value=fe),rows:"4",disabled:M.value,placeholder:"1boy, luffy, anime style, detailed background, "},null,8,ip),[[qe,o.value]])]),h("div",rp,[Z[17]||(Z[17]=h("label",{for:"vision_prompt_suffix"},[He(" Prompt Suffix "),h("span",{class:"vision_help_text"},"(Additional details, lighting, etc.)")],-1)),ce(h("textarea",{id:"vision_prompt_suffix","onUpdate:modelValue":Z[2]||(Z[2]=fe=>u.value=fe),rows:"2",disabled:M.value,placeholder:"cinematic lighting, detailed, vibrant colors, "},null,8,sp),[[qe,u.value]])]),h("div",op,[h("div",ap,[ce(h("input",{id:"vision_enabled_negative_prompt","onUpdate:modelValue":Z[3]||(Z[3]=fe=>w.value=fe),type:"checkbox"},null,512),[[Re,w.value]]),Z[18]||(Z[18]=h("label",{for:"vision_enabled_negative_prompt"},[He(" Negative Prompt "),h("span",{class:"vision_help_text"},"(What to avoid in the generation)")],-1))]),ce(h("textarea",{id:"vision_negative_prompt","onUpdate:modelValue":Z[4]||(Z[4]=fe=>m.value=fe),disabled:!w.value,rows:"3",placeholder:"nsfw, lowres, bad anatomy, bad hands, "},null,8,lp),[[qe,m.value]])]),h("div",up,[Z[19]||(Z[19]=h("label",{for:"vision_model"},"Model",-1)),ce(h("select",{id:"vision_model","onUpdate:modelValue":Z[5]||(Z[5]=fe=>p.value=fe)},[(Ge(!0),Ke(ht,null,ln(oe(i),fe=>(Ge(),Ke("option",null,rt(fe),1))),256))],512),[[kt,p.value]])]),h("div",fp,[Z[20]||(Z[20]=h("label",{for:"vision_action"},"Action",-1)),ce(h("select",{id:"vision_action","onUpdate:modelValue":Z[6]||(Z[6]=fe=>D.value=fe)},[(Ge(!0),Ke(ht,null,ln(oe(r),fe=>(Ge(),Ke("option",{value:fe},rt(fe),9,dp))),256))],512),[[kt,D.value]])]),h("div",cp,[h("div",hp,[h("div",pp,[ce(h("input",{id:"vision_enabled_width_quick","onUpdate:modelValue":Z[7]||(Z[7]=fe=>b.value=fe),type:"checkbox"},null,512),[[Re,b.value]]),Z[21]||(Z[21]=h("label",{for:"vision_enabled_width_quick"},"Width",-1))]),ce(h("input",{id:"vision_width_quick","onUpdate:modelValue":Z[8]||(Z[8]=fe=>g.value=fe),type:"number",min:"64",max:"2048",step:"64",disabled:!b.value},null,8,gp),[[qe,g.value]])]),h("div",mp,[h("div",vp,[ce(h("input",{id:"vision_enabled_height_quick","onUpdate:modelValue":Z[9]||(Z[9]=fe=>E.value=fe),type:"checkbox"},null,512),[[Re,E.value]]),Z[22]||(Z[22]=h("label",{for:"vision_enabled_height_quick"},"Height",-1))]),ce(h("input",{id:"vision_height_quick","onUpdate:modelValue":Z[10]||(Z[10]=fe=>c.value=fe),type:"number",min:"64",max:"2048",step:"64",disabled:!E.value},null,8,_p),[[qe,c.value]])])]),h("div",bp,[h("div",yp,[ce(h("input",{id:"vision_enabled_steps_quick","onUpdate:modelValue":Z[11]||(Z[11]=fe=>L.value=fe),type:"checkbox"},null,512),[[Re,L.value]]),Z[23]||(Z[23]=h("label",{for:"vision_enabled_steps_quick"},"Steps",-1))]),ce(h("input",{id:"vision_steps_quick","onUpdate:modelValue":Z[12]||(Z[12]=fe=>x.value=fe),type:"number",disabled:!L.value},null,8,wp),[[qe,x.value]])]),h("div",xp,[h("div",Sp,[ce(h("input",{id:"vision_enabled_seed_quick","onUpdate:modelValue":Z[13]||(Z[13]=fe=>U.value=fe),type:"checkbox"},null,512),[[Re,U.value]]),Z[24]||(Z[24]=h("label",{for:"vision_enabled_seed_quick"},[He(" Seed "),h("span",{class:"vision_help_text"},"(-1 for random)")],-1))]),ce(h("input",{id:"vision_seed_quick","onUpdate:modelValue":Z[14]||(Z[14]=fe=>v.value=fe),type:"number",disabled:!U.value},null,8,Ep),[[qe,v.value]])])]),h("div",kp,[h("div",Cp,[h("button",{class:"vision_button primary",onClick:ue,disabled:M.value},[Z[26]||(Z[26]=h("i",{class:"fa-solid fa-wand-magic-sparkles"},null,-1)),He(" "+rt(M.value?"Generating...":"Generate"),1)],8,Tp)]),ce(h("div",Ap,[h("div",Ip,[h("img",{src:W.value,alt:"Generated Image"},null,8,Dp),h("div",{class:"vision_result_actions"},[h("button",{class:"vision_button",onClick:we},[...Z[27]||(Z[27]=[h("i",{class:"fa-solid fa-download"},null,-1),He(" Download ",-1)])]),h("button",{class:"vision_button",onClick:ae},[...Z[28]||(Z[28]=[h("i",{class:"fa-solid fa-copy"},null,-1),He(" Copy ",-1)])])])])],512),[[Oi,W.value]])])]))}},Rp=tn(Pp,[["__scopeId","data-v-092ca6ac"]]),Lp={class:"vision_tab_content"},Mp={class:"vision_section"},Up={class:"vision_form_group"},Op={class:"vision_form_group"},Bp=["value"],Np=["value"],Fp={class:"vision_form_group"},jp={class:"vision_section"},zp={class:"vision_form_group"},Hp={class:"vision_button_group"},Vp=["value"],$p={class:"vision_button_group"},qp={class:"vision_section"},Wp={class:"vision_form_group"},Gp={class:"vision_checkbox_group"},Zp={class:"vision_form_group"},Kp=["disabled"],Yp={class:"vision_form_group"},Xp=["disabled"],Jp={class:"vision_form_group"},Qp={class:"vision_checkbox_group"},eg=["disabled"],tg={key:0,class:"vision_form_group"},ng=["disabled"],ig={style:{display:"flex","align-items":"center",gap:"12px"}},rg=["disabled"],sg={style:{"min-width":"40px","text-align":"right",color:"var(--st-vision-primary, #667eea)","font-weight":"600"}},og={class:"vision_form_group"},ag={style:{background:"var(--st-vision-bg-light, rgba(0, 0, 0, 0.2))",padding:"12px",borderRadius:"6px",fontFamily:"monospace",fontSize:"0.9em"}},lg={style:{color:"var(--st-vision-primary, #667eea)"}},ug={style:{color:"var(--st-vision-primary, #667eea)"}},fg={class:"vision_section"},dg={class:"vision_form_group"},cg={class:"vision_checkbox_group"},hg={class:"vision_form_group"},pg={style:{display:"flex","align-items":"center",gap:"12px"}},gg={style:{"min-width":"50px","text-align":"right",color:"var(--st-vision-primary, #667eea)","font-weight":"600"}},mg={class:"vision_section"},vg={class:"vision_form_group"},_g={class:"vision_info_block"},bg={style:{display:"flex","align-items":"center",gap:"8px"}},yg={style:{"margin-top":"8px","font-size":"0.9em"}},wg={__name:"PluginSettingsTab",emits:["rename-config","duplicate-config","delete-config","export-config","import-config"],setup(e,{emit:t}){const{state:n,currentConfig:i,Host:r,saveState:s,currentTheme:o,applyTheme:a}=Yt(),u=Te({get:()=>i.value.token,set:x=>i.value.token=x}),f=Te({get:()=>i.value.host,set:x=>i.value.host=x}),l=Te({get:()=>i.value.timeout,set:x=>i.value.timeout=x}),m=Te({get:()=>n.theme?.current||"dark",set:async x=>{console.log("[ST Vision] Theme changed to:",x),n.theme?n.theme.current=x:n.theme={current:x},a(x);try{await s(),console.log("[ST Vision] Theme saved successfully")}catch(v){console.error("[ST Vision] Failed to save theme:",v)}}});Zt(()=>n.theme?.current,x=>{x&&a(x)},{immediate:!0});function p(x){const v={dark:"Dark theme provides a comfortable viewing experience in low-light environments.",light:"Light theme offers a clean and bright interface for well-lit environments.",blue:"Blue theme features cool blue tones for a calming and professional look.",green:"Green theme uses natural green colors for a fresh and vibrant appearance.",purple:"Purple theme showcases rich purple hues for a creative and elegant feel.",red:"Red theme displays bold red accents for a passionate and energetic vibe.",orange:"Orange theme features warm orange tones for a friendly and inviting atmosphere.",pink:"Pink theme uses soft pink colors for a playful and modern aesthetic.",cyan:"Cyan theme showcases bright cyan shades for a fresh and tech-forward look.",teal:"Teal theme combines blue and green for a balanced and sophisticated style.",indigo:"Indigo theme features deep indigo colors for a mysterious and premium feel.",amber:"Amber theme uses golden amber tones for a warm and luxurious appearance.",emerald:"Emerald theme displays rich emerald greens for a natural and elegant vibe.",auto:"Auto theme automatically switches between dark and light based on your system preferences."};return v[x]||v.dark}function c(){window.dispatchEvent(new CustomEvent("st-vision-show-history"))}const g=t;return(x,v)=>(Ge(),Ke("div",Lp,[h("div",Mp,[v[21]||(v[21]=h("h3",null,[h("i",{class:"fa-solid fa-key"}),He(" API Configuration")],-1)),h("div",Up,[v[18]||(v[18]=h("label",{for:"vision_plugin_token"},[He(" NovelAI Token * "),h("span",{class:"vision_help_text"},"(Required - Get your token from NovelAI account settings)")],-1)),ce(h("input",{id:"vision_plugin_token","onUpdate:modelValue":v[0]||(v[0]=D=>u.value=D),type:"password",placeholder:"Enter your NovelAI access token"},null,512),[[qe,u.value]])]),h("div",Op,[v[19]||(v[19]=h("label",{for:"vision_plugin_host"},"API Host",-1)),ce(h("select",{id:"vision_plugin_host","onUpdate:modelValue":v[1]||(v[1]=D=>f.value=D)},[h("option",{value:oe(r).WEB},"Web Host (Default)",8,Bp),h("option",{value:oe(r).API},"API Host",8,Np)],512),[[kt,f.value]])]),h("div",Fp,[v[20]||(v[20]=h("label",{for:"vision_plugin_timeout"},[He(" Request Timeout (ms) "),h("span",{class:"vision_help_text"},"(Increase if you get timeout errors, default: 120000ms = 2 minutes)")],-1)),ce(h("input",{id:"vision_plugin_timeout","onUpdate:modelValue":v[2]||(v[2]=D=>l.value=D),type:"number",min:"30000",max:"600000",step:"10000",placeholder:"120000"},null,512),[[qe,l.value,void 0,{number:!0}]])])]),h("div",jp,[v[28]||(v[28]=h("h3",null,[h("i",{class:"fa-solid fa-folder"}),He(" Configuration Management")],-1)),h("div",zp,[v[22]||(v[22]=h("label",{for:"vision_plugin_config_select"},"Current Configuration",-1)),h("div",Hp,[ce(h("select",{id:"vision_plugin_config_select","onUpdate:modelValue":v[3]||(v[3]=D=>oe(n).currentConfigName=D),style:{flex:"1"}},[(Ge(!0),Ke(ht,null,ln(Object.keys(oe(n).configs),D=>(Ge(),Ke("option",{key:D,value:D},rt(D),9,Vp))),128))],512),[[kt,oe(n).currentConfigName]])])]),h("div",$p,[h("button",{class:"vision_button",onClick:v[4]||(v[4]=D=>g("rename-config"))},[...v[23]||(v[23]=[h("i",{class:"fa-solid fa-edit"},null,-1),He(" Rename ",-1)])]),h("button",{class:"vision_button",onClick:v[5]||(v[5]=D=>g("duplicate-config"))},[...v[24]||(v[24]=[h("i",{class:"fa-solid fa-clone"},null,-1),He(" Duplicate ",-1)])]),h("button",{class:"vision_button",onClick:v[6]||(v[6]=D=>g("delete-config"))},[...v[25]||(v[25]=[h("i",{class:"fa-solid fa-trash"},null,-1),He(" Delete ",-1)])]),h("button",{class:"vision_button",onClick:v[7]||(v[7]=D=>g("export-config"))},[...v[26]||(v[26]=[h("i",{class:"fa-solid fa-download"},null,-1),He(" Export ",-1)])]),h("button",{class:"vision_button",onClick:v[8]||(v[8]=D=>g("import-config"))},[...v[27]||(v[27]=[h("i",{class:"fa-solid fa-upload"},null,-1),He(" Import ",-1)])])])]),h("div",qp,[v[42]||(v[42]=h("h3",null,[h("i",{class:"fa-solid fa-comments"}),He(" Chat Image Generation")],-1)),v[43]||(v[43]=h("p",{class:"vision_help_text",style:{"margin-bottom":"15px"}}," Configure automatic image generation in chat messages. Use custom tags to trigger image generation. ",-1)),h("div",Wp,[h("div",Gp,[ce(h("input",{id:"vision_chat_image_enabled","onUpdate:modelValue":v[9]||(v[9]=D=>oe(n).chatImageGen.enabled=D),type:"checkbox"},null,512),[[Re,oe(n).chatImageGen.enabled]]),v[29]||(v[29]=h("label",{for:"vision_chat_image_enabled"},[He(" Enable Chat Image Generation "),h("span",{class:"vision_help_text"},"(Automatically detect and generate images from chat messages)")],-1))])]),h("div",Zp,[v[30]||(v[30]=h("label",{for:"vision_chat_tag_prefix"},[He(" Tag Prefix "),h("span",{class:"vision_help_text"},"(Opening tag for image prompts, e.g., [img-gen] or <image_prompt>)")],-1)),ce(h("input",{id:"vision_chat_tag_prefix","onUpdate:modelValue":v[10]||(v[10]=D=>oe(n).chatImageGen.tagPrefix=D),type:"text",placeholder:"[img-gen]",disabled:!oe(n).chatImageGen.enabled},null,8,Kp),[[qe,oe(n).chatImageGen.tagPrefix]])]),h("div",Yp,[v[31]||(v[31]=h("label",{for:"vision_chat_tag_suffix"},[He(" Tag Suffix "),h("span",{class:"vision_help_text"},"(Closing tag for image prompts, e.g., [/img-gen] or </image_prompt>)")],-1)),ce(h("input",{id:"vision_chat_tag_suffix","onUpdate:modelValue":v[11]||(v[11]=D=>oe(n).chatImageGen.tagSuffix=D),type:"text",placeholder:"[/img-gen]",disabled:!oe(n).chatImageGen.enabled},null,8,Xp),[[qe,oe(n).chatImageGen.tagSuffix]])]),h("div",Jp,[h("div",Qp,[ce(h("input",{id:"vision_chat_request_queue","onUpdate:modelValue":v[12]||(v[12]=D=>oe(n).chatImageGen.useRequestQueue=D),type:"checkbox",disabled:!oe(n).chatImageGen.enabled},null,8,eg),[[Re,oe(n).chatImageGen.useRequestQueue]]),v[32]||(v[32]=h("label",{for:"vision_chat_request_queue"},[He(" Use Request Queue "),h("span",{class:"vision_help_text"},"(Queue requests sequentially to avoid API rate limiting. Disable to allow concurrent requests.)")],-1))])]),oe(n).chatImageGen.useRequestQueue?(Ge(),Ke("div",tg,[v[34]||(v[34]=h("label",{for:"vision_chat_queue_delay_when"},"Queue delay when",-1)),ce(h("select",{id:"vision_chat_queue_delay_when","onUpdate:modelValue":v[13]||(v[13]=D=>oe(n).chatImageGen.queueDelayWhen=D),disabled:!oe(n).chatImageGen.enabled||!oe(n).chatImageGen.useRequestQueue,style:{"margin-bottom":"8px"}},[...v[33]||(v[33]=[h("option",{value:"after_response"},"After response (wait for reply, then delay)",-1),h("option",{value:"after_send"},"After send (delay from when request is sent)",-1)])],8,ng),[[kt,oe(n).chatImageGen.queueDelayWhen]]),v[35]||(v[35]=h("label",{for:"vision_chat_queue_delay"},[He(" Queue Delay (seconds) "),h("span",{class:"vision_help_text"},"(Delay between requests: 0-12 seconds. 5+ recommended to prevent 429 errors)")],-1)),h("div",ig,[ce(h("input",{id:"vision_chat_queue_delay","onUpdate:modelValue":v[14]||(v[14]=D=>oe(n).chatImageGen.queueDelay=D),type:"range",min:"0",max:"12",step:"1",disabled:!oe(n).chatImageGen.enabled||!oe(n).chatImageGen.useRequestQueue,style:{flex:"1"}},null,8,rg),[[qe,oe(n).chatImageGen.queueDelay,void 0,{number:!0}]]),h("span",sg,rt(oe(n).chatImageGen.queueDelay)+"s ",1)]),v[36]||(v[36]=h("div",{style:{display:"flex","justify-content":"space-between","font-size":"0.85em",color:"var(--st-vision-text-muted, #888)","margin-top":"4px"}},[h("span",null,"0s"),h("span",null,"12s")],-1))])):hn("",!0),h("div",og,[v[40]||(v[40]=h("label",null,[h("i",{class:"fa-solid fa-info-circle"}),He(" Usage Example ")],-1)),h("div",ag,[v[37]||(v[37]=h("div",{style:{color:"var(--st-vision-text-muted, #888)","margin-bottom":"8px"}}," In your chat message: ",-1)),h("div",lg,rt(oe(n).chatImageGen.tagPrefix),1),v[38]||(v[38]=h("div",{style:{color:"var(--st-vision-text, #eee)","margin-left":"20px"}}," 1girl, beautiful, detailed face, high quality ",-1)),h("div",ug,rt(oe(n).chatImageGen.tagSuffix),1),v[39]||(v[39]=h("div",{style:{color:"var(--st-vision-text-muted, #888)","margin-top":"8px","font-size":"0.85em"}},[h("i",{class:"fa-solid fa-lightbulb"}),He(' A "Generate Image" button will appear automatically ')],-1))])]),h("div",{class:"vision_form_group"},[h("div",{class:"vision_button_group"},[h("button",{class:"vision_button",onClick:c,style:{flex:"1"}},[...v[41]||(v[41]=[h("i",{class:"fa-solid fa-images"},null,-1),He(" View Image History ",-1)])])])])]),h("div",fg,[v[47]||(v[47]=h("h3",null,[h("i",{class:"fa-solid fa-sliders"}),He(" UI Settings")],-1)),v[48]||(v[48]=h("p",{class:"vision_help_text",style:{"margin-bottom":"15px"}}," Customize the appearance and behavior of the floating button. ",-1)),h("div",dg,[h("div",cg,[ce(h("input",{id:"vision_show_floating_button","onUpdate:modelValue":v[15]||(v[15]=D=>oe(n).showFloatingButton=D),type:"checkbox"},null,512),[[Re,oe(n).showFloatingButton]]),v[44]||(v[44]=h("label",{for:"vision_show_floating_button"},[He(" Show Floating Button "),h("span",{class:"vision_help_text"},"(Display the floating action button for quick access to image generation)")],-1))])]),h("div",hg,[v[45]||(v[45]=h("label",{for:"vision_fab_size"},[He(" Floating Button Size (px) "),h("span",{class:"vision_help_text"},"(Adjust the size of the floating button: 40-80px, default: 56px)")],-1)),h("div",pg,[ce(h("input",{id:"vision_fab_size","onUpdate:modelValue":v[16]||(v[16]=D=>oe(n).fabSize=D),type:"range",min:"40",max:"80",step:"2",style:{flex:"1"}},null,512),[[qe,oe(n).fabSize,void 0,{number:!0}]]),h("span",gg,rt(oe(n).fabSize)+"px ",1)]),v[46]||(v[46]=h("div",{style:{display:"flex","justify-content":"space-between","font-size":"0.85em",color:"var(--st-vision-text-muted, #888)","margin-top":"4px"}},[h("span",null,"40px"),h("span",null,"56px"),h("span",null,"80px")],-1))])]),h("div",mg,[v[53]||(v[53]=h("h3",null,[h("i",{class:"fa-solid fa-palette"}),He(" Theme Settings")],-1)),v[54]||(v[54]=h("p",{class:"vision_help_text",style:{"margin-bottom":"15px"}}," Choose a theme for the chat image generator interface. The theme affects colors, backgrounds, and overall appearance. ",-1)),h("div",vg,[v[50]||(v[50]=h("label",{for:"vision_theme_select"},[He(" Theme "),h("span",{class:"vision_help_text"},"(Select your preferred color theme)")],-1)),ce(h("select",{id:"vision_theme_select","onUpdate:modelValue":v[17]||(v[17]=D=>m.value=D),style:{width:"100%"}},[...v[49]||(v[49]=[Ef('<option value="dark" data-v-887fd17f>Dark</option><option value="light" data-v-887fd17f>Light</option><option value="blue" data-v-887fd17f>Blue</option><option value="green" data-v-887fd17f>Green</option><option value="purple" data-v-887fd17f>Purple</option><option value="red" data-v-887fd17f>Red</option><option value="orange" data-v-887fd17f>Orange</option><option value="pink" data-v-887fd17f>Pink</option><option value="cyan" data-v-887fd17f>Cyan</option><option value="teal" data-v-887fd17f>Teal</option><option value="indigo" data-v-887fd17f>Indigo</option><option value="amber" data-v-887fd17f>Amber</option><option value="emerald" data-v-887fd17f>Emerald</option><option value="auto" data-v-887fd17f>Auto (Follow System)</option>',14)])],512),[[kt,m.value]])]),h("div",_g,[h("div",bg,[v[52]||(v[52]=h("i",{class:"fa-solid fa-info-circle"},null,-1)),h("div",null,[v[51]||(v[51]=h("strong",null,"Theme Preview:",-1)),h("div",yg,[h("div",{style:ci({padding:"8px",background:oe(o).colors?.background||"#2a2a2a",border:`1px solid ${oe(o).colors?.border||"#404040"}`,borderRadius:"4px",color:oe(o).colors?.text||"#e0e0e0"})},rt(p(m.value)),5)])])])])])]))}},xg=tn(wg,[["__scopeId","data-v-887fd17f"]]),Sg={class:"vision_tab_content"},Eg={class:"vision_section"},kg={class:"vision_form_group"},Cg={class:"vision_checkbox_group"},Tg=["disabled"],Ag=["value"],Ig={class:"vision_form_row"},Dg={class:"vision_form_group"},Pg={class:"vision_checkbox_group"},Rg=["disabled"],Lg={class:"vision_form_group"},Mg={class:"vision_checkbox_group"},Ug=["disabled"],Og={class:"vision_form_group"},Bg={class:"vision_checkbox_group"},Ng=["disabled"],Fg=["value"],jg={class:"vision_form_group"},zg={class:"vision_checkbox_group"},Hg=["disabled"],Vg={class:"vision_form_group"},$g={class:"vision_checkbox_group"},qg=["disabled"],Wg=["value"],Gg={class:"vision_form_group"},Zg={class:"vision_checkbox_group"},Kg={class:"vision_slider_container"},Yg={class:"vision_slider_header"},Xg={class:"vision_slider_value"},Jg=["disabled"],Qg={class:"vision_form_group"},em={class:"vision_checkbox_group"},tm=["disabled"],nm={class:"vision_form_group"},im={class:"vision_checkbox_group"},rm={class:"vision_slider_container"},sm=["disabled"],om={class:"vision_form_group"},am={class:"vision_checkbox_group"},lm=["disabled"],um={class:"vision_form_group"},fm={class:"vision_checkbox_group"},dm=["disabled"],cm={class:"vision_form_group"},hm={class:"vision_checkbox_group"},pm=["disabled"],gm={class:"vision_form_group"},mm={class:"vision_checkbox_group"},vm=["disabled"],_m={class:"vision_checkbox_group"},bm=["disabled"],ym={class:"vision_checkbox_group"},wm=["disabled"],xm={class:"vision_checkbox_group"},Sm=["disabled"],Em={class:"vision_checkbox_group"},km=["disabled"],Cm={class:"vision_checkbox_group"},Tm=["disabled"],Am={class:"vision_checkbox_group"},Im=["disabled"],Dm={class:"vision_checkbox_group"},Pm=["disabled"],Rm={class:"vision_checkbox_group"},Lm=["disabled"],Mm={class:"vision_checkbox_group"},Um=["disabled"],Om={class:"vision_checkbox_group"},Bm=["disabled"],Nm={class:"vision_checkbox_group"},Fm=["disabled"],jm={class:"vision_checkbox_group"},zm=["disabled"],Hm={class:"vision_form_group"},Vm={class:"vision_checkbox_group"},$m=["disabled"],qm={class:"vision_form_group"},Wm={class:"vision_checkbox_group"},Gm=["disabled"],Zm={class:"vision_form_group"},Km={class:"vision_checkbox_group"},Ym=["disabled"],Xm={class:"vision_form_group"},Jm={class:"vision_checkbox_group"},Qm=["disabled"],ev={class:"vision_form_group"},tv={class:"vision_checkbox_group"},nv=["disabled"],iv={class:"vision_form_group"},rv={class:"vision_checkbox_group"},sv=["disabled"],ov={class:"vision_form_group"},av={class:"vision_checkbox_group"},lv=["disabled"],uv=["value"],fv={class:"vision_form_group"},dv={class:"vision_checkbox_group"},cv=["disabled"],hv={class:"vision_form_group"},pv={class:"vision_checkbox_group"},gv=["disabled"],mv={class:"vision_form_group"},vv={class:"vision_checkbox_group"},_v=["disabled"],bv={class:"vision_form_group"},yv={class:"vision_checkbox_group"},wv=["disabled"],xv={class:"vision_form_group"},Sv={class:"vision_checkbox_group"},Ev=["disabled"],kv={class:"vision_form_group"},Cv={class:"vision_checkbox_group"},Tv=["disabled"],Av={class:"vision_form_group"},Iv={class:"vision_checkbox_group"},Dv=["disabled"],Pv={class:"vision_form_group"},Rv={class:"vision_checkbox_group"},Lv=["disabled"],Mv={class:"vision_form_group"},Uv={class:"vision_checkbox_group"},Ov=["disabled"],Bv={key:0,class:"vision_form_group"},Nv={class:"vision_checkbox_group"},Fv=["disabled"],jv={__name:"AdvancedTab",setup(e){const{currentConfig:t,Model:n,Resolution:i,RESOLUTION_DIMENSIONS:r,Sampler:s,Noise:o,Controlnet:a,Metadata:u}=Yt(),f=Te({get:()=>t.value.model,set:X=>t.value.model=X}),l=Te({get:()=>t.value.height,set:X=>t.value.height=X}),m=Te({get:()=>t.value.width,set:X=>t.value.width=X}),p=Te({get:()=>t.value.steps,set:X=>t.value.steps=X}),c=Te({get:()=>t.value.scale,set:X=>t.value.scale=X}),g=Te({get:()=>t.value.sampler,set:X=>t.value.sampler=X}),x=Te({get:()=>t.value.seed,set:X=>t.value.seed=X}),v=Te({get:()=>t.value.sm,set:X=>t.value.sm=X}),D=Te({get:()=>t.value.sm_dyn,set:X=>t.value.sm_dyn=X}),w=Te({get:()=>t.value.stream,set:X=>t.value.stream=X}),b=Te({get:()=>t.value.noise,set:X=>t.value.noise=X}),E=Te({get:()=>t.value.resPreset,set:X=>t.value.resPreset=X}),L=Te({get:()=>t.value.qualityToggle,set:X=>t.value.qualityToggle=X}),U=Te({get:()=>t.value.ucPreset,set:X=>t.value.ucPreset=X}),M=Te({get:()=>t.value.n_samples,set:X=>t.value.n_samples=X}),W=Te({get:()=>t.value.dynamic_thresholding,set:X=>t.value.dynamic_thresholding=X}),V=Te({get:()=>t.value.extra_noise_seed,set:X=>t.value.extra_noise_seed=X}),ue=Te({get:()=>t.value.cfg_rescale,set:X=>t.value.cfg_rescale=X}),we=Te({get:()=>t.value.noise_schedule,set:X=>t.value.noise_schedule=X}),ae=Te({get:()=>t.value.image,set:X=>t.value.image=X}),re=Te({get:()=>t.value.strength,set:X=>t.value.strength=X}),Z=Te({get:()=>t.value.controlnet_strength,set:X=>t.value.controlnet_strength=X}),fe=Te({get:()=>t.value.controlnet_condition,set:X=>t.value.controlnet_condition=X}),$=Te({get:()=>t.value.controlnet_model,set:X=>t.value.controlnet_model=X}),te=Te({get:()=>t.value.add_original_image,set:X=>t.value.add_original_image=X}),H=Te({get:()=>t.value.mask,set:X=>t.value.mask=X}),A=Te({get:()=>{const X=t.value.reference_image_multiple;return Array.isArray(X)?X.join(","):X||""},set:X=>{t.value.reference_image_multiple=X?X.split(",").map(C=>C.trim()).filter(C=>C):void 0}}),I=Te({get:()=>{const X=t.value.reference_information_extracted_multiple;return Array.isArray(X)?X.join(","):X||""},set:X=>{t.value.reference_information_extracted_multiple=X?X.split(",").map(C=>parseFloat(C.trim())).filter(C=>!isNaN(C)):void 0}}),j=Te({get:()=>{const X=t.value.reference_strength_multiple;return Array.isArray(X)?X.join(","):X||""},set:X=>{t.value.reference_strength_multiple=X?X.split(",").map(C=>parseFloat(C.trim())).filter(C=>!isNaN(C)):void 0}}),z=Te({get:()=>t.value.params_version,set:X=>t.value.params_version=X}),Y=Te({get:()=>t.value.autoSmea,set:X=>t.value.autoSmea=X}),he=Te({get:()=>{const X=t.value.characterPrompts;return X?JSON.stringify(X,null,2):""},set:X=>{try{t.value.characterPrompts=X?JSON.parse(X):void 0}catch(C){console.error("Invalid JSON for characterPrompts:",C)}}}),ve=Te({get:()=>{const X=t.value.v4_prompt;return X?JSON.stringify(X,null,2):""},set:X=>{try{t.value.v4_prompt=X?JSON.parse(X):void 0}catch(C){console.error("Invalid JSON for v4_prompt:",C)}}}),ye=Te({get:()=>{const X=t.value.v4_negative_prompt;return X?JSON.stringify(X,null,2):""},set:X=>{try{t.value.v4_negative_prompt=X?JSON.parse(X):void 0}catch(C){console.error("Invalid JSON for v4_negative_prompt:",C)}}}),xe=Te({get:()=>t.value.skip_cfg_above_sigma,set:X=>t.value.skip_cfg_above_sigma=X}),ke=Te({get:()=>t.value.use_coords,set:X=>t.value.use_coords=X}),T=Te({get:()=>t.value.legacy_uc,set:X=>t.value.legacy_uc=X}),R=Te({get:()=>t.value.normalize_reference_strength_multiple,set:X=>t.value.normalize_reference_strength_multiple=X}),pe=Te({get:()=>t.value.deliberate_euler_ancestral_bug,set:X=>t.value.deliberate_euler_ancestral_bug=X}),S=Te({get:()=>t.value.prefer_brownian,set:X=>t.value.prefer_brownian=X}),P=Te({get:()=>t.value.inpaintImg2ImgStrength,set:X=>t.value.inpaintImg2ImgStrength=X}),N=Te({get:()=>t.value.legacy,set:X=>t.value.legacy=X}),K=Te({get:()=>t.value.legacy_v3_extend,set:X=>t.value.legacy_v3_extend=X}),le=Te(()=>f.value==n.V4_CUR||f.value==n.V4||f.value==n.V4_5_CUR||f.value==n.V4_5);function q(X){return Te({get:()=>t.value[X]!==void 0,set:C=>{if(!C)t.value[X]=void 0;else{const F=u[X];F!==void 0?t.value[X]=F:X==="skip_cfg_above_sigma"||X==="stream"?t.value[X]=null:typeof u[X]=="boolean"?t.value[X]=!1:typeof u[X]=="number"?t.value[X]=0:typeof u[X]=="string"?t.value[X]="":Array.isArray(u[X])?t.value[X]=[]:t.value[X]=null}}})}const Q=q("resPreset"),ne=q("qualityToggle"),ie=q("ucPreset"),de=q("width"),Ee=q("height"),be=q("n_samples"),Pe=q("steps"),Ie=q("scale"),Me=q("dynamic_thresholding"),Ne=q("seed"),Fe=q("extra_noise_seed"),We=q("sampler"),Ye=q("sm"),at=q("sm_dyn"),k=q("cfg_rescale"),ge=q("noise_schedule"),_e=q("image"),Se=q("strength"),B=q("noise"),se=q("controlnet_strength"),_=q("controlnet_condition"),me=q("controlnet_model"),Oe=q("add_original_image"),d=q("mask"),J=q("reference_image_multiple"),ee=q("reference_information_extracted_multiple"),y=q("reference_strength_multiple"),O=q("params_version"),G=q("autoSmea"),Le=q("characterPrompts"),Ce=q("v4_prompt"),De=q("v4_negative_prompt"),Ve=q("skip_cfg_above_sigma"),wt=q("use_coords"),Qe=q("legacy_uc"),$e=q("normalize_reference_strength_multiple"),st=q("deliberate_euler_ancestral_bug"),ft=q("prefer_brownian"),dt=q("inpaintImg2ImgStrength"),jt=q("legacy"),zt=q("legacy_v3_extend"),it=q("stream");return Zt([E,Q],([X,C])=>{if(C&&X&&r[X]){const[F,xt]=r[X];de.value&&(m.value=F),Ee.value&&(l.value=xt)}}),(X,C)=>(Ge(),Ke("div",Sg,[h("div",Eg,[C[129]||(C[129]=h("h3",null,[h("i",{class:"fa-solid fa-sliders"}),He(" Advanced Generation Settings")],-1)),h("div",kg,[h("div",Cg,[ce(h("input",{id:"vision_enabled_res_preset","onUpdate:modelValue":C[0]||(C[0]=F=>Ue(Q)?Q.value=F:null),type:"checkbox"},null,512),[[Re,oe(Q)]]),C[84]||(C[84]=h("label",{for:"vision_enabled_res_preset"},"Resolution Preset",-1))]),ce(h("select",{id:"vision_res_preset","onUpdate:modelValue":C[1]||(C[1]=F=>E.value=F),disabled:!oe(Q)},[(Ge(!0),Ke(ht,null,ln(oe(i),(F,xt)=>(Ge(),Ke("option",{key:xt,value:F},rt(F),9,Ag))),128))],8,Tg),[[kt,E.value]])]),h("div",Ig,[h("div",Dg,[h("div",Pg,[ce(h("input",{id:"vision_enabled_width","onUpdate:modelValue":C[2]||(C[2]=F=>Ue(de)?de.value=F:null),type:"checkbox"},null,512),[[Re,oe(de)]]),C[85]||(C[85]=h("label",{for:"vision_enabled_width"},"Width",-1))]),ce(h("input",{id:"vision_width","onUpdate:modelValue":C[3]||(C[3]=F=>m.value=F),type:"number",min:"64",max:"2048",step:"64",disabled:!oe(de)},null,8,Rg),[[qe,m.value]])]),h("div",Lg,[h("div",Mg,[ce(h("input",{id:"vision_enabled_height","onUpdate:modelValue":C[4]||(C[4]=F=>Ue(Ee)?Ee.value=F:null),type:"checkbox"},null,512),[[Re,oe(Ee)]]),C[86]||(C[86]=h("label",{for:"vision_enabled_height"},"Height",-1))]),ce(h("input",{id:"vision_height","onUpdate:modelValue":C[5]||(C[5]=F=>l.value=F),type:"number",min:"64",max:"2048",step:"64",disabled:!oe(Ee)},null,8,Ug),[[qe,l.value]])])]),h("div",Og,[h("div",Bg,[ce(h("input",{id:"vision_enabled_sampler","onUpdate:modelValue":C[6]||(C[6]=F=>Ue(We)?We.value=F:null),type:"checkbox"},null,512),[[Re,oe(We)]]),C[87]||(C[87]=h("label",{for:"vision_enabled_sampler"},"Sampler",-1))]),ce(h("select",{id:"vision_sampler","onUpdate:modelValue":C[7]||(C[7]=F=>g.value=F),disabled:!oe(We)},[(Ge(!0),Ke(ht,null,ln(oe(s),F=>(Ge(),Ke("option",{value:F},rt(F),9,Fg))),256))],8,Ng),[[kt,g.value]])]),h("div",jg,[h("div",zg,[ce(h("input",{id:"vision_enabled_noise","onUpdate:modelValue":C[8]||(C[8]=F=>Ue(B)?B.value=F:null),type:"checkbox"},null,512),[[Re,oe(B)]]),C[88]||(C[88]=h("label",{for:"vision_enabled_noise"},"Noise",-1))]),ce(h("input",{id:"vision_noise","onUpdate:modelValue":C[9]||(C[9]=F=>b.value=F),type:"number",disabled:!oe(B)},null,8,Hg),[[qe,b.value]])]),h("div",Vg,[h("div",$g,[ce(h("input",{id:"vision_enabled_noise_schedule","onUpdate:modelValue":C[10]||(C[10]=F=>Ue(ge)?ge.value=F:null),type:"checkbox"},null,512),[[Re,oe(ge)]]),C[89]||(C[89]=h("label",{for:"vision_enabled_noise_schedule"},"Noise Schedule",-1))]),ce(h("select",{id:"vision_noise_schedule","onUpdate:modelValue":C[11]||(C[11]=F=>we.value=F),disabled:!oe(ge)},[(Ge(!0),Ke(ht,null,ln(oe(o),F=>(Ge(),Ke("option",{value:F},rt(F),9,Wg))),256))],8,qg),[[kt,we.value]])]),h("div",Gg,[h("div",Zg,[ce(h("input",{id:"vision_enabled_steps","onUpdate:modelValue":C[12]||(C[12]=F=>Ue(Pe)?Pe.value=F:null),type:"checkbox"},null,512),[[Re,oe(Pe)]]),C[90]||(C[90]=h("label",{for:"vision_enabled_steps"},"Steps",-1))]),h("div",Kg,[h("div",Yg,[h("span",Xg,rt(p.value),1)]),ce(h("input",{id:"vision_steps","onUpdate:modelValue":C[13]||(C[13]=F=>p.value=F),type:"number",disabled:!oe(Pe)},null,8,Jg),[[qe,p.value]])])]),h("div",Qg,[h("div",em,[ce(h("input",{id:"vision_enabled_n_samples","onUpdate:modelValue":C[14]||(C[14]=F=>Ue(be)?be.value=F:null),type:"checkbox"},null,512),[[Re,oe(be)]]),C[91]||(C[91]=h("label",{for:"vision_enabled_n_samples"},"N Samples",-1))]),ce(h("input",{id:"vision_n_samples","onUpdate:modelValue":C[15]||(C[15]=F=>M.value=F),type:"number",disabled:!oe(be)},null,8,tm),[[qe,M.value]])]),h("div",nm,[h("div",im,[ce(h("input",{id:"vision_enabled_scale","onUpdate:modelValue":C[16]||(C[16]=F=>Ue(Ie)?Ie.value=F:null),type:"checkbox"},null,512),[[Re,oe(Ie)]]),C[92]||(C[92]=h("label",{for:"vision_enabled_scale"},"Guidance Scale (CFG)",-1))]),h("div",rm,[C[93]||(C[93]=h("div",{class:"vision_slider_header"},[h("span",{class:"vision_slider_value"})],-1)),ce(h("input",{id:"vision_scale","onUpdate:modelValue":C[17]||(C[17]=F=>c.value=F),type:"text",disabled:!oe(Ie)},null,8,sm),[[qe,c.value]])])]),h("div",om,[h("div",am,[ce(h("input",{id:"vision_enabled_cfg_rescale","onUpdate:modelValue":C[18]||(C[18]=F=>Ue(k)?k.value=F:null),type:"checkbox"},null,512),[[Re,oe(k)]]),C[94]||(C[94]=h("label",{for:"vision_enabled_cfg_rescale"},"CFG Rescale",-1))]),ce(h("input",{id:"vision_cfg_rescale","onUpdate:modelValue":C[19]||(C[19]=F=>ue.value=F),type:"number",disabled:!oe(k)},null,8,lm),[[qe,ue.value]])]),h("div",um,[h("div",fm,[ce(h("input",{id:"vision_enabled_seed","onUpdate:modelValue":C[20]||(C[20]=F=>Ue(Ne)?Ne.value=F:null),type:"checkbox"},null,512),[[Re,oe(Ne)]]),C[95]||(C[95]=h("label",{for:"vision_enabled_seed"},[He(" Seed "),h("span",{class:"vision_help_text"},"(-1 for random)")],-1))]),ce(h("input",{id:"vision_seed","onUpdate:modelValue":C[21]||(C[21]=F=>x.value=F),type:"number",disabled:!oe(Ne)},null,8,dm),[[qe,x.value]])]),h("div",cm,[h("div",hm,[ce(h("input",{id:"vision_enabled_extra_noise_seed","onUpdate:modelValue":C[22]||(C[22]=F=>Ue(Fe)?Fe.value=F:null),type:"checkbox"},null,512),[[Re,oe(Fe)]]),C[96]||(C[96]=h("label",{for:"vision_enabled_extra_noise_seed"},"Extra Noise Seed",-1))]),ce(h("input",{id:"vision_extra_noise_seed","onUpdate:modelValue":C[23]||(C[23]=F=>V.value=F),type:"number",disabled:!oe(Fe)},null,8,pm),[[qe,V.value]])]),h("div",gm,[h("div",mm,[ce(h("input",{id:"vision_enabled_sm","onUpdate:modelValue":C[24]||(C[24]=F=>Ue(Ye)?Ye.value=F:null),type:"checkbox"},null,512),[[Re,oe(Ye)]]),ce(h("input",{id:"vision_sm","onUpdate:modelValue":C[25]||(C[25]=F=>v.value=F),type:"checkbox",disabled:!oe(Ye)},null,8,vm),[[Re,v.value]]),C[97]||(C[97]=h("label",{for:"vision_enabled_sm"},[He(" SMEA "),h("span",{class:"vision_help_text"},"(Improved coherence)")],-1))]),h("div",_m,[ce(h("input",{id:"vision_enabled_sm_dyn","onUpdate:modelValue":C[26]||(C[26]=F=>Ue(at)?at.value=F:null),type:"checkbox"},null,512),[[Re,oe(at)]]),ce(h("input",{id:"vision_sm_dyn","onUpdate:modelValue":C[27]||(C[27]=F=>D.value=F),type:"checkbox",disabled:!oe(at)},null,8,bm),[[Re,D.value]]),C[98]||(C[98]=h("label",{for:"vision_enabled_sm_dyn"},[He(" SMEA DYN "),h("span",{class:"vision_help_text"},"(Dynamic SMEA for better details)")],-1))]),h("div",ym,[ce(h("input",{id:"vision_enabled_quality_toggle","onUpdate:modelValue":C[28]||(C[28]=F=>Ue(ne)?ne.value=F:null),type:"checkbox"},null,512),[[Re,oe(ne)]]),ce(h("input",{id:"vision_quality_toggle","onUpdate:modelValue":C[29]||(C[29]=F=>L.value=F),type:"checkbox",disabled:!oe(ne)},null,8,wm),[[Re,L.value]]),C[99]||(C[99]=h("label",{for:"vision_enabled_quality_toggle"},"Quality Toggle",-1))]),h("div",xm,[ce(h("input",{id:"vision_enabled_dynamic_thresholding","onUpdate:modelValue":C[30]||(C[30]=F=>Ue(Me)?Me.value=F:null),type:"checkbox"},null,512),[[Re,oe(Me)]]),ce(h("input",{id:"vision_dynamic_thresholding","onUpdate:modelValue":C[31]||(C[31]=F=>W.value=F),type:"checkbox",disabled:!oe(Me)},null,8,Sm),[[Re,W.value]]),C[100]||(C[100]=h("label",{for:"vision_enabled_dynamic_thresholding"},"Dynamic Thresholding",-1))]),h("div",Em,[ce(h("input",{id:"vision_enabled_auto_smea","onUpdate:modelValue":C[32]||(C[32]=F=>Ue(G)?G.value=F:null),type:"checkbox"},null,512),[[Re,oe(G)]]),ce(h("input",{id:"vision_auto_smea","onUpdate:modelValue":C[33]||(C[33]=F=>Y.value=F),type:"checkbox",disabled:!oe(G)},null,8,km),[[Re,Y.value]]),C[101]||(C[101]=h("label",{for:"vision_enabled_auto_smea"},"Auto SMEA",-1))]),h("div",Cm,[ce(h("input",{id:"vision_enabled_add_original_image","onUpdate:modelValue":C[34]||(C[34]=F=>Ue(Oe)?Oe.value=F:null),type:"checkbox"},null,512),[[Re,oe(Oe)]]),ce(h("input",{id:"vision_add_original_image","onUpdate:modelValue":C[35]||(C[35]=F=>te.value=F),type:"checkbox",disabled:!oe(Oe)},null,8,Tm),[[Re,te.value]]),C[102]||(C[102]=h("label",{for:"vision_enabled_add_original_image"},"Add Original Image",-1))]),h("div",Am,[ce(h("input",{id:"vision_enabled_use_coords","onUpdate:modelValue":C[36]||(C[36]=F=>Ue(wt)?wt.value=F:null),type:"checkbox"},null,512),[[Re,oe(wt)]]),ce(h("input",{id:"vision_use_coords","onUpdate:modelValue":C[37]||(C[37]=F=>ke.value=F),type:"checkbox",disabled:!oe(wt)},null,8,Im),[[Re,ke.value]]),C[103]||(C[103]=h("label",{for:"vision_enabled_use_coords"},"Use Coords",-1))]),h("div",Dm,[ce(h("input",{id:"vision_enabled_legacy_uc","onUpdate:modelValue":C[38]||(C[38]=F=>Ue(Qe)?Qe.value=F:null),type:"checkbox"},null,512),[[Re,oe(Qe)]]),ce(h("input",{id:"vision_legacy_uc","onUpdate:modelValue":C[39]||(C[39]=F=>T.value=F),type:"checkbox",disabled:!oe(Qe)},null,8,Pm),[[Re,T.value]]),C[104]||(C[104]=h("label",{for:"vision_enabled_legacy_uc"},"Legacy UC",-1))]),h("div",Rm,[ce(h("input",{id:"vision_enabled_normalize_reference_strength_multiple","onUpdate:modelValue":C[40]||(C[40]=F=>Ue($e)?$e.value=F:null),type:"checkbox"},null,512),[[Re,oe($e)]]),ce(h("input",{id:"vision_normalize_reference_strength_multiple","onUpdate:modelValue":C[41]||(C[41]=F=>R.value=F),type:"checkbox",disabled:!oe($e)},null,8,Lm),[[Re,R.value]]),C[105]||(C[105]=h("label",{for:"vision_enabled_normalize_reference_strength_multiple"},"Normalize Reference Strength Multiple",-1))]),h("div",Mm,[ce(h("input",{id:"vision_enabled_deliberate_euler_ancestral_bug","onUpdate:modelValue":C[42]||(C[42]=F=>Ue(st)?st.value=F:null),type:"checkbox"},null,512),[[Re,oe(st)]]),ce(h("input",{id:"vision_deliberate_euler_ancestral_bug","onUpdate:modelValue":C[43]||(C[43]=F=>pe.value=F),type:"checkbox",disabled:!oe(st)},null,8,Um),[[Re,pe.value]]),C[106]||(C[106]=h("label",{for:"vision_enabled_deliberate_euler_ancestral_bug"},"Deliberate Euler Ancestral Bug",-1))]),h("div",Om,[ce(h("input",{id:"vision_enabled_prefer_brownian","onUpdate:modelValue":C[44]||(C[44]=F=>Ue(ft)?ft.value=F:null),type:"checkbox"},null,512),[[Re,oe(ft)]]),ce(h("input",{id:"vision_prefer_brownian","onUpdate:modelValue":C[45]||(C[45]=F=>S.value=F),type:"checkbox",disabled:!oe(ft)},null,8,Bm),[[Re,S.value]]),C[107]||(C[107]=h("label",{for:"vision_enabled_prefer_brownian"},"Prefer Brownian",-1))]),h("div",Nm,[ce(h("input",{id:"vision_enabled_legacy","onUpdate:modelValue":C[46]||(C[46]=F=>Ue(jt)?jt.value=F:null),type:"checkbox"},null,512),[[Re,oe(jt)]]),ce(h("input",{id:"vision_legacy","onUpdate:modelValue":C[47]||(C[47]=F=>N.value=F),type:"checkbox",disabled:!oe(jt)},null,8,Fm),[[Re,N.value]]),C[108]||(C[108]=h("label",{for:"vision_enabled_legacy"},"Legacy",-1))]),h("div",jm,[ce(h("input",{id:"vision_enabled_legacy_v3_extend","onUpdate:modelValue":C[48]||(C[48]=F=>Ue(zt)?zt.value=F:null),type:"checkbox"},null,512),[[Re,oe(zt)]]),ce(h("input",{id:"vision_legacy_v3_extend","onUpdate:modelValue":C[49]||(C[49]=F=>K.value=F),type:"checkbox",disabled:!oe(zt)},null,8,zm),[[Re,K.value]]),C[109]||(C[109]=h("label",{for:"vision_enabled_legacy_v3_extend"},"Legacy V3 Extend",-1))])]),h("div",Hm,[h("div",Vm,[ce(h("input",{id:"vision_enabled_uc_preset","onUpdate:modelValue":C[50]||(C[50]=F=>Ue(ie)?ie.value=F:null),type:"checkbox"},null,512),[[Re,oe(ie)]]),C[110]||(C[110]=h("label",{for:"vision_enabled_uc_preset"},"UC Preset",-1))]),ce(h("select",{id:"vision_uc_preset","onUpdate:modelValue":C[51]||(C[51]=F=>U.value=F),disabled:!oe(ie)},[...C[111]||(C[111]=[h("option",{value:0},"0",-1),h("option",{value:1},"1",-1),h("option",{value:2},"2",-1),h("option",{value:3},"3",-1)])],8,$m),[[kt,U.value]])]),h("div",qm,[h("div",Wm,[ce(h("input",{id:"vision_enabled_params_version","onUpdate:modelValue":C[52]||(C[52]=F=>Ue(O)?O.value=F:null),type:"checkbox"},null,512),[[Re,oe(O)]]),C[112]||(C[112]=h("label",{for:"vision_enabled_params_version"},"Params Version",-1))]),ce(h("select",{id:"vision_params_version","onUpdate:modelValue":C[53]||(C[53]=F=>z.value=F),disabled:!oe(O)},[...C[113]||(C[113]=[h("option",{value:1},"1",-1),h("option",{value:2},"2",-1),h("option",{value:3},"3",-1)])],8,Gm),[[kt,z.value]])]),h("div",Zm,[h("div",Km,[ce(h("input",{id:"vision_enabled_image","onUpdate:modelValue":C[54]||(C[54]=F=>Ue(_e)?_e.value=F:null),type:"checkbox"},null,512),[[Re,oe(_e)]]),C[114]||(C[114]=h("label",{for:"vision_enabled_image"},"Image",-1))]),ce(h("input",{id:"vision_image","onUpdate:modelValue":C[55]||(C[55]=F=>ae.value=F),type:"text",disabled:!oe(_e)},null,8,Ym),[[qe,ae.value]])]),h("div",Xm,[h("div",Jm,[ce(h("input",{id:"vision_enabled_strength","onUpdate:modelValue":C[56]||(C[56]=F=>Ue(Se)?Se.value=F:null),type:"checkbox"},null,512),[[Re,oe(Se)]]),C[115]||(C[115]=h("label",{for:"vision_enabled_strength"},"Strength",-1))]),ce(h("input",{id:"vision_strength","onUpdate:modelValue":C[57]||(C[57]=F=>re.value=F),type:"number",step:"0.01",disabled:!oe(Se)},null,8,Qm),[[qe,re.value]])]),h("div",ev,[h("div",tv,[ce(h("input",{id:"vision_enabled_inpaint_img2img_strength","onUpdate:modelValue":C[58]||(C[58]=F=>Ue(dt)?dt.value=F:null),type:"checkbox"},null,512),[[Re,oe(dt)]]),C[116]||(C[116]=h("label",{for:"vision_enabled_inpaint_img2img_strength"},"Inpaint Img2Img Strength",-1))]),ce(h("input",{id:"vision_inpaint_img2img_strength","onUpdate:modelValue":C[59]||(C[59]=F=>P.value=F),type:"number",step:"0.01",disabled:!oe(dt)},null,8,nv),[[qe,P.value]])]),h("div",iv,[h("div",rv,[ce(h("input",{id:"vision_enabled_mask","onUpdate:modelValue":C[60]||(C[60]=F=>Ue(d)?d.value=F:null),type:"checkbox"},null,512),[[Re,oe(d)]]),C[117]||(C[117]=h("label",{for:"vision_enabled_mask"},"Mask",-1))]),ce(h("input",{id:"vision_mask","onUpdate:modelValue":C[61]||(C[61]=F=>H.value=F),type:"text",disabled:!oe(d)},null,8,sv),[[qe,H.value]])]),h("div",ov,[h("div",av,[ce(h("input",{id:"vision_enabled_controlnet_model","onUpdate:modelValue":C[62]||(C[62]=F=>Ue(me)?me.value=F:null),type:"checkbox"},null,512),[[Re,oe(me)]]),C[118]||(C[118]=h("label",{for:"vision_enabled_controlnet_model"},"Controlnet Model",-1))]),ce(h("select",{id:"vision_controlnet_model","onUpdate:modelValue":C[63]||(C[63]=F=>$.value=F),disabled:!oe(me)},[(Ge(!0),Ke(ht,null,ln(oe(a),F=>(Ge(),Ke("option",{value:F},rt(F),9,uv))),256))],8,lv),[[kt,$.value]])]),h("div",fv,[h("div",dv,[ce(h("input",{id:"vision_enabled_controlnet_strength","onUpdate:modelValue":C[64]||(C[64]=F=>Ue(se)?se.value=F:null),type:"checkbox"},null,512),[[Re,oe(se)]]),C[119]||(C[119]=h("label",{for:"vision_enabled_controlnet_strength"},"Controlnet Strength",-1))]),ce(h("input",{id:"vision_controlnet_strength","onUpdate:modelValue":C[65]||(C[65]=F=>Z.value=F),type:"number",step:"0.01",disabled:!oe(se)},null,8,cv),[[qe,Z.value]])]),h("div",hv,[h("div",pv,[ce(h("input",{id:"vision_enabled_controlnet_condition","onUpdate:modelValue":C[66]||(C[66]=F=>Ue(_)?_.value=F:null),type:"checkbox"},null,512),[[Re,oe(_)]]),C[120]||(C[120]=h("label",{for:"vision_enabled_controlnet_condition"},"Controlnet Condition",-1))]),ce(h("input",{id:"vision_controlnet_condition","onUpdate:modelValue":C[67]||(C[67]=F=>fe.value=F),type:"text",disabled:!oe(_)},null,8,gv),[[qe,fe.value]])]),h("div",mv,[h("div",vv,[ce(h("input",{id:"vision_enabled_skip_cfg_above_sigma","onUpdate:modelValue":C[68]||(C[68]=F=>Ue(Ve)?Ve.value=F:null),type:"checkbox"},null,512),[[Re,oe(Ve)]]),C[121]||(C[121]=h("label",{for:"vision_enabled_skip_cfg_above_sigma"},"Skip CFG Above Sigma",-1))]),ce(h("input",{id:"vision_skip_cfg_above_sigma","onUpdate:modelValue":C[69]||(C[69]=F=>xe.value=F),type:"number",disabled:!oe(Ve)},null,8,_v),[[qe,xe.value]])]),h("div",bv,[h("div",yv,[ce(h("input",{id:"vision_enabled_reference_image_multiple","onUpdate:modelValue":C[70]||(C[70]=F=>Ue(J)?J.value=F:null),type:"checkbox"},null,512),[[Re,oe(J)]]),C[122]||(C[122]=h("label",{for:"vision_enabled_reference_image_multiple"},"Reference Image Multiple",-1))]),ce(h("textarea",{id:"vision_reference_image_multiple","onUpdate:modelValue":C[71]||(C[71]=F=>A.value=F),disabled:!oe(J),placeholder:"Enter image URLs separated by commas"},null,8,wv),[[qe,A.value]])]),h("div",xv,[h("div",Sv,[ce(h("input",{id:"vision_enabled_reference_information_extracted_multiple","onUpdate:modelValue":C[72]||(C[72]=F=>Ue(ee)?ee.value=F:null),type:"checkbox"},null,512),[[Re,oe(ee)]]),C[123]||(C[123]=h("label",{for:"vision_enabled_reference_information_extracted_multiple"},"Reference Information Extracted Multiple",-1))]),ce(h("input",{id:"vision_reference_information_extracted_multiple","onUpdate:modelValue":C[73]||(C[73]=F=>I.value=F),type:"text",disabled:!oe(ee),placeholder:"Enter numbers separated by commas"},null,8,Ev),[[qe,I.value]])]),h("div",kv,[h("div",Cv,[ce(h("input",{id:"vision_enabled_reference_strength_multiple","onUpdate:modelValue":C[74]||(C[74]=F=>Ue(y)?y.value=F:null),type:"checkbox"},null,512),[[Re,oe(y)]]),C[124]||(C[124]=h("label",{for:"vision_enabled_reference_strength_multiple"},"Reference Strength Multiple",-1))]),ce(h("input",{id:"vision_reference_strength_multiple","onUpdate:modelValue":C[75]||(C[75]=F=>j.value=F),type:"text",disabled:!oe(y),placeholder:"Enter numbers separated by commas"},null,8,Tv),[[qe,j.value]])]),h("div",Av,[h("div",Iv,[ce(h("input",{id:"vision_enabled_character_prompts","onUpdate:modelValue":C[76]||(C[76]=F=>Ue(Le)?Le.value=F:null),type:"checkbox"},null,512),[[Re,oe(Le)]]),C[125]||(C[125]=h("label",{for:"vision_enabled_character_prompts"},"Character Prompts",-1))]),ce(h("textarea",{id:"vision_character_prompts","onUpdate:modelValue":C[77]||(C[77]=F=>he.value=F),disabled:!oe(Le),placeholder:"JSON format"},null,8,Dv),[[qe,he.value]])]),h("div",Pv,[h("div",Rv,[ce(h("input",{id:"vision_enabled_v4_prompt","onUpdate:modelValue":C[78]||(C[78]=F=>Ue(Ce)?Ce.value=F:null),type:"checkbox"},null,512),[[Re,oe(Ce)]]),C[126]||(C[126]=h("label",{for:"vision_enabled_v4_prompt"},"V4 Prompt",-1))]),ce(h("textarea",{id:"vision_v4_prompt","onUpdate:modelValue":C[79]||(C[79]=F=>ve.value=F),disabled:!oe(Ce),placeholder:"JSON format"},null,8,Lv),[[qe,ve.value]])]),h("div",Mv,[h("div",Uv,[ce(h("input",{id:"vision_enabled_v4_negative_prompt","onUpdate:modelValue":C[80]||(C[80]=F=>Ue(De)?De.value=F:null),type:"checkbox"},null,512),[[Re,oe(De)]]),C[127]||(C[127]=h("label",{for:"vision_enabled_v4_negative_prompt"},"V4 Negative Prompt",-1))]),ce(h("textarea",{id:"vision_v4_negative_prompt","onUpdate:modelValue":C[81]||(C[81]=F=>ye.value=F),disabled:!oe(De),placeholder:"JSON format"},null,8,Ov),[[qe,ye.value]])]),le.value?(Ge(),Ke("div",Bv,[h("div",Nv,[ce(h("input",{id:"vision_enabled_stream","onUpdate:modelValue":C[82]||(C[82]=F=>Ue(it)?it.value=F:null),type:"checkbox"},null,512),[[Re,oe(it)]]),ce(h("input",{id:"vision_stream","onUpdate:modelValue":C[83]||(C[83]=F=>w.value=F),type:"checkbox",disabled:!oe(it)},null,8,Fv),[[Re,w.value]]),C[128]||(C[128]=h("label",{for:"vision_enabled_stream"},[He(" Enable Streaming "),h("span",{class:"vision_help_text"},"(Watch generation progress in real-time)")],-1))])])):hn("",!0)])]))}},zv=tn(jv,[["__scopeId","data-v-cb36d767"]]),Hv={class:"st_vision_modal_content"},Vv={class:"st_vision_modal_header"},$v={class:"st_vision_modal_body"},qv={class:"st_vision_settings"},Wv={class:"vision_tabs"},Gv={__name:"VisionModal",setup(e){const{state:t,currentConfig:n,duplicateCurrentConfig:i,renameCurrentConfig:r,deleteCurrentConfig:s,saveState:o,exportCurrentConfig:a,importConfig:u,applyTheme:f}=Yt(),l=ct("generate"),m=ct(!1),p=ct("Input dialog title"),c=ct("Input dialog content"),g=ct("");let x=null;const v=ct(!1),D=ct("Confirm dialog title"),w=ct("Confirm dialog content");let b=null;function E(){t.modalVisible=!1}function L(H){H.target.classList.contains("st_vision_modal")&&E()}function U(H){H.key==="Escape"&&t.modalVisible&&E()}function M(H,A,I=""){return new Promise((j,z)=>{p.value=H,c.value=A,g.value=I,m.value=!0,x=j})}function W(H,A=""){return new Promise(I=>{D.value=H,w.value=A,v.value=!0,b=I})}function V(H){x&&(x(H),x=null)}function ue(){x&&(x(null),x=null)}function we(){b&&(b(!0),b=null)}function ae(){b&&(b(!1),b=null)}async function re(H){try{console.log("openInputDialog-rename");const A=await M("Rename",`Enter new name for ${H}:`,H);if(!A||!A.trim()){console.log("Empty input, rename cancelled");return}await r(A.trim()),console.log("user input",A)}catch(A){A&&A.message?(console.error("Rename failed:",A.message),alert(`Failed to rename: ${A.message}`)):console.log("user cancel input")}}async function Z(H){try{console.log("openInputDialog-duplicate");const A=await M("New name",`Enter new name for ${H}:`,"");if(!A||!A.trim()){console.log("Empty input");return}await i(A.trim()),console.log("user input",A)}catch(A){A&&A.message?(console.error("dupl failed:",A.message),alert(`Failed to dupl: ${A.message}`)):console.log("user cancel input")}}async function fe(){try{if(console.log("openConfirmDialog-delete"),!await W("Delete Configuration",`Delete current configuration "${t.currentConfigName}"? This cannot be undone.`)){console.log("Delete cancelled");return}await s(),console.log("config deleted")}catch(H){H&&H.message?(console.error("Delete failed:",H.message),alert(`Failed to delete: ${H.message}`)):console.log("user cancel confirm")}}async function $(){try{const A=await W("Export Configuration",`Do you want to include your API token in the exported configuration?

Click "yes" to include token, "no" to exclude it.`)===!0;a(A),alert(`Configuration "${t.currentConfigName}" exported successfully!`)}catch(H){H&&H.message?(console.error("Export failed:",H.message),alert(`Failed to export: ${H.message}`)):console.log("Export cancelled")}}async function te(){try{const H=await M("Import Configuration","Enter a name for the imported configuration:",t.currentConfigName);if(!H||!H.trim()){console.log("Empty input, import cancelled");return}const I=await W("Import API Token",`Do you want to import the API token from the file?

Click "yes" to import token from file, "no" to keep your current token.`)===!0,j=n.value.token||"";await u(H.trim(),I,j),alert(`Configuration "${H.trim()}" imported successfully!`)}catch(H){H&&H.message?(console.error("Import failed:",H.message),alert(`Failed to import: ${H.message}`)):console.log("Import cancelled")}}return Zt(()=>t.modalVisible,async H=>{H&&(await fs(),setTimeout(()=>{const A=t.theme?.current||"dark";f(A)},50))}),gi(()=>{document.addEventListener("keydown",U)}),mi(()=>{document.removeEventListener("keydown",U)}),(H,A)=>(Ge(),fr(cs,{to:"body"},[nt(vs,{name:"modal"},{default:sr(()=>[oe(t).modalVisible?(Ge(),Ke("div",{key:0,class:"st_vision_modal",onClick:L},[h("div",Hv,[h("div",Vv,[h("button",{class:"vision_button vision_button_primary vision_button_save",onClick:A[0]||(A[0]=(...I)=>oe(o)&&oe(o)(...I))},[...A[8]||(A[8]=[h("i",{class:"fa-solid fa-save"},null,-1),h("span",null,"Save Plugin Settings",-1)])]),h("button",{class:"st_vision_modal_close",onClick:E},[...A[9]||(A[9]=[h("i",{class:"fa-solid fa-times"},null,-1)])])]),h("div",$v,[nt(Mh,{title:p.value,content:c.value,visible:m.value,value:g.value,"onUpdate:visible":A[1]||(A[1]=I=>m.value=I),onConfirm:V,onCancel:ue},null,8,["title","content","visible","value"]),nt(jh,{title:D.value,content:w.value,visible:v.value,"onUpdate:visible":A[2]||(A[2]=I=>v.value=I),onConfirm:we,onCancel:ae},null,8,["title","content","visible"]),h("div",qv,[h("div",Wv,[h("button",{class:fn(["vision_tab",{active:l.value==="generate"}]),onClick:A[3]||(A[3]=I=>l.value="generate")},[...A[10]||(A[10]=[h("i",{class:"fa-solid fa-wand-magic-sparkles"},null,-1),h("span",null,"Generate",-1)])],2),h("button",{class:fn(["vision_tab",{active:l.value==="plugin"}]),onClick:A[4]||(A[4]=I=>l.value="plugin")},[...A[11]||(A[11]=[h("i",{class:"fa-solid fa-cog"},null,-1),h("span",null,"Plugin Settings",-1)])],2),h("button",{class:fn(["vision_tab",{active:l.value==="advanced"}]),onClick:A[5]||(A[5]=I=>l.value="advanced")},[...A[12]||(A[12]=[h("i",{class:"fa-solid fa-sliders"},null,-1),h("span",null,"Advanced",-1)])],2)]),ce(nt(Rp,null,null,512),[[Oi,l.value==="generate"]]),ce(nt(xg,{onRenameConfig:A[6]||(A[6]=I=>re("config")),onDuplicateConfig:A[7]||(A[7]=I=>Z("config")),onDeleteConfig:fe,onExportConfig:$,onImportConfig:te},null,512),[[Oi,l.value==="plugin"]]),ce(nt(zv,null,null,512),[[Oi,l.value==="advanced"]])])])])])):hn("",!0)]),_:1})]))}},Zv=tn(Gv,[["__scopeId","data-v-87b92f01"]]);function Nl(){try{const e=SillyTavern.getContext();if(e?.getRequestHeaders)return e.getRequestHeaders()}catch(e){console.warn("[ST Vision] Failed to get request headers:",e)}return{"Content-Type":"application/json"}}function Kv(e){const t=e.indexOf(",");if(t===-1)throw new Error("Invalid dataURL format");return e.substring(t+1)}function Yv(e){const t=e.match(/data:image\/(\w+);base64,/);return t?t[1]:"png"}async function Xv(e,t=null,n=null){try{const i=Kv(e),r=Yv(e),s={image:i,format:r};t&&(s.ch_name=t),n&&(s.filename=n);const o=await fetch("/api/images/upload",{method:"POST",headers:Nl(),body:JSON.stringify(s)});if(!o.ok){const u=await o.json().catch(()=>({error:"Unknown error"}));throw new Error(u.error||`Upload failed: ${o.status}`)}return{path:(await o.json()).path,format:r}}catch(i){throw console.error("[ST Vision] Failed to upload image:",i),i}}async function So(e){try{const t=await fetch("/api/images/delete",{method:"POST",headers:Nl(),body:JSON.stringify({path:e})});if(!t.ok){const n=await t.json().catch(()=>({error:"Unknown error"}));throw new Error(n.error||`Delete failed: ${t.status}`)}}catch(t){throw console.error("[ST Vision] Failed to delete image:",t),t}}function ji(e){return e?e.startsWith("/")?e:`/${e}`:null}const Jv={style:{display:"none"}},Qv={__name:"ChatImageGenerator",setup(e){const{currentConfig:t,state:n,applyTheme:i}=Yt(),{generateImage:r}=Ol();Zt(()=>n.theme?.current,$=>{$&&i($)},{immediate:!0});let s=null,o=null;const a=new Set,u=new Set,f=[];let l=!1;function m($,te=null){const H=o?.chatId||"chat",A=$?.id??$?._stVisionMesId??te??"no-id";return`${H}::${A}`}function p($,te,H=null){return`${m($,H)}::${te.trim()}`}function c($,te,H){const A=o?.extensionSettings?.st_vision?.imageHistory||[],I=$?.extra?.st_vision_images||[],j=[],z=new Set;return I.filter(Y=>Y.promptKey===te).forEach(Y=>{const he=w(Y.imageId);he&&!z.has(he.imageId)&&(he.path&&!he.dataURL&&(he.dataURL=ji(he.path)),j.push(he),z.add(he.imageId))}),A.filter(Y=>Y.promptKey===te).forEach(Y=>{z.has(Y.imageId)||(Y.path&&!Y.dataURL&&(Y.dataURL=ji(Y.path)),j.push(Y),z.add(Y.imageId))}),j.sort((Y,he)=>(he.timestamp||0)-(Y.timestamp||0)),j}function g($,te=[],H=0){const A=document.getElementById("st-vision-fullscreen-viewer");A&&A.remove();const I=document.createElement("div");I.id="st-vision-fullscreen-viewer",I.style.cssText=`
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 99999;
    background: rgba(0, 0, 0, 0.95);
    backdrop-filter: blur(8px);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    box-sizing: border-box;
    overflow: hidden;
    touch-action: none;
    -webkit-overflow-scrolling: touch;
  `;const j=document.createElement("div");j.style.cssText=`
    position: relative;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-sizing: border-box;
    overflow: hidden;
  `;const z=document.createElement("img");z.src=$,z.style.cssText=`
    max-width: 100%;
    max-height: 100%;
    width: auto;
    height: auto;
    object-fit: contain;
    border-radius: 8px;
    user-select: none;
    -webkit-user-select: none;
    display: block;
    margin: auto;
    position: relative;
    z-index: 1;
    visibility: visible;
    opacity: 1;
  `,z.onload=()=>{if(z.style.display="block",z.style.visibility="visible",z.style.opacity="1",window.innerWidth<=768){const Q=j.clientWidth,ne=j.clientHeight,ie=z.naturalWidth/z.naturalHeight,de=Q/ne;ie>de?(z.style.width=`${Q}px`,z.style.height="auto"):(z.style.width="auto",z.style.height=`${ne}px`)}},z.onerror=()=>{console.error("[ST Vision] Failed to load image:",$),z.style.display="none";const Q=document.createElement("div");Q.textContent="Failed to load image",Q.style.cssText=`
      color: white;
      text-align: center;
      padding: 20px;
      font-size: 16px;
    `,j.appendChild(Q)};const Y=document.createElement("button");Y.type="button",Y.setAttribute("tabindex","-1"),Y.innerHTML='<i class="fa-solid fa-times"></i>',Y.style.cssText=`
    position: absolute;
    top: max(20px, env(safe-area-inset-top));
    right: max(20px, env(safe-area-inset-right));
    width: 48px;
    height: 48px;
    min-width: 48px;
    min-height: 48px;
    border-radius: 50%;
    border: none;
    background: rgba(255, 255, 255, 0.2);
    color: white;
    cursor: pointer;
    font-size: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    z-index: 100;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    outline: none;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  `,Y.addEventListener("focus",Q=>{Q.preventDefault(),Y.blur()}),Y.addEventListener("mouseenter",()=>{Y.style.background="rgba(255, 255, 255, 0.3)",Y.style.transform="scale(1.1)"}),Y.addEventListener("mouseleave",()=>{Y.style.background="rgba(255, 255, 255, 0.2)",Y.style.transform="scale(1)"});let he=null,ve=null,ye=null,xe=null,ke=H;if(te.length>1){he=document.createElement("div"),he.style.cssText=`
      position: absolute;
      bottom: max(20px, env(safe-area-inset-bottom));
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      align-items: center;
      gap: 16px;
      background: rgba(0, 0, 0, 0.6);
      padding: 12px 20px;
      border-radius: 24px;
      z-index: 100;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    `,ve=document.createElement("button"),ve.type="button",ve.setAttribute("tabindex","-1"),ve.innerHTML='<i class="fa-solid fa-chevron-left"></i>',ve.style.cssText=`
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: none;
      background: rgba(255, 255, 255, 0.2);
      color: white;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      touch-action: manipulation;
      outline: none;
    `,ve.addEventListener("focus",ie=>{ie.preventDefault(),ve.blur()}),xe=document.createElement("span"),xe.style.cssText=`
      color: white;
      font-size: 14px;
      min-width: 60px;
      text-align: center;
    `,xe.textContent=`${ke+1} / ${te.length}`,ye=document.createElement("button"),ye.type="button",ye.setAttribute("tabindex","-1"),ye.innerHTML='<i class="fa-solid fa-chevron-right"></i>',ye.style.cssText=ve.style.cssText,ye.addEventListener("focus",ie=>{ie.preventDefault(),ye.blur()});const Q=ie=>{ke=(ie+te.length)%te.length,z.src=te[ke].dataURL,xe.textContent=`${ke+1} / ${te.length}`},ne=(ie,de)=>{ie.preventDefault(),ie.stopPropagation(),document.activeElement&&document.activeElement.blur(),Q(ke+de)};ve.addEventListener("click",ie=>ne(ie,-1)),ye.addEventListener("click",ie=>ne(ie,1)),ve.addEventListener("touchend",ie=>{ie.preventDefault(),ie.stopPropagation(),ne(ie,-1)},{passive:!1}),ye.addEventListener("touchend",ie=>{ie.preventDefault(),ie.stopPropagation(),ne(ie,1)},{passive:!1}),he.appendChild(ve),he.appendChild(xe),he.appendChild(ye)}const T=document.body.style.overflow,R=document.body.style.position,pe=document.body.style.width,S=document.body.style.height,P=()=>{I.remove(),document.body.style.overflow=T||"",window.innerWidth<=768&&(document.body.style.position=R||"",document.body.style.width=pe||"",document.body.style.height=S||""),document.activeElement&&document.activeElement.blur()};Y.addEventListener("click",Q=>{Q.preventDefault(),Q.stopPropagation(),document.activeElement&&document.activeElement.blur(),P()}),Y.addEventListener("touchend",Q=>{Q.preventDefault(),Q.stopPropagation(),document.activeElement&&document.activeElement.blur(),P()},{passive:!1}),I.addEventListener("click",Q=>{(Q.target===I||Q.target===j)&&P()});let N=0,K=0;I.addEventListener("touchstart",Q=>{(Q.target===I||Q.target===j)&&(N=Q.touches[0].clientY,K=Q.touches[0].clientX)},{passive:!0}),I.addEventListener("touchend",Q=>{if(Q.target===I||Q.target===j){const ne=Q.changedTouches[0].clientY,ie=Q.changedTouches[0].clientX,de=Math.abs(ne-N),Ee=Math.abs(ie-K);de<10&&Ee<10&&(Q.preventDefault(),P())}},{passive:!1});const le=Q=>{Q.key==="Escape"?(P(),document.removeEventListener("keydown",le)):te.length>1&&(Q.key==="ArrowLeft"?updateImage(ke-1):Q.key==="ArrowRight"&&updateImage(ke+1))};document.addEventListener("keydown",le),document.body.style.overflow="hidden";const q=window.innerWidth<=768;q&&(document.body.style.position="fixed",document.body.style.width="100%",document.body.style.height="100%"),q&&(I.style.padding="0",I.style.width="100vw",I.style.height="100vh",I.style.maxWidth="100vw",I.style.maxHeight="100vh",j.style.width="100vw",j.style.height="100vh",j.style.maxWidth="100vw",j.style.maxHeight="100vh",j.style.padding="max(20px, env(safe-area-inset-top)) max(20px, env(safe-area-inset-right)) max(20px, env(safe-area-inset-bottom)) max(20px, env(safe-area-inset-left))",z.style.maxWidth="calc(100vw - max(40px, calc(env(safe-area-inset-left) + env(safe-area-inset-right))))",z.style.maxHeight="calc(100vh - max(40px, calc(env(safe-area-inset-top) + env(safe-area-inset-bottom))))",z.style.width="auto",z.style.height="auto"),j.appendChild(z),he&&j.appendChild(he),j.appendChild(Y),I.appendChild(j),document.body.appendChild(I),requestAnimationFrame(()=>{q&&(z.style.display="none",requestAnimationFrame(()=>{z.style.display="block"}))})}function x($){let te=$.querySelector(".st-vision-image-wrapper");te?te.style.cssText="display: flex; flex-direction: column; align-items: center; gap: 8px; width: 100%;":(te=document.createElement("div"),te.className="st-vision-image-wrapper",te.style.cssText="display: flex; flex-direction: column; align-items: center; gap: 8px; width: 100%;",$.appendChild(te));const H=()=>{const ve=$._stVisionImages||[],ye=parseInt($.dataset.currentIndex||"0",10)||0,xe=ve[ye];xe?.dataURL&&g(xe.dataURL,ve,ye)},A=ve=>{ve.addEventListener("click",ye=>{if(ve._stVisionTapOpenedAt&&Date.now()-ve._stVisionTapOpenedAt<400){delete ve._stVisionTapOpenedAt;return}H()}),ve.addEventListener("touchstart",ye=>{const xe=ye.touches[0];ve._stVisionTouchStart={x:xe.clientX,y:xe.clientY,time:Date.now()},ve._stVisionTouchMoved=!1},{passive:!0}),ve.addEventListener("touchmove",ye=>{if(!ve._stVisionTouchStart)return;const xe=ye.touches[0],ke=xe.clientX-ve._stVisionTouchStart.x,T=xe.clientY-ve._stVisionTouchStart.y;(Math.abs(ke)>10||Math.abs(T)>10)&&(ve._stVisionTouchMoved=!0)},{passive:!0}),ve.addEventListener("touchend",ye=>{if(!ve._stVisionTouchStart)return;const xe=ve._stVisionTouchMoved,ke=Date.now()-ve._stVisionTouchStart.time;ve._stVisionTouchStart=null,!(xe||ke>=500)&&(ye.preventDefault(),ye.stopPropagation(),ve._stVisionTapOpenedAt=Date.now(),H())},{passive:!1})};let I=te.querySelector(".st-vision-image");I?(I.style.margin="0 auto",I._stVisionClickBound||(A(I),I._stVisionClickBound=!0)):(I=document.createElement("img"),I.className="st-vision-image",I.style.cssText="max-width: 400px; max-height: 400px; width: auto; height: auto; object-fit: contain; border-radius: 8px; display: block; cursor: pointer; margin: 0 auto; touch-action: manipulation;",I.title="Click to view full size",A(I),te.appendChild(I));let j=te.querySelector(".st-vision-nav"),z=te.querySelector(".st-vision-image-indicator"),Y=te.querySelector(".st-vision-prev"),he=te.querySelector(".st-vision-next");if(!j)j=document.createElement("div"),j.className="st-vision-nav",j.style.cssText="display: none; align-items: center; justify-content: center; gap: 8px; width: 100%; max-width: 400px; margin: 0 auto;",Y=document.createElement("button"),Y.className="st-vision-prev",Y.textContent=" Prev",Y.style.cssText="padding: 6px 12px; border-radius: 4px; border: 1px solid var(--st-vision-nav-border, #555); background: var(--st-vision-nav-bg, #3a3a3a); color: var(--st-vision-text, #e0e0e0); cursor: pointer; transition: all 0.2s ease; touch-action: manipulation; -webkit-tap-highlight-color: transparent;",he=document.createElement("button"),he.className="st-vision-next",he.textContent="Next ",he.style.cssText="padding: 6px 12px; border-radius: 4px; border: 1px solid var(--st-vision-nav-border, #555); background: var(--st-vision-nav-bg, #3a3a3a); color: var(--st-vision-text, #e0e0e0); cursor: pointer; transition: all 0.2s ease; touch-action: manipulation; -webkit-tap-highlight-color: transparent;",z=document.createElement("span"),z.className="st-vision-image-indicator",z.style.cssText="font-size: 0.9em; color: var(--st-vision-text-muted, #b0b0b0);",j.appendChild(Y),j.appendChild(z),j.appendChild(he),te.appendChild(j);else{const ve=j.style.display||"none";j.style.cssText=`display: ${ve}; align-items: center; justify-content: center; gap: 8px; width: 100%; max-width: 400px; margin: 0 auto;`,Y&&(Y.style.cssText="padding: 6px 12px; border-radius: 4px; border: 1px solid var(--st-vision-nav-border, #555); background: var(--st-vision-nav-bg, #3a3a3a); color: var(--st-vision-text, #e0e0e0); cursor: pointer; transition: all 0.2s ease; touch-action: manipulation; -webkit-tap-highlight-color: transparent;"),he&&(he.style.cssText="padding: 6px 12px; border-radius: 4px; border: 1px solid var(--st-vision-nav-border, #555); background: var(--st-vision-nav-bg, #3a3a3a); color: var(--st-vision-text, #e0e0e0); cursor: pointer; transition: all 0.2s ease; touch-action: manipulation; -webkit-tap-highlight-color: transparent;"),z&&(z.style.cssText="font-size: 0.9em; color: var(--st-vision-text-muted, #b0b0b0);")}return Y._stVisionBound||(Y.addEventListener("click",()=>D($,-1)),Y._stVisionBound=!0),he._stVisionBound||(he.addEventListener("click",()=>D($,1)),he._stVisionBound=!0),{img:I,nav:j,indicator:z}}function v($,te,H=0){$._stVisionImages=te;const{img:A,nav:I,indicator:j}=x($);if(!te||te.length===0){A.style.display="none",I.style.display="none",j.textContent="",$.dataset.currentIndex="0";return}const z=Math.max(0,Math.min(H,te.length-1)),Y=te[z];A.style.display="block",A.src=Y.dataURL,A.dataset.imageId=Y.imageId,$.dataset.currentIndex=String(z),j.textContent=`${z+1}/${te.length}`,I.style.display=te.length>1?"flex":"none"}function D($,te){const H=$._stVisionImages||[];if(!H.length)return;const I=((parseInt($.dataset.currentIndex||"0",10)||0)+te+H.length)%H.length;v($,H,I)}function w($){try{const A=(SillyTavern.getContext().extensionSettings?.st_vision?.imageHistory||[]).find(I=>I.imageId===$);return A&&A.path&&!A.dataURL&&(A.dataURL=ji(A.path)),A}catch(te){return console.error("[ST Vision] Failed to get image from history:",te),null}}const b=()=>{const $=n.chatImageGen.tagPrefix.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),te=n.chatImageGen.tagSuffix.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return new RegExp(`${$}([\\s\\S]*?)${te}`,"g")};async function E(){if(l||f.length===0)return;l=!0;let $=n.chatImageGen.queueDelay??8;$<0&&($=0),$>12&&($=12);const te=$*1e3,H=n.chatImageGen.queueDelayWhen||"after_response";for(;f.length>0;){const A=f.shift();if(H==="after_send")A.fn().catch(I=>{console.error("[ST Vision] Queue request failed:",I)}),f.length>0&&await new Promise(I=>setTimeout(I,te));else{try{await A.fn()}catch(I){console.error("[ST Vision] Queue request failed:",I)}f.length>0&&await new Promise(I=>setTimeout(I,te))}}l=!1}async function L($,te,H){const A=H?.dataset.promptKey||`${$||"no-id"}::${te.trim()}`;if(u.has(A))return;if(!H){console.error("[ST Vision] No container element provided");return}const I=H.querySelector(".st-vision-generate-btn");if(!I){console.error("[ST Vision] Button not found in container");return}if(I.disabled)return;u.add(A),I.disabled=!0;const j=I.dataset.originalHtml||I.innerHTML;I.dataset.originalHtml||(I.dataset.originalHtml=j),I.innerHTML='<i class="fa-solid fa-spinner fa-spin"></i> Generating...';const z=async()=>{try{const Y=t.value,he=Bl(Y.prompt_prefix||"",te.trim(),Y.prompt_suffix||"",Y.negative_prompt||"",Y.model);let ve={};if(he.hasCharacters?ve={prompt:he.prompt||te.trim(),negative_prompt:he.negative_prompt,v4_prompt:he.v4_prompt,v4_negative_prompt:he.v4_negative_prompt,use_coords:he.use_coords,characterPrompts:he.characterPrompts}:ve={prompt:he.prompt||te.trim(),negative_prompt:he.negative_prompt},typeof r!="function")throw new Error("generateImage is not a function. Check if NovelAIUtils is properly initialized.");const ye=await r(ve,!1);let xe=null;if(Array.isArray(ye)&&ye.length>0?xe=ye[0]:ye&&ye.dataURL&&(xe=ye),!xe||!xe.dataURL)throw new Error("Failed to generate image");const ke=await U($,xe.dataURL,te,H?.dataset.mesid??null),T=ke?.imageEntry||{imageId:ke?.imageRef?.imageId,prompt:te.trim(),dataURL:xe.dataURL,timestamp:Date.now(),promptKey:A,messageId:$},pe=[...H._stVisionImages||[],T].filter(P=>P&&P.imageId);I.disabled=!1;const S=I.dataset.originalHtml||j||'<i class="fa-solid fa-wand-magic-sparkles"></i> Generate Image';I.innerHTML=S,v(H,pe,pe.length-1)}catch(Y){console.error("[ST Vision] Failed to generate image:",Y),I.disabled=!1,I.innerHTML='<i class="fa-solid fa-exclamation-triangle"></i> Retry',I.dataset.originalHtml||(I.dataset.originalHtml=j||'<i class="fa-solid fa-wand-magic-sparkles"></i> Generate Image'),alert("Failed to generate image: "+Y.message)}finally{u.delete(A)}};n.chatImageGen.useRequestQueue?(f.push({fn:z}),E()):z()}async function U($,te,H,A=null){try{if(!o||!o.chat)return;let I=null;if($!=null&&(I=o.chat.find(ye=>ye.id===$)),!I){const ye=A!==null?parseInt(String(A),10):NaN;!Number.isNaN(ye)&&ye>=0&&ye<o.chat.length&&(I=o.chat[ye])}if(!I){console.warn("[ST Vision] Message not found for messageId:",$);return}const j=Date.now(),z=`st-vision-${j}-${Math.random().toString(36).substring(7)}`,Y=p(I,H,A),he=await M(z,te,H,I,Y);I.extra||(I.extra={}),I.extra.st_vision_images||(I.extra.st_vision_images=[]);const ve={imageId:z,prompt:H,promptKey:Y,timestamp:j};return I.extra.st_vision_images.push(ve),o.saveChat&&await o.saveChat(),{imageEntry:he,imageRef:ve}}catch(I){console.error("[ST Vision] Failed to save image to chat:",I)}}async function M($,te,H,A,I){try{const j=SillyTavern.getContext(),z=j.extensionSettings;z.st_vision||(z.st_vision={}),z.st_vision.imageHistory||(z.st_vision.imageHistory=[]);const Y=A.name||null,he=`${$}.png`,ve=await Xv(te,Y,he),ye={imageId:$,prompt:H,path:ve.path,timestamp:Date.now(),promptKey:I,characterName:A.name,chatId:j.chatId,messageId:A.id,isUser:A.is_user},xe=z.st_vision.imageHistory.findIndex(ke=>ke.imageId===$);return xe>=0?z.st_vision.imageHistory[xe]=ye:z.st_vision.imageHistory.unshift(ye),z.st_vision.imageHistory.length>1e3&&(z.st_vision.imageHistory=z.st_vision.imageHistory.slice(0,1e3)),j.saveSettingsDebounced&&j.saveSettingsDebounced(),{...ye,dataURL:te}}catch(j){throw console.error("[ST Vision] Failed to save to global history:",j),j}}function W($,te,H,A){if(!$||!A){console.error("[ST Vision] Cannot rebind events: missing button or container");return}if($.type="button",$.setAttribute("tabindex","-1"),!$.dataset.originalHtml){const Y='<i class="fa-solid fa-wand-magic-sparkles"></i> Generate Image';$.innerHTML.includes("Retry")||$.innerHTML.includes("exclamation-triangle")?$.dataset.originalHtml=Y:$.dataset.originalHtml=$.innerHTML||Y}$.addEventListener("focus",Y=>{Y.preventDefault(),$.blur()}),$.addEventListener("focusin",Y=>{Y.preventDefault(),$.blur()});const I=Y=>{if(Y&&(Y.preventDefault(),Y.stopPropagation()),document.activeElement&&document.activeElement.blur(),$.blur(),!$.disabled)try{L(te.id,H,A)}catch(he){console.error("[ST Vision] Error in button click handler:",he),alert("Error generating image: "+he.message)}};$.addEventListener("click",I,!1);let j=0,z=!1;$.addEventListener("touchstart",Y=>{Y.preventDefault(),Y.stopPropagation(),j=Date.now(),z=!1,$.style.opacity="0.8",document.activeElement&&document.activeElement!==$&&document.activeElement.blur()},{passive:!1}),$.addEventListener("touchmove",Y=>{z=!0},{passive:!0}),$.addEventListener("touchend",Y=>{Y.preventDefault(),Y.stopPropagation();const he=Date.now()-j;!z&&he<500&&I(Y),he<300?setTimeout(()=>{$.style.opacity="1"},150):$.style.opacity="1",$.blur(),document.activeElement&&document.activeElement.blur()},{passive:!1}),$.addEventListener("touchcancel",Y=>{Y.preventDefault(),$.style.opacity="1",$.blur()},{passive:!1})}function V($,te,H,A,I){const j=document.createElement("div");j.className="st-vision-inline-container",j.style.cssText=`
    display: inline-block;
    margin: 8px 0;
    padding: 12px;
    border: 1px solid var(--st-vision-border, #404040);
    border-radius: 8px;
    background: var(--st-vision-bg, #2a2a2a);
    max-width: 424px;
    width: 100%;
    box-sizing: border-box;
  `,j.dataset.promptKey=$,j.dataset.messageId=A.id??"",j.dataset.mesid=I??"";const z=document.createElement("button");z.type="button",z.className="st-vision-generate-btn",z.setAttribute("tabindex","-1"),z.style.cssText=`
    background: var(--st-vision-button-bg, linear-gradient(135deg, #667eea 0%, #764ba2 100%));
    color: white;
    border: none;
    padding: 8px 12px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.9em;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    margin-bottom: 8px;
    width: 100%;
    box-sizing: border-box;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    position: relative;
    z-index: 1;
    pointer-events: auto;
    user-select: none;
    -webkit-user-select: none;
    outline: none;
  `;const Y='<i class="fa-solid fa-wand-magic-sparkles"></i> Generate Image';z.innerHTML=Y,z.dataset.originalHtml=Y,z.title=`Generate image: ${te.trim().substring(0,50)}...`,z.dataset.prompt=te.trim(),z.dataset.originalTag=H,z.addEventListener("focus",ke=>{ke.preventDefault(),z.blur()}),z.addEventListener("focusin",ke=>{ke.preventDefault(),z.blur()}),window.matchMedia("(hover: hover)").matches&&(z.addEventListener("mouseenter",()=>{z.style.background="var(--st-vision-button-hover, linear-gradient(135deg, #7a8ef0 0%, #8650b8 100%))",z.style.transform="scale(1.02)",z.style.boxShadow="0 2px 8px rgba(102, 126, 234, 0.4)"}),z.addEventListener("mouseleave",()=>{z.style.background="var(--st-vision-button-bg, linear-gradient(135deg, #667eea 0%, #764ba2 100%))",z.style.transform="scale(1)",z.style.boxShadow="none"}));const he=ke=>{if(ke&&(ke.preventDefault(),ke.stopPropagation()),document.activeElement&&document.activeElement.blur(),z.blur(),!z.disabled)try{L(A.id,te,j)}catch(T){console.error("[ST Vision] Error in button click handler:",T),alert("Error generating image: "+T.message)}};let ve=0,ye=!1;z.addEventListener("touchstart",ke=>{ke.preventDefault(),ke.stopPropagation(),ve=Date.now(),ye=!1,z.style.opacity="0.8",document.activeElement&&document.activeElement!==z&&document.activeElement.blur()},{passive:!1}),z.addEventListener("touchmove",ke=>{ye=!0},{passive:!0}),z.addEventListener("touchend",ke=>{ke.preventDefault(),ke.stopPropagation();const T=Date.now()-ve;!ye&&T<500&&he(ke),T<300?setTimeout(()=>{z.style.opacity="1"},150):z.style.opacity="1",z.blur(),document.activeElement&&document.activeElement.blur()},{passive:!1}),z.addEventListener("touchcancel",ke=>{ke.preventDefault(),z.style.opacity="1",z.blur()},{passive:!1}),z.addEventListener("click",he,!1),j.appendChild(z);const xe=c(A,$);return v(j,xe,0),j}function ue($,te){if(!$||!te)return;const H=te.getAttribute("mesid");$._stVisionMesId=H;const A=`${o?.chatId||"chat"}_${H??$.id??"no-id"}_${$.mes?.length||0}`;if(a.has(A)||!n.chatImageGen.enabled)return;const I=te.querySelector(".mes_text");if(!I)return;const j=$.mes||"",z=b(),Y=[...j.matchAll(z)];if(Y.length===0)return;const he=I.querySelectorAll(".st-vision-inline-container");if(he.length>0){let ye=!0;if(he.forEach(xe=>{xe.querySelector("img")||(ye=!1)}),he.length===Y.length&&ye){a.add(A);return}he.forEach(xe=>xe.remove())}a.add(A);let ve=I.innerHTML;Y.reverse().forEach(ye=>{const xe=ye[0],ke=ye[1]||ye[0],T=p($,ke,H),R=V(T,ke,xe,$,H),S=(I.textContent||"").indexOf(xe);if(S===-1){console.warn("[ST Vision] Tag not found in DOM text content, may have been modified by regex");return}const P=document.createRange(),N=document.createTreeWalker(I,NodeFilter.SHOW_TEXT,null);let K=0,le=null,q=0,Q=null,ne=0,ie;for(;ie=N.nextNode();){const de=ie.textContent||"",Ee=K,be=K+de.length;if(!le&&S>=Ee&&S<be&&(le=ie,q=S-Ee),le&&S+xe.length>Ee&&S+xe.length<=be){Q=ie,ne=S+xe.length-Ee;break}K=be}if(le&&Q)P.setStart(le,q),P.setEnd(Q,ne),P.deleteContents(),P.insertNode(R);else{const de=document.createElement("div"),Ee=R.cloneNode(!0);de.appendChild(Ee);const be=de.innerHTML,Pe=ve.replace(xe,be);I.innerHTML=Pe;const Ie=I.querySelector(`.st-vision-inline-container[data-prompt-key="${T}"]`),Me=Ie?.querySelector(".st-vision-generate-btn");if(Me&&Ie){W(Me,$,ke,Ie);const Ne=Ie.querySelector(".st-vision-prev"),Fe=Ie.querySelector(".st-vision-next");Ne&&!Ne._stVisionBound&&(Ne.addEventListener("click",()=>D(Ie,-1)),Ne._stVisionBound=!0),Fe&&!Fe._stVisionBound&&(Fe.addEventListener("click",()=>D(Ie,1)),Fe._stVisionBound=!0)}else console.error("[ST Vision] Could not find inserted button/container for event rebinding")}})}function we(){if(!o)return;o=SillyTavern.getContext();const $=o.chat;let te=[];if($)for(let A of $)te.push(A);const H=document.querySelectorAll(".mes");te.length===0||H.length===0||te.forEach((A,I)=>{let j=null;for(const z of H){const Y=z.getAttribute("mesid");if(Y!==null&&parseInt(Y)===I){j=z;break}}j&&ue(A,j)})}const ae={MESSAGE_SENT:{clearProcessed:!1,delay:500,logPrefix:"MESSAGE_SENT"},MESSAGE_RECEIVED:{clearProcessed:!1,delay:500,logPrefix:"MESSAGE_RECEIVED"},MESSAGE_EDITED:{clearProcessed:!0,delay:100,logPrefix:"MESSAGE_EDITED"},MESSAGE_UPDATED:{clearProcessed:!0,delay:100,logPrefix:"MESSAGE_UPDATED"},MESSAGE_DELETED:{clearProcessed:!0,delay:100,logPrefix:"MESSAGE_DELETED"},MESSAGE_SWIPED:{clearProcessed:!0,delay:100,logPrefix:"MESSAGE_SWIPED"},MESSAGE_SWIPE_DELETED:{clearProcessed:!0,delay:100,logPrefix:"MESSAGE_SWIPE_DELETED"},MESSAGE_FILE_EMBEDDED:{clearProcessed:!0,delay:200,logPrefix:"MESSAGE_FILE_EMBEDDED"},MESSAGE_REASONING_EDITED:{clearProcessed:!1,delay:100,logPrefix:"MESSAGE_REASONING_EDITED"},MESSAGE_REASONING_DELETED:{clearProcessed:!1,delay:100,logPrefix:"MESSAGE_REASONING_DELETED"},MORE_MESSAGES_LOADED:{clearProcessed:!0,delay:500,logPrefix:"MORE_MESSAGES_LOADED"},USER_MESSAGE_RENDERED:{clearProcessed:!0,delay:100,logPrefix:"USER_MESSAGE_RENDERED"},CHARACTER_MESSAGE_RENDERED:{clearProcessed:!0,delay:100,logPrefix:"CHARACTER_MESSAGE_RENDERED"},CHAT_CHANGED:{clearProcessed:!0,delay:2e3,logPrefix:"CHAT_CHANGED"},CHAT_LOADED:{clearProcessed:!0,delay:1e3,logPrefix:"CHAT_LOADED"},CHAT_CREATED:{clearProcessed:!0,delay:1e3,logPrefix:"CHAT_CREATED"},CHAT_DELETED:{clearProcessed:!0,delay:500,logPrefix:"CHAT_DELETED"},GROUP_CHAT_CREATED:{clearProcessed:!0,delay:1e3,logPrefix:"GROUP_CHAT_CREATED"},GROUP_CHAT_DELETED:{clearProcessed:!0,delay:500,logPrefix:"GROUP_CHAT_DELETED"}};function re($,te){const H=ae[$];H&&(H.clearProcessed&&a.clear(),o=SillyTavern.getContext(),setTimeout(()=>{we()},H.delay))}function Z(){try{if(n.theme?.current&&i(n.theme.current),o=SillyTavern.getContext(),s=o.eventSource,!s){console.error("[ST Vision] Event source not available");return}const{eventTypes:$}=o,te=new Map;Object.keys(ae).forEach(H=>{const A=$[H];if(A){const I=j=>re(H,j);s.on(A,I),te.set(H,{eventName:A,handler:I})}}),o._stVisionEventHandlers=te,o.chat&&o.chat.length>0&&setTimeout(()=>{we()},2e3)}catch($){console.error("[ST Vision] Failed to initialize:",$)}}function fe(){s&&o&&o._stVisionEventHandlers&&(o._stVisionEventHandlers.forEach(({eventName:te,handler:H})=>{s.off(te,H)}),delete o._stVisionEventHandlers)}return gi(()=>{Z()}),mi(()=>{fe()}),($,te)=>(Ge(),Ke("div",Jv))}},e_={key:0,class:"st-vision-image-history-modal"},t_={class:"modal-content"},n_={class:"modal-body"},i_={class:"filters"},r_={class:"stats"},s_={key:0,class:"image-grid"},o_={class:"image-wrapper"},a_=["src","alt","onClick","onTouchstart"],l_=["onClick"],u_=["onClick"],f_=["onClick"],d_={class:"image-info"},c_={class:"prompt"},h_={class:"meta"},p_={class:"character"},g_={class:"time"},m_={key:1,class:"empty-state"},v_={key:2,class:"pagination"},__=["disabled"],b_=["disabled"],Di=20,y_={__name:"ImageHistory",props:{visible:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:t}){const n=t,i=ct(""),r=ct("newest"),s=ct(1),o=ct(-1);let a=null;const u=Te(()=>{try{return(SillyTavern.getContext().extensionSettings?.st_vision?.imageHistory||[]).map(W=>W.path&&!W.dataURL?{...W,dataURL:ji(W.path)}:W)}catch(U){return console.error("[ST Vision] Failed to get image history:",U),[]}}),f=Te(()=>{let U=[...u.value];if(i.value){const M=i.value.toLowerCase();U=U.filter(W=>W.prompt?.toLowerCase().includes(M)||W.characterName?.toLowerCase().includes(M))}return r.value==="newest"?U.sort((M,W)=>W.timestamp-M.timestamp):r.value==="oldest"?U.sort((M,W)=>M.timestamp-W.timestamp):r.value==="character"&&U.sort((M,W)=>(M.characterName||"").localeCompare(W.characterName||"")),U}),l=Te(()=>Math.ceil(f.value.length/Di)),m=Te(()=>{const U=(s.value-1)*Di;return f.value.slice(U,U+Di)});Zt([i,r],()=>{s.value=1});function p(){n("close")}function c(U,M){a=setTimeout(()=>{o.value=M,setTimeout(()=>{o.value=-1},3e3)},500)}function g(){a&&(clearTimeout(a),a=null)}function x(U,M=60){return U?U.length>M?U.substring(0,M)+"...":U:""}function v(U){if(!U)return"";const M=new Date(U),V=new Date-M;return V<6e4?"Just now":V<36e5?`${Math.floor(V/6e4)}m ago`:V<864e5?`${Math.floor(V/36e5)}h ago`:M.toLocaleDateString()}function D(U){window.open(U.dataURL,"_blank")}function w(U){navigator.clipboard.writeText(U).then(()=>{console.log("[ST Vision] Prompt copied to clipboard")}).catch(M=>{console.error("[ST Vision] Failed to copy prompt:",M)})}function b(U){const M=document.createElement("a");M.href=U.dataURL;const W=U.imageId?`${U.imageId}.png`:`st-vision-${U.timestamp||Date.now()}.png`;M.download=W,M.click()}async function E(U){if(confirm("Delete this image from history?"))try{const M=SillyTavern.getContext(),W=(s.value-1)*Di+U,V=f.value[W];if(V.path)try{await So(V.path)}catch(ue){console.error("[ST Vision] Failed to delete image from server:",ue)}M.extensionSettings.st_vision.imageHistory.splice(W,1),M.saveSettingsDebounced&&M.saveSettingsDebounced(),m.value.length===0&&s.value>1&&s.value--}catch(M){console.error("[ST Vision] Failed to delete image:",M)}}async function L(){if(confirm("Clear all image history? This cannot be undone."))try{const U=SillyTavern.getContext(),W=(U.extensionSettings.st_vision.imageHistory||[]).filter(V=>V.path).map(V=>So(V.path).catch(ue=>{console.error(`[ST Vision] Failed to delete image ${V.path}:`,ue)}));await Promise.all(W),U.extensionSettings.st_vision.imageHistory=[],U.saveSettingsDebounced&&U.saveSettingsDebounced(),s.value=1}catch(U){console.error("[ST Vision] Failed to clear history:",U)}}return(U,M)=>e.visible?(Ge(),Ke("div",e_,[h("div",{class:"modal-overlay",onClick:p}),h("div",t_,[h("div",{class:"modal-header"},[M[5]||(M[5]=h("h2",null,[h("i",{class:"fa-solid fa-images"}),He(" Image History")],-1)),h("button",{class:"close-btn",onClick:p},[...M[4]||(M[4]=[h("i",{class:"fa-solid fa-times"},null,-1)])])]),h("div",n_,[h("div",i_,[ce(h("input",{"onUpdate:modelValue":M[0]||(M[0]=W=>i.value=W),type:"text",placeholder:"Search by prompt or character...",class:"search-input"},null,512),[[qe,i.value]]),ce(h("select",{"onUpdate:modelValue":M[1]||(M[1]=W=>r.value=W),class:"sort-select"},[...M[6]||(M[6]=[h("option",{value:"newest"},"Newest First",-1),h("option",{value:"oldest"},"Oldest First",-1),h("option",{value:"character"},"By Character",-1)])],512),[[kt,r.value]]),h("button",{onClick:L,class:"clear-btn"},[...M[7]||(M[7]=[h("i",{class:"fa-solid fa-trash"},null,-1),He(" Clear All ",-1)])])]),h("div",r_,[h("span",null,"Total: "+rt(f.value.length)+" images",1)]),f.value.length>0?(Ge(),Ke("div",s_,[(Ge(!0),Ke(ht,null,ln(m.value,(W,V)=>(Ge(),Ke("div",{key:V,class:"image-card"},[h("div",o_,[h("img",{src:W.dataURL,alt:W.prompt,onClick:ue=>D(W),onTouchstart:ue=>c(ue,V),onTouchend:g},null,40,a_),h("div",{class:fn(["image-overlay",{"show-overlay":o.value===V}])},[h("button",{onClick:Cr(ue=>w(W.prompt),["stop"]),title:"Copy prompt"},[...M[8]||(M[8]=[h("i",{class:"fa-solid fa-copy"},null,-1)])],8,l_),h("button",{onClick:Cr(ue=>b(W),["stop"]),title:"Download"},[...M[9]||(M[9]=[h("i",{class:"fa-solid fa-download"},null,-1)])],8,u_),h("button",{onClick:Cr(ue=>E(V),["stop"]),title:"Delete"},[...M[10]||(M[10]=[h("i",{class:"fa-solid fa-trash"},null,-1)])],8,f_)],2)]),h("div",d_,[h("div",c_,rt(x(W.prompt)),1),h("div",h_,[h("span",p_,rt(W.characterName),1),h("span",g_,rt(v(W.timestamp)),1)])])]))),128))])):(Ge(),Ke("div",m_,[...M[11]||(M[11]=[h("i",{class:"fa-solid fa-image"},null,-1),h("p",null,"No images generated yet",-1)])])),l.value>1?(Ge(),Ke("div",v_,[h("button",{onClick:M[2]||(M[2]=W=>s.value--),disabled:s.value===1},[...M[12]||(M[12]=[h("i",{class:"fa-solid fa-chevron-left"},null,-1)])],8,__),h("span",null,"Page "+rt(s.value)+" / "+rt(l.value),1),h("button",{onClick:M[3]||(M[3]=W=>s.value++),disabled:s.value===l.value},[...M[13]||(M[13]=[h("i",{class:"fa-solid fa-chevron-right"},null,-1)])],8,b_)])):hn("",!0)])])])):hn("",!0)}},w_=tn(y_,[["__scopeId","data-v-4c3a0d3e"]]),x_={id:"st-vision-app",class:"st-vision-app"},S_={__name:"App",setup(e){const t=ct(!1);return typeof window<"u"&&window.addEventListener("st-vision-show-history",()=>{t.value=!0}),(n,i)=>(Ge(),Ke("div",x_,[nt(Ah),nt(Zv),nt(Qv),nt(w_,{visible:t.value,onClose:i[0]||(i[0]=r=>t.value=!1)},null,8,["visible"])]))}},E_=tn(S_,[["__scopeId","data-v-8478365b"]]),Eo=document.getElementById("st-vision-app")||document.getElementById("app");Eo?fd(E_).mount(Eo):console.error("[ST Vision] Mount point not found");
