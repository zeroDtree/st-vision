function Jr(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const et={},An=[],Nt=()=>{},ko=()=>!1,Xi=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Qr=e=>e.startsWith("onUpdate:"),pt=Object.assign,es=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Fl=Object.prototype.hasOwnProperty,Xe=(e,t)=>Fl.call(e,t),Be=Array.isArray,In=e=>fi(e)==="[object Map]",On=e=>fi(e)==="[object Set]",Ts=e=>fi(e)==="[object Date]",je=e=>typeof e=="function",lt=e=>typeof e=="string",Ft=e=>typeof e=="symbol",Je=e=>e!==null&&typeof e=="object",Co=e=>(Je(e)||je(e))&&je(e.then)&&je(e.catch),To=Object.prototype.toString,fi=e=>To.call(e),jl=e=>fi(e).slice(8,-1),Ao=e=>fi(e)==="[object Object]",ts=e=>lt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,$n=Jr(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ji=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},zl=/-\w/g,dn=Ji(e=>e.replace(zl,t=>t.slice(1).toUpperCase())),Hl=/\B([A-Z])/g,En=Ji(e=>e.replace(Hl,"-$1").toLowerCase()),Io=Ji(e=>e.charAt(0).toUpperCase()+e.slice(1)),gr=Ji(e=>e?`on${Io(e)}`:""),un=(e,t)=>!Object.is(e,t),Di=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Do=(e,t,n,i=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:i,value:n})},Qi=e=>{const t=parseFloat(e);return isNaN(t)?e:t},Vl=e=>{const t=lt(e)?Number(e):NaN;return isNaN(t)?e:t};let As;const er=()=>As||(As=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function tr(e){if(Be(e)){const t={};for(let n=0;n<e.length;n++){const i=e[n],r=lt(i)?Gl(i):tr(i);if(r)for(const s in r)t[s]=r[s]}return t}else if(lt(e)||Je(e))return e}const $l=/;(?![^(]*\))/g,ql=/:([^]+)/,Wl=/\/\*[^]*?\*\//g;function Gl(e){const t={};return e.replace(Wl,"").split($l).forEach(n=>{if(n){const i=n.split(ql);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function fn(e){let t="";if(lt(e))t=e;else if(Be(e))for(let n=0;n<e.length;n++){const i=fn(e[n]);i&&(t+=i+" ")}else if(Je(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Zl="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Kl=Jr(Zl);function Po(e){return!!e||e===""}function Yl(e,t){if(e.length!==t.length)return!1;let n=!0;for(let i=0;n&&i<e.length;i++)n=di(e[i],t[i]);return n}function di(e,t){if(e===t)return!0;let n=Ts(e),i=Ts(t);if(n||i)return n&&i?e.getTime()===t.getTime():!1;if(n=Ft(e),i=Ft(t),n||i)return e===t;if(n=Be(e),i=Be(t),n||i)return n&&i?Yl(e,t):!1;if(n=Je(e),i=Je(t),n||i){if(!n||!i)return!1;const r=Object.keys(e).length,s=Object.keys(t).length;if(r!==s)return!1;for(const o in e){const a=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!di(e[o],t[o]))return!1}}return String(e)===String(t)}function ns(e,t){return e.findIndex(n=>di(n,t))}const Ro=e=>!!(e&&e.__v_isRef===!0),ot=e=>lt(e)?e:e==null?"":Be(e)||Je(e)&&(e.toString===To||!je(e.toString))?Ro(e)?ot(e.value):JSON.stringify(e,Lo,2):String(e),Lo=(e,t)=>Ro(t)?Lo(e,t.value):In(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[i,r],s)=>(n[mr(i,s)+" =>"]=r,n),{})}:On(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>mr(n))}:Ft(t)?mr(t):Je(t)&&!Be(t)&&!Ao(t)?String(t):t,mr=(e,t="")=>{var n;return Ft(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};let St;class Xl{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=St,!t&&St&&(this.index=(St.scopes||(St.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=St;try{return St=this,t()}finally{St=n}}}on(){++this._on===1&&(this.prevScope=St,St=this)}off(){this._on>0&&--this._on===0&&(St=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(this.effects.length=0,n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Jl(){return St}let tt;const vr=new WeakSet;class Mo{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,St&&St.active&&St.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,vr.has(this)&&(vr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Uo(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Is(this),Bo(this);const t=tt,n=Pt;tt=this,Pt=!0;try{return this.fn()}finally{No(this),tt=t,Pt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)ss(t);this.deps=this.depsTail=void 0,Is(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?vr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ir(this)&&this.run()}get dirty(){return Ir(this)}}let Oo=0,qn,Wn;function Uo(e,t=!1){if(e.flags|=8,t){e.next=Wn,Wn=e;return}e.next=qn,qn=e}function is(){Oo++}function rs(){if(--Oo>0)return;if(Wn){let t=Wn;for(Wn=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;qn;){let t=qn;for(qn=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(i){e||(e=i)}t=n}}if(e)throw e}function Bo(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function No(e){let t,n=e.depsTail,i=n;for(;i;){const r=i.prevDep;i.version===-1?(i===n&&(n=r),ss(i),Ql(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=r}e.deps=t,e.depsTail=n}function Ir(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Fo(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Fo(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===ti)||(e.globalVersion=ti,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Ir(e))))return;e.flags|=2;const t=e.dep,n=tt,i=Pt;tt=e,Pt=!0;try{Bo(e);const r=e.fn(e._value);(t.version===0||un(r,e._value))&&(e.flags|=128,e._value=r,t.version++)}catch(r){throw t.version++,r}finally{tt=n,Pt=i,No(e),e.flags&=-3}}function ss(e,t=!1){const{dep:n,prevSub:i,nextSub:r}=e;if(i&&(i.nextSub=r,e.prevSub=void 0),r&&(r.prevSub=i,e.nextSub=void 0),n.subs===e&&(n.subs=i,!i&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)ss(s,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Ql(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Pt=!0;const jo=[];function Xt(){jo.push(Pt),Pt=!1}function Jt(){const e=jo.pop();Pt=e===void 0?!0:e}function Is(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=tt;tt=void 0;try{t()}finally{tt=n}}}let ti=0;class eu{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class os{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!tt||!Pt||tt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==tt)n=this.activeLink=new eu(tt,this),tt.deps?(n.prevDep=tt.depsTail,tt.depsTail.nextDep=n,tt.depsTail=n):tt.deps=tt.depsTail=n,zo(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const i=n.nextDep;i.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=i),n.prevDep=tt.depsTail,n.nextDep=void 0,tt.depsTail.nextDep=n,tt.depsTail=n,tt.deps===n&&(tt.deps=i)}return n}trigger(t){this.version++,ti++,this.notify(t)}notify(t){is();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{rs()}}}function zo(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let i=t.deps;i;i=i.nextDep)zo(i)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Dr=new WeakMap,wn=Symbol(""),Pr=Symbol(""),ni=Symbol("");function gt(e,t,n){if(Pt&&tt){let i=Dr.get(e);i||Dr.set(e,i=new Map);let r=i.get(n);r||(i.set(n,r=new os),r.map=i,r.key=n),r.track()}}function Wt(e,t,n,i,r,s){const o=Dr.get(e);if(!o){ti++;return}const a=l=>{l&&l.trigger()};if(is(),t==="clear")o.forEach(a);else{const l=Be(e),u=l&&ts(n);if(l&&n==="length"){const f=Number(i);o.forEach((m,h)=>{(h==="length"||h===ni||!Ft(h)&&h>=f)&&a(m)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),u&&a(o.get(ni)),t){case"add":l?u&&a(o.get("length")):(a(o.get(wn)),In(e)&&a(o.get(Pr)));break;case"delete":l||(a(o.get(wn)),In(e)&&a(o.get(Pr)));break;case"set":In(e)&&a(o.get(wn));break}}rs()}function kn(e){const t=Ze(e);return t===e?t:(gt(t,"iterate",ni),It(e)?t:t.map(Rt))}function nr(e){return gt(e=Ze(e),"iterate",ni),e}function rn(e,t){return Qt(e)?Rn(xn(e)?Rt(t):t):Rt(t)}const tu={__proto__:null,[Symbol.iterator](){return _r(this,Symbol.iterator,e=>rn(this,e))},concat(...e){return kn(this).concat(...e.map(t=>Be(t)?kn(t):t))},entries(){return _r(this,"entries",e=>(e[1]=rn(this,e[1]),e))},every(e,t){return Ht(this,"every",e,t,void 0,arguments)},filter(e,t){return Ht(this,"filter",e,t,n=>n.map(i=>rn(this,i)),arguments)},find(e,t){return Ht(this,"find",e,t,n=>rn(this,n),arguments)},findIndex(e,t){return Ht(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Ht(this,"findLast",e,t,n=>rn(this,n),arguments)},findLastIndex(e,t){return Ht(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Ht(this,"forEach",e,t,void 0,arguments)},includes(...e){return br(this,"includes",e)},indexOf(...e){return br(this,"indexOf",e)},join(e){return kn(this).join(e)},lastIndexOf(...e){return br(this,"lastIndexOf",e)},map(e,t){return Ht(this,"map",e,t,void 0,arguments)},pop(){return Bn(this,"pop")},push(...e){return Bn(this,"push",e)},reduce(e,...t){return Ds(this,"reduce",e,t)},reduceRight(e,...t){return Ds(this,"reduceRight",e,t)},shift(){return Bn(this,"shift")},some(e,t){return Ht(this,"some",e,t,void 0,arguments)},splice(...e){return Bn(this,"splice",e)},toReversed(){return kn(this).toReversed()},toSorted(e){return kn(this).toSorted(e)},toSpliced(...e){return kn(this).toSpliced(...e)},unshift(...e){return Bn(this,"unshift",e)},values(){return _r(this,"values",e=>rn(this,e))}};function _r(e,t,n){const i=nr(e),r=i[t]();return i!==e&&!It(e)&&(r._next=r.next,r.next=()=>{const s=r._next();return s.done||(s.value=n(s.value)),s}),r}const nu=Array.prototype;function Ht(e,t,n,i,r,s){const o=nr(e),a=o!==e&&!It(e),l=o[t];if(l!==nu[t]){const m=l.apply(e,s);return a?Rt(m):m}let u=n;o!==e&&(a?u=function(m,h){return n.call(this,rn(e,m),h,e)}:n.length>2&&(u=function(m,h){return n.call(this,m,h,e)}));const f=l.call(o,u,i);return a&&r?r(f):f}function Ds(e,t,n,i){const r=nr(e);let s=n;return r!==e&&(It(e)?n.length>3&&(s=function(o,a,l){return n.call(this,o,a,l,e)}):s=function(o,a,l){return n.call(this,o,rn(e,a),l,e)}),r[t](s,...i)}function br(e,t,n){const i=Ze(e);gt(i,"iterate",ni);const r=i[t](...n);return(r===-1||r===!1)&&us(n[0])?(n[0]=Ze(n[0]),i[t](...n)):r}function Bn(e,t,n=[]){Xt(),is();const i=Ze(e)[t].apply(e,n);return rs(),Jt(),i}const iu=Jr("__proto__,__v_isRef,__isVue"),Ho=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Ft));function ru(e){Ft(e)||(e=String(e));const t=Ze(this);return gt(t,"has",e),t.hasOwnProperty(e)}class Vo{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,i){if(n==="__v_skip")return t.__v_skip;const r=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!r;if(n==="__v_isReadonly")return r;if(n==="__v_isShallow")return s;if(n==="__v_raw")return i===(r?s?pu:Go:s?Wo:qo).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const o=Be(t);if(!r){let l;if(o&&(l=tu[n]))return l;if(n==="hasOwnProperty")return ru}const a=Reflect.get(t,n,Oe(t)?t:i);if((Ft(n)?Ho.has(n):iu(n))||(r||gt(t,"get",n),s))return a;if(Oe(a)){const l=o&&ts(n)?a:a.value;return r&&Je(l)?Lr(l):l}return Je(a)?r?Lr(a):ir(a):a}}class $o extends Vo{constructor(t=!1){super(!1,t)}set(t,n,i,r){let s=t[n];const o=Be(t)&&ts(n);if(!this._isShallow){const u=Qt(s);if(!It(i)&&!Qt(i)&&(s=Ze(s),i=Ze(i)),!o&&Oe(s)&&!Oe(i))return u||(s.value=i),!0}const a=o?Number(n)<t.length:Xe(t,n),l=Reflect.set(t,n,i,Oe(t)?t:r);return t===Ze(r)&&(a?un(i,s)&&Wt(t,"set",n,i):Wt(t,"add",n,i)),l}deleteProperty(t,n){const i=Xe(t,n);t[n];const r=Reflect.deleteProperty(t,n);return r&&i&&Wt(t,"delete",n,void 0),r}has(t,n){const i=Reflect.has(t,n);return(!Ft(n)||!Ho.has(n))&&gt(t,"has",n),i}ownKeys(t){return gt(t,"iterate",Be(t)?"length":wn),Reflect.ownKeys(t)}}class su extends Vo{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const ou=new $o,au=new su,lu=new $o(!0);const Rr=e=>e,xi=e=>Reflect.getPrototypeOf(e);function uu(e,t,n){return function(...i){const r=this.__v_raw,s=Ze(r),o=In(s),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,u=r[e](...i),f=n?Rr:t?Rn:Rt;return!t&&gt(s,"iterate",l?Pr:wn),pt(Object.create(u),{next(){const{value:m,done:h}=u.next();return h?{value:m,done:h}:{value:a?[f(m[0]),f(m[1])]:f(m),done:h}}})}}function Si(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function fu(e,t){const n={get(r){const s=this.__v_raw,o=Ze(s),a=Ze(r);e||(un(r,a)&&gt(o,"get",r),gt(o,"get",a));const{has:l}=xi(o),u=t?Rr:e?Rn:Rt;if(l.call(o,r))return u(s.get(r));if(l.call(o,a))return u(s.get(a));s!==o&&s.get(r)},get size(){const r=this.__v_raw;return!e&&gt(Ze(r),"iterate",wn),r.size},has(r){const s=this.__v_raw,o=Ze(s),a=Ze(r);return e||(un(r,a)&&gt(o,"has",r),gt(o,"has",a)),r===a?s.has(r):s.has(r)||s.has(a)},forEach(r,s){const o=this,a=o.__v_raw,l=Ze(a),u=t?Rr:e?Rn:Rt;return!e&&gt(l,"iterate",wn),a.forEach((f,m)=>r.call(s,u(f),u(m),o))}};return pt(n,e?{add:Si("add"),set:Si("set"),delete:Si("delete"),clear:Si("clear")}:{add(r){!t&&!It(r)&&!Qt(r)&&(r=Ze(r));const s=Ze(this);return xi(s).has.call(s,r)||(s.add(r),Wt(s,"add",r,r)),this},set(r,s){!t&&!It(s)&&!Qt(s)&&(s=Ze(s));const o=Ze(this),{has:a,get:l}=xi(o);let u=a.call(o,r);u||(r=Ze(r),u=a.call(o,r));const f=l.call(o,r);return o.set(r,s),u?un(s,f)&&Wt(o,"set",r,s):Wt(o,"add",r,s),this},delete(r){const s=Ze(this),{has:o,get:a}=xi(s);let l=o.call(s,r);l||(r=Ze(r),l=o.call(s,r)),a&&a.call(s,r);const u=s.delete(r);return l&&Wt(s,"delete",r,void 0),u},clear(){const r=Ze(this),s=r.size!==0,o=r.clear();return s&&Wt(r,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=uu(r,e,t)}),n}function as(e,t){const n=fu(e,t);return(i,r,s)=>r==="__v_isReactive"?!e:r==="__v_isReadonly"?e:r==="__v_raw"?i:Reflect.get(Xe(n,r)&&r in i?n:i,r,s)}const du={get:as(!1,!1)},cu={get:as(!1,!0)},hu={get:as(!0,!1)};const qo=new WeakMap,Wo=new WeakMap,Go=new WeakMap,pu=new WeakMap;function gu(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function mu(e){return e.__v_skip||!Object.isExtensible(e)?0:gu(jl(e))}function ir(e){return Qt(e)?e:ls(e,!1,ou,du,qo)}function vu(e){return ls(e,!1,lu,cu,Wo)}function Lr(e){return ls(e,!0,au,hu,Go)}function ls(e,t,n,i,r){if(!Je(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=mu(e);if(s===0)return e;const o=r.get(e);if(o)return o;const a=new Proxy(e,s===2?i:n);return r.set(e,a),a}function xn(e){return Qt(e)?xn(e.__v_raw):!!(e&&e.__v_isReactive)}function Qt(e){return!!(e&&e.__v_isReadonly)}function It(e){return!!(e&&e.__v_isShallow)}function us(e){return e?!!e.__v_raw:!1}function Ze(e){const t=e&&e.__v_raw;return t?Ze(t):e}function _u(e){return!Xe(e,"__v_skip")&&Object.isExtensible(e)&&Do(e,"__v_skip",!0),e}const Rt=e=>Je(e)?ir(e):e,Rn=e=>Je(e)?Lr(e):e;function Oe(e){return e?e.__v_isRef===!0:!1}function ct(e){return bu(e,!1)}function bu(e,t){return Oe(e)?e:new yu(e,t)}class yu{constructor(t,n){this.dep=new os,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Ze(t),this._value=n?t:Rt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,i=this.__v_isShallow||It(t)||Qt(t);t=i?t:Ze(t),un(t,n)&&(this._rawValue=t,this._value=i?t:Rt(t),this.dep.trigger())}}function de(e){return Oe(e)?e.value:e}const wu={get:(e,t,n)=>t==="__v_raw"?e:de(Reflect.get(e,t,n)),set:(e,t,n,i)=>{const r=e[t];return Oe(r)&&!Oe(n)?(r.value=n,!0):Reflect.set(e,t,n,i)}};function Zo(e){return xn(e)?e:new Proxy(e,wu)}class xu{constructor(t,n,i){this.fn=t,this.setter=n,this._value=void 0,this.dep=new os(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ti-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&tt!==this)return Uo(this,!0),!0}get value(){const t=this.dep.track();return Fo(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Su(e,t,n=!1){let i,r;return je(e)?i=e:(i=e.get,r=e.set),new xu(i,r,n)}const Ei={},ji=new WeakMap;let bn;function Eu(e,t=!1,n=bn){if(n){let i=ji.get(n);i||ji.set(n,i=[]),i.push(e)}}function ku(e,t,n=et){const{immediate:i,deep:r,once:s,scheduler:o,augmentJob:a,call:l}=n,u=w=>r?w:It(w)||r===!1||r===0?Gt(w,1):Gt(w);let f,m,h,c,g=!1,x=!1;if(Oe(e)?(m=()=>e.value,g=It(e)):xn(e)?(m=()=>u(e),g=!0):Be(e)?(x=!0,g=e.some(w=>xn(w)||It(w)),m=()=>e.map(w=>{if(Oe(w))return w.value;if(xn(w))return u(w);if(je(w))return l?l(w,2):w()})):je(e)?t?m=l?()=>l(e,2):e:m=()=>{if(h){Xt();try{h()}finally{Jt()}}const w=bn;bn=f;try{return l?l(e,3,[c]):e(c)}finally{bn=w}}:m=Nt,t&&r){const w=m,L=r===!0?1/0:r;m=()=>Gt(w(),L)}const _=Jl(),P=()=>{f.stop(),_&&_.active&&es(_.effects,f)};if(s&&t){const w=t;t=(...L)=>{w(...L),P()}}let S=x?new Array(e.length).fill(Ei):Ei;const b=w=>{if(!(!(f.flags&1)||!f.dirty&&!w))if(t){const L=f.run();if(r||g||(x?L.some((j,M)=>un(j,S[M])):un(L,S))){h&&h();const j=bn;bn=f;try{const M=[L,S===Ei?void 0:x&&S[0]===Ei?[]:S,c];S=L,l?l(t,3,M):t(...M)}finally{bn=j}}}else f.run()};return a&&a(b),f=new Mo(m),f.scheduler=o?()=>o(b,!1):b,c=w=>Eu(w,!1,f),h=f.onStop=()=>{const w=ji.get(f);if(w){if(l)l(w,4);else for(const L of w)L();ji.delete(f)}},t?i?b(!0):S=f.run():o?o(b.bind(null,!0),!0):f.run(),P.pause=f.pause.bind(f),P.resume=f.resume.bind(f),P.stop=P,P}function Gt(e,t=1/0,n){if(t<=0||!Je(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,Oe(e))Gt(e.value,t,n);else if(Be(e))for(let i=0;i<e.length;i++)Gt(e[i],t,n);else if(On(e)||In(e))e.forEach(i=>{Gt(i,t,n)});else if(Ao(e)){for(const i in e)Gt(e[i],t,n);for(const i of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,i)&&Gt(e[i],t,n)}return e}function ci(e,t,n,i){try{return i?e(...i):e()}catch(r){rr(r,t,n)}}function Lt(e,t,n,i){if(je(e)){const r=ci(e,t,n,i);return r&&Co(r)&&r.catch(s=>{rr(s,t,n)}),r}if(Be(e)){const r=[];for(let s=0;s<e.length;s++)r.push(Lt(e[s],t,n,i));return r}}function rr(e,t,n,i=!0){const r=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||et;if(t){let a=t.parent;const l=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const f=a.ec;if(f){for(let m=0;m<f.length;m++)if(f[m](e,l,u)===!1)return}a=a.parent}if(s){Xt(),ci(s,null,10,[e,l,u]),Jt();return}}Cu(e,n,r,i,o)}function Cu(e,t,n,i=!0,r=!1){if(r)throw e;console.error(e)}const _t=[];let Ot=-1;const Dn=[];let sn=null,Cn=0;const Ko=Promise.resolve();let zi=null;function fs(e){const t=zi||Ko;return e?t.then(this?e.bind(this):e):t}function Tu(e){let t=Ot+1,n=_t.length;for(;t<n;){const i=t+n>>>1,r=_t[i],s=ii(r);s<e||s===e&&r.flags&2?t=i+1:n=i}return t}function ds(e){if(!(e.flags&1)){const t=ii(e),n=_t[_t.length-1];!n||!(e.flags&2)&&t>=ii(n)?_t.push(e):_t.splice(Tu(t),0,e),e.flags|=1,Yo()}}function Yo(){zi||(zi=Ko.then(Jo))}function Au(e){Be(e)?Dn.push(...e):sn&&e.id===-1?sn.splice(Cn+1,0,e):e.flags&1||(Dn.push(e),e.flags|=1),Yo()}function Ps(e,t,n=Ot+1){for(;n<_t.length;n++){const i=_t[n];if(i&&i.flags&2){if(e&&i.id!==e.uid)continue;_t.splice(n,1),n--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function Xo(e){if(Dn.length){const t=[...new Set(Dn)].sort((n,i)=>ii(n)-ii(i));if(Dn.length=0,sn){sn.push(...t);return}for(sn=t,Cn=0;Cn<sn.length;Cn++){const n=sn[Cn];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}sn=null,Cn=0}}const ii=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Jo(e){try{for(Ot=0;Ot<_t.length;Ot++){const t=_t[Ot];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),ci(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ot<_t.length;Ot++){const t=_t[Ot];t&&(t.flags&=-2)}Ot=-1,_t.length=0,Xo(),zi=null,(_t.length||Dn.length)&&Jo()}}let At=null,Qo=null;function Hi(e){const t=At;return At=e,Qo=e&&e.type.__scopeId||null,t}function sr(e,t=At,n){if(!t||e._n)return e;const i=(...r)=>{i._d&&qi(-1);const s=Hi(t);let o;try{o=e(...r)}finally{Hi(s),i._d&&qi(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function he(e,t){if(At===null)return e;const n=dr(At),i=e.dirs||(e.dirs=[]);for(let r=0;r<t.length;r++){let[s,o,a,l=et]=t[r];s&&(je(s)&&(s={mounted:s,updated:s}),s.deep&&Gt(o),i.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return e}function gn(e,t,n,i){const r=e.dirs,s=t&&t.dirs;for(let o=0;o<r.length;o++){const a=r[o];s&&(a.oldValue=s[o].value);let l=a.dir[i];l&&(Xt(),Lt(l,n,8,[e.el,a,e,t]),Jt())}}function Iu(e,t){if(yt){let n=yt.provides;const i=yt.parent&&yt.parent.provides;i===n&&(n=yt.provides=Object.create(i)),n[e]=t}}function Pi(e,t,n=!1){const i=Pa();if(i||Pn){let r=Pn?Pn._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(r&&e in r)return r[e];if(arguments.length>1)return n&&je(t)?t.call(i&&i.proxy):t}}const Du=Symbol.for("v-scx"),Pu=()=>Pi(Du);function Zt(e,t,n){return ea(e,t,n)}function ea(e,t,n=et){const{immediate:i,deep:r,flush:s,once:o}=n,a=pt({},n),l=t&&i||!t&&s!=="post";let u;if(oi){if(s==="sync"){const c=Pu();u=c.__watcherHandles||(c.__watcherHandles=[])}else if(!l){const c=()=>{};return c.stop=Nt,c.resume=Nt,c.pause=Nt,c}}const f=yt;a.call=(c,g,x)=>Lt(c,f,g,x);let m=!1;s==="post"?a.scheduler=c=>{vt(c,f&&f.suspense)}:s!=="sync"&&(m=!0,a.scheduler=(c,g)=>{g?c():ds(c)}),a.augmentJob=c=>{t&&(c.flags|=4),m&&(c.flags|=2,f&&(c.id=f.uid,c.i=f))};const h=ku(e,t,a);return oi&&(u?u.push(h):l&&h()),h}function Ru(e,t,n){const i=this.proxy,r=lt(e)?e.includes(".")?ta(i,e):()=>i[e]:e.bind(i,i);let s;je(t)?s=t:(s=t.handler,n=t);const o=gi(this),a=ea(r,s.bind(i),n);return o(),a}function ta(e,t){const n=t.split(".");return()=>{let i=e;for(let r=0;r<n.length&&i;r++)i=i[n[r]];return i}}const na=Symbol("_vte"),ia=e=>e.__isTeleport,Gn=e=>e&&(e.disabled||e.disabled===""),Rs=e=>e&&(e.defer||e.defer===""),Ls=e=>typeof SVGElement<"u"&&e instanceof SVGElement,Ms=e=>typeof MathMLElement=="function"&&e instanceof MathMLElement,Mr=(e,t)=>{const n=e&&e.to;return lt(n)?t?t(n):null:n},ra={name:"Teleport",__isTeleport:!0,process(e,t,n,i,r,s,o,a,l,u){const{mc:f,pc:m,pbc:h,o:{insert:c,querySelector:g,createText:x,createComment:_}}=u,P=Gn(t.props);let{shapeFlag:S,children:b,dynamicChildren:w}=t;if(e==null){const L=t.el=x(""),j=t.anchor=x("");c(L,n,i),c(j,n,i);const M=(V,ae)=>{S&16&&f(b,V,ae,r,s,o,a,l)},W=()=>{const V=t.target=Mr(t.props,g),ae=sa(V,t,x,c);V&&(o!=="svg"&&Ls(V)?o="svg":o!=="mathml"&&Ms(V)&&(o="mathml"),r&&r.isCE&&(r.ce._teleportTargets||(r.ce._teleportTargets=new Set)).add(V),P||(M(V,ae),Ri(t,!1)))};P&&(M(n,j),Ri(t,!0)),Rs(t.props)?(t.el.__isMounted=!1,vt(()=>{W(),delete t.el.__isMounted},s)):W()}else{if(Rs(t.props)&&e.el.__isMounted===!1){vt(()=>{ra.process(e,t,n,i,r,s,o,a,l,u)},s);return}t.el=e.el,t.targetStart=e.targetStart;const L=t.anchor=e.anchor,j=t.target=e.target,M=t.targetAnchor=e.targetAnchor,W=Gn(e.props),V=W?n:j,ae=W?L:M;if(o==="svg"||Ls(j)?o="svg":(o==="mathml"||Ms(j))&&(o="mathml"),w?(h(e.dynamicChildren,w,V,r,s,o,a),gs(e,t,!0)):l||m(e,t,V,ae,r,s,o,a,!1),P)W?t.props&&e.props&&t.props.to!==e.props.to&&(t.props.to=e.props.to):ki(t,n,L,u,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const Se=t.target=Mr(t.props,g);Se&&ki(t,Se,null,u,0)}else W&&ki(t,j,M,u,1);Ri(t,P)}},remove(e,t,n,{um:i,o:{remove:r}},s){const{shapeFlag:o,children:a,anchor:l,targetStart:u,targetAnchor:f,target:m,props:h}=e;if(m&&(r(u),r(f)),s&&r(l),o&16){const c=s||!Gn(h);for(let g=0;g<a.length;g++){const x=a[g];i(x,t,n,c,!!x.dynamicChildren)}}},move:ki,hydrate:Lu};function ki(e,t,n,{o:{insert:i},m:r},s=2){s===0&&i(e.targetAnchor,t,n);const{el:o,anchor:a,shapeFlag:l,children:u,props:f}=e,m=s===2;if(m&&i(o,t,n),(!m||Gn(f))&&l&16)for(let h=0;h<u.length;h++)r(u[h],t,n,2);m&&i(a,t,n)}function Lu(e,t,n,i,r,s,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:u,createText:f}},m){function h(x,_,P,S){_.anchor=m(o(x),_,a(x),n,i,r,s),_.targetStart=P,_.targetAnchor=S}const c=t.target=Mr(t.props,l),g=Gn(t.props);if(c){const x=c._lpa||c.firstChild;if(t.shapeFlag&16)if(g)h(e,t,x,x&&o(x));else{t.anchor=o(e);let _=x;for(;_;){if(_&&_.nodeType===8){if(_.data==="teleport start anchor")t.targetStart=_;else if(_.data==="teleport anchor"){t.targetAnchor=_,c._lpa=t.targetAnchor&&o(t.targetAnchor);break}}_=o(_)}t.targetAnchor||sa(c,t,f,u),m(x&&o(x),t,c,n,i,r,s)}Ri(t,g)}else g&&t.shapeFlag&16&&h(e,t,e,o(e));return t.anchor&&o(t.anchor)}const cs=ra;function Ri(e,t){const n=e.ctx;if(n&&n.ut){let i,r;for(t?(i=e.el,r=e.anchor):(i=e.targetStart,r=e.targetAnchor);i&&i!==r;)i.nodeType===1&&i.setAttribute("data-v-owner",n.uid),i=i.nextSibling;n.ut()}}function sa(e,t,n,i){const r=t.targetStart=n(""),s=t.targetAnchor=n("");return r[na]=s,e&&(i(r,e),i(s,e)),s}const qt=Symbol("_leaveCb"),Ci=Symbol("_enterCb");function Mu(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return hi(()=>{e.isMounted=!0}),ha(()=>{e.isUnmounting=!0}),e}const Ct=[Function,Array],oa={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ct,onEnter:Ct,onAfterEnter:Ct,onEnterCancelled:Ct,onBeforeLeave:Ct,onLeave:Ct,onAfterLeave:Ct,onLeaveCancelled:Ct,onBeforeAppear:Ct,onAppear:Ct,onAfterAppear:Ct,onAppearCancelled:Ct},aa=e=>{const t=e.subTree;return t.component?aa(t.component):t},Ou={name:"BaseTransition",props:oa,setup(e,{slots:t}){const n=Pa(),i=Mu();return()=>{const r=t.default&&fa(t.default(),!0);if(!r||!r.length)return;const s=la(r),o=Ze(e),{mode:a}=o;if(i.isLeaving)return yr(s);const l=Os(s);if(!l)return yr(s);let u=Or(l,o,i,n,m=>u=m);l.type!==bt&&ri(l,u);let f=n.subTree&&Os(n.subTree);if(f&&f.type!==bt&&!yn(f,l)&&aa(n).type!==bt){let m=Or(f,o,i,n);if(ri(f,m),a==="out-in"&&l.type!==bt)return i.isLeaving=!0,m.afterLeave=()=>{i.isLeaving=!1,n.job.flags&8||n.update(),delete m.afterLeave,f=void 0},yr(s);a==="in-out"&&l.type!==bt?m.delayLeave=(h,c,g)=>{const x=ua(i,f);x[String(f.key)]=f,h[qt]=()=>{c(),h[qt]=void 0,delete u.delayedLeave,f=void 0},u.delayedLeave=()=>{g(),delete u.delayedLeave,f=void 0}}:f=void 0}else f&&(f=void 0);return s}}};function la(e){let t=e[0];if(e.length>1){for(const n of e)if(n.type!==bt){t=n;break}}return t}const Uu=Ou;function ua(e,t){const{leavingVNodes:n}=e;let i=n.get(t.type);return i||(i=Object.create(null),n.set(t.type,i)),i}function Or(e,t,n,i,r){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:f,onEnterCancelled:m,onBeforeLeave:h,onLeave:c,onAfterLeave:g,onLeaveCancelled:x,onBeforeAppear:_,onAppear:P,onAfterAppear:S,onAppearCancelled:b}=t,w=String(e.key),L=ua(n,e),j=(V,ae)=>{V&&Lt(V,i,9,ae)},M=(V,ae)=>{const Se=ae[1];j(V,ae),Be(V)?V.every(fe=>fe.length<=1)&&Se():V.length<=1&&Se()},W={mode:o,persisted:a,beforeEnter(V){let ae=l;if(!n.isMounted)if(s)ae=_||l;else return;V[qt]&&V[qt](!0);const Se=L[w];Se&&yn(e,Se)&&Se.el[qt]&&Se.el[qt](),j(ae,[V])},enter(V){let ae=u,Se=f,fe=m;if(!n.isMounted)if(s)ae=P||u,Se=S||f,fe=b||m;else return;let re=!1;const Z=V[Ci]=le=>{re||(re=!0,le?j(fe,[V]):j(Se,[V]),W.delayedLeave&&W.delayedLeave(),V[Ci]=void 0)};ae?M(ae,[V,Z]):Z()},leave(V,ae){const Se=String(e.key);if(V[Ci]&&V[Ci](!0),n.isUnmounting)return ae();j(h,[V]);let fe=!1;const re=V[qt]=Z=>{fe||(fe=!0,ae(),Z?j(x,[V]):j(g,[V]),V[qt]=void 0,L[Se]===e&&delete L[Se])};L[Se]=e,c?M(c,[V,re]):re()},clone(V){const ae=Or(V,t,n,i,r);return r&&r(ae),ae}};return W}function yr(e){if(or(e))return e=cn(e),e.children=null,e}function Os(e){if(!or(e))return ia(e.type)&&e.children?la(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:n}=e;if(n){if(t&16)return n[0];if(t&32&&je(n.default))return n.default()}}function ri(e,t){e.shapeFlag&6&&e.component?(e.transition=t,ri(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function fa(e,t=!1,n){let i=[],r=0;for(let s=0;s<e.length;s++){let o=e[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===ht?(o.patchFlag&128&&r++,i=i.concat(fa(o.children,t,a))):(t||o.type!==bt)&&i.push(a!=null?cn(o,{key:a}):o)}if(r>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}function da(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Vi=new WeakMap;function Zn(e,t,n,i,r=!1){if(Be(e)){e.forEach((g,x)=>Zn(g,t&&(Be(t)?t[x]:t),n,i,r));return}if(Kn(i)&&!r){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&Zn(e,t,n,i.component.subTree);return}const s=i.shapeFlag&4?dr(i.component):i.el,o=r?null:s,{i:a,r:l}=e,u=t&&t.r,f=a.refs===et?a.refs={}:a.refs,m=a.setupState,h=Ze(m),c=m===et?ko:g=>Xe(h,g);if(u!=null&&u!==l){if(Us(t),lt(u))f[u]=null,c(u)&&(m[u]=null);else if(Oe(u)){u.value=null;const g=t;g.k&&(f[g.k]=null)}}if(je(l))ci(l,a,12,[o,f]);else{const g=lt(l),x=Oe(l);if(g||x){const _=()=>{if(e.f){const P=g?c(l)?m[l]:f[l]:l.value;if(r)Be(P)&&es(P,s);else if(Be(P))P.includes(s)||P.push(s);else if(g)f[l]=[s],c(l)&&(m[l]=f[l]);else{const S=[s];l.value=S,e.k&&(f[e.k]=S)}}else g?(f[l]=o,c(l)&&(m[l]=o)):x&&(l.value=o,e.k&&(f[e.k]=o))};if(o){const P=()=>{_(),Vi.delete(e)};P.id=-1,Vi.set(e,P),vt(P,n)}else Us(e),_()}}}function Us(e){const t=Vi.get(e);t&&(t.flags|=8,Vi.delete(e))}er().requestIdleCallback;er().cancelIdleCallback;const Kn=e=>!!e.type.__asyncLoader,or=e=>e.type.__isKeepAlive;function Bu(e,t){ca(e,"a",t)}function Nu(e,t){ca(e,"da",t)}function ca(e,t,n=yt){const i=e.__wdc||(e.__wdc=()=>{let r=n;for(;r;){if(r.isDeactivated)return;r=r.parent}return e()});if(ar(t,i,n),n){let r=n.parent;for(;r&&r.parent;)or(r.parent.vnode)&&Fu(i,t,n,r),r=r.parent}}function Fu(e,t,n,i){const r=ar(t,e,i,!0);pi(()=>{es(i[t],r)},n)}function ar(e,t,n=yt,i=!1){if(n){const r=n[e]||(n[e]=[]),s=t.__weh||(t.__weh=(...o)=>{Xt();const a=gi(n),l=Lt(t,n,e,o);return a(),Jt(),l});return i?r.unshift(s):r.push(s),s}}const en=e=>(t,n=yt)=>{(!oi||e==="sp")&&ar(e,(...i)=>t(...i),n)},ju=en("bm"),hi=en("m"),zu=en("bu"),Hu=en("u"),ha=en("bum"),pi=en("um"),Vu=en("sp"),$u=en("rtg"),qu=en("rtc");function Wu(e,t=yt){ar("ec",e,t)}const Gu=Symbol.for("v-ndc");function ln(e,t,n,i){let r;const s=n,o=Be(e);if(o||lt(e)){const a=o&&xn(e);let l=!1,u=!1;a&&(l=!It(e),u=Qt(e),e=nr(e)),r=new Array(e.length);for(let f=0,m=e.length;f<m;f++)r[f]=t(l?u?Rn(Rt(e[f])):Rt(e[f]):e[f],f,void 0,s)}else if(typeof e=="number"){r=new Array(e);for(let a=0;a<e;a++)r[a]=t(a+1,a,void 0,s)}else if(Je(e))if(e[Symbol.iterator])r=Array.from(e,(a,l)=>t(a,l,void 0,s));else{const a=Object.keys(e);r=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const f=a[l];r[l]=t(e[f],f,l,s)}}else r=[];return r}const Ur=e=>e?Ra(e)?dr(e):Ur(e.parent):null,Yn=pt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ur(e.parent),$root:e=>Ur(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>ga(e),$forceUpdate:e=>e.f||(e.f=()=>{ds(e.update)}),$nextTick:e=>e.n||(e.n=fs.bind(e.proxy)),$watch:e=>Ru.bind(e)}),wr=(e,t)=>e!==et&&!e.__isScriptSetup&&Xe(e,t),Zu={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:i,data:r,props:s,accessCache:o,type:a,appContext:l}=e;if(t[0]!=="$"){const h=o[t];if(h!==void 0)switch(h){case 1:return i[t];case 2:return r[t];case 4:return n[t];case 3:return s[t]}else{if(wr(i,t))return o[t]=1,i[t];if(r!==et&&Xe(r,t))return o[t]=2,r[t];if(Xe(s,t))return o[t]=3,s[t];if(n!==et&&Xe(n,t))return o[t]=4,n[t];Br&&(o[t]=0)}}const u=Yn[t];let f,m;if(u)return t==="$attrs"&&gt(e.attrs,"get",""),u(e);if((f=a.__cssModules)&&(f=f[t]))return f;if(n!==et&&Xe(n,t))return o[t]=4,n[t];if(m=l.config.globalProperties,Xe(m,t))return m[t]},set({_:e},t,n){const{data:i,setupState:r,ctx:s}=e;return wr(r,t)?(r[t]=n,!0):i!==et&&Xe(i,t)?(i[t]=n,!0):Xe(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:i,appContext:r,props:s,type:o}},a){let l;return!!(n[a]||e!==et&&a[0]!=="$"&&Xe(e,a)||wr(t,a)||Xe(s,a)||Xe(i,a)||Xe(Yn,a)||Xe(r.config.globalProperties,a)||(l=o.__cssModules)&&l[a])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:Xe(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Bs(e){return Be(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Br=!0;function Ku(e){const t=ga(e),n=e.proxy,i=e.ctx;Br=!1,t.beforeCreate&&Ns(t.beforeCreate,e,"bc");const{data:r,computed:s,methods:o,watch:a,provide:l,inject:u,created:f,beforeMount:m,mounted:h,beforeUpdate:c,updated:g,activated:x,deactivated:_,beforeDestroy:P,beforeUnmount:S,destroyed:b,unmounted:w,render:L,renderTracked:j,renderTriggered:M,errorCaptured:W,serverPrefetch:V,expose:ae,inheritAttrs:Se,components:fe,directives:re,filters:Z}=t;if(u&&Yu(u,i,null),o)for(const ne in o){const H=o[ne];je(H)&&(i[ne]=H.bind(n))}if(r){const ne=r.call(n,n);Je(ne)&&(e.data=ir(ne))}if(Br=!0,s)for(const ne in s){const H=s[ne],A=je(H)?H.bind(n,n):je(H.get)?H.get.bind(n,n):Nt,I=!je(H)&&je(H.set)?H.set.bind(n):Nt,F=Ie({get:A,set:I});Object.defineProperty(i,ne,{enumerable:!0,configurable:!0,get:()=>F.value,set:z=>F.value=z})}if(a)for(const ne in a)pa(a[ne],i,n,ne);if(l){const ne=je(l)?l.call(n):l;Reflect.ownKeys(ne).forEach(H=>{Iu(H,ne[H])})}f&&Ns(f,e,"c");function $(ne,H){Be(H)?H.forEach(A=>ne(A.bind(n))):H&&ne(H.bind(n))}if($(ju,m),$(hi,h),$(zu,c),$(Hu,g),$(Bu,x),$(Nu,_),$(Wu,W),$(qu,j),$($u,M),$(ha,S),$(pi,w),$(Vu,V),Be(ae))if(ae.length){const ne=e.exposed||(e.exposed={});ae.forEach(H=>{Object.defineProperty(ne,H,{get:()=>n[H],set:A=>n[H]=A,enumerable:!0})})}else e.exposed||(e.exposed={});L&&e.render===Nt&&(e.render=L),Se!=null&&(e.inheritAttrs=Se),fe&&(e.components=fe),re&&(e.directives=re),V&&da(e)}function Yu(e,t,n=Nt){Be(e)&&(e=Nr(e));for(const i in e){const r=e[i];let s;Je(r)?"default"in r?s=Pi(r.from||i,r.default,!0):s=Pi(r.from||i):s=Pi(r),Oe(s)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):t[i]=s}}function Ns(e,t,n){Lt(Be(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,n)}function pa(e,t,n,i){let r=i.includes(".")?ta(n,i):()=>n[i];if(lt(e)){const s=t[e];je(s)&&Zt(r,s)}else if(je(e))Zt(r,e.bind(n));else if(Je(e))if(Be(e))e.forEach(s=>pa(s,t,n,i));else{const s=je(e.handler)?e.handler.bind(n):t[e.handler];je(s)&&Zt(r,s,e)}}function ga(e){const t=e.type,{mixins:n,extends:i}=t,{mixins:r,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,a=s.get(t);let l;return a?l=a:!r.length&&!n&&!i?l=t:(l={},r.length&&r.forEach(u=>$i(l,u,o,!0)),$i(l,t,o)),Je(t)&&s.set(t,l),l}function $i(e,t,n,i=!1){const{mixins:r,extends:s}=t;s&&$i(e,s,n,!0),r&&r.forEach(o=>$i(e,o,n,!0));for(const o in t)if(!(i&&o==="expose")){const a=Xu[o]||n&&n[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const Xu={data:Fs,props:js,emits:js,methods:Vn,computed:Vn,beforeCreate:mt,created:mt,beforeMount:mt,mounted:mt,beforeUpdate:mt,updated:mt,beforeDestroy:mt,beforeUnmount:mt,destroyed:mt,unmounted:mt,activated:mt,deactivated:mt,errorCaptured:mt,serverPrefetch:mt,components:Vn,directives:Vn,watch:Qu,provide:Fs,inject:Ju};function Fs(e,t){return t?e?function(){return pt(je(e)?e.call(this,this):e,je(t)?t.call(this,this):t)}:t:e}function Ju(e,t){return Vn(Nr(e),Nr(t))}function Nr(e){if(Be(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function mt(e,t){return e?[...new Set([].concat(e,t))]:t}function Vn(e,t){return e?pt(Object.create(null),e,t):t}function js(e,t){return e?Be(e)&&Be(t)?[...new Set([...e,...t])]:pt(Object.create(null),Bs(e),Bs(t??{})):t}function Qu(e,t){if(!e)return t;if(!t)return e;const n=pt(Object.create(null),e);for(const i in t)n[i]=mt(e[i],t[i]);return n}function ma(){return{app:null,config:{isNativeTag:ko,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ef=0;function tf(e,t){return function(i,r=null){je(i)||(i=pt({},i)),r!=null&&!Je(r)&&(r=null);const s=ma(),o=new WeakSet,a=[];let l=!1;const u=s.app={_uid:ef++,_component:i,_props:r,_container:null,_context:s,_instance:null,version:Of,get config(){return s.config},set config(f){},use(f,...m){return o.has(f)||(f&&je(f.install)?(o.add(f),f.install(u,...m)):je(f)&&(o.add(f),f(u,...m))),u},mixin(f){return s.mixins.includes(f)||s.mixins.push(f),u},component(f,m){return m?(s.components[f]=m,u):s.components[f]},directive(f,m){return m?(s.directives[f]=m,u):s.directives[f]},mount(f,m,h){if(!l){const c=u._ceVNode||nt(i,r);return c.appContext=s,h===!0?h="svg":h===!1&&(h=void 0),e(c,f,h),l=!0,u._container=f,f.__vue_app__=u,dr(c.component)}},onUnmount(f){a.push(f)},unmount(){l&&(Lt(a,u._instance,16),e(null,u._container),delete u._container.__vue_app__)},provide(f,m){return s.provides[f]=m,u},runWithContext(f){const m=Pn;Pn=u;try{return f()}finally{Pn=m}}};return u}}let Pn=null;const nf=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${dn(t)}Modifiers`]||e[`${En(t)}Modifiers`];function rf(e,t,...n){if(e.isUnmounted)return;const i=e.vnode.props||et;let r=n;const s=t.startsWith("update:"),o=s&&nf(i,t.slice(7));o&&(o.trim&&(r=n.map(f=>lt(f)?f.trim():f)),o.number&&(r=n.map(Qi)));let a,l=i[a=gr(t)]||i[a=gr(dn(t))];!l&&s&&(l=i[a=gr(En(t))]),l&&Lt(l,e,6,r);const u=i[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Lt(u,e,6,r)}}const sf=new WeakMap;function va(e,t,n=!1){const i=n?sf:t.emitsCache,r=i.get(e);if(r!==void 0)return r;const s=e.emits;let o={},a=!1;if(!je(e)){const l=u=>{const f=va(u,t,!0);f&&(a=!0,pt(o,f))};!n&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!a?(Je(e)&&i.set(e,null),null):(Be(s)?s.forEach(l=>o[l]=null):pt(o,s),Je(e)&&i.set(e,o),o)}function lr(e,t){return!e||!Xi(t)?!1:(t=t.slice(2).replace(/Once$/,""),Xe(e,t[0].toLowerCase()+t.slice(1))||Xe(e,En(t))||Xe(e,t))}function zs(e){const{type:t,vnode:n,proxy:i,withProxy:r,propsOptions:[s],slots:o,attrs:a,emit:l,render:u,renderCache:f,props:m,data:h,setupState:c,ctx:g,inheritAttrs:x}=e,_=Hi(e);let P,S;try{if(n.shapeFlag&4){const w=r||i,L=w;P=Bt(u.call(L,w,f,m,c,h,g)),S=a}else{const w=t;P=Bt(w.length>1?w(m,{attrs:a,slots:o,emit:l}):w(m,null)),S=t.props?a:of(a)}}catch(w){Xn.length=0,rr(w,e,1),P=nt(bt)}let b=P;if(S&&x!==!1){const w=Object.keys(S),{shapeFlag:L}=b;w.length&&L&7&&(s&&w.some(Qr)&&(S=af(S,s)),b=cn(b,S,!1,!0))}return n.dirs&&(b=cn(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(n.dirs):n.dirs),n.transition&&ri(b,n.transition),P=b,Hi(_),P}const of=e=>{let t;for(const n in e)(n==="class"||n==="style"||Xi(n))&&((t||(t={}))[n]=e[n]);return t},af=(e,t)=>{const n={};for(const i in e)(!Qr(i)||!(i.slice(9)in t))&&(n[i]=e[i]);return n};function lf(e,t,n){const{props:i,children:r,component:s}=e,{props:o,children:a,patchFlag:l}=t,u=s.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return i?Hs(i,o,u):!!o;if(l&8){const f=t.dynamicProps;for(let m=0;m<f.length;m++){const h=f[m];if(o[h]!==i[h]&&!lr(u,h))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?Hs(i,o,u):!0:!!o;return!1}function Hs(e,t,n){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(t[s]!==e[s]&&!lr(n,s))return!0}return!1}function uf({vnode:e,parent:t},n){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===e&&(i.el=e.el),i===e)(e=t.vnode).el=n,t=t.parent;else break}}const _a={},ba=()=>Object.create(_a),ya=e=>Object.getPrototypeOf(e)===_a;function ff(e,t,n,i=!1){const r={},s=ba();e.propsDefaults=Object.create(null),wa(e,t,r,s);for(const o in e.propsOptions[0])o in r||(r[o]=void 0);n?e.props=i?r:vu(r):e.type.props?e.props=r:e.props=s,e.attrs=s}function df(e,t,n,i){const{props:r,attrs:s,vnode:{patchFlag:o}}=e,a=Ze(r),[l]=e.propsOptions;let u=!1;if((i||o>0)&&!(o&16)){if(o&8){const f=e.vnode.dynamicProps;for(let m=0;m<f.length;m++){let h=f[m];if(lr(e.emitsOptions,h))continue;const c=t[h];if(l)if(Xe(s,h))c!==s[h]&&(s[h]=c,u=!0);else{const g=dn(h);r[g]=Fr(l,a,g,c,e,!1)}else c!==s[h]&&(s[h]=c,u=!0)}}}else{wa(e,t,r,s)&&(u=!0);let f;for(const m in a)(!t||!Xe(t,m)&&((f=En(m))===m||!Xe(t,f)))&&(l?n&&(n[m]!==void 0||n[f]!==void 0)&&(r[m]=Fr(l,a,m,void 0,e,!0)):delete r[m]);if(s!==a)for(const m in s)(!t||!Xe(t,m))&&(delete s[m],u=!0)}u&&Wt(e.attrs,"set","")}function wa(e,t,n,i){const[r,s]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if($n(l))continue;const u=t[l];let f;r&&Xe(r,f=dn(l))?!s||!s.includes(f)?n[f]=u:(a||(a={}))[f]=u:lr(e.emitsOptions,l)||(!(l in i)||u!==i[l])&&(i[l]=u,o=!0)}if(s){const l=Ze(n),u=a||et;for(let f=0;f<s.length;f++){const m=s[f];n[m]=Fr(r,l,m,u[m],e,!Xe(u,m))}}return o}function Fr(e,t,n,i,r,s){const o=e[n];if(o!=null){const a=Xe(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&je(l)){const{propsDefaults:u}=r;if(n in u)i=u[n];else{const f=gi(r);i=u[n]=l.call(null,t),f()}}else i=l;r.ce&&r.ce._setProp(n,i)}o[0]&&(s&&!a?i=!1:o[1]&&(i===""||i===En(n))&&(i=!0))}return i}const cf=new WeakMap;function xa(e,t,n=!1){const i=n?cf:t.propsCache,r=i.get(e);if(r)return r;const s=e.props,o={},a=[];let l=!1;if(!je(e)){const f=m=>{l=!0;const[h,c]=xa(m,t,!0);pt(o,h),c&&a.push(...c)};!n&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!s&&!l)return Je(e)&&i.set(e,An),An;if(Be(s))for(let f=0;f<s.length;f++){const m=dn(s[f]);Vs(m)&&(o[m]=et)}else if(s)for(const f in s){const m=dn(f);if(Vs(m)){const h=s[f],c=o[m]=Be(h)||je(h)?{type:h}:pt({},h),g=c.type;let x=!1,_=!0;if(Be(g))for(let P=0;P<g.length;++P){const S=g[P],b=je(S)&&S.name;if(b==="Boolean"){x=!0;break}else b==="String"&&(_=!1)}else x=je(g)&&g.name==="Boolean";c[0]=x,c[1]=_,(x||Xe(c,"default"))&&a.push(m)}}const u=[o,a];return Je(e)&&i.set(e,u),u}function Vs(e){return e[0]!=="$"&&!$n(e)}const hs=e=>e==="_"||e==="_ctx"||e==="$stable",ps=e=>Be(e)?e.map(Bt):[Bt(e)],hf=(e,t,n)=>{if(t._n)return t;const i=sr((...r)=>ps(t(...r)),n);return i._c=!1,i},Sa=(e,t,n)=>{const i=e._ctx;for(const r in e){if(hs(r))continue;const s=e[r];if(je(s))t[r]=hf(r,s,i);else if(s!=null){const o=ps(s);t[r]=()=>o}}},Ea=(e,t)=>{const n=ps(t);e.slots.default=()=>n},ka=(e,t,n)=>{for(const i in t)(n||!hs(i))&&(e[i]=t[i])},pf=(e,t,n)=>{const i=e.slots=ba();if(e.vnode.shapeFlag&32){const r=t._;r?(ka(i,t,n),n&&Do(i,"_",r,!0)):Sa(t,i)}else t&&Ea(e,t)},gf=(e,t,n)=>{const{vnode:i,slots:r}=e;let s=!0,o=et;if(i.shapeFlag&32){const a=t._;a?n&&a===1?s=!1:ka(r,t,n):(s=!t.$stable,Sa(t,r)),o=t}else t&&(Ea(e,t),o={default:1});if(s)for(const a in r)!hs(a)&&o[a]==null&&delete r[a]},vt=yf;function mf(e){return vf(e)}function vf(e,t){const n=er();n.__VUE__=!0;const{insert:i,remove:r,patchProp:s,createElement:o,createText:a,createComment:l,setText:u,setElementText:f,parentNode:m,nextSibling:h,setScopeId:c=Nt,insertStaticContent:g}=e,x=(E,D,B,K=null,oe=null,q=null,Q=void 0,te=null,ie=!!D.dynamicChildren)=>{if(E===D)return;E&&!yn(E,D)&&(K=we(E),z(E,oe,q,!0),E=null),D.patchFlag===-2&&(ie=!1,D.dynamicChildren=null);const{type:ue,ref:Ee,shapeFlag:be}=D;switch(ue){case ur:_(E,D,B,K);break;case bt:P(E,D,B,K);break;case Li:E==null&&S(D,B,K,Q);break;case ht:fe(E,D,B,K,oe,q,Q,te,ie);break;default:be&1?L(E,D,B,K,oe,q,Q,te,ie):be&6?re(E,D,B,K,oe,q,Q,te,ie):(be&64||be&128)&&ue.process(E,D,B,K,oe,q,Q,te,ie,R)}Ee!=null&&oe?Zn(Ee,E&&E.ref,q,D||E,!D):Ee==null&&E&&E.ref!=null&&Zn(E.ref,null,q,E,!0)},_=(E,D,B,K)=>{if(E==null)i(D.el=a(D.children),B,K);else{const oe=D.el=E.el;D.children!==E.children&&u(oe,D.children)}},P=(E,D,B,K)=>{E==null?i(D.el=l(D.children||""),B,K):D.el=E.el},S=(E,D,B,K)=>{[E.el,E.anchor]=g(E.children,D,B,K,E.el,E.anchor)},b=({el:E,anchor:D},B,K)=>{let oe;for(;E&&E!==D;)oe=h(E),i(E,B,K),E=oe;i(D,B,K)},w=({el:E,anchor:D})=>{let B;for(;E&&E!==D;)B=h(E),r(E),E=B;r(D)},L=(E,D,B,K,oe,q,Q,te,ie)=>{if(D.type==="svg"?Q="svg":D.type==="math"&&(Q="mathml"),E==null)j(D,B,K,oe,q,Q,te,ie);else{const ue=E.el&&E.el._isVueCE?E.el:null;try{ue&&ue._beginPatch(),V(E,D,oe,q,Q,te,ie)}finally{ue&&ue._endPatch()}}},j=(E,D,B,K,oe,q,Q,te)=>{let ie,ue;const{props:Ee,shapeFlag:be,transition:Pe,dirs:Ae}=E;if(ie=E.el=o(E.type,q,Ee&&Ee.is,Ee),be&8?f(ie,E.children):be&16&&W(E.children,ie,null,K,oe,xr(E,q),Q,te),Ae&&gn(E,null,K,"created"),M(ie,E,E.scopeId,Q,K),Ee){for(const Ne in Ee)Ne!=="value"&&!$n(Ne)&&s(ie,Ne,null,Ee[Ne],q,K);"value"in Ee&&s(ie,"value",null,Ee.value,q),(ue=Ee.onVnodeBeforeMount)&&Mt(ue,K,E)}Ae&&gn(E,null,K,"beforeMount");const Me=_f(oe,Pe);Me&&Pe.beforeEnter(ie),i(ie,D,B),((ue=Ee&&Ee.onVnodeMounted)||Me||Ae)&&vt(()=>{ue&&Mt(ue,K,E),Me&&Pe.enter(ie),Ae&&gn(E,null,K,"mounted")},oe)},M=(E,D,B,K,oe)=>{if(B&&c(E,B),K)for(let q=0;q<K.length;q++)c(E,K[q]);if(oe){let q=oe.subTree;if(D===q||Aa(q.type)&&(q.ssContent===D||q.ssFallback===D)){const Q=oe.vnode;M(E,Q,Q.scopeId,Q.slotScopeIds,oe.parent)}}},W=(E,D,B,K,oe,q,Q,te,ie=0)=>{for(let ue=ie;ue<E.length;ue++){const Ee=E[ue]=te?on(E[ue]):Bt(E[ue]);x(null,Ee,D,B,K,oe,q,Q,te)}},V=(E,D,B,K,oe,q,Q)=>{const te=D.el=E.el;let{patchFlag:ie,dynamicChildren:ue,dirs:Ee}=D;ie|=E.patchFlag&16;const be=E.props||et,Pe=D.props||et;let Ae;if(B&&mn(B,!1),(Ae=Pe.onVnodeBeforeUpdate)&&Mt(Ae,B,D,E),Ee&&gn(D,E,B,"beforeUpdate"),B&&mn(B,!0),(be.innerHTML&&Pe.innerHTML==null||be.textContent&&Pe.textContent==null)&&f(te,""),ue?ae(E.dynamicChildren,ue,te,B,K,xr(D,oe),q):Q||H(E,D,te,null,B,K,xr(D,oe),q,!1),ie>0){if(ie&16)Se(te,be,Pe,B,oe);else if(ie&2&&be.class!==Pe.class&&s(te,"class",null,Pe.class,oe),ie&4&&s(te,"style",be.style,Pe.style,oe),ie&8){const Me=D.dynamicProps;for(let Ne=0;Ne<Me.length;Ne++){const Fe=Me[Ne],We=be[Fe],Ye=Pe[Fe];(Ye!==We||Fe==="value")&&s(te,Fe,We,Ye,oe,B)}}ie&1&&E.children!==D.children&&f(te,D.children)}else!Q&&ue==null&&Se(te,be,Pe,B,oe);((Ae=Pe.onVnodeUpdated)||Ee)&&vt(()=>{Ae&&Mt(Ae,B,D,E),Ee&&gn(D,E,B,"updated")},K)},ae=(E,D,B,K,oe,q,Q)=>{for(let te=0;te<D.length;te++){const ie=E[te],ue=D[te],Ee=ie.el&&(ie.type===ht||!yn(ie,ue)||ie.shapeFlag&198)?m(ie.el):B;x(ie,ue,Ee,null,K,oe,q,Q,!0)}},Se=(E,D,B,K,oe)=>{if(D!==B){if(D!==et)for(const q in D)!$n(q)&&!(q in B)&&s(E,q,D[q],null,oe,K);for(const q in B){if($n(q))continue;const Q=B[q],te=D[q];Q!==te&&q!=="value"&&s(E,q,te,Q,oe,K)}"value"in B&&s(E,"value",D.value,B.value,oe)}},fe=(E,D,B,K,oe,q,Q,te,ie)=>{const ue=D.el=E?E.el:a(""),Ee=D.anchor=E?E.anchor:a("");let{patchFlag:be,dynamicChildren:Pe,slotScopeIds:Ae}=D;Ae&&(te=te?te.concat(Ae):Ae),E==null?(i(ue,B,K),i(Ee,B,K),W(D.children||[],B,Ee,oe,q,Q,te,ie)):be>0&&be&64&&Pe&&E.dynamicChildren&&E.dynamicChildren.length===Pe.length?(ae(E.dynamicChildren,Pe,B,oe,q,Q,te),(D.key!=null||oe&&D===oe.subTree)&&gs(E,D,!0)):H(E,D,B,Ee,oe,q,Q,te,ie)},re=(E,D,B,K,oe,q,Q,te,ie)=>{D.slotScopeIds=te,E==null?D.shapeFlag&512?oe.ctx.activate(D,B,K,Q,ie):Z(D,B,K,oe,q,Q,ie):le(E,D,ie)},Z=(E,D,B,K,oe,q,Q)=>{const te=E.component=Af(E,K,oe);if(or(E)&&(te.ctx.renderer=R),If(te,!1,Q),te.asyncDep){if(oe&&oe.registerDep(te,$,Q),!E.el){const ie=te.subTree=nt(bt);P(null,ie,D,B),E.placeholder=ie.el}}else $(te,E,D,B,oe,q,Q)},le=(E,D,B)=>{const K=D.component=E.component;if(lf(E,D,B))if(K.asyncDep&&!K.asyncResolved){ne(K,D,B);return}else K.next=D,K.update();else D.el=E.el,K.vnode=D},$=(E,D,B,K,oe,q,Q)=>{const te=()=>{if(E.isMounted){let{next:be,bu:Pe,u:Ae,parent:Me,vnode:Ne}=E;{const k=Ca(E);if(k){be&&(be.el=Ne.el,ne(E,be,Q)),k.asyncDep.then(()=>{E.isUnmounted||te()});return}}let Fe=be,We;mn(E,!1),be?(be.el=Ne.el,ne(E,be,Q)):be=Ne,Pe&&Di(Pe),(We=be.props&&be.props.onVnodeBeforeUpdate)&&Mt(We,Me,be,Ne),mn(E,!0);const Ye=zs(E),at=E.subTree;E.subTree=Ye,x(at,Ye,m(at.el),we(at),E,oe,q),be.el=Ye.el,Fe===null&&uf(E,Ye.el),Ae&&vt(Ae,oe),(We=be.props&&be.props.onVnodeUpdated)&&vt(()=>Mt(We,Me,be,Ne),oe)}else{let be;const{el:Pe,props:Ae}=D,{bm:Me,m:Ne,parent:Fe,root:We,type:Ye}=E,at=Kn(D);mn(E,!1),Me&&Di(Me),!at&&(be=Ae&&Ae.onVnodeBeforeMount)&&Mt(be,Fe,D),mn(E,!0);{We.ce&&We.ce._def.shadowRoot!==!1&&We.ce._injectChildStyle(Ye);const k=E.subTree=zs(E);x(null,k,B,K,E,oe,q),D.el=k.el}if(Ne&&vt(Ne,oe),!at&&(be=Ae&&Ae.onVnodeMounted)){const k=D;vt(()=>Mt(be,Fe,k),oe)}(D.shapeFlag&256||Fe&&Kn(Fe.vnode)&&Fe.vnode.shapeFlag&256)&&E.a&&vt(E.a,oe),E.isMounted=!0,D=B=K=null}};E.scope.on();const ie=E.effect=new Mo(te);E.scope.off();const ue=E.update=ie.run.bind(ie),Ee=E.job=ie.runIfDirty.bind(ie);Ee.i=E,Ee.id=E.uid,ie.scheduler=()=>ds(Ee),mn(E,!0),ue()},ne=(E,D,B)=>{D.component=E;const K=E.vnode.props;E.vnode=D,E.next=null,df(E,D.props,K,B),gf(E,D.children,B),Xt(),Ps(E),Jt()},H=(E,D,B,K,oe,q,Q,te,ie=!1)=>{const ue=E&&E.children,Ee=E?E.shapeFlag:0,be=D.children,{patchFlag:Pe,shapeFlag:Ae}=D;if(Pe>0){if(Pe&128){I(ue,be,B,K,oe,q,Q,te,ie);return}else if(Pe&256){A(ue,be,B,K,oe,q,Q,te,ie);return}}Ae&8?(Ee&16&&ye(ue,oe,q),be!==ue&&f(B,be)):Ee&16?Ae&16?I(ue,be,B,K,oe,q,Q,te,ie):ye(ue,oe,q,!0):(Ee&8&&f(B,""),Ae&16&&W(be,B,K,oe,q,Q,te,ie))},A=(E,D,B,K,oe,q,Q,te,ie)=>{E=E||An,D=D||An;const ue=E.length,Ee=D.length,be=Math.min(ue,Ee);let Pe;for(Pe=0;Pe<be;Pe++){const Ae=D[Pe]=ie?on(D[Pe]):Bt(D[Pe]);x(E[Pe],Ae,B,null,oe,q,Q,te,ie)}ue>Ee?ye(E,oe,q,!0,!1,be):W(D,B,K,oe,q,Q,te,ie,be)},I=(E,D,B,K,oe,q,Q,te,ie)=>{let ue=0;const Ee=D.length;let be=E.length-1,Pe=Ee-1;for(;ue<=be&&ue<=Pe;){const Ae=E[ue],Me=D[ue]=ie?on(D[ue]):Bt(D[ue]);if(yn(Ae,Me))x(Ae,Me,B,null,oe,q,Q,te,ie);else break;ue++}for(;ue<=be&&ue<=Pe;){const Ae=E[be],Me=D[Pe]=ie?on(D[Pe]):Bt(D[Pe]);if(yn(Ae,Me))x(Ae,Me,B,null,oe,q,Q,te,ie);else break;be--,Pe--}if(ue>be){if(ue<=Pe){const Ae=Pe+1,Me=Ae<Ee?D[Ae].el:K;for(;ue<=Pe;)x(null,D[ue]=ie?on(D[ue]):Bt(D[ue]),B,Me,oe,q,Q,te,ie),ue++}}else if(ue>Pe)for(;ue<=be;)z(E[ue],oe,q,!0),ue++;else{const Ae=ue,Me=ue,Ne=new Map;for(ue=Me;ue<=Pe;ue++){const xe=D[ue]=ie?on(D[ue]):Bt(D[ue]);xe.key!=null&&Ne.set(xe.key,ue)}let Fe,We=0;const Ye=Pe-Me+1;let at=!1,k=0;const ge=new Array(Ye);for(ue=0;ue<Ye;ue++)ge[ue]=0;for(ue=Ae;ue<=be;ue++){const xe=E[ue];if(We>=Ye){z(xe,oe,q,!0);continue}let U;if(xe.key!=null)U=Ne.get(xe.key);else for(Fe=Me;Fe<=Pe;Fe++)if(ge[Fe-Me]===0&&yn(xe,D[Fe])){U=Fe;break}U===void 0?z(xe,oe,q,!0):(ge[U-Me]=ue+1,U>=k?k=U:at=!0,x(xe,D[U],B,null,oe,q,Q,te,ie),We++)}const _e=at?bf(ge):An;for(Fe=_e.length-1,ue=Ye-1;ue>=0;ue--){const xe=Me+ue,U=D[xe],se=D[xe+1],v=xe+1<Ee?se.el||Ta(se):K;ge[ue]===0?x(null,U,B,v,oe,q,Q,te,ie):at&&(Fe<0||ue!==_e[Fe]?F(U,B,v,2):Fe--)}}},F=(E,D,B,K,oe=null)=>{const{el:q,type:Q,transition:te,children:ie,shapeFlag:ue}=E;if(ue&6){F(E.component.subTree,D,B,K);return}if(ue&128){E.suspense.move(D,B,K);return}if(ue&64){Q.move(E,D,B,R);return}if(Q===ht){i(q,D,B);for(let be=0;be<ie.length;be++)F(ie[be],D,B,K);i(E.anchor,D,B);return}if(Q===Li){b(E,D,B);return}if(K!==2&&ue&1&&te)if(K===0)te.beforeEnter(q),i(q,D,B),vt(()=>te.enter(q),oe);else{const{leave:be,delayLeave:Pe,afterLeave:Ae}=te,Me=()=>{E.ctx.isUnmounted?r(q):i(q,D,B)},Ne=()=>{q._isLeaving&&q[qt](!0),be(q,()=>{Me(),Ae&&Ae()})};Pe?Pe(q,Me,Ne):Ne()}else i(q,D,B)},z=(E,D,B,K=!1,oe=!1)=>{const{type:q,props:Q,ref:te,children:ie,dynamicChildren:ue,shapeFlag:Ee,patchFlag:be,dirs:Pe,cacheIndex:Ae}=E;if(be===-2&&(oe=!1),te!=null&&(Xt(),Zn(te,null,B,E,!0),Jt()),Ae!=null&&(D.renderCache[Ae]=void 0),Ee&256){D.ctx.deactivate(E);return}const Me=Ee&1&&Pe,Ne=!Kn(E);let Fe;if(Ne&&(Fe=Q&&Q.onVnodeBeforeUnmount)&&Mt(Fe,D,E),Ee&6)ve(E.component,B,K);else{if(Ee&128){E.suspense.unmount(B,K);return}Me&&gn(E,null,D,"beforeUnmount"),Ee&64?E.type.remove(E,D,B,R,K):ue&&!ue.hasOnce&&(q!==ht||be>0&&be&64)?ye(ue,D,B,!1,!0):(q===ht&&be&384||!oe&&Ee&16)&&ye(ie,D,B),K&&Y(E)}(Ne&&(Fe=Q&&Q.onVnodeUnmounted)||Me)&&vt(()=>{Fe&&Mt(Fe,D,E),Me&&gn(E,null,D,"unmounted")},B)},Y=E=>{const{type:D,el:B,anchor:K,transition:oe}=E;if(D===ht){ce(B,K);return}if(D===Li){w(E);return}const q=()=>{r(B),oe&&!oe.persisted&&oe.afterLeave&&oe.afterLeave()};if(E.shapeFlag&1&&oe&&!oe.persisted){const{leave:Q,delayLeave:te}=oe,ie=()=>Q(B,q);te?te(E.el,q,ie):ie()}else q()},ce=(E,D)=>{let B;for(;E!==D;)B=h(E),r(E),E=B;r(D)},ve=(E,D,B)=>{const{bum:K,scope:oe,job:q,subTree:Q,um:te,m:ie,a:ue}=E;$s(ie),$s(ue),K&&Di(K),oe.stop(),q&&(q.flags|=8,z(Q,E,D,B)),te&&vt(te,D),vt(()=>{E.isUnmounted=!0},D)},ye=(E,D,B,K=!1,oe=!1,q=0)=>{for(let Q=q;Q<E.length;Q++)z(E[Q],D,B,K,oe)},we=E=>{if(E.shapeFlag&6)return we(E.component.subTree);if(E.shapeFlag&128)return E.suspense.next();const D=h(E.anchor||E.el),B=D&&D[na];return B?h(B):D};let ke=!1;const T=(E,D,B)=>{let K;E==null?D._vnode&&(z(D._vnode,null,null,!0),K=D._vnode.component):x(D._vnode||null,E,D,null,null,null,B),D._vnode=E,ke||(ke=!0,Ps(K),Xo(),ke=!1)},R={p:x,um:z,m:F,r:Y,mt:Z,mc:W,pc:H,pbc:ae,n:we,o:e};return{render:T,hydrate:void 0,createApp:tf(T)}}function xr({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function mn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function _f(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function gs(e,t,n=!1){const i=e.children,r=t.children;if(Be(i)&&Be(r))for(let s=0;s<i.length;s++){const o=i[s];let a=r[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[s]=on(r[s]),a.el=o.el),!n&&a.patchFlag!==-2&&gs(o,a)),a.type===ur&&(a.patchFlag!==-1?a.el=o.el:a.__elIndex=s+(e.type===ht?1:0)),a.type===bt&&!a.el&&(a.el=o.el)}}function bf(e){const t=e.slice(),n=[0];let i,r,s,o,a;const l=e.length;for(i=0;i<l;i++){const u=e[i];if(u!==0){if(r=n[n.length-1],e[r]<u){t[i]=r,n.push(i);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,e[n[a]]<u?s=a+1:o=a;u<e[n[s]]&&(s>0&&(t[i]=n[s-1]),n[s]=i)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=t[o];return n}function Ca(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Ca(t)}function $s(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function Ta(e){if(e.placeholder)return e.placeholder;const t=e.component;return t?Ta(t.subTree):null}const Aa=e=>e.__isSuspense;function yf(e,t){t&&t.pendingBranch?Be(e)?t.effects.push(...e):t.effects.push(e):Au(e)}const ht=Symbol.for("v-fgt"),ur=Symbol.for("v-txt"),bt=Symbol.for("v-cmt"),Li=Symbol.for("v-stc"),Xn=[];let kt=null;function Ge(e=!1){Xn.push(kt=e?null:[])}function wf(){Xn.pop(),kt=Xn[Xn.length-1]||null}let si=1;function qi(e,t=!1){si+=e,e<0&&kt&&t&&(kt.hasOnce=!0)}function Ia(e){return e.dynamicChildren=si>0?kt||An:null,wf(),si>0&&kt&&kt.push(e),e}function Ke(e,t,n,i,r,s){return Ia(p(e,t,n,i,r,s,!0))}function fr(e,t,n,i,r){return Ia(nt(e,t,n,i,r,!0))}function Wi(e){return e?e.__v_isVNode===!0:!1}function yn(e,t){return e.type===t.type&&e.key===t.key}const Da=({key:e})=>e??null,Mi=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?lt(e)||Oe(e)||je(e)?{i:At,r:e,k:t,f:!!n}:e:null);function p(e,t=null,n=null,i=0,r=null,s=e===ht?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Da(t),ref:t&&Mi(t),scopeId:Qo,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:At};return a?(ms(l,n),s&128&&e.normalize(l)):n&&(l.shapeFlag|=lt(n)?8:16),si>0&&!o&&kt&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&kt.push(l),l}const nt=xf;function xf(e,t=null,n=null,i=0,r=null,s=!1){if((!e||e===Gu)&&(e=bt),Wi(e)){const a=cn(e,t,!0);return n&&ms(a,n),si>0&&!s&&kt&&(a.shapeFlag&6?kt[kt.indexOf(e)]=a:kt.push(a)),a.patchFlag=-2,a}if(Lf(e)&&(e=e.__vccOpts),t){t=Sf(t);let{class:a,style:l}=t;a&&!lt(a)&&(t.class=fn(a)),Je(l)&&(us(l)&&!Be(l)&&(l=pt({},l)),t.style=tr(l))}const o=lt(e)?1:Aa(e)?128:ia(e)?64:Je(e)?4:je(e)?2:0;return p(e,t,n,i,r,o,s,!0)}function Sf(e){return e?us(e)||ya(e)?pt({},e):e:null}function cn(e,t,n=!1,i=!1){const{props:r,ref:s,patchFlag:o,children:a,transition:l}=e,u=t?kf(r||{},t):r,f={__v_isVNode:!0,__v_skip:!0,type:e.type,props:u,key:u&&Da(u),ref:t&&t.ref?n&&s?Be(s)?s.concat(Mi(t)):[s,Mi(t)]:Mi(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ht?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&cn(e.ssContent),ssFallback:e.ssFallback&&cn(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&i&&ri(f,l.clone(f)),f}function qe(e=" ",t=0){return nt(ur,null,e,t)}function Ef(e,t){const n=nt(Li,null,e);return n.staticCount=t,n}function Sn(e="",t=!1){return t?(Ge(),fr(bt,null,e)):nt(bt,null,e)}function Bt(e){return e==null||typeof e=="boolean"?nt(bt):Be(e)?nt(ht,null,e.slice()):Wi(e)?on(e):nt(ur,null,String(e))}function on(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:cn(e)}function ms(e,t){let n=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(Be(t))n=16;else if(typeof t=="object")if(i&65){const r=t.default;r&&(r._c&&(r._d=!1),ms(e,r()),r._c&&(r._d=!0));return}else{n=32;const r=t._;!r&&!ya(t)?t._ctx=At:r===3&&At&&(At.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else je(t)?(t={default:t,_ctx:At},n=32):(t=String(t),i&64?(n=16,t=[qe(t)]):n=8);e.children=t,e.shapeFlag|=n}function kf(...e){const t={};for(let n=0;n<e.length;n++){const i=e[n];for(const r in i)if(r==="class")t.class!==i.class&&(t.class=fn([t.class,i.class]));else if(r==="style")t.style=tr([t.style,i.style]);else if(Xi(r)){const s=t[r],o=i[r];o&&s!==o&&!(Be(s)&&s.includes(o))&&(t[r]=s?[].concat(s,o):o)}else r!==""&&(t[r]=i[r])}return t}function Mt(e,t,n,i=null){Lt(e,t,7,[n,i])}const Cf=ma();let Tf=0;function Af(e,t,n){const i=e.type,r=(t?t.appContext:e.appContext)||Cf,s={uid:Tf++,vnode:e,type:i,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Xl(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:xa(i,r),emitsOptions:va(i,r),emit:null,emitted:null,propsDefaults:et,inheritAttrs:i.inheritAttrs,ctx:et,data:et,props:et,attrs:et,slots:et,refs:et,setupState:et,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=rf.bind(null,s),e.ce&&e.ce(s),s}let yt=null;const Pa=()=>yt||At;let Gi,jr;{const e=er(),t=(n,i)=>{let r;return(r=e[n])||(r=e[n]=[]),r.push(i),s=>{r.length>1?r.forEach(o=>o(s)):r[0](s)}};Gi=t("__VUE_INSTANCE_SETTERS__",n=>yt=n),jr=t("__VUE_SSR_SETTERS__",n=>oi=n)}const gi=e=>{const t=yt;return Gi(e),e.scope.on(),()=>{e.scope.off(),Gi(t)}},qs=()=>{yt&&yt.scope.off(),Gi(null)};function Ra(e){return e.vnode.shapeFlag&4}let oi=!1;function If(e,t=!1,n=!1){t&&jr(t);const{props:i,children:r}=e.vnode,s=Ra(e);ff(e,i,s,t),pf(e,r,n||t);const o=s?Df(e,t):void 0;return t&&jr(!1),o}function Df(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Zu);const{setup:i}=n;if(i){Xt();const r=e.setupContext=i.length>1?Rf(e):null,s=gi(e),o=ci(i,e,0,[e.props,r]),a=Co(o);if(Jt(),s(),(a||e.sp)&&!Kn(e)&&da(e),a){if(o.then(qs,qs),t)return o.then(l=>{Ws(e,l)}).catch(l=>{rr(l,e,0)});e.asyncDep=o}else Ws(e,o)}else La(e)}function Ws(e,t,n){je(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Je(t)&&(e.setupState=Zo(t)),La(e)}function La(e,t,n){const i=e.type;e.render||(e.render=i.render||Nt);{const r=gi(e);Xt();try{Ku(e)}finally{Jt(),r()}}}const Pf={get(e,t){return gt(e,"get",""),e[t]}};function Rf(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Pf),slots:e.slots,emit:e.emit,expose:t}}function dr(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Zo(_u(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Yn)return Yn[n](e)},has(t,n){return n in t||n in Yn}})):e.proxy}function Lf(e){return je(e)&&"__vccOpts"in e}const Ie=(e,t)=>Su(e,t,oi);function Mf(e,t,n){try{qi(-1);const i=arguments.length;return i===2?Je(t)&&!Be(t)?Wi(t)?nt(e,null,[t]):nt(e,t):nt(e,null,t):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&Wi(n)&&(n=[n]),nt(e,t,n))}finally{qi(1)}}const Of="3.5.27";let zr;const Gs=typeof window<"u"&&window.trustedTypes;if(Gs)try{zr=Gs.createPolicy("vue",{createHTML:e=>e})}catch{}const Ma=zr?e=>zr.createHTML(e):e=>e,Uf="http://www.w3.org/2000/svg",Bf="http://www.w3.org/1998/Math/MathML",$t=typeof document<"u"?document:null,Zs=$t&&$t.createElement("template"),Nf={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,i)=>{const r=t==="svg"?$t.createElementNS(Uf,e):t==="mathml"?$t.createElementNS(Bf,e):n?$t.createElement(e,{is:n}):$t.createElement(e);return e==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:e=>$t.createTextNode(e),createComment:e=>$t.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>$t.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,i,r,s){const o=n?n.previousSibling:t.lastChild;if(r&&(r===s||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),n),!(r===s||!(r=r.nextSibling)););else{Zs.innerHTML=Ma(i==="svg"?`<svg>${e}</svg>`:i==="mathml"?`<math>${e}</math>`:e);const a=Zs.content;if(i==="svg"||i==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},nn="transition",Nn="animation",ai=Symbol("_vtc"),Oa={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Ff=pt({},oa,Oa),jf=e=>(e.displayName="Transition",e.props=Ff,e),vs=jf((e,{slots:t})=>Mf(Uu,zf(e),t)),vn=(e,t=[])=>{Be(e)?e.forEach(n=>n(...t)):e&&e(...t)},Ks=e=>e?Be(e)?e.some(t=>t.length>1):e.length>1:!1;function zf(e){const t={};for(const fe in e)fe in Oa||(t[fe]=e[fe]);if(e.css===!1)return t;const{name:n="v",type:i,duration:r,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:u=o,appearToClass:f=a,leaveFromClass:m=`${n}-leave-from`,leaveActiveClass:h=`${n}-leave-active`,leaveToClass:c=`${n}-leave-to`}=e,g=Hf(r),x=g&&g[0],_=g&&g[1],{onBeforeEnter:P,onEnter:S,onEnterCancelled:b,onLeave:w,onLeaveCancelled:L,onBeforeAppear:j=P,onAppear:M=S,onAppearCancelled:W=b}=t,V=(fe,re,Z,le)=>{fe._enterCancelled=le,_n(fe,re?f:a),_n(fe,re?u:o),Z&&Z()},ae=(fe,re)=>{fe._isLeaving=!1,_n(fe,m),_n(fe,c),_n(fe,h),re&&re()},Se=fe=>(re,Z)=>{const le=fe?M:S,$=()=>V(re,fe,Z);vn(le,[re,$]),Ys(()=>{_n(re,fe?l:s),Vt(re,fe?f:a),Ks(le)||Xs(re,i,x,$)})};return pt(t,{onBeforeEnter(fe){vn(P,[fe]),Vt(fe,s),Vt(fe,o)},onBeforeAppear(fe){vn(j,[fe]),Vt(fe,l),Vt(fe,u)},onEnter:Se(!1),onAppear:Se(!0),onLeave(fe,re){fe._isLeaving=!0;const Z=()=>ae(fe,re);Vt(fe,m),fe._enterCancelled?(Vt(fe,h),eo(fe)):(eo(fe),Vt(fe,h)),Ys(()=>{fe._isLeaving&&(_n(fe,m),Vt(fe,c),Ks(w)||Xs(fe,i,_,Z))}),vn(w,[fe,Z])},onEnterCancelled(fe){V(fe,!1,void 0,!0),vn(b,[fe])},onAppearCancelled(fe){V(fe,!0,void 0,!0),vn(W,[fe])},onLeaveCancelled(fe){ae(fe),vn(L,[fe])}})}function Hf(e){if(e==null)return null;if(Je(e))return[Sr(e.enter),Sr(e.leave)];{const t=Sr(e);return[t,t]}}function Sr(e){return Vl(e)}function Vt(e,t){t.split(/\s+/).forEach(n=>n&&e.classList.add(n)),(e[ai]||(e[ai]=new Set)).add(t)}function _n(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.remove(i));const n=e[ai];n&&(n.delete(t),n.size||(e[ai]=void 0))}function Ys(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let Vf=0;function Xs(e,t,n,i){const r=e._endId=++Vf,s=()=>{r===e._endId&&i()};if(n!=null)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=$f(e,t);if(!o)return i();const u=o+"end";let f=0;const m=()=>{e.removeEventListener(u,h),s()},h=c=>{c.target===e&&++f>=l&&m()};setTimeout(()=>{f<l&&m()},a+1),e.addEventListener(u,h)}function $f(e,t){const n=window.getComputedStyle(e),i=g=>(n[g]||"").split(", "),r=i(`${nn}Delay`),s=i(`${nn}Duration`),o=Js(r,s),a=i(`${Nn}Delay`),l=i(`${Nn}Duration`),u=Js(a,l);let f=null,m=0,h=0;t===nn?o>0&&(f=nn,m=o,h=s.length):t===Nn?u>0&&(f=Nn,m=u,h=l.length):(m=Math.max(o,u),f=m>0?o>u?nn:Nn:null,h=f?f===nn?s.length:l.length:0);const c=f===nn&&/\b(?:transform|all)(?:,|$)/.test(i(`${nn}Property`).toString());return{type:f,timeout:m,propCount:h,hasTransform:c}}function Js(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((n,i)=>Qs(n)+Qs(e[i])))}function Qs(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function eo(e){return(e?e.ownerDocument:document).body.offsetHeight}function qf(e,t,n){const i=e[ai];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Zi=Symbol("_vod"),Ua=Symbol("_vsh"),Oi={name:"show",beforeMount(e,{value:t},{transition:n}){e[Zi]=e.style.display==="none"?"":e.style.display,n&&t?n.beforeEnter(e):Fn(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:i}){!t!=!n&&(i?t?(i.beforeEnter(e),Fn(e,!0),i.enter(e)):i.leave(e,()=>{Fn(e,!1)}):Fn(e,t))},beforeUnmount(e,{value:t}){Fn(e,t)}};function Fn(e,t){e.style.display=t?e[Zi]:"none",e[Ua]=!t}const Wf=Symbol(""),Gf=/(?:^|;)\s*display\s*:/;function Zf(e,t,n){const i=e.style,r=lt(n);let s=!1;if(n&&!r){if(t)if(lt(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Ui(i,a,"")}else for(const o in t)n[o]==null&&Ui(i,o,"");for(const o in n)o==="display"&&(s=!0),Ui(i,o,n[o])}else if(r){if(t!==n){const o=i[Wf];o&&(n+=";"+o),i.cssText=n,s=Gf.test(n)}}else t&&e.removeAttribute("style");Zi in e&&(e[Zi]=s?i.display:"",e[Ua]&&(i.display="none"))}const to=/\s*!important$/;function Ui(e,t,n){if(Be(n))n.forEach(i=>Ui(e,t,i));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const i=Kf(e,t);to.test(n)?e.setProperty(En(i),n.replace(to,""),"important"):e[i]=n}}const no=["Webkit","Moz","ms"],Er={};function Kf(e,t){const n=Er[t];if(n)return n;let i=dn(t);if(i!=="filter"&&i in e)return Er[t]=i;i=Io(i);for(let r=0;r<no.length;r++){const s=no[r]+i;if(s in e)return Er[t]=s}return t}const io="http://www.w3.org/1999/xlink";function ro(e,t,n,i,r,s=Kl(t)){i&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(io,t.slice(6,t.length)):e.setAttributeNS(io,t,n):n==null||s&&!Po(n)?e.removeAttribute(t):e.setAttribute(t,s?"":Ft(n)?String(n):n)}function so(e,t,n,i,r){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Ma(n):n);return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?e.getAttribute("value")||"":e.value,l=n==null?e.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in e))&&(e.value=l),n==null&&e.removeAttribute(t),e._value=n;return}let o=!1;if(n===""||n==null){const a=typeof e[t];a==="boolean"?n=Po(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(r||t)}function an(e,t,n,i){e.addEventListener(t,n,i)}function Yf(e,t,n,i){e.removeEventListener(t,n,i)}const oo=Symbol("_vei");function Xf(e,t,n,i,r=null){const s=e[oo]||(e[oo]={}),o=s[t];if(i&&o)o.value=i;else{const[a,l]=Jf(t);if(i){const u=s[t]=td(i,r);an(e,a,u,l)}else o&&(Yf(e,a,o,l),s[t]=void 0)}}const ao=/(?:Once|Passive|Capture)$/;function Jf(e){let t;if(ao.test(e)){t={};let i;for(;i=e.match(ao);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):En(e.slice(2)),t]}let kr=0;const Qf=Promise.resolve(),ed=()=>kr||(Qf.then(()=>kr=0),kr=Date.now());function td(e,t){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;Lt(nd(i,n.value),t,5,[i])};return n.value=e,n.attached=ed(),n}function nd(e,t){if(Be(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(i=>r=>!r._stopped&&i&&i(r))}else return t}const lo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,id=(e,t,n,i,r,s)=>{const o=r==="svg";t==="class"?qf(e,i,o):t==="style"?Zf(e,n,i):Xi(t)?Qr(t)||Xf(e,t,n,i,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):rd(e,t,i,o))?(so(e,t,i),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&ro(e,t,i,o,s,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!lt(i))?so(e,dn(t),i,s,t):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),ro(e,t,i,o))};function rd(e,t,n,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in e&&lo(t)&&je(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=e.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return lo(t)&&lt(n)?!1:t in e}const Ln=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Be(t)?n=>Di(t,n):t};function sd(e){e.target.composing=!0}function uo(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Kt=Symbol("_assign");function fo(e,t,n){return t&&(e=e.trim()),n&&(e=Qi(e)),e}const $e={created(e,{modifiers:{lazy:t,trim:n,number:i}},r){e[Kt]=Ln(r);const s=i||r.props&&r.props.type==="number";an(e,t?"change":"input",o=>{o.target.composing||e[Kt](fo(e.value,n,s))}),(n||s)&&an(e,"change",()=>{e.value=fo(e.value,n,s)}),t||(an(e,"compositionstart",sd),an(e,"compositionend",uo),an(e,"change",uo))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:i,trim:r,number:s}},o){if(e[Kt]=Ln(o),e.composing)return;const a=(s||e.type==="number")&&!/^0\d/.test(e.value)?Qi(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(i&&t===n||r&&e.value.trim()===l)||(e.value=l))}},Le={deep:!0,created(e,t,n){e[Kt]=Ln(n),an(e,"change",()=>{const i=e._modelValue,r=li(e),s=e.checked,o=e[Kt];if(Be(i)){const a=ns(i,r),l=a!==-1;if(s&&!l)o(i.concat(r));else if(!s&&l){const u=[...i];u.splice(a,1),o(u)}}else if(On(i)){const a=new Set(i);s?a.add(r):a.delete(r),o(a)}else o(Ba(e,s))})},mounted:co,beforeUpdate(e,t,n){e[Kt]=Ln(n),co(e,t,n)}};function co(e,{value:t,oldValue:n},i){e._modelValue=t;let r;if(Be(t))r=ns(t,i.props.value)>-1;else if(On(t))r=t.has(i.props.value);else{if(t===n)return;r=di(t,Ba(e,!0))}e.checked!==r&&(e.checked=r)}const Tt={deep:!0,created(e,{value:t,modifiers:{number:n}},i){const r=On(t);an(e,"change",()=>{const s=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>n?Qi(li(o)):li(o));e[Kt](e.multiple?r?new Set(s):s:s[0]),e._assigning=!0,fs(()=>{e._assigning=!1})}),e[Kt]=Ln(i)},mounted(e,{value:t}){ho(e,t)},beforeUpdate(e,t,n){e[Kt]=Ln(n)},updated(e,{value:t}){e._assigning||ho(e,t)}};function ho(e,t){const n=e.multiple,i=Be(t);if(!(n&&!i&&!On(t))){for(let r=0,s=e.options.length;r<s;r++){const o=e.options[r],a=li(o);if(n)if(i){const l=typeof a;l==="string"||l==="number"?o.selected=t.some(u=>String(u)===String(a)):o.selected=ns(t,a)>-1}else o.selected=t.has(a);else if(di(li(o),t)){e.selectedIndex!==r&&(e.selectedIndex=r);return}}!n&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function li(e){return"_value"in e?e._value:e.value}function Ba(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const od=["ctrl","shift","alt","meta"],ad={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>od.some(n=>e[`${n}Key`]&&!t.includes(n))},Cr=(e,t)=>{const n=e._withMods||(e._withMods={}),i=t.join(".");return n[i]||(n[i]=((r,...s)=>{for(let o=0;o<t.length;o++){const a=ad[t[o]];if(a&&a(r,t))return}return e(r,...s)}))},ld=pt({patchProp:id},Nf);let po;function ud(){return po||(po=mf(ld))}const fd=((...e)=>{const t=ud().createApp(...e),{mount:n}=t;return t.mount=i=>{const r=cd(i);if(!r)return;const s=t._component;!je(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=n(r,!1,dd(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t});function dd(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function cd(e){return lt(e)?document.querySelector(e):e}var hd={},pd=Object.create,Na=Object.defineProperty,gd=Object.getOwnPropertyDescriptor,Fa=Object.getOwnPropertyNames,md=Object.getPrototypeOf,vd=Object.prototype.hasOwnProperty,Et=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,n)=>(typeof require<"u"?require:t)[n]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')}),Te=(e,t)=>function(){return t||(0,e[Fa(e)[0]])((t={exports:{}}).exports,t),t.exports},_d=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Fa(t))!vd.call(e,r)&&r!==n&&Na(e,r,{get:()=>t[r],enumerable:!(i=gd(t,r))||i.enumerable});return e},_s=(e,t,n)=>(n=e!=null?pd(md(e)):{},_d(!e||!e.__esModule?Na(n,"default",{value:e,enumerable:!0}):n,e)),cr=Te({"node_modules/process-nextick-args/index.js"(e,t){typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?t.exports={nextTick:n}:t.exports=process;function n(i,r,s,o){if(typeof i!="function")throw new TypeError('"callback" argument must be a function');var a=arguments.length,l,u;switch(a){case 0:case 1:return process.nextTick(i);case 2:return process.nextTick(function(){i.call(null,r)});case 3:return process.nextTick(function(){i.call(null,r,s)});case 4:return process.nextTick(function(){i.call(null,r,s,o)});default:for(l=new Array(a-1),u=0;u<l.length;)l[u++]=arguments[u];return process.nextTick(function(){i.apply(null,l)})}}}}),bd=Te({"node_modules/isarray/index.js"(e,t){var n={}.toString;t.exports=Array.isArray||function(i){return n.call(i)=="[object Array]"}}}),ja=Te({"node_modules/readable-stream/lib/internal/streams/stream.js"(e,t){t.exports=Et("stream")}}),hr=Te({"node_modules/safe-buffer/index.js"(e,t){var n=Et("buffer"),i=n.Buffer;function r(o,a){for(var l in o)a[l]=o[l]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(r(n,e),e.Buffer=s);function s(o,a,l){return i(o,a,l)}r(i,s),s.from=function(o,a,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return i(o,a,l)},s.alloc=function(o,a,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var u=i(o);return a!==void 0?typeof l=="string"?u.fill(a,l):u.fill(a):u.fill(0),u},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return i(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}}}),mi=Te({"node_modules/core-util-is/lib/util.js"(e){function t(_){return Array.isArray?Array.isArray(_):x(_)==="[object Array]"}e.isArray=t;function n(_){return typeof _=="boolean"}e.isBoolean=n;function i(_){return _===null}e.isNull=i;function r(_){return _==null}e.isNullOrUndefined=r;function s(_){return typeof _=="number"}e.isNumber=s;function o(_){return typeof _=="string"}e.isString=o;function a(_){return typeof _=="symbol"}e.isSymbol=a;function l(_){return _===void 0}e.isUndefined=l;function u(_){return x(_)==="[object RegExp]"}e.isRegExp=u;function f(_){return typeof _=="object"&&_!==null}e.isObject=f;function m(_){return x(_)==="[object Date]"}e.isDate=m;function h(_){return x(_)==="[object Error]"||_ instanceof Error}e.isError=h;function c(_){return typeof _=="function"}e.isFunction=c;function g(_){return _===null||typeof _=="boolean"||typeof _=="number"||typeof _=="string"||typeof _=="symbol"||typeof _>"u"}e.isPrimitive=g,e.isBuffer=Et("buffer").Buffer.isBuffer;function x(_){return Object.prototype.toString.call(_)}}}),yd=Te({"node_modules/inherits/inherits_browser.js"(e,t){typeof Object.create=="function"?t.exports=function(i,r){r&&(i.super_=r,i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(i,r){if(r){i.super_=r;var s=function(){};s.prototype=r.prototype,i.prototype=new s,i.prototype.constructor=i}}}}),vi=Te({"node_modules/inherits/inherits.js"(e,t){try{if(n=Et("util"),typeof n.inherits!="function")throw"";t.exports=n.inherits}catch{t.exports=yd()}var n}}),wd=Te({"node_modules/readable-stream/lib/internal/streams/BufferList.js"(e,t){function n(o,a){if(!(o instanceof a))throw new TypeError("Cannot call a class as a function")}var i=hr().Buffer,r=Et("util");function s(o,a,l){o.copy(a,l)}t.exports=(function(){function o(){n(this,o),this.head=null,this.tail=null,this.length=0}return o.prototype.push=function(l){var u={data:l,next:null};this.length>0?this.tail.next=u:this.head=u,this.tail=u,++this.length},o.prototype.unshift=function(l){var u={data:l,next:this.head};this.length===0&&(this.tail=u),this.head=u,++this.length},o.prototype.shift=function(){if(this.length!==0){var l=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,l}},o.prototype.clear=function(){this.head=this.tail=null,this.length=0},o.prototype.join=function(l){if(this.length===0)return"";for(var u=this.head,f=""+u.data;u=u.next;)f+=l+u.data;return f},o.prototype.concat=function(l){if(this.length===0)return i.alloc(0);for(var u=i.allocUnsafe(l>>>0),f=this.head,m=0;f;)s(f.data,u,m),m+=f.data.length,f=f.next;return u},o})(),r&&r.inspect&&r.inspect.custom&&(t.exports.prototype[r.inspect.custom]=function(){var o=r.inspect({length:this.length});return this.constructor.name+" "+o})}}),za=Te({"node_modules/readable-stream/lib/internal/streams/destroy.js"(e,t){var n=cr();function i(o,a){var l=this,u=this._readableState&&this._readableState.destroyed,f=this._writableState&&this._writableState.destroyed;return u||f?(a?a(o):o&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,n.nextTick(s,this,o)):n.nextTick(s,this,o)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(o||null,function(m){!a&&m?l._writableState?l._writableState.errorEmitted||(l._writableState.errorEmitted=!0,n.nextTick(s,l,m)):n.nextTick(s,l,m):a&&a(m)}),this)}function r(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function s(o,a){o.emit("error",a)}t.exports={destroy:i,undestroy:r}}}),xd=Te({"node_modules/util-deprecate/node.js"(e,t){t.exports=Et("util").deprecate}}),Ha=Te({"node_modules/readable-stream/lib/_stream_writable.js"(e,t){var n=cr();t.exports=P;function i(A){var I=this;this.next=null,this.entry=null,this.finish=function(){H(I,A)}}var r=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:n.nextTick,s;P.WritableState=x;var o=Object.create(mi());o.inherits=vi();var a={deprecate:xd()},l=ja(),u=hr().Buffer,f=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function m(A){return u.from(A)}function h(A){return u.isBuffer(A)||A instanceof f}var c=za();o.inherits(P,l);function g(){}function x(A,I){s=s||Mn(),A=A||{};var F=I instanceof s;this.objectMode=!!A.objectMode,F&&(this.objectMode=this.objectMode||!!A.writableObjectMode);var z=A.highWaterMark,Y=A.writableHighWaterMark,ce=this.objectMode?16:16*1024;z||z===0?this.highWaterMark=z:F&&(Y||Y===0)?this.highWaterMark=Y:this.highWaterMark=ce,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var ve=A.decodeStrings===!1;this.decodeStrings=!ve,this.defaultEncoding=A.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ye){V(I,ye)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}x.prototype.getBuffer=function(){for(var I=this.bufferedRequest,F=[];I;)F.push(I),I=I.next;return F},(function(){try{Object.defineProperty(x.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var _;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(_=Function.prototype[Symbol.hasInstance],Object.defineProperty(P,Symbol.hasInstance,{value:function(A){return _.call(this,A)?!0:this!==P?!1:A&&A._writableState instanceof x}})):_=function(A){return A instanceof this};function P(A){if(s=s||Mn(),!_.call(P,this)&&!(this instanceof s))return new P(A);this._writableState=new x(A,this),this.writable=!0,A&&(typeof A.write=="function"&&(this._write=A.write),typeof A.writev=="function"&&(this._writev=A.writev),typeof A.destroy=="function"&&(this._destroy=A.destroy),typeof A.final=="function"&&(this._final=A.final)),l.call(this)}P.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function S(A,I){var F=new Error("write after end");A.emit("error",F),n.nextTick(I,F)}function b(A,I,F,z){var Y=!0,ce=!1;return F===null?ce=new TypeError("May not write null values to stream"):typeof F!="string"&&F!==void 0&&!I.objectMode&&(ce=new TypeError("Invalid non-string/buffer chunk")),ce&&(A.emit("error",ce),n.nextTick(z,ce),Y=!1),Y}P.prototype.write=function(A,I,F){var z=this._writableState,Y=!1,ce=!z.objectMode&&h(A);return ce&&!u.isBuffer(A)&&(A=m(A)),typeof I=="function"&&(F=I,I=null),ce?I="buffer":I||(I=z.defaultEncoding),typeof F!="function"&&(F=g),z.ended?S(this,F):(ce||b(this,z,A,F))&&(z.pendingcb++,Y=L(this,z,ce,A,I,F)),Y},P.prototype.cork=function(){var A=this._writableState;A.corked++},P.prototype.uncork=function(){var A=this._writableState;A.corked&&(A.corked--,!A.writing&&!A.corked&&!A.bufferProcessing&&A.bufferedRequest&&fe(this,A))},P.prototype.setDefaultEncoding=function(I){if(typeof I=="string"&&(I=I.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((I+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+I);return this._writableState.defaultEncoding=I,this};function w(A,I,F){return!A.objectMode&&A.decodeStrings!==!1&&typeof I=="string"&&(I=u.from(I,F)),I}Object.defineProperty(P.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function L(A,I,F,z,Y,ce){if(!F){var ve=w(I,z,Y);z!==ve&&(F=!0,Y="buffer",z=ve)}var ye=I.objectMode?1:z.length;I.length+=ye;var we=I.length<I.highWaterMark;if(we||(I.needDrain=!0),I.writing||I.corked){var ke=I.lastBufferedRequest;I.lastBufferedRequest={chunk:z,encoding:Y,isBuf:F,callback:ce,next:null},ke?ke.next=I.lastBufferedRequest:I.bufferedRequest=I.lastBufferedRequest,I.bufferedRequestCount+=1}else j(A,I,!1,ye,z,Y,ce);return we}function j(A,I,F,z,Y,ce,ve){I.writelen=z,I.writecb=ve,I.writing=!0,I.sync=!0,F?A._writev(Y,I.onwrite):A._write(Y,ce,I.onwrite),I.sync=!1}function M(A,I,F,z,Y){--I.pendingcb,F?(n.nextTick(Y,z),n.nextTick($,A,I),A._writableState.errorEmitted=!0,A.emit("error",z)):(Y(z),A._writableState.errorEmitted=!0,A.emit("error",z),$(A,I))}function W(A){A.writing=!1,A.writecb=null,A.length-=A.writelen,A.writelen=0}function V(A,I){var F=A._writableState,z=F.sync,Y=F.writecb;if(W(F),I)M(A,F,z,I,Y);else{var ce=re(F);!ce&&!F.corked&&!F.bufferProcessing&&F.bufferedRequest&&fe(A,F),z?r(ae,A,F,ce,Y):ae(A,F,ce,Y)}}function ae(A,I,F,z){F||Se(A,I),I.pendingcb--,z(),$(A,I)}function Se(A,I){I.length===0&&I.needDrain&&(I.needDrain=!1,A.emit("drain"))}function fe(A,I){I.bufferProcessing=!0;var F=I.bufferedRequest;if(A._writev&&F&&F.next){var z=I.bufferedRequestCount,Y=new Array(z),ce=I.corkedRequestsFree;ce.entry=F;for(var ve=0,ye=!0;F;)Y[ve]=F,F.isBuf||(ye=!1),F=F.next,ve+=1;Y.allBuffers=ye,j(A,I,!0,I.length,Y,"",ce.finish),I.pendingcb++,I.lastBufferedRequest=null,ce.next?(I.corkedRequestsFree=ce.next,ce.next=null):I.corkedRequestsFree=new i(I),I.bufferedRequestCount=0}else{for(;F;){var we=F.chunk,ke=F.encoding,T=F.callback,R=I.objectMode?1:we.length;if(j(A,I,!1,R,we,ke,T),F=F.next,I.bufferedRequestCount--,I.writing)break}F===null&&(I.lastBufferedRequest=null)}I.bufferedRequest=F,I.bufferProcessing=!1}P.prototype._write=function(A,I,F){F(new Error("_write() is not implemented"))},P.prototype._writev=null,P.prototype.end=function(A,I,F){var z=this._writableState;typeof A=="function"?(F=A,A=null,I=null):typeof I=="function"&&(F=I,I=null),A!=null&&this.write(A,I),z.corked&&(z.corked=1,this.uncork()),z.ending||ne(this,z,F)};function re(A){return A.ending&&A.length===0&&A.bufferedRequest===null&&!A.finished&&!A.writing}function Z(A,I){A._final(function(F){I.pendingcb--,F&&A.emit("error",F),I.prefinished=!0,A.emit("prefinish"),$(A,I)})}function le(A,I){!I.prefinished&&!I.finalCalled&&(typeof A._final=="function"?(I.pendingcb++,I.finalCalled=!0,n.nextTick(Z,A,I)):(I.prefinished=!0,A.emit("prefinish")))}function $(A,I){var F=re(I);return F&&(le(A,I),I.pendingcb===0&&(I.finished=!0,A.emit("finish"))),F}function ne(A,I,F){I.ending=!0,$(A,I),F&&(I.finished?n.nextTick(F):A.once("finish",F)),I.ended=!0,A.writable=!1}function H(A,I,F){var z=A.entry;for(A.entry=null;z;){var Y=z.callback;I.pendingcb--,Y(F),z=z.next}I.corkedRequestsFree.next=A}Object.defineProperty(P.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(A){this._writableState&&(this._writableState.destroyed=A)}}),P.prototype.destroy=c.destroy,P.prototype._undestroy=c.undestroy,P.prototype._destroy=function(A,I){this.end(),I(A)}}}),Mn=Te({"node_modules/readable-stream/lib/_stream_duplex.js"(e,t){var n=cr(),i=Object.keys||function(c){var g=[];for(var x in c)g.push(x);return g};t.exports=f;var r=Object.create(mi());r.inherits=vi();var s=Va(),o=Ha();for(r.inherits(f,s),a=i(o.prototype),u=0;u<a.length;u++)l=a[u],f.prototype[l]||(f.prototype[l]=o.prototype[l]);var a,l,u;function f(c){if(!(this instanceof f))return new f(c);s.call(this,c),o.call(this,c),c&&c.readable===!1&&(this.readable=!1),c&&c.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,c&&c.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",m)}Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function m(){this.allowHalfOpen||this._writableState.ended||n.nextTick(h,this)}function h(c){c.end()}Object.defineProperty(f.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(c){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=c,this._writableState.destroyed=c)}}),f.prototype._destroy=function(c,g){this.push(null),this.end(),n.nextTick(g,c)}}}),go=Te({"node_modules/string_decoder/lib/string_decoder.js"(e){var t=hr().Buffer,n=t.isEncoding||function(S){switch(S=""+S,S&&S.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(S){if(!S)return"utf8";for(var b;;)switch(S){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return S;default:if(b)return;S=(""+S).toLowerCase(),b=!0}}function r(S){var b=i(S);if(typeof b!="string"&&(t.isEncoding===n||!n(S)))throw new Error("Unknown encoding: "+S);return b||S}e.StringDecoder=s;function s(S){this.encoding=r(S);var b;switch(this.encoding){case"utf16le":this.text=h,this.end=c,b=4;break;case"utf8":this.fillLast=u,b=4;break;case"base64":this.text=g,this.end=x,b=3;break;default:this.write=_,this.end=P;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(b)}s.prototype.write=function(S){if(S.length===0)return"";var b,w;if(this.lastNeed){if(b=this.fillLast(S),b===void 0)return"";w=this.lastNeed,this.lastNeed=0}else w=0;return w<S.length?b?b+this.text(S,w):this.text(S,w):b||""},s.prototype.end=m,s.prototype.text=f,s.prototype.fillLast=function(S){if(this.lastNeed<=S.length)return S.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);S.copy(this.lastChar,this.lastTotal-this.lastNeed,0,S.length),this.lastNeed-=S.length};function o(S){return S<=127?0:S>>5===6?2:S>>4===14?3:S>>3===30?4:S>>6===2?-1:-2}function a(S,b,w){var L=b.length-1;if(L<w)return 0;var j=o(b[L]);return j>=0?(j>0&&(S.lastNeed=j-1),j):--L<w||j===-2?0:(j=o(b[L]),j>=0?(j>0&&(S.lastNeed=j-2),j):--L<w||j===-2?0:(j=o(b[L]),j>=0?(j>0&&(j===2?j=0:S.lastNeed=j-3),j):0))}function l(S,b,w){if((b[0]&192)!==128)return S.lastNeed=0,"";if(S.lastNeed>1&&b.length>1){if((b[1]&192)!==128)return S.lastNeed=1,"";if(S.lastNeed>2&&b.length>2&&(b[2]&192)!==128)return S.lastNeed=2,""}}function u(S){var b=this.lastTotal-this.lastNeed,w=l(this,S);if(w!==void 0)return w;if(this.lastNeed<=S.length)return S.copy(this.lastChar,b,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);S.copy(this.lastChar,b,0,S.length),this.lastNeed-=S.length}function f(S,b){var w=a(this,S,b);if(!this.lastNeed)return S.toString("utf8",b);this.lastTotal=w;var L=S.length-(w-this.lastNeed);return S.copy(this.lastChar,0,L),S.toString("utf8",b,L)}function m(S){var b=S&&S.length?this.write(S):"";return this.lastNeed?b+"":b}function h(S,b){if((S.length-b)%2===0){var w=S.toString("utf16le",b);if(w){var L=w.charCodeAt(w.length-1);if(L>=55296&&L<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=S[S.length-2],this.lastChar[1]=S[S.length-1],w.slice(0,-1)}return w}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=S[S.length-1],S.toString("utf16le",b,S.length-1)}function c(S){var b=S&&S.length?this.write(S):"";if(this.lastNeed){var w=this.lastTotal-this.lastNeed;return b+this.lastChar.toString("utf16le",0,w)}return b}function g(S,b){var w=(S.length-b)%3;return w===0?S.toString("base64",b):(this.lastNeed=3-w,this.lastTotal=3,w===1?this.lastChar[0]=S[S.length-1]:(this.lastChar[0]=S[S.length-2],this.lastChar[1]=S[S.length-1]),S.toString("base64",b,S.length-w))}function x(S){var b=S&&S.length?this.write(S):"";return this.lastNeed?b+this.lastChar.toString("base64",0,3-this.lastNeed):b}function _(S){return S.toString(this.encoding)}function P(S){return S&&S.length?this.write(S):""}}}),Va=Te({"node_modules/readable-stream/lib/_stream_readable.js"(e,t){var n=cr();t.exports=w;var i=bd(),r;w.ReadableState=b,Et("events").EventEmitter;var s=function(T,R){return T.listeners(R).length},o=ja(),a=hr().Buffer,l=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function u(T){return a.from(T)}function f(T){return a.isBuffer(T)||T instanceof l}var m=Object.create(mi());m.inherits=vi();var h=Et("util"),c=void 0;h&&h.debuglog?c=h.debuglog("stream"):c=function(){};var g=wd(),x=za(),_;m.inherits(w,o);var P=["error","close","destroy","pause","resume"];function S(T,R,pe){if(typeof T.prependListener=="function")return T.prependListener(R,pe);!T._events||!T._events[R]?T.on(R,pe):i(T._events[R])?T._events[R].unshift(pe):T._events[R]=[pe,T._events[R]]}function b(T,R){r=r||Mn(),T=T||{};var pe=R instanceof r;this.objectMode=!!T.objectMode,pe&&(this.objectMode=this.objectMode||!!T.readableObjectMode);var E=T.highWaterMark,D=T.readableHighWaterMark,B=this.objectMode?16:16*1024;E||E===0?this.highWaterMark=E:pe&&(D||D===0)?this.highWaterMark=D:this.highWaterMark=B,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=T.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,T.encoding&&(_||(_=go().StringDecoder),this.decoder=new _(T.encoding),this.encoding=T.encoding)}function w(T){if(r=r||Mn(),!(this instanceof w))return new w(T);this._readableState=new b(T,this),this.readable=!0,T&&(typeof T.read=="function"&&(this._read=T.read),typeof T.destroy=="function"&&(this._destroy=T.destroy)),o.call(this)}Object.defineProperty(w.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(T){this._readableState&&(this._readableState.destroyed=T)}}),w.prototype.destroy=x.destroy,w.prototype._undestroy=x.undestroy,w.prototype._destroy=function(T,R){this.push(null),R(T)},w.prototype.push=function(T,R){var pe=this._readableState,E;return pe.objectMode?E=!0:typeof T=="string"&&(R=R||pe.defaultEncoding,R!==pe.encoding&&(T=a.from(T,R),R=""),E=!0),L(this,T,R,!1,E)},w.prototype.unshift=function(T){return L(this,T,null,!0,!1)};function L(T,R,pe,E,D){var B=T._readableState;if(R===null)B.reading=!1,fe(T,B);else{var K;D||(K=M(B,R)),K?T.emit("error",K):B.objectMode||R&&R.length>0?(typeof R!="string"&&!B.objectMode&&Object.getPrototypeOf(R)!==a.prototype&&(R=u(R)),E?B.endEmitted?T.emit("error",new Error("stream.unshift() after end event")):j(T,B,R,!0):B.ended?T.emit("error",new Error("stream.push() after EOF")):(B.reading=!1,B.decoder&&!pe?(R=B.decoder.write(R),B.objectMode||R.length!==0?j(T,B,R,!1):le(T,B)):j(T,B,R,!1))):E||(B.reading=!1)}return W(B)}function j(T,R,pe,E){R.flowing&&R.length===0&&!R.sync?(T.emit("data",pe),T.read(0)):(R.length+=R.objectMode?1:pe.length,E?R.buffer.unshift(pe):R.buffer.push(pe),R.needReadable&&re(T)),le(T,R)}function M(T,R){var pe;return!f(R)&&typeof R!="string"&&R!==void 0&&!T.objectMode&&(pe=new TypeError("Invalid non-string/buffer chunk")),pe}function W(T){return!T.ended&&(T.needReadable||T.length<T.highWaterMark||T.length===0)}w.prototype.isPaused=function(){return this._readableState.flowing===!1},w.prototype.setEncoding=function(T){return _||(_=go().StringDecoder),this._readableState.decoder=new _(T),this._readableState.encoding=T,this};var V=8388608;function ae(T){return T>=V?T=V:(T--,T|=T>>>1,T|=T>>>2,T|=T>>>4,T|=T>>>8,T|=T>>>16,T++),T}function Se(T,R){return T<=0||R.length===0&&R.ended?0:R.objectMode?1:T!==T?R.flowing&&R.length?R.buffer.head.data.length:R.length:(T>R.highWaterMark&&(R.highWaterMark=ae(T)),T<=R.length?T:R.ended?R.length:(R.needReadable=!0,0))}w.prototype.read=function(T){c("read",T),T=parseInt(T,10);var R=this._readableState,pe=T;if(T!==0&&(R.emittedReadable=!1),T===0&&R.needReadable&&(R.length>=R.highWaterMark||R.ended))return c("read: emitReadable",R.length,R.ended),R.length===0&&R.ended?ye(this):re(this),null;if(T=Se(T,R),T===0&&R.ended)return R.length===0&&ye(this),null;var E=R.needReadable;c("need readable",E),(R.length===0||R.length-T<R.highWaterMark)&&(E=!0,c("length less than watermark",E)),R.ended||R.reading?(E=!1,c("reading or ended",E)):E&&(c("do read"),R.reading=!0,R.sync=!0,R.length===0&&(R.needReadable=!0),this._read(R.highWaterMark),R.sync=!1,R.reading||(T=Se(pe,R)));var D;return T>0?D=z(T,R):D=null,D===null?(R.needReadable=!0,T=0):R.length-=T,R.length===0&&(R.ended||(R.needReadable=!0),pe!==T&&R.ended&&ye(this)),D!==null&&this.emit("data",D),D};function fe(T,R){if(!R.ended){if(R.decoder){var pe=R.decoder.end();pe&&pe.length&&(R.buffer.push(pe),R.length+=R.objectMode?1:pe.length)}R.ended=!0,re(T)}}function re(T){var R=T._readableState;R.needReadable=!1,R.emittedReadable||(c("emitReadable",R.flowing),R.emittedReadable=!0,R.sync?n.nextTick(Z,T):Z(T))}function Z(T){c("emit readable"),T.emit("readable"),F(T)}function le(T,R){R.readingMore||(R.readingMore=!0,n.nextTick($,T,R))}function $(T,R){for(var pe=R.length;!R.reading&&!R.flowing&&!R.ended&&R.length<R.highWaterMark&&(c("maybeReadMore read 0"),T.read(0),pe!==R.length);)pe=R.length;R.readingMore=!1}w.prototype._read=function(T){this.emit("error",new Error("_read() is not implemented"))},w.prototype.pipe=function(T,R){var pe=this,E=this._readableState;switch(E.pipesCount){case 0:E.pipes=T;break;case 1:E.pipes=[E.pipes,T];break;default:E.pipes.push(T);break}E.pipesCount+=1,c("pipe count=%d opts=%j",E.pipesCount,R);var D=(!R||R.end!==!1)&&T!==process.stdout&&T!==process.stderr,B=D?oe:Ae;E.endEmitted?n.nextTick(B):pe.once("end",B),T.on("unpipe",K);function K(Me,Ne){c("onunpipe"),Me===pe&&Ne&&Ne.hasUnpiped===!1&&(Ne.hasUnpiped=!0,te())}function oe(){c("onend"),T.end()}var q=ne(pe);T.on("drain",q);var Q=!1;function te(){c("cleanup"),T.removeListener("close",be),T.removeListener("finish",Pe),T.removeListener("drain",q),T.removeListener("error",Ee),T.removeListener("unpipe",K),pe.removeListener("end",oe),pe.removeListener("end",Ae),pe.removeListener("data",ue),Q=!0,E.awaitDrain&&(!T._writableState||T._writableState.needDrain)&&q()}var ie=!1;pe.on("data",ue);function ue(Me){c("ondata"),ie=!1;var Ne=T.write(Me);Ne===!1&&!ie&&((E.pipesCount===1&&E.pipes===T||E.pipesCount>1&&ke(E.pipes,T)!==-1)&&!Q&&(c("false write response, pause",E.awaitDrain),E.awaitDrain++,ie=!0),pe.pause())}function Ee(Me){c("onerror",Me),Ae(),T.removeListener("error",Ee),s(T,"error")===0&&T.emit("error",Me)}S(T,"error",Ee);function be(){T.removeListener("finish",Pe),Ae()}T.once("close",be);function Pe(){c("onfinish"),T.removeListener("close",be),Ae()}T.once("finish",Pe);function Ae(){c("unpipe"),pe.unpipe(T)}return T.emit("pipe",pe),E.flowing||(c("pipe resume"),pe.resume()),T};function ne(T){return function(){var R=T._readableState;c("pipeOnDrain",R.awaitDrain),R.awaitDrain&&R.awaitDrain--,R.awaitDrain===0&&s(T,"data")&&(R.flowing=!0,F(T))}}w.prototype.unpipe=function(T){var R=this._readableState,pe={hasUnpiped:!1};if(R.pipesCount===0)return this;if(R.pipesCount===1)return T&&T!==R.pipes?this:(T||(T=R.pipes),R.pipes=null,R.pipesCount=0,R.flowing=!1,T&&T.emit("unpipe",this,pe),this);if(!T){var E=R.pipes,D=R.pipesCount;R.pipes=null,R.pipesCount=0,R.flowing=!1;for(var B=0;B<D;B++)E[B].emit("unpipe",this,{hasUnpiped:!1});return this}var K=ke(R.pipes,T);return K===-1?this:(R.pipes.splice(K,1),R.pipesCount-=1,R.pipesCount===1&&(R.pipes=R.pipes[0]),T.emit("unpipe",this,pe),this)},w.prototype.on=function(T,R){var pe=o.prototype.on.call(this,T,R);if(T==="data")this._readableState.flowing!==!1&&this.resume();else if(T==="readable"){var E=this._readableState;!E.endEmitted&&!E.readableListening&&(E.readableListening=E.needReadable=!0,E.emittedReadable=!1,E.reading?E.length&&re(this):n.nextTick(H,this))}return pe},w.prototype.addListener=w.prototype.on;function H(T){c("readable nexttick read 0"),T.read(0)}w.prototype.resume=function(){var T=this._readableState;return T.flowing||(c("resume"),T.flowing=!0,A(this,T)),this};function A(T,R){R.resumeScheduled||(R.resumeScheduled=!0,n.nextTick(I,T,R))}function I(T,R){R.reading||(c("resume read 0"),T.read(0)),R.resumeScheduled=!1,R.awaitDrain=0,T.emit("resume"),F(T),R.flowing&&!R.reading&&T.read(0)}w.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function F(T){var R=T._readableState;for(c("flow",R.flowing);R.flowing&&T.read()!==null;);}w.prototype.wrap=function(T){var R=this,pe=this._readableState,E=!1;T.on("end",function(){if(c("wrapped end"),pe.decoder&&!pe.ended){var K=pe.decoder.end();K&&K.length&&R.push(K)}R.push(null)}),T.on("data",function(K){if(c("wrapped data"),pe.decoder&&(K=pe.decoder.write(K)),!(pe.objectMode&&K==null)&&!(!pe.objectMode&&(!K||!K.length))){var oe=R.push(K);oe||(E=!0,T.pause())}});for(var D in T)this[D]===void 0&&typeof T[D]=="function"&&(this[D]=(function(K){return function(){return T[K].apply(T,arguments)}})(D));for(var B=0;B<P.length;B++)T.on(P[B],this.emit.bind(this,P[B]));return this._read=function(K){c("wrapped _read",K),E&&(E=!1,T.resume())},this},Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),w._fromList=z;function z(T,R){if(R.length===0)return null;var pe;return R.objectMode?pe=R.buffer.shift():!T||T>=R.length?(R.decoder?pe=R.buffer.join(""):R.buffer.length===1?pe=R.buffer.head.data:pe=R.buffer.concat(R.length),R.buffer.clear()):pe=Y(T,R.buffer,R.decoder),pe}function Y(T,R,pe){var E;return T<R.head.data.length?(E=R.head.data.slice(0,T),R.head.data=R.head.data.slice(T)):T===R.head.data.length?E=R.shift():E=pe?ce(T,R):ve(T,R),E}function ce(T,R){var pe=R.head,E=1,D=pe.data;for(T-=D.length;pe=pe.next;){var B=pe.data,K=T>B.length?B.length:T;if(K===B.length?D+=B:D+=B.slice(0,T),T-=K,T===0){K===B.length?(++E,pe.next?R.head=pe.next:R.head=R.tail=null):(R.head=pe,pe.data=B.slice(K));break}++E}return R.length-=E,D}function ve(T,R){var pe=a.allocUnsafe(T),E=R.head,D=1;for(E.data.copy(pe),T-=E.data.length;E=E.next;){var B=E.data,K=T>B.length?B.length:T;if(B.copy(pe,pe.length-T,0,K),T-=K,T===0){K===B.length?(++D,E.next?R.head=E.next:R.head=R.tail=null):(R.head=E,E.data=B.slice(K));break}++D}return R.length-=D,pe}function ye(T){var R=T._readableState;if(R.length>0)throw new Error('"endReadable()" called on non-empty stream');R.endEmitted||(R.ended=!0,n.nextTick(we,R,T))}function we(T,R){!T.endEmitted&&T.length===0&&(T.endEmitted=!0,R.readable=!1,R.emit("end"))}function ke(T,R){for(var pe=0,E=T.length;pe<E;pe++)if(T[pe]===R)return pe;return-1}}}),$a=Te({"node_modules/readable-stream/lib/_stream_transform.js"(e,t){t.exports=s;var n=Mn(),i=Object.create(mi());i.inherits=vi(),i.inherits(s,n);function r(l,u){var f=this._transformState;f.transforming=!1;var m=f.writecb;if(!m)return this.emit("error",new Error("write callback called multiple times"));f.writechunk=null,f.writecb=null,u!=null&&this.push(u),m(l);var h=this._readableState;h.reading=!1,(h.needReadable||h.length<h.highWaterMark)&&this._read(h.highWaterMark)}function s(l){if(!(this instanceof s))return new s(l);n.call(this,l),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,l&&(typeof l.transform=="function"&&(this._transform=l.transform),typeof l.flush=="function"&&(this._flush=l.flush)),this.on("prefinish",o)}function o(){var l=this;typeof this._flush=="function"?this._flush(function(u,f){a(l,u,f)}):a(this,null,null)}s.prototype.push=function(l,u){return this._transformState.needTransform=!1,n.prototype.push.call(this,l,u)},s.prototype._transform=function(l,u,f){throw new Error("_transform() is not implemented")},s.prototype._write=function(l,u,f){var m=this._transformState;if(m.writecb=f,m.writechunk=l,m.writeencoding=u,!m.transforming){var h=this._readableState;(m.needTransform||h.needReadable||h.length<h.highWaterMark)&&this._read(h.highWaterMark)}},s.prototype._read=function(l){var u=this._transformState;u.writechunk!==null&&u.writecb&&!u.transforming?(u.transforming=!0,this._transform(u.writechunk,u.writeencoding,u.afterTransform)):u.needTransform=!0},s.prototype._destroy=function(l,u){var f=this;n.prototype._destroy.call(this,l,function(m){u(m),f.emit("close")})};function a(l,u,f){if(u)return l.emit("error",u);if(f!=null&&l.push(f),l._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(l._transformState.transforming)throw new Error("Calling transform done when still transforming");return l.push(null)}}}),Sd=Te({"node_modules/readable-stream/lib/_stream_passthrough.js"(e,t){t.exports=r;var n=$a(),i=Object.create(mi());i.inherits=vi(),i.inherits(r,n);function r(s){if(!(this instanceof r))return new r(s);n.call(this,s)}r.prototype._transform=function(s,o,a){a(null,s)}}}),qa=Te({"node_modules/readable-stream/readable.js"(e,t){var n=Et("stream");hd.READABLE_STREAM==="disable"&&n?(t.exports=n,e=t.exports=n.Readable,e.Readable=n.Readable,e.Writable=n.Writable,e.Duplex=n.Duplex,e.Transform=n.Transform,e.PassThrough=n.PassThrough,e.Stream=n):(e=t.exports=Va(),e.Stream=n||e,e.Readable=e,e.Writable=Ha(),e.Duplex=Mn(),e.Transform=$a(),e.PassThrough=Sd())}}),hn=Te({"node_modules/jszip/lib/support.js"(e){if(e.base64=!0,e.array=!0,e.string=!0,e.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",e.nodebuffer=typeof Buffer<"u",e.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")e.blob=!1;else{t=new ArrayBuffer(0);try{e.blob=new Blob([t],{type:"application/zip"}).size===0}catch{try{n=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,i=new n,i.append(t),e.blob=i.getBlob("application/zip").size===0}catch{e.blob=!1}}}var t,n,i;try{e.nodestream=!!qa().Readable}catch{e.nodestream=!1}}}),Wa=Te({"node_modules/jszip/lib/base64.js"(e){var t=ut(),n=hn(),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.encode=function(r){for(var s=[],o,a,l,u,f,m,h,c=0,g=r.length,x=g,_=t.getTypeOf(r)!=="string";c<r.length;)x=g-c,_?(o=r[c++],a=c<g?r[c++]:0,l=c<g?r[c++]:0):(o=r.charCodeAt(c++),a=c<g?r.charCodeAt(c++):0,l=c<g?r.charCodeAt(c++):0),u=o>>2,f=(o&3)<<4|a>>4,m=x>1?(a&15)<<2|l>>6:64,h=x>2?l&63:64,s.push(i.charAt(u)+i.charAt(f)+i.charAt(m)+i.charAt(h));return s.join("")},e.decode=function(r){var s,o,a,l,u,f,m,h=0,c=0,g="data:";if(r.substr(0,g.length)===g)throw new Error("Invalid base64 input, it looks like a data url.");r=r.replace(/[^A-Za-z0-9+/=]/g,"");var x=r.length*3/4;if(r.charAt(r.length-1)===i.charAt(64)&&x--,r.charAt(r.length-2)===i.charAt(64)&&x--,x%1!==0)throw new Error("Invalid base64 input, bad content length.");var _;for(n.uint8array?_=new Uint8Array(x|0):_=new Array(x|0);h<r.length;)l=i.indexOf(r.charAt(h++)),u=i.indexOf(r.charAt(h++)),f=i.indexOf(r.charAt(h++)),m=i.indexOf(r.charAt(h++)),s=l<<2|u>>4,o=(u&15)<<4|f>>2,a=(f&3)<<6|m,_[c++]=s,f!==64&&(_[c++]=o),m!==64&&(_[c++]=a);return _}}}),pr=Te({"node_modules/jszip/lib/nodejsUtils.js"(e,t){t.exports={isNode:typeof Buffer<"u",newBufferFrom:function(n,i){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(n,i);if(typeof n=="number")throw new Error('The "data" argument must not be a number');return new Buffer(n,i)},allocBuffer:function(n){if(Buffer.alloc)return Buffer.alloc(n);var i=new Buffer(n);return i.fill(0),i},isBuffer:function(n){return Buffer.isBuffer(n)},isStream:function(n){return n&&typeof n.on=="function"&&typeof n.pause=="function"&&typeof n.resume=="function"}}}}),Ed=Te({"node_modules/immediate/lib/index.js"(e,t){var n=global.MutationObserver||global.WebKitMutationObserver,i;process.browser?n?(r=0,s=new n(f),o=global.document.createTextNode(""),s.observe(o,{characterData:!0}),i=function(){o.data=r=++r%2}):!global.setImmediate&&typeof global.MessageChannel<"u"?(a=new global.MessageChannel,a.port1.onmessage=f,i=function(){a.port2.postMessage(0)}):"document"in global&&"onreadystatechange"in global.document.createElement("script")?i=function(){var h=global.document.createElement("script");h.onreadystatechange=function(){f(),h.onreadystatechange=null,h.parentNode.removeChild(h),h=null},global.document.documentElement.appendChild(h)}:i=function(){setTimeout(f,0)}:i=function(){process.nextTick(f)};var r,s,o,a,l,u=[];function f(){l=!0;for(var h,c,g=u.length;g;){for(c=u,u=[],h=-1;++h<g;)c[h]();g=u.length}l=!1}t.exports=m;function m(h){u.push(h)===1&&!l&&i()}}}),kd=Te({"node_modules/lie/lib/index.js"(e,t){var n=Ed();function i(){}var r={},s=["REJECTED"],o=["FULFILLED"],a=["PENDING"];process.browser||(l=["UNHANDLED"]);var l;t.exports=u;function u(b){if(typeof b!="function")throw new TypeError("resolver must be a function");this.state=a,this.queue=[],this.outcome=void 0,process.browser||(this.handled=l),b!==i&&c(this,b)}u.prototype.finally=function(b){if(typeof b!="function")return this;var w=this.constructor;return this.then(L,j);function L(M){function W(){return M}return w.resolve(b()).then(W)}function j(M){function W(){throw M}return w.resolve(b()).then(W)}},u.prototype.catch=function(b){return this.then(null,b)},u.prototype.then=function(b,w){if(typeof b!="function"&&this.state===o||typeof w!="function"&&this.state===s)return this;var L=new this.constructor(i);if(process.browser||this.handled===l&&(this.handled=null),this.state!==a){var j=this.state===o?b:w;m(L,j,this.outcome)}else this.queue.push(new f(L,b,w));return L};function f(b,w,L){this.promise=b,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof L=="function"&&(this.onRejected=L,this.callRejected=this.otherCallRejected)}f.prototype.callFulfilled=function(b){r.resolve(this.promise,b)},f.prototype.otherCallFulfilled=function(b){m(this.promise,this.onFulfilled,b)},f.prototype.callRejected=function(b){r.reject(this.promise,b)},f.prototype.otherCallRejected=function(b){m(this.promise,this.onRejected,b)};function m(b,w,L){n(function(){var j;try{j=w(L)}catch(M){return r.reject(b,M)}j===b?r.reject(b,new TypeError("Cannot resolve promise with itself")):r.resolve(b,j)})}r.resolve=function(b,w){var L=g(h,w);if(L.status==="error")return r.reject(b,L.value);var j=L.value;if(j)c(b,j);else{b.state=o,b.outcome=w;for(var M=-1,W=b.queue.length;++M<W;)b.queue[M].callFulfilled(w)}return b},r.reject=function(b,w){b.state=s,b.outcome=w,process.browser||b.handled===l&&n(function(){b.handled===l&&process.emit("unhandledRejection",w,b)});for(var L=-1,j=b.queue.length;++L<j;)b.queue[L].callRejected(w);return b};function h(b){var w=b&&b.then;if(b&&(typeof b=="object"||typeof b=="function")&&typeof w=="function")return function(){w.apply(b,arguments)}}function c(b,w){var L=!1;function j(ae){L||(L=!0,r.reject(b,ae))}function M(ae){L||(L=!0,r.resolve(b,ae))}function W(){w(M,j)}var V=g(W);V.status==="error"&&j(V.value)}function g(b,w){var L={};try{L.value=b(w),L.status="success"}catch(j){L.status="error",L.value=j}return L}u.resolve=x;function x(b){return b instanceof this?b:r.resolve(new this(i),b)}u.reject=_;function _(b){var w=new this(i);return r.reject(w,b)}u.all=P;function P(b){var w=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var L=b.length,j=!1;if(!L)return this.resolve([]);for(var M=new Array(L),W=0,V=-1,ae=new this(i);++V<L;)Se(b[V],V);return ae;function Se(fe,re){w.resolve(fe).then(Z,function(le){j||(j=!0,r.reject(ae,le))});function Z(le){M[re]=le,++W===L&&!j&&(j=!0,r.resolve(ae,M))}}}u.race=S;function S(b){var w=this;if(Object.prototype.toString.call(b)!=="[object Array]")return this.reject(new TypeError("must be an array"));var L=b.length,j=!1;if(!L)return this.resolve([]);for(var M=-1,W=new this(i);++M<L;)V(b[M]);return W;function V(ae){w.resolve(ae).then(function(Se){j||(j=!0,r.resolve(W,Se))},function(Se){j||(j=!0,r.reject(W,Se))})}}}}),_i=Te({"node_modules/jszip/lib/external.js"(e,t){var n=null;typeof Promise<"u"?n=Promise:n=kd(),t.exports={Promise:n}}}),Cd=Te({"node_modules/setimmediate/setImmediate.js"(e){(function(t,n){if(t.setImmediate)return;var i=1,r={},s=!1,o=t.document,a;function l(b){typeof b!="function"&&(b=new Function(""+b));for(var w=new Array(arguments.length-1),L=0;L<w.length;L++)w[L]=arguments[L+1];var j={callback:b,args:w};return r[i]=j,a(i),i++}function u(b){delete r[b]}function f(b){var w=b.callback,L=b.args;switch(L.length){case 0:w();break;case 1:w(L[0]);break;case 2:w(L[0],L[1]);break;case 3:w(L[0],L[1],L[2]);break;default:w.apply(n,L);break}}function m(b){if(s)setTimeout(m,0,b);else{var w=r[b];if(w){s=!0;try{f(w)}finally{u(b),s=!1}}}}function h(){a=function(b){process.nextTick(function(){m(b)})}}function c(){if(t.postMessage&&!t.importScripts){var b=!0,w=t.onmessage;return t.onmessage=function(){b=!1},t.postMessage("","*"),t.onmessage=w,b}}function g(){var b="setImmediate$"+Math.random()+"$",w=function(L){L.source===t&&typeof L.data=="string"&&L.data.indexOf(b)===0&&m(+L.data.slice(b.length))};t.addEventListener?t.addEventListener("message",w,!1):t.attachEvent("onmessage",w),a=function(L){t.postMessage(b+L,"*")}}function x(){var b=new MessageChannel;b.port1.onmessage=function(w){var L=w.data;m(L)},a=function(w){b.port2.postMessage(w)}}function _(){var b=o.documentElement;a=function(w){var L=o.createElement("script");L.onreadystatechange=function(){m(w),L.onreadystatechange=null,b.removeChild(L),L=null},b.appendChild(L)}}function P(){a=function(b){setTimeout(m,0,b)}}var S=Object.getPrototypeOf&&Object.getPrototypeOf(t);S=S&&S.setTimeout?S:t,{}.toString.call(t.process)==="[object process]"?h():c()?g():t.MessageChannel?x():o&&"onreadystatechange"in o.createElement("script")?_():P(),S.setImmediate=l,S.clearImmediate=u})(typeof self>"u"?typeof global>"u"?e:global:self)}}),ut=Te({"node_modules/jszip/lib/utils.js"(e){var t=hn(),n=Wa(),i=pr(),r=_i();Cd();function s(h){var c=null;return t.uint8array?c=new Uint8Array(h.length):c=new Array(h.length),a(h,c)}e.newBlob=function(h,c){e.checkSupport("blob");try{return new Blob([h],{type:c})}catch{try{var g=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,x=new g;return x.append(h),x.getBlob(c)}catch{throw new Error("Bug : can't construct the Blob.")}}};function o(h){return h}function a(h,c){for(var g=0;g<h.length;++g)c[g]=h.charCodeAt(g)&255;return c}var l={stringifyByChunk:function(h,c,g){var x=[],_=0,P=h.length;if(P<=g)return String.fromCharCode.apply(null,h);for(;_<P;)c==="array"||c==="nodebuffer"?x.push(String.fromCharCode.apply(null,h.slice(_,Math.min(_+g,P)))):x.push(String.fromCharCode.apply(null,h.subarray(_,Math.min(_+g,P)))),_+=g;return x.join("")},stringifyByChar:function(h){for(var c="",g=0;g<h.length;g++)c+=String.fromCharCode(h[g]);return c},applyCanBeUsed:{uint8array:(function(){try{return t.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return t.nodebuffer&&String.fromCharCode.apply(null,i.allocBuffer(1)).length===1}catch{return!1}})()}};function u(h){var c=65536,g=e.getTypeOf(h),x=!0;if(g==="uint8array"?x=l.applyCanBeUsed.uint8array:g==="nodebuffer"&&(x=l.applyCanBeUsed.nodebuffer),x)for(;c>1;)try{return l.stringifyByChunk(h,g,c)}catch{c=Math.floor(c/2)}return l.stringifyByChar(h)}e.applyFromCharCode=u;function f(h,c){for(var g=0;g<h.length;g++)c[g]=h[g];return c}var m={};m.string={string:o,array:function(h){return a(h,new Array(h.length))},arraybuffer:function(h){return m.string.uint8array(h).buffer},uint8array:function(h){return a(h,new Uint8Array(h.length))},nodebuffer:function(h){return a(h,i.allocBuffer(h.length))}},m.array={string:u,array:o,arraybuffer:function(h){return new Uint8Array(h).buffer},uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return i.newBufferFrom(h)}},m.arraybuffer={string:function(h){return u(new Uint8Array(h))},array:function(h){return f(new Uint8Array(h),new Array(h.byteLength))},arraybuffer:o,uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return i.newBufferFrom(new Uint8Array(h))}},m.uint8array={string:u,array:function(h){return f(h,new Array(h.length))},arraybuffer:function(h){return h.buffer},uint8array:o,nodebuffer:function(h){return i.newBufferFrom(h)}},m.nodebuffer={string:u,array:function(h){return f(h,new Array(h.length))},arraybuffer:function(h){return m.nodebuffer.uint8array(h).buffer},uint8array:function(h){return f(h,new Uint8Array(h.length))},nodebuffer:o},e.transformTo=function(h,c){if(c||(c=""),!h)return c;e.checkSupport(h);var g=e.getTypeOf(c),x=m[g][h](c);return x},e.resolve=function(h){for(var c=h.split("/"),g=[],x=0;x<c.length;x++){var _=c[x];_==="."||_===""&&x!==0&&x!==c.length-1||(_===".."?g.pop():g.push(_))}return g.join("/")},e.getTypeOf=function(h){if(typeof h=="string")return"string";if(Object.prototype.toString.call(h)==="[object Array]")return"array";if(t.nodebuffer&&i.isBuffer(h))return"nodebuffer";if(t.uint8array&&h instanceof Uint8Array)return"uint8array";if(t.arraybuffer&&h instanceof ArrayBuffer)return"arraybuffer"},e.checkSupport=function(h){var c=t[h.toLowerCase()];if(!c)throw new Error(h+" is not supported by this platform")},e.MAX_VALUE_16BITS=65535,e.MAX_VALUE_32BITS=-1,e.pretty=function(h){var c="",g,x;for(x=0;x<(h||"").length;x++)g=h.charCodeAt(x),c+="\\x"+(g<16?"0":"")+g.toString(16).toUpperCase();return c},e.delay=function(h,c,g){setImmediate(function(){h.apply(g||null,c||[])})},e.inherits=function(h,c){var g=function(){};g.prototype=c.prototype,h.prototype=new g},e.extend=function(){var h={},c,g;for(c=0;c<arguments.length;c++)for(g in arguments[c])Object.prototype.hasOwnProperty.call(arguments[c],g)&&typeof h[g]>"u"&&(h[g]=arguments[c][g]);return h},e.prepareContent=function(h,c,g,x,_){var P=r.Promise.resolve(c).then(function(S){var b=t.blob&&(S instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(S))!==-1);return b&&typeof FileReader<"u"?new r.Promise(function(w,L){var j=new FileReader;j.onload=function(M){w(M.target.result)},j.onerror=function(M){L(M.target.error)},j.readAsArrayBuffer(S)}):S});return P.then(function(S){var b=e.getTypeOf(S);return b?(b==="arraybuffer"?S=e.transformTo("uint8array",S):b==="string"&&(_?S=n.decode(S):g&&x!==!0&&(S=s(S))),S):r.Promise.reject(new Error("Can't read the data of '"+h+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}}}),Dt=Te({"node_modules/jszip/lib/stream/GenericWorker.js"(e,t){function n(i){this.name=i||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}n.prototype={push:function(i){this.emit("data",i)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(i){this.emit("error",i)}return!0},error:function(i){return this.isFinished?!1:(this.isPaused?this.generatedError=i:(this.isFinished=!0,this.emit("error",i),this.previous&&this.previous.error(i),this.cleanUp()),!0)},on:function(i,r){return this._listeners[i].push(r),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(i,r){if(this._listeners[i])for(var s=0;s<this._listeners[i].length;s++)this._listeners[i][s].call(this,r)},pipe:function(i){return i.registerPrevious(this)},registerPrevious:function(i){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=i.streamInfo,this.mergeStreamInfo(),this.previous=i;var r=this;return i.on("data",function(s){r.processChunk(s)}),i.on("end",function(){r.end()}),i.on("error",function(s){r.error(s)}),this},pause:function(){return this.isPaused||this.isFinished?!1:(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var i=!1;return this.generatedError&&(this.error(this.generatedError),i=!0),this.previous&&this.previous.resume(),!i},flush:function(){},processChunk:function(i){this.push(i)},withStreamInfo:function(i,r){return this.extraStreamInfo[i]=r,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var i in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,i)&&(this.streamInfo[i]=this.extraStreamInfo[i])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var i="Worker "+this.name;return this.previous?this.previous+" -> "+i:i}},t.exports=n}}),bi=Te({"node_modules/jszip/lib/utf8.js"(e){var t=ut(),n=hn(),i=pr(),r=Dt(),s=new Array(256);for(o=0;o<256;o++)s[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;var o;s[254]=s[254]=1;var a=function(h){var c,g,x,_,P,S=h.length,b=0;for(_=0;_<S;_++)g=h.charCodeAt(_),(g&64512)===55296&&_+1<S&&(x=h.charCodeAt(_+1),(x&64512)===56320&&(g=65536+(g-55296<<10)+(x-56320),_++)),b+=g<128?1:g<2048?2:g<65536?3:4;for(n.uint8array?c=new Uint8Array(b):c=new Array(b),P=0,_=0;P<b;_++)g=h.charCodeAt(_),(g&64512)===55296&&_+1<S&&(x=h.charCodeAt(_+1),(x&64512)===56320&&(g=65536+(g-55296<<10)+(x-56320),_++)),g<128?c[P++]=g:g<2048?(c[P++]=192|g>>>6,c[P++]=128|g&63):g<65536?(c[P++]=224|g>>>12,c[P++]=128|g>>>6&63,c[P++]=128|g&63):(c[P++]=240|g>>>18,c[P++]=128|g>>>12&63,c[P++]=128|g>>>6&63,c[P++]=128|g&63);return c},l=function(h,c){var g;for(c=c||h.length,c>h.length&&(c=h.length),g=c-1;g>=0&&(h[g]&192)===128;)g--;return g<0||g===0?c:g+s[h[g]]>c?g:c},u=function(h){var c,g,x,_,P=h.length,S=new Array(P*2);for(g=0,c=0;c<P;){if(x=h[c++],x<128){S[g++]=x;continue}if(_=s[x],_>4){S[g++]=65533,c+=_-1;continue}for(x&=_===2?31:_===3?15:7;_>1&&c<P;)x=x<<6|h[c++]&63,_--;if(_>1){S[g++]=65533;continue}x<65536?S[g++]=x:(x-=65536,S[g++]=55296|x>>10&1023,S[g++]=56320|x&1023)}return S.length!==g&&(S.subarray?S=S.subarray(0,g):S.length=g),t.applyFromCharCode(S)};e.utf8encode=function(c){return n.nodebuffer?i.newBufferFrom(c,"utf-8"):a(c)},e.utf8decode=function(c){return n.nodebuffer?t.transformTo("nodebuffer",c).toString("utf-8"):(c=t.transformTo(n.uint8array?"uint8array":"array",c),u(c))};function f(){r.call(this,"utf-8 decode"),this.leftOver=null}t.inherits(f,r),f.prototype.processChunk=function(h){var c=t.transformTo(n.uint8array?"uint8array":"array",h.data);if(this.leftOver&&this.leftOver.length){if(n.uint8array){var g=c;c=new Uint8Array(g.length+this.leftOver.length),c.set(this.leftOver,0),c.set(g,this.leftOver.length)}else c=this.leftOver.concat(c);this.leftOver=null}var x=l(c),_=c;x!==c.length&&(n.uint8array?(_=c.subarray(0,x),this.leftOver=c.subarray(x,c.length)):(_=c.slice(0,x),this.leftOver=c.slice(x,c.length))),this.push({data:e.utf8decode(_),meta:h.meta})},f.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:e.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},e.Utf8DecodeWorker=f;function m(){r.call(this,"utf-8 encode")}t.inherits(m,r),m.prototype.processChunk=function(h){this.push({data:e.utf8encode(h.data),meta:h.meta})},e.Utf8EncodeWorker=m}}),Td=Te({"node_modules/jszip/lib/stream/ConvertWorker.js"(e,t){var n=Dt(),i=ut();function r(s){n.call(this,"ConvertWorker to "+s),this.destType=s}i.inherits(r,n),r.prototype.processChunk=function(s){this.push({data:i.transformTo(this.destType,s.data),meta:s.meta})},t.exports=r}}),Ad=Te({"node_modules/jszip/lib/nodejs/NodejsStreamOutputAdapter.js"(e,t){var n=qa().Readable,i=ut();i.inherits(r,n);function r(s,o,a){n.call(this,o),this._helper=s;var l=this;s.on("data",function(u,f){l.push(u)||l._helper.pause(),a&&a(f)}).on("error",function(u){l.emit("error",u)}).on("end",function(){l.push(null)})}r.prototype._read=function(){this._helper.resume()},t.exports=r}}),Ga=Te({"node_modules/jszip/lib/stream/StreamHelper.js"(e,t){var n=ut(),i=Td(),r=Dt(),s=Wa(),o=hn(),a=_i(),l=null;if(o.nodestream)try{l=Ad()}catch{}function u(c,g,x){switch(c){case"blob":return n.newBlob(n.transformTo("arraybuffer",g),x);case"base64":return s.encode(g);default:return n.transformTo(c,g)}}function f(c,g){var x,_=0,P=null,S=0;for(x=0;x<g.length;x++)S+=g[x].length;switch(c){case"string":return g.join("");case"array":return Array.prototype.concat.apply([],g);case"uint8array":for(P=new Uint8Array(S),x=0;x<g.length;x++)P.set(g[x],_),_+=g[x].length;return P;case"nodebuffer":return Buffer.concat(g);default:throw new Error("concat : unsupported type '"+c+"'")}}function m(c,g){return new a.Promise(function(x,_){var P=[],S=c._internalType,b=c._outputType,w=c._mimeType;c.on("data",function(L,j){P.push(L),g&&g(j)}).on("error",function(L){P=[],_(L)}).on("end",function(){try{var L=u(b,f(S,P),w);x(L)}catch(j){_(j)}P=[]}).resume()})}function h(c,g,x){var _=g;switch(g){case"blob":case"arraybuffer":_="uint8array";break;case"base64":_="string";break}try{this._internalType=_,this._outputType=g,this._mimeType=x,n.checkSupport(_),this._worker=c.pipe(new i(_)),c.lock()}catch(P){this._worker=new r("error"),this._worker.error(P)}}h.prototype={accumulate:function(c){return m(this,c)},on:function(c,g){var x=this;return c==="data"?this._worker.on(c,function(_){g.call(x,_.data,_.meta)}):this._worker.on(c,function(){n.delay(g,arguments,x)}),this},resume:function(){return n.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(c){if(n.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new l(this,{objectMode:this._outputType!=="nodebuffer"},c)}},t.exports=h}}),Za=Te({"node_modules/jszip/lib/defaults.js"(e){e.base64=!1,e.binary=!1,e.dir=!1,e.createFolders=!0,e.date=null,e.compression=null,e.compressionOptions=null,e.comment=null,e.unixPermissions=null,e.dosPermissions=null}}),Ka=Te({"node_modules/jszip/lib/stream/DataWorker.js"(e,t){var n=ut(),i=Dt(),r=16*1024;function s(o){i.call(this,"DataWorker");var a=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,o.then(function(l){a.dataIsReady=!0,a.data=l,a.max=l&&l.length||0,a.type=n.getTypeOf(l),a.isPaused||a._tickAndRepeat()},function(l){a.error(l)})}n.inherits(s,i),s.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return i.prototype.resume.call(this)?(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,n.delay(this._tickAndRepeat,[],this)),!0):!1},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,!(this.isPaused||this.isFinished)&&(this._tick(),this.isFinished||(n.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var o=r,a=null,l=Math.min(this.max,this.index+o);if(this.index>=this.max)return this.end();switch(this.type){case"string":a=this.data.substring(this.index,l);break;case"uint8array":a=this.data.subarray(this.index,l);break;case"array":case"nodebuffer":a=this.data.slice(this.index,l);break}return this.index=l,this.push({data:a,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=s}}),bs=Te({"node_modules/jszip/lib/crc32.js"(e,t){var n=ut();function i(){for(var a,l=[],u=0;u<256;u++){a=u;for(var f=0;f<8;f++)a=a&1?3988292384^a>>>1:a>>>1;l[u]=a}return l}var r=i();function s(a,l,u,f){var m=r,h=f+u;a=a^-1;for(var c=f;c<h;c++)a=a>>>8^m[(a^l[c])&255];return a^-1}function o(a,l,u,f){var m=r,h=f+u;a=a^-1;for(var c=f;c<h;c++)a=a>>>8^m[(a^l.charCodeAt(c))&255];return a^-1}t.exports=function(l,u){if(typeof l>"u"||!l.length)return 0;var f=n.getTypeOf(l)!=="string";return f?s(u|0,l,l.length,0):o(u|0,l,l.length,0)}}}),Ya=Te({"node_modules/jszip/lib/stream/Crc32Probe.js"(e,t){var n=Dt(),i=bs(),r=ut();function s(){n.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r.inherits(s,n),s.prototype.processChunk=function(o){this.streamInfo.crc32=i(o.data,this.streamInfo.crc32||0),this.push(o)},t.exports=s}}),Id=Te({"node_modules/jszip/lib/stream/DataLengthProbe.js"(e,t){var n=ut(),i=Dt();function r(s){i.call(this,"DataLengthProbe for "+s),this.propName=s,this.withStreamInfo(s,0)}n.inherits(r,i),r.prototype.processChunk=function(s){if(s){var o=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=o+s.data.length}i.prototype.processChunk.call(this,s)},t.exports=r}}),ys=Te({"node_modules/jszip/lib/compressedObject.js"(e,t){var n=_i(),i=Ka(),r=Ya(),s=Id();function o(a,l,u,f,m){this.compressedSize=a,this.uncompressedSize=l,this.crc32=u,this.compression=f,this.compressedContent=m}o.prototype={getContentWorker:function(){var a=new i(n.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),l=this;return a.on("end",function(){if(this.streamInfo.data_length!==l.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),a},getCompressedWorker:function(){return new i(n.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},o.createWorkerFrom=function(a,l,u){return a.pipe(new r).pipe(new s("uncompressedSize")).pipe(l.compressWorker(u)).pipe(new s("compressedSize")).withStreamInfo("compression",l)},t.exports=o}}),Dd=Te({"node_modules/jszip/lib/zipObject.js"(e,t){var n=Ga(),i=Ka(),r=bi(),s=ys(),o=Dt(),a=function(m,h,c){this.name=m,this.dir=c.dir,this.date=c.date,this.comment=c.comment,this.unixPermissions=c.unixPermissions,this.dosPermissions=c.dosPermissions,this._data=h,this._dataBinary=c.binary,this.options={compression:c.compression,compressionOptions:c.compressionOptions}};a.prototype={internalStream:function(m){var h=null,c="string";try{if(!m)throw new Error("No output type specified.");c=m.toLowerCase();var g=c==="string"||c==="text";(c==="binarystring"||c==="text")&&(c="string"),h=this._decompressWorker();var x=!this._dataBinary;x&&!g&&(h=h.pipe(new r.Utf8EncodeWorker)),!x&&g&&(h=h.pipe(new r.Utf8DecodeWorker))}catch(_){h=new o("error"),h.error(_)}return new n(h,c,"")},async:function(m,h){return this.internalStream(m).accumulate(h)},nodeStream:function(m,h){return this.internalStream(m||"nodebuffer").toNodejsStream(h)},_compressWorker:function(m,h){if(this._data instanceof s&&this._data.compression.magic===m.magic)return this._data.getCompressedWorker();var c=this._decompressWorker();return this._dataBinary||(c=c.pipe(new r.Utf8EncodeWorker)),s.createWorkerFrom(c,m,h)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof o?this._data:new i(this._data)}};var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],u=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")};for(f=0;f<l.length;f++)a.prototype[l[f]]=u;var f;t.exports=a}}),pn=Te({"node_modules/jszip/node_modules/pako/lib/utils/common.js"(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(s,o){return Object.prototype.hasOwnProperty.call(s,o)}e.assign=function(s){for(var o=Array.prototype.slice.call(arguments,1);o.length;){var a=o.shift();if(a){if(typeof a!="object")throw new TypeError(a+"must be non-object");for(var l in a)n(a,l)&&(s[l]=a[l])}}return s},e.shrinkBuf=function(s,o){return s.length===o?s:s.subarray?s.subarray(0,o):(s.length=o,s)};var i={arraySet:function(s,o,a,l,u){if(o.subarray&&s.subarray){s.set(o.subarray(a,a+l),u);return}for(var f=0;f<l;f++)s[u+f]=o[a+f]},flattenChunks:function(s){var o,a,l,u,f,m;for(l=0,o=0,a=s.length;o<a;o++)l+=s[o].length;for(m=new Uint8Array(l),u=0,o=0,a=s.length;o<a;o++)f=s[o],m.set(f,u),u+=f.length;return m}},r={arraySet:function(s,o,a,l,u){for(var f=0;f<l;f++)s[u+f]=o[a+f]},flattenChunks:function(s){return[].concat.apply([],s)}};e.setTyped=function(s){s?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,i)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,r))},e.setTyped(t)}}),Pd=Te({"node_modules/jszip/node_modules/pako/lib/zlib/trees.js"(e){var t=pn(),n=4,i=0,r=1,s=2;function o(k){for(var ge=k.length;--ge>=0;)k[ge]=0}var a=0,l=1,u=2,f=3,m=258,h=29,c=256,g=c+1+h,x=30,_=19,P=2*g+1,S=15,b=16,w=7,L=256,j=16,M=17,W=18,V=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ae=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Se=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],fe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],re=512,Z=new Array((g+2)*2);o(Z);var le=new Array(x*2);o(le);var $=new Array(re);o($);var ne=new Array(m-f+1);o(ne);var H=new Array(h);o(H);var A=new Array(x);o(A);function I(k,ge,_e,xe,U){this.static_tree=k,this.extra_bits=ge,this.extra_base=_e,this.elems=xe,this.max_length=U,this.has_stree=k&&k.length}var F,z,Y;function ce(k,ge){this.dyn_tree=k,this.max_code=0,this.stat_desc=ge}function ve(k){return k<256?$[k]:$[256+(k>>>7)]}function ye(k,ge){k.pending_buf[k.pending++]=ge&255,k.pending_buf[k.pending++]=ge>>>8&255}function we(k,ge,_e){k.bi_valid>b-_e?(k.bi_buf|=ge<<k.bi_valid&65535,ye(k,k.bi_buf),k.bi_buf=ge>>b-k.bi_valid,k.bi_valid+=_e-b):(k.bi_buf|=ge<<k.bi_valid&65535,k.bi_valid+=_e)}function ke(k,ge,_e){we(k,_e[ge*2],_e[ge*2+1])}function T(k,ge){var _e=0;do _e|=k&1,k>>>=1,_e<<=1;while(--ge>0);return _e>>>1}function R(k){k.bi_valid===16?(ye(k,k.bi_buf),k.bi_buf=0,k.bi_valid=0):k.bi_valid>=8&&(k.pending_buf[k.pending++]=k.bi_buf&255,k.bi_buf>>=8,k.bi_valid-=8)}function pe(k,ge){var _e=ge.dyn_tree,xe=ge.max_code,U=ge.stat_desc.static_tree,se=ge.stat_desc.has_stree,v=ge.stat_desc.extra_bits,me=ge.stat_desc.extra_base,Ue=ge.stat_desc.max_length,d,J,ee,y,O,G,Re=0;for(y=0;y<=S;y++)k.bl_count[y]=0;for(_e[k.heap[k.heap_max]*2+1]=0,d=k.heap_max+1;d<P;d++)J=k.heap[d],y=_e[_e[J*2+1]*2+1]+1,y>Ue&&(y=Ue,Re++),_e[J*2+1]=y,!(J>xe)&&(k.bl_count[y]++,O=0,J>=me&&(O=v[J-me]),G=_e[J*2],k.opt_len+=G*(y+O),se&&(k.static_len+=G*(U[J*2+1]+O)));if(Re!==0){do{for(y=Ue-1;k.bl_count[y]===0;)y--;k.bl_count[y]--,k.bl_count[y+1]+=2,k.bl_count[Ue]--,Re-=2}while(Re>0);for(y=Ue;y!==0;y--)for(J=k.bl_count[y];J!==0;)ee=k.heap[--d],!(ee>xe)&&(_e[ee*2+1]!==y&&(k.opt_len+=(y-_e[ee*2+1])*_e[ee*2],_e[ee*2+1]=y),J--)}}function E(k,ge,_e){var xe=new Array(S+1),U=0,se,v;for(se=1;se<=S;se++)xe[se]=U=U+_e[se-1]<<1;for(v=0;v<=ge;v++){var me=k[v*2+1];me!==0&&(k[v*2]=T(xe[me]++,me))}}function D(){var k,ge,_e,xe,U,se=new Array(S+1);for(_e=0,xe=0;xe<h-1;xe++)for(H[xe]=_e,k=0;k<1<<V[xe];k++)ne[_e++]=xe;for(ne[_e-1]=xe,U=0,xe=0;xe<16;xe++)for(A[xe]=U,k=0;k<1<<ae[xe];k++)$[U++]=xe;for(U>>=7;xe<x;xe++)for(A[xe]=U<<7,k=0;k<1<<ae[xe]-7;k++)$[256+U++]=xe;for(ge=0;ge<=S;ge++)se[ge]=0;for(k=0;k<=143;)Z[k*2+1]=8,k++,se[8]++;for(;k<=255;)Z[k*2+1]=9,k++,se[9]++;for(;k<=279;)Z[k*2+1]=7,k++,se[7]++;for(;k<=287;)Z[k*2+1]=8,k++,se[8]++;for(E(Z,g+1,se),k=0;k<x;k++)le[k*2+1]=5,le[k*2]=T(k,5);F=new I(Z,V,c+1,g,S),z=new I(le,ae,0,x,S),Y=new I(new Array(0),Se,0,_,w)}function B(k){var ge;for(ge=0;ge<g;ge++)k.dyn_ltree[ge*2]=0;for(ge=0;ge<x;ge++)k.dyn_dtree[ge*2]=0;for(ge=0;ge<_;ge++)k.bl_tree[ge*2]=0;k.dyn_ltree[L*2]=1,k.opt_len=k.static_len=0,k.last_lit=k.matches=0}function K(k){k.bi_valid>8?ye(k,k.bi_buf):k.bi_valid>0&&(k.pending_buf[k.pending++]=k.bi_buf),k.bi_buf=0,k.bi_valid=0}function oe(k,ge,_e,xe){K(k),ye(k,_e),ye(k,~_e),t.arraySet(k.pending_buf,k.window,ge,_e,k.pending),k.pending+=_e}function q(k,ge,_e,xe){var U=ge*2,se=_e*2;return k[U]<k[se]||k[U]===k[se]&&xe[ge]<=xe[_e]}function Q(k,ge,_e){for(var xe=k.heap[_e],U=_e<<1;U<=k.heap_len&&(U<k.heap_len&&q(ge,k.heap[U+1],k.heap[U],k.depth)&&U++,!q(ge,xe,k.heap[U],k.depth));)k.heap[_e]=k.heap[U],_e=U,U<<=1;k.heap[_e]=xe}function te(k,ge,_e){var xe,U,se=0,v,me;if(k.last_lit!==0)do xe=k.pending_buf[k.d_buf+se*2]<<8|k.pending_buf[k.d_buf+se*2+1],U=k.pending_buf[k.l_buf+se],se++,xe===0?ke(k,U,ge):(v=ne[U],ke(k,v+c+1,ge),me=V[v],me!==0&&(U-=H[v],we(k,U,me)),xe--,v=ve(xe),ke(k,v,_e),me=ae[v],me!==0&&(xe-=A[v],we(k,xe,me)));while(se<k.last_lit);ke(k,L,ge)}function ie(k,ge){var _e=ge.dyn_tree,xe=ge.stat_desc.static_tree,U=ge.stat_desc.has_stree,se=ge.stat_desc.elems,v,me,Ue=-1,d;for(k.heap_len=0,k.heap_max=P,v=0;v<se;v++)_e[v*2]!==0?(k.heap[++k.heap_len]=Ue=v,k.depth[v]=0):_e[v*2+1]=0;for(;k.heap_len<2;)d=k.heap[++k.heap_len]=Ue<2?++Ue:0,_e[d*2]=1,k.depth[d]=0,k.opt_len--,U&&(k.static_len-=xe[d*2+1]);for(ge.max_code=Ue,v=k.heap_len>>1;v>=1;v--)Q(k,_e,v);d=se;do v=k.heap[1],k.heap[1]=k.heap[k.heap_len--],Q(k,_e,1),me=k.heap[1],k.heap[--k.heap_max]=v,k.heap[--k.heap_max]=me,_e[d*2]=_e[v*2]+_e[me*2],k.depth[d]=(k.depth[v]>=k.depth[me]?k.depth[v]:k.depth[me])+1,_e[v*2+1]=_e[me*2+1]=d,k.heap[1]=d++,Q(k,_e,1);while(k.heap_len>=2);k.heap[--k.heap_max]=k.heap[1],pe(k,ge),E(_e,Ue,k.bl_count)}function ue(k,ge,_e){var xe,U=-1,se,v=ge[1],me=0,Ue=7,d=4;for(v===0&&(Ue=138,d=3),ge[(_e+1)*2+1]=65535,xe=0;xe<=_e;xe++)se=v,v=ge[(xe+1)*2+1],!(++me<Ue&&se===v)&&(me<d?k.bl_tree[se*2]+=me:se!==0?(se!==U&&k.bl_tree[se*2]++,k.bl_tree[j*2]++):me<=10?k.bl_tree[M*2]++:k.bl_tree[W*2]++,me=0,U=se,v===0?(Ue=138,d=3):se===v?(Ue=6,d=3):(Ue=7,d=4))}function Ee(k,ge,_e){var xe,U=-1,se,v=ge[1],me=0,Ue=7,d=4;for(v===0&&(Ue=138,d=3),xe=0;xe<=_e;xe++)if(se=v,v=ge[(xe+1)*2+1],!(++me<Ue&&se===v)){if(me<d)do ke(k,se,k.bl_tree);while(--me!==0);else se!==0?(se!==U&&(ke(k,se,k.bl_tree),me--),ke(k,j,k.bl_tree),we(k,me-3,2)):me<=10?(ke(k,M,k.bl_tree),we(k,me-3,3)):(ke(k,W,k.bl_tree),we(k,me-11,7));me=0,U=se,v===0?(Ue=138,d=3):se===v?(Ue=6,d=3):(Ue=7,d=4)}}function be(k){var ge;for(ue(k,k.dyn_ltree,k.l_desc.max_code),ue(k,k.dyn_dtree,k.d_desc.max_code),ie(k,k.bl_desc),ge=_-1;ge>=3&&k.bl_tree[fe[ge]*2+1]===0;ge--);return k.opt_len+=3*(ge+1)+5+5+4,ge}function Pe(k,ge,_e,xe){var U;for(we(k,ge-257,5),we(k,_e-1,5),we(k,xe-4,4),U=0;U<xe;U++)we(k,k.bl_tree[fe[U]*2+1],3);Ee(k,k.dyn_ltree,ge-1),Ee(k,k.dyn_dtree,_e-1)}function Ae(k){var ge=4093624447,_e;for(_e=0;_e<=31;_e++,ge>>>=1)if(ge&1&&k.dyn_ltree[_e*2]!==0)return i;if(k.dyn_ltree[18]!==0||k.dyn_ltree[20]!==0||k.dyn_ltree[26]!==0)return r;for(_e=32;_e<c;_e++)if(k.dyn_ltree[_e*2]!==0)return r;return i}var Me=!1;function Ne(k){Me||(D(),Me=!0),k.l_desc=new ce(k.dyn_ltree,F),k.d_desc=new ce(k.dyn_dtree,z),k.bl_desc=new ce(k.bl_tree,Y),k.bi_buf=0,k.bi_valid=0,B(k)}function Fe(k,ge,_e,xe){we(k,(a<<1)+(xe?1:0),3),oe(k,ge,_e)}function We(k){we(k,l<<1,3),ke(k,L,Z),R(k)}function Ye(k,ge,_e,xe){var U,se,v=0;k.level>0?(k.strm.data_type===s&&(k.strm.data_type=Ae(k)),ie(k,k.l_desc),ie(k,k.d_desc),v=be(k),U=k.opt_len+3+7>>>3,se=k.static_len+3+7>>>3,se<=U&&(U=se)):U=se=_e+5,_e+4<=U&&ge!==-1?Fe(k,ge,_e,xe):k.strategy===n||se===U?(we(k,(l<<1)+(xe?1:0),3),te(k,Z,le)):(we(k,(u<<1)+(xe?1:0),3),Pe(k,k.l_desc.max_code+1,k.d_desc.max_code+1,v+1),te(k,k.dyn_ltree,k.dyn_dtree)),B(k),xe&&K(k)}function at(k,ge,_e){return k.pending_buf[k.d_buf+k.last_lit*2]=ge>>>8&255,k.pending_buf[k.d_buf+k.last_lit*2+1]=ge&255,k.pending_buf[k.l_buf+k.last_lit]=_e&255,k.last_lit++,ge===0?k.dyn_ltree[_e*2]++:(k.matches++,ge--,k.dyn_ltree[(ne[_e]+c+1)*2]++,k.dyn_dtree[ve(ge)*2]++),k.last_lit===k.lit_bufsize-1}e._tr_init=Ne,e._tr_stored_block=Fe,e._tr_flush_block=Ye,e._tr_tally=at,e._tr_align=We}}),Xa=Te({"node_modules/jszip/node_modules/pako/lib/zlib/adler32.js"(e,t){function n(i,r,s,o){for(var a=i&65535|0,l=i>>>16&65535|0,u=0;s!==0;){u=s>2e3?2e3:s,s-=u;do a=a+r[o++]|0,l=l+a|0;while(--u);a%=65521,l%=65521}return a|l<<16|0}t.exports=n}}),Ja=Te({"node_modules/jszip/node_modules/pako/lib/zlib/crc32.js"(e,t){function n(){for(var s,o=[],a=0;a<256;a++){s=a;for(var l=0;l<8;l++)s=s&1?3988292384^s>>>1:s>>>1;o[a]=s}return o}var i=n();function r(s,o,a,l){var u=i,f=l+a;s^=-1;for(var m=l;m<f;m++)s=s>>>8^u[(s^o[m])&255];return s^-1}t.exports=r}}),ws=Te({"node_modules/jszip/node_modules/pako/lib/zlib/messages.js"(e,t){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}}}),Rd=Te({"node_modules/jszip/node_modules/pako/lib/zlib/deflate.js"(e){var t=pn(),n=Pd(),i=Xa(),r=Ja(),s=ws(),o=0,a=1,l=3,u=4,f=5,m=0,h=1,c=-2,g=-3,x=-5,_=-1,P=1,S=2,b=3,w=4,L=0,j=2,M=8,W=9,V=15,ae=8,Se=29,fe=256,re=fe+1+Se,Z=30,le=19,$=2*re+1,ne=15,H=3,A=258,I=A+H+1,F=32,z=42,Y=69,ce=73,ve=91,ye=103,we=113,ke=666,T=1,R=2,pe=3,E=4,D=3;function B(d,J){return d.msg=s[J],J}function K(d){return(d<<1)-(d>4?9:0)}function oe(d){for(var J=d.length;--J>=0;)d[J]=0}function q(d){var J=d.state,ee=J.pending;ee>d.avail_out&&(ee=d.avail_out),ee!==0&&(t.arraySet(d.output,J.pending_buf,J.pending_out,ee,d.next_out),d.next_out+=ee,J.pending_out+=ee,d.total_out+=ee,d.avail_out-=ee,J.pending-=ee,J.pending===0&&(J.pending_out=0))}function Q(d,J){n._tr_flush_block(d,d.block_start>=0?d.block_start:-1,d.strstart-d.block_start,J),d.block_start=d.strstart,q(d.strm)}function te(d,J){d.pending_buf[d.pending++]=J}function ie(d,J){d.pending_buf[d.pending++]=J>>>8&255,d.pending_buf[d.pending++]=J&255}function ue(d,J,ee,y){var O=d.avail_in;return O>y&&(O=y),O===0?0:(d.avail_in-=O,t.arraySet(J,d.input,d.next_in,O,ee),d.state.wrap===1?d.adler=i(d.adler,J,O,ee):d.state.wrap===2&&(d.adler=r(d.adler,J,O,ee)),d.next_in+=O,d.total_in+=O,O)}function Ee(d,J){var ee=d.max_chain_length,y=d.strstart,O,G,Re=d.prev_length,Ce=d.nice_match,De=d.strstart>d.w_size-I?d.strstart-(d.w_size-I):0,He=d.window,wt=d.w_mask,Qe=d.prev,Ve=d.strstart+A,rt=He[y+Re-1],ft=He[y+Re];d.prev_length>=d.good_match&&(ee>>=2),Ce>d.lookahead&&(Ce=d.lookahead);do if(O=J,!(He[O+Re]!==ft||He[O+Re-1]!==rt||He[O]!==He[y]||He[++O]!==He[y+1])){y+=2,O++;do;while(He[++y]===He[++O]&&He[++y]===He[++O]&&He[++y]===He[++O]&&He[++y]===He[++O]&&He[++y]===He[++O]&&He[++y]===He[++O]&&He[++y]===He[++O]&&He[++y]===He[++O]&&y<Ve);if(G=A-(Ve-y),y=Ve-A,G>Re){if(d.match_start=J,Re=G,G>=Ce)break;rt=He[y+Re-1],ft=He[y+Re]}}while((J=Qe[J&wt])>De&&--ee!==0);return Re<=d.lookahead?Re:d.lookahead}function be(d){var J=d.w_size,ee,y,O,G,Re;do{if(G=d.window_size-d.lookahead-d.strstart,d.strstart>=J+(J-I)){t.arraySet(d.window,d.window,J,J,0),d.match_start-=J,d.strstart-=J,d.block_start-=J,y=d.hash_size,ee=y;do O=d.head[--ee],d.head[ee]=O>=J?O-J:0;while(--y);y=J,ee=y;do O=d.prev[--ee],d.prev[ee]=O>=J?O-J:0;while(--y);G+=J}if(d.strm.avail_in===0)break;if(y=ue(d.strm,d.window,d.strstart+d.lookahead,G),d.lookahead+=y,d.lookahead+d.insert>=H)for(Re=d.strstart-d.insert,d.ins_h=d.window[Re],d.ins_h=(d.ins_h<<d.hash_shift^d.window[Re+1])&d.hash_mask;d.insert&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[Re+H-1])&d.hash_mask,d.prev[Re&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=Re,Re++,d.insert--,!(d.lookahead+d.insert<H)););}while(d.lookahead<I&&d.strm.avail_in!==0)}function Pe(d,J){var ee=65535;for(ee>d.pending_buf_size-5&&(ee=d.pending_buf_size-5);;){if(d.lookahead<=1){if(be(d),d.lookahead===0&&J===o)return T;if(d.lookahead===0)break}d.strstart+=d.lookahead,d.lookahead=0;var y=d.block_start+ee;if((d.strstart===0||d.strstart>=y)&&(d.lookahead=d.strstart-y,d.strstart=y,Q(d,!1),d.strm.avail_out===0)||d.strstart-d.block_start>=d.w_size-I&&(Q(d,!1),d.strm.avail_out===0))return T}return d.insert=0,J===u?(Q(d,!0),d.strm.avail_out===0?pe:E):(d.strstart>d.block_start&&(Q(d,!1),d.strm.avail_out===0),T)}function Ae(d,J){for(var ee,y;;){if(d.lookahead<I){if(be(d),d.lookahead<I&&J===o)return T;if(d.lookahead===0)break}if(ee=0,d.lookahead>=H&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+H-1])&d.hash_mask,ee=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),ee!==0&&d.strstart-ee<=d.w_size-I&&(d.match_length=Ee(d,ee)),d.match_length>=H)if(y=n._tr_tally(d,d.strstart-d.match_start,d.match_length-H),d.lookahead-=d.match_length,d.match_length<=d.max_lazy_match&&d.lookahead>=H){d.match_length--;do d.strstart++,d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+H-1])&d.hash_mask,ee=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart;while(--d.match_length!==0);d.strstart++}else d.strstart+=d.match_length,d.match_length=0,d.ins_h=d.window[d.strstart],d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+1])&d.hash_mask;else y=n._tr_tally(d,0,d.window[d.strstart]),d.lookahead--,d.strstart++;if(y&&(Q(d,!1),d.strm.avail_out===0))return T}return d.insert=d.strstart<H-1?d.strstart:H-1,J===u?(Q(d,!0),d.strm.avail_out===0?pe:E):d.last_lit&&(Q(d,!1),d.strm.avail_out===0)?T:R}function Me(d,J){for(var ee,y,O;;){if(d.lookahead<I){if(be(d),d.lookahead<I&&J===o)return T;if(d.lookahead===0)break}if(ee=0,d.lookahead>=H&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+H-1])&d.hash_mask,ee=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart),d.prev_length=d.match_length,d.prev_match=d.match_start,d.match_length=H-1,ee!==0&&d.prev_length<d.max_lazy_match&&d.strstart-ee<=d.w_size-I&&(d.match_length=Ee(d,ee),d.match_length<=5&&(d.strategy===P||d.match_length===H&&d.strstart-d.match_start>4096)&&(d.match_length=H-1)),d.prev_length>=H&&d.match_length<=d.prev_length){O=d.strstart+d.lookahead-H,y=n._tr_tally(d,d.strstart-1-d.prev_match,d.prev_length-H),d.lookahead-=d.prev_length-1,d.prev_length-=2;do++d.strstart<=O&&(d.ins_h=(d.ins_h<<d.hash_shift^d.window[d.strstart+H-1])&d.hash_mask,ee=d.prev[d.strstart&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=d.strstart);while(--d.prev_length!==0);if(d.match_available=0,d.match_length=H-1,d.strstart++,y&&(Q(d,!1),d.strm.avail_out===0))return T}else if(d.match_available){if(y=n._tr_tally(d,0,d.window[d.strstart-1]),y&&Q(d,!1),d.strstart++,d.lookahead--,d.strm.avail_out===0)return T}else d.match_available=1,d.strstart++,d.lookahead--}return d.match_available&&(y=n._tr_tally(d,0,d.window[d.strstart-1]),d.match_available=0),d.insert=d.strstart<H-1?d.strstart:H-1,J===u?(Q(d,!0),d.strm.avail_out===0?pe:E):d.last_lit&&(Q(d,!1),d.strm.avail_out===0)?T:R}function Ne(d,J){for(var ee,y,O,G,Re=d.window;;){if(d.lookahead<=A){if(be(d),d.lookahead<=A&&J===o)return T;if(d.lookahead===0)break}if(d.match_length=0,d.lookahead>=H&&d.strstart>0&&(O=d.strstart-1,y=Re[O],y===Re[++O]&&y===Re[++O]&&y===Re[++O])){G=d.strstart+A;do;while(y===Re[++O]&&y===Re[++O]&&y===Re[++O]&&y===Re[++O]&&y===Re[++O]&&y===Re[++O]&&y===Re[++O]&&y===Re[++O]&&O<G);d.match_length=A-(G-O),d.match_length>d.lookahead&&(d.match_length=d.lookahead)}if(d.match_length>=H?(ee=n._tr_tally(d,1,d.match_length-H),d.lookahead-=d.match_length,d.strstart+=d.match_length,d.match_length=0):(ee=n._tr_tally(d,0,d.window[d.strstart]),d.lookahead--,d.strstart++),ee&&(Q(d,!1),d.strm.avail_out===0))return T}return d.insert=0,J===u?(Q(d,!0),d.strm.avail_out===0?pe:E):d.last_lit&&(Q(d,!1),d.strm.avail_out===0)?T:R}function Fe(d,J){for(var ee;;){if(d.lookahead===0&&(be(d),d.lookahead===0)){if(J===o)return T;break}if(d.match_length=0,ee=n._tr_tally(d,0,d.window[d.strstart]),d.lookahead--,d.strstart++,ee&&(Q(d,!1),d.strm.avail_out===0))return T}return d.insert=0,J===u?(Q(d,!0),d.strm.avail_out===0?pe:E):d.last_lit&&(Q(d,!1),d.strm.avail_out===0)?T:R}function We(d,J,ee,y,O){this.good_length=d,this.max_lazy=J,this.nice_length=ee,this.max_chain=y,this.func=O}var Ye;Ye=[new We(0,0,0,0,Pe),new We(4,4,8,4,Ae),new We(4,5,16,8,Ae),new We(4,6,32,32,Ae),new We(4,4,16,16,Me),new We(8,16,32,32,Me),new We(8,16,128,128,Me),new We(8,32,128,256,Me),new We(32,128,258,1024,Me),new We(32,258,258,4096,Me)];function at(d){d.window_size=2*d.w_size,oe(d.head),d.max_lazy_match=Ye[d.level].max_lazy,d.good_match=Ye[d.level].good_length,d.nice_match=Ye[d.level].nice_length,d.max_chain_length=Ye[d.level].max_chain,d.strstart=0,d.block_start=0,d.lookahead=0,d.insert=0,d.match_length=d.prev_length=H-1,d.match_available=0,d.ins_h=0}function k(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=M,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new t.Buf16($*2),this.dyn_dtree=new t.Buf16((2*Z+1)*2),this.bl_tree=new t.Buf16((2*le+1)*2),oe(this.dyn_ltree),oe(this.dyn_dtree),oe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new t.Buf16(ne+1),this.heap=new t.Buf16(2*re+1),oe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new t.Buf16(2*re+1),oe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ge(d){var J;return!d||!d.state?B(d,c):(d.total_in=d.total_out=0,d.data_type=j,J=d.state,J.pending=0,J.pending_out=0,J.wrap<0&&(J.wrap=-J.wrap),J.status=J.wrap?z:we,d.adler=J.wrap===2?0:1,J.last_flush=o,n._tr_init(J),m)}function _e(d){var J=ge(d);return J===m&&at(d.state),J}function xe(d,J){return!d||!d.state||d.state.wrap!==2?c:(d.state.gzhead=J,m)}function U(d,J,ee,y,O,G){if(!d)return c;var Re=1;if(J===_&&(J=6),y<0?(Re=0,y=-y):y>15&&(Re=2,y-=16),O<1||O>W||ee!==M||y<8||y>15||J<0||J>9||G<0||G>w)return B(d,c);y===8&&(y=9);var Ce=new k;return d.state=Ce,Ce.strm=d,Ce.wrap=Re,Ce.gzhead=null,Ce.w_bits=y,Ce.w_size=1<<Ce.w_bits,Ce.w_mask=Ce.w_size-1,Ce.hash_bits=O+7,Ce.hash_size=1<<Ce.hash_bits,Ce.hash_mask=Ce.hash_size-1,Ce.hash_shift=~~((Ce.hash_bits+H-1)/H),Ce.window=new t.Buf8(Ce.w_size*2),Ce.head=new t.Buf16(Ce.hash_size),Ce.prev=new t.Buf16(Ce.w_size),Ce.lit_bufsize=1<<O+6,Ce.pending_buf_size=Ce.lit_bufsize*4,Ce.pending_buf=new t.Buf8(Ce.pending_buf_size),Ce.d_buf=1*Ce.lit_bufsize,Ce.l_buf=3*Ce.lit_bufsize,Ce.level=J,Ce.strategy=G,Ce.method=ee,_e(d)}function se(d,J){return U(d,J,M,V,ae,L)}function v(d,J){var ee,y,O,G;if(!d||!d.state||J>f||J<0)return d?B(d,c):c;if(y=d.state,!d.output||!d.input&&d.avail_in!==0||y.status===ke&&J!==u)return B(d,d.avail_out===0?x:c);if(y.strm=d,ee=y.last_flush,y.last_flush=J,y.status===z)if(y.wrap===2)d.adler=0,te(y,31),te(y,139),te(y,8),y.gzhead?(te(y,(y.gzhead.text?1:0)+(y.gzhead.hcrc?2:0)+(y.gzhead.extra?4:0)+(y.gzhead.name?8:0)+(y.gzhead.comment?16:0)),te(y,y.gzhead.time&255),te(y,y.gzhead.time>>8&255),te(y,y.gzhead.time>>16&255),te(y,y.gzhead.time>>24&255),te(y,y.level===9?2:y.strategy>=S||y.level<2?4:0),te(y,y.gzhead.os&255),y.gzhead.extra&&y.gzhead.extra.length&&(te(y,y.gzhead.extra.length&255),te(y,y.gzhead.extra.length>>8&255)),y.gzhead.hcrc&&(d.adler=r(d.adler,y.pending_buf,y.pending,0)),y.gzindex=0,y.status=Y):(te(y,0),te(y,0),te(y,0),te(y,0),te(y,0),te(y,y.level===9?2:y.strategy>=S||y.level<2?4:0),te(y,D),y.status=we);else{var Re=M+(y.w_bits-8<<4)<<8,Ce=-1;y.strategy>=S||y.level<2?Ce=0:y.level<6?Ce=1:y.level===6?Ce=2:Ce=3,Re|=Ce<<6,y.strstart!==0&&(Re|=F),Re+=31-Re%31,y.status=we,ie(y,Re),y.strstart!==0&&(ie(y,d.adler>>>16),ie(y,d.adler&65535)),d.adler=1}if(y.status===Y)if(y.gzhead.extra){for(O=y.pending;y.gzindex<(y.gzhead.extra.length&65535)&&!(y.pending===y.pending_buf_size&&(y.gzhead.hcrc&&y.pending>O&&(d.adler=r(d.adler,y.pending_buf,y.pending-O,O)),q(d),O=y.pending,y.pending===y.pending_buf_size));)te(y,y.gzhead.extra[y.gzindex]&255),y.gzindex++;y.gzhead.hcrc&&y.pending>O&&(d.adler=r(d.adler,y.pending_buf,y.pending-O,O)),y.gzindex===y.gzhead.extra.length&&(y.gzindex=0,y.status=ce)}else y.status=ce;if(y.status===ce)if(y.gzhead.name){O=y.pending;do{if(y.pending===y.pending_buf_size&&(y.gzhead.hcrc&&y.pending>O&&(d.adler=r(d.adler,y.pending_buf,y.pending-O,O)),q(d),O=y.pending,y.pending===y.pending_buf_size)){G=1;break}y.gzindex<y.gzhead.name.length?G=y.gzhead.name.charCodeAt(y.gzindex++)&255:G=0,te(y,G)}while(G!==0);y.gzhead.hcrc&&y.pending>O&&(d.adler=r(d.adler,y.pending_buf,y.pending-O,O)),G===0&&(y.gzindex=0,y.status=ve)}else y.status=ve;if(y.status===ve)if(y.gzhead.comment){O=y.pending;do{if(y.pending===y.pending_buf_size&&(y.gzhead.hcrc&&y.pending>O&&(d.adler=r(d.adler,y.pending_buf,y.pending-O,O)),q(d),O=y.pending,y.pending===y.pending_buf_size)){G=1;break}y.gzindex<y.gzhead.comment.length?G=y.gzhead.comment.charCodeAt(y.gzindex++)&255:G=0,te(y,G)}while(G!==0);y.gzhead.hcrc&&y.pending>O&&(d.adler=r(d.adler,y.pending_buf,y.pending-O,O)),G===0&&(y.status=ye)}else y.status=ye;if(y.status===ye&&(y.gzhead.hcrc?(y.pending+2>y.pending_buf_size&&q(d),y.pending+2<=y.pending_buf_size&&(te(y,d.adler&255),te(y,d.adler>>8&255),d.adler=0,y.status=we)):y.status=we),y.pending!==0){if(q(d),d.avail_out===0)return y.last_flush=-1,m}else if(d.avail_in===0&&K(J)<=K(ee)&&J!==u)return B(d,x);if(y.status===ke&&d.avail_in!==0)return B(d,x);if(d.avail_in!==0||y.lookahead!==0||J!==o&&y.status!==ke){var De=y.strategy===S?Fe(y,J):y.strategy===b?Ne(y,J):Ye[y.level].func(y,J);if((De===pe||De===E)&&(y.status=ke),De===T||De===pe)return d.avail_out===0&&(y.last_flush=-1),m;if(De===R&&(J===a?n._tr_align(y):J!==f&&(n._tr_stored_block(y,0,0,!1),J===l&&(oe(y.head),y.lookahead===0&&(y.strstart=0,y.block_start=0,y.insert=0))),q(d),d.avail_out===0))return y.last_flush=-1,m}return J!==u?m:y.wrap<=0?h:(y.wrap===2?(te(y,d.adler&255),te(y,d.adler>>8&255),te(y,d.adler>>16&255),te(y,d.adler>>24&255),te(y,d.total_in&255),te(y,d.total_in>>8&255),te(y,d.total_in>>16&255),te(y,d.total_in>>24&255)):(ie(y,d.adler>>>16),ie(y,d.adler&65535)),q(d),y.wrap>0&&(y.wrap=-y.wrap),y.pending!==0?m:h)}function me(d){var J;return!d||!d.state?c:(J=d.state.status,J!==z&&J!==Y&&J!==ce&&J!==ve&&J!==ye&&J!==we&&J!==ke?B(d,c):(d.state=null,J===we?B(d,g):m))}function Ue(d,J){var ee=J.length,y,O,G,Re,Ce,De,He,wt;if(!d||!d.state||(y=d.state,Re=y.wrap,Re===2||Re===1&&y.status!==z||y.lookahead))return c;for(Re===1&&(d.adler=i(d.adler,J,ee,0)),y.wrap=0,ee>=y.w_size&&(Re===0&&(oe(y.head),y.strstart=0,y.block_start=0,y.insert=0),wt=new t.Buf8(y.w_size),t.arraySet(wt,J,ee-y.w_size,y.w_size,0),J=wt,ee=y.w_size),Ce=d.avail_in,De=d.next_in,He=d.input,d.avail_in=ee,d.next_in=0,d.input=J,be(y);y.lookahead>=H;){O=y.strstart,G=y.lookahead-(H-1);do y.ins_h=(y.ins_h<<y.hash_shift^y.window[O+H-1])&y.hash_mask,y.prev[O&y.w_mask]=y.head[y.ins_h],y.head[y.ins_h]=O,O++;while(--G);y.strstart=O,y.lookahead=H-1,be(y)}return y.strstart+=y.lookahead,y.block_start=y.strstart,y.insert=y.lookahead,y.lookahead=0,y.match_length=y.prev_length=H-1,y.match_available=0,d.next_in=De,d.input=He,d.avail_in=Ce,y.wrap=Re,m}e.deflateInit=se,e.deflateInit2=U,e.deflateReset=_e,e.deflateResetKeep=ge,e.deflateSetHeader=xe,e.deflate=v,e.deflateEnd=me,e.deflateSetDictionary=Ue,e.deflateInfo="pako deflate (from Nodeca project)"}}),Qa=Te({"node_modules/jszip/node_modules/pako/lib/utils/strings.js"(e){var t=pn(),n=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch{n=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{i=!1}var r=new t.Buf8(256);for(s=0;s<256;s++)r[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;var s;r[254]=r[254]=1,e.string2buf=function(a){var l,u,f,m,h,c=a.length,g=0;for(m=0;m<c;m++)u=a.charCodeAt(m),(u&64512)===55296&&m+1<c&&(f=a.charCodeAt(m+1),(f&64512)===56320&&(u=65536+(u-55296<<10)+(f-56320),m++)),g+=u<128?1:u<2048?2:u<65536?3:4;for(l=new t.Buf8(g),h=0,m=0;h<g;m++)u=a.charCodeAt(m),(u&64512)===55296&&m+1<c&&(f=a.charCodeAt(m+1),(f&64512)===56320&&(u=65536+(u-55296<<10)+(f-56320),m++)),u<128?l[h++]=u:u<2048?(l[h++]=192|u>>>6,l[h++]=128|u&63):u<65536?(l[h++]=224|u>>>12,l[h++]=128|u>>>6&63,l[h++]=128|u&63):(l[h++]=240|u>>>18,l[h++]=128|u>>>12&63,l[h++]=128|u>>>6&63,l[h++]=128|u&63);return l};function o(a,l){if(l<65534&&(a.subarray&&i||!a.subarray&&n))return String.fromCharCode.apply(null,t.shrinkBuf(a,l));for(var u="",f=0;f<l;f++)u+=String.fromCharCode(a[f]);return u}e.buf2binstring=function(a){return o(a,a.length)},e.binstring2buf=function(a){for(var l=new t.Buf8(a.length),u=0,f=l.length;u<f;u++)l[u]=a.charCodeAt(u);return l},e.buf2string=function(a,l){var u,f,m,h,c=l||a.length,g=new Array(c*2);for(f=0,u=0;u<c;){if(m=a[u++],m<128){g[f++]=m;continue}if(h=r[m],h>4){g[f++]=65533,u+=h-1;continue}for(m&=h===2?31:h===3?15:7;h>1&&u<c;)m=m<<6|a[u++]&63,h--;if(h>1){g[f++]=65533;continue}m<65536?g[f++]=m:(m-=65536,g[f++]=55296|m>>10&1023,g[f++]=56320|m&1023)}return o(g,f)},e.utf8border=function(a,l){var u;for(l=l||a.length,l>a.length&&(l=a.length),u=l-1;u>=0&&(a[u]&192)===128;)u--;return u<0||u===0?l:u+r[a[u]]>l?u:l}}}),el=Te({"node_modules/jszip/node_modules/pako/lib/zlib/zstream.js"(e,t){function n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}t.exports=n}}),Ld=Te({"node_modules/jszip/node_modules/pako/lib/deflate.js"(e){var t=Rd(),n=pn(),i=Qa(),r=ws(),s=el(),o=Object.prototype.toString,a=0,l=4,u=0,f=1,m=2,h=-1,c=0,g=8;function x(b){if(!(this instanceof x))return new x(b);this.options=n.assign({level:h,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:c,to:""},b||{});var w=this.options;w.raw&&w.windowBits>0?w.windowBits=-w.windowBits:w.gzip&&w.windowBits>0&&w.windowBits<16&&(w.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var L=t.deflateInit2(this.strm,w.level,w.method,w.windowBits,w.memLevel,w.strategy);if(L!==u)throw new Error(r[L]);if(w.header&&t.deflateSetHeader(this.strm,w.header),w.dictionary){var j;if(typeof w.dictionary=="string"?j=i.string2buf(w.dictionary):o.call(w.dictionary)==="[object ArrayBuffer]"?j=new Uint8Array(w.dictionary):j=w.dictionary,L=t.deflateSetDictionary(this.strm,j),L!==u)throw new Error(r[L]);this._dict_set=!0}}x.prototype.push=function(b,w){var L=this.strm,j=this.options.chunkSize,M,W;if(this.ended)return!1;W=w===~~w?w:w===!0?l:a,typeof b=="string"?L.input=i.string2buf(b):o.call(b)==="[object ArrayBuffer]"?L.input=new Uint8Array(b):L.input=b,L.next_in=0,L.avail_in=L.input.length;do{if(L.avail_out===0&&(L.output=new n.Buf8(j),L.next_out=0,L.avail_out=j),M=t.deflate(L,W),M!==f&&M!==u)return this.onEnd(M),this.ended=!0,!1;(L.avail_out===0||L.avail_in===0&&(W===l||W===m))&&(this.options.to==="string"?this.onData(i.buf2binstring(n.shrinkBuf(L.output,L.next_out))):this.onData(n.shrinkBuf(L.output,L.next_out)))}while((L.avail_in>0||L.avail_out===0)&&M!==f);return W===l?(M=t.deflateEnd(this.strm),this.onEnd(M),this.ended=!0,M===u):(W===m&&(this.onEnd(u),L.avail_out=0),!0)},x.prototype.onData=function(b){this.chunks.push(b)},x.prototype.onEnd=function(b){b===u&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg};function _(b,w){var L=new x(w);if(L.push(b,!0),L.err)throw L.msg||r[L.err];return L.result}function P(b,w){return w=w||{},w.raw=!0,_(b,w)}function S(b,w){return w=w||{},w.gzip=!0,_(b,w)}e.Deflate=x,e.deflate=_,e.deflateRaw=P,e.gzip=S}}),Md=Te({"node_modules/jszip/node_modules/pako/lib/zlib/inffast.js"(e,t){var n=30,i=12;t.exports=function(s,o){var a,l,u,f,m,h,c,g,x,_,P,S,b,w,L,j,M,W,V,ae,Se,fe,re,Z,le;a=s.state,l=s.next_in,Z=s.input,u=l+(s.avail_in-5),f=s.next_out,le=s.output,m=f-(o-s.avail_out),h=f+(s.avail_out-257),c=a.dmax,g=a.wsize,x=a.whave,_=a.wnext,P=a.window,S=a.hold,b=a.bits,w=a.lencode,L=a.distcode,j=(1<<a.lenbits)-1,M=(1<<a.distbits)-1;e:do{b<15&&(S+=Z[l++]<<b,b+=8,S+=Z[l++]<<b,b+=8),W=w[S&j];t:for(;;){if(V=W>>>24,S>>>=V,b-=V,V=W>>>16&255,V===0)le[f++]=W&65535;else if(V&16){ae=W&65535,V&=15,V&&(b<V&&(S+=Z[l++]<<b,b+=8),ae+=S&(1<<V)-1,S>>>=V,b-=V),b<15&&(S+=Z[l++]<<b,b+=8,S+=Z[l++]<<b,b+=8),W=L[S&M];n:for(;;){if(V=W>>>24,S>>>=V,b-=V,V=W>>>16&255,V&16){if(Se=W&65535,V&=15,b<V&&(S+=Z[l++]<<b,b+=8,b<V&&(S+=Z[l++]<<b,b+=8)),Se+=S&(1<<V)-1,Se>c){s.msg="invalid distance too far back",a.mode=n;break e}if(S>>>=V,b-=V,V=f-m,Se>V){if(V=Se-V,V>x&&a.sane){s.msg="invalid distance too far back",a.mode=n;break e}if(fe=0,re=P,_===0){if(fe+=g-V,V<ae){ae-=V;do le[f++]=P[fe++];while(--V);fe=f-Se,re=le}}else if(_<V){if(fe+=g+_-V,V-=_,V<ae){ae-=V;do le[f++]=P[fe++];while(--V);if(fe=0,_<ae){V=_,ae-=V;do le[f++]=P[fe++];while(--V);fe=f-Se,re=le}}}else if(fe+=_-V,V<ae){ae-=V;do le[f++]=P[fe++];while(--V);fe=f-Se,re=le}for(;ae>2;)le[f++]=re[fe++],le[f++]=re[fe++],le[f++]=re[fe++],ae-=3;ae&&(le[f++]=re[fe++],ae>1&&(le[f++]=re[fe++]))}else{fe=f-Se;do le[f++]=le[fe++],le[f++]=le[fe++],le[f++]=le[fe++],ae-=3;while(ae>2);ae&&(le[f++]=le[fe++],ae>1&&(le[f++]=le[fe++]))}}else if((V&64)===0){W=L[(W&65535)+(S&(1<<V)-1)];continue n}else{s.msg="invalid distance code",a.mode=n;break e}break}}else if((V&64)===0){W=w[(W&65535)+(S&(1<<V)-1)];continue t}else if(V&32){a.mode=i;break e}else{s.msg="invalid literal/length code",a.mode=n;break e}break}}while(l<u&&f<h);ae=b>>3,l-=ae,b-=ae<<3,S&=(1<<b)-1,s.next_in=l,s.next_out=f,s.avail_in=l<u?5+(u-l):5-(l-u),s.avail_out=f<h?257+(h-f):257-(f-h),a.hold=S,a.bits=b}}}),Od=Te({"node_modules/jszip/node_modules/pako/lib/zlib/inftrees.js"(e,t){var n=pn(),i=15,r=852,s=592,o=0,a=1,l=2,u=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],f=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],m=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(g,x,_,P,S,b,w,L){var j=L.bits,M=0,W=0,V=0,ae=0,Se=0,fe=0,re=0,Z=0,le=0,$=0,ne,H,A,I,F,z=null,Y=0,ce,ve=new n.Buf16(i+1),ye=new n.Buf16(i+1),we=null,ke=0,T,R,pe;for(M=0;M<=i;M++)ve[M]=0;for(W=0;W<P;W++)ve[x[_+W]]++;for(Se=j,ae=i;ae>=1&&ve[ae]===0;ae--);if(Se>ae&&(Se=ae),ae===0)return S[b++]=1<<24|64<<16|0,S[b++]=1<<24|64<<16|0,L.bits=1,0;for(V=1;V<ae&&ve[V]===0;V++);for(Se<V&&(Se=V),Z=1,M=1;M<=i;M++)if(Z<<=1,Z-=ve[M],Z<0)return-1;if(Z>0&&(g===o||ae!==1))return-1;for(ye[1]=0,M=1;M<i;M++)ye[M+1]=ye[M]+ve[M];for(W=0;W<P;W++)x[_+W]!==0&&(w[ye[x[_+W]]++]=W);if(g===o?(z=we=w,ce=19):g===a?(z=u,Y-=257,we=f,ke-=257,ce=256):(z=m,we=h,ce=-1),$=0,W=0,M=V,F=b,fe=Se,re=0,A=-1,le=1<<Se,I=le-1,g===a&&le>r||g===l&&le>s)return 1;for(;;){T=M-re,w[W]<ce?(R=0,pe=w[W]):w[W]>ce?(R=we[ke+w[W]],pe=z[Y+w[W]]):(R=96,pe=0),ne=1<<M-re,H=1<<fe,V=H;do H-=ne,S[F+($>>re)+H]=T<<24|R<<16|pe|0;while(H!==0);for(ne=1<<M-1;$&ne;)ne>>=1;if(ne!==0?($&=ne-1,$+=ne):$=0,W++,--ve[M]===0){if(M===ae)break;M=x[_+w[W]]}if(M>Se&&($&I)!==A){for(re===0&&(re=Se),F+=V,fe=M-re,Z=1<<fe;fe+re<ae&&(Z-=ve[fe+re],!(Z<=0));)fe++,Z<<=1;if(le+=1<<fe,g===a&&le>r||g===l&&le>s)return 1;A=$&I,S[A]=Se<<24|fe<<16|F-b|0}}return $!==0&&(S[F+$]=M-re<<24|64<<16|0),L.bits=Se,0}}}),Ud=Te({"node_modules/jszip/node_modules/pako/lib/zlib/inflate.js"(e){var t=pn(),n=Xa(),i=Ja(),r=Md(),s=Od(),o=0,a=1,l=2,u=4,f=5,m=6,h=0,c=1,g=2,x=-2,_=-3,P=-4,S=-5,b=8,w=1,L=2,j=3,M=4,W=5,V=6,ae=7,Se=8,fe=9,re=10,Z=11,le=12,$=13,ne=14,H=15,A=16,I=17,F=18,z=19,Y=20,ce=21,ve=22,ye=23,we=24,ke=25,T=26,R=27,pe=28,E=29,D=30,B=31,K=32,oe=852,q=592,Q=15,te=Q;function ie(U){return(U>>>24&255)+(U>>>8&65280)+((U&65280)<<8)+((U&255)<<24)}function ue(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new t.Buf16(320),this.work=new t.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Ee(U){var se;return!U||!U.state?x:(se=U.state,U.total_in=U.total_out=se.total=0,U.msg="",se.wrap&&(U.adler=se.wrap&1),se.mode=w,se.last=0,se.havedict=0,se.dmax=32768,se.head=null,se.hold=0,se.bits=0,se.lencode=se.lendyn=new t.Buf32(oe),se.distcode=se.distdyn=new t.Buf32(q),se.sane=1,se.back=-1,h)}function be(U){var se;return!U||!U.state?x:(se=U.state,se.wsize=0,se.whave=0,se.wnext=0,Ee(U))}function Pe(U,se){var v,me;return!U||!U.state||(me=U.state,se<0?(v=0,se=-se):(v=(se>>4)+1,se<48&&(se&=15)),se&&(se<8||se>15))?x:(me.window!==null&&me.wbits!==se&&(me.window=null),me.wrap=v,me.wbits=se,be(U))}function Ae(U,se){var v,me;return U?(me=new ue,U.state=me,me.window=null,v=Pe(U,se),v!==h&&(U.state=null),v):x}function Me(U){return Ae(U,te)}var Ne=!0,Fe,We;function Ye(U){if(Ne){var se;for(Fe=new t.Buf32(512),We=new t.Buf32(32),se=0;se<144;)U.lens[se++]=8;for(;se<256;)U.lens[se++]=9;for(;se<280;)U.lens[se++]=7;for(;se<288;)U.lens[se++]=8;for(s(a,U.lens,0,288,Fe,0,U.work,{bits:9}),se=0;se<32;)U.lens[se++]=5;s(l,U.lens,0,32,We,0,U.work,{bits:5}),Ne=!1}U.lencode=Fe,U.lenbits=9,U.distcode=We,U.distbits=5}function at(U,se,v,me){var Ue,d=U.state;return d.window===null&&(d.wsize=1<<d.wbits,d.wnext=0,d.whave=0,d.window=new t.Buf8(d.wsize)),me>=d.wsize?(t.arraySet(d.window,se,v-d.wsize,d.wsize,0),d.wnext=0,d.whave=d.wsize):(Ue=d.wsize-d.wnext,Ue>me&&(Ue=me),t.arraySet(d.window,se,v-me,Ue,d.wnext),me-=Ue,me?(t.arraySet(d.window,se,v-me,me,0),d.wnext=me,d.whave=d.wsize):(d.wnext+=Ue,d.wnext===d.wsize&&(d.wnext=0),d.whave<d.wsize&&(d.whave+=Ue))),0}function k(U,se){var v,me,Ue,d,J,ee,y,O,G,Re,Ce,De,He,wt,Qe=0,Ve,rt,ft,dt,jt,zt,it,X,C=new t.Buf8(4),N,xt,Cs=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!U||!U.state||!U.output||!U.input&&U.avail_in!==0)return x;v=U.state,v.mode===le&&(v.mode=$),J=U.next_out,Ue=U.output,y=U.avail_out,d=U.next_in,me=U.input,ee=U.avail_in,O=v.hold,G=v.bits,Re=ee,Ce=y,X=h;e:for(;;)switch(v.mode){case w:if(v.wrap===0){v.mode=$;break}for(;G<16;){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}if(v.wrap&2&&O===35615){v.check=0,C[0]=O&255,C[1]=O>>>8&255,v.check=i(v.check,C,2,0),O=0,G=0,v.mode=L;break}if(v.flags=0,v.head&&(v.head.done=!1),!(v.wrap&1)||(((O&255)<<8)+(O>>8))%31){U.msg="incorrect header check",v.mode=D;break}if((O&15)!==b){U.msg="unknown compression method",v.mode=D;break}if(O>>>=4,G-=4,it=(O&15)+8,v.wbits===0)v.wbits=it;else if(it>v.wbits){U.msg="invalid window size",v.mode=D;break}v.dmax=1<<it,U.adler=v.check=1,v.mode=O&512?re:le,O=0,G=0;break;case L:for(;G<16;){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}if(v.flags=O,(v.flags&255)!==b){U.msg="unknown compression method",v.mode=D;break}if(v.flags&57344){U.msg="unknown header flags set",v.mode=D;break}v.head&&(v.head.text=O>>8&1),v.flags&512&&(C[0]=O&255,C[1]=O>>>8&255,v.check=i(v.check,C,2,0)),O=0,G=0,v.mode=j;case j:for(;G<32;){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}v.head&&(v.head.time=O),v.flags&512&&(C[0]=O&255,C[1]=O>>>8&255,C[2]=O>>>16&255,C[3]=O>>>24&255,v.check=i(v.check,C,4,0)),O=0,G=0,v.mode=M;case M:for(;G<16;){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}v.head&&(v.head.xflags=O&255,v.head.os=O>>8),v.flags&512&&(C[0]=O&255,C[1]=O>>>8&255,v.check=i(v.check,C,2,0)),O=0,G=0,v.mode=W;case W:if(v.flags&1024){for(;G<16;){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}v.length=O,v.head&&(v.head.extra_len=O),v.flags&512&&(C[0]=O&255,C[1]=O>>>8&255,v.check=i(v.check,C,2,0)),O=0,G=0}else v.head&&(v.head.extra=null);v.mode=V;case V:if(v.flags&1024&&(De=v.length,De>ee&&(De=ee),De&&(v.head&&(it=v.head.extra_len-v.length,v.head.extra||(v.head.extra=new Array(v.head.extra_len)),t.arraySet(v.head.extra,me,d,De,it)),v.flags&512&&(v.check=i(v.check,me,De,d)),ee-=De,d+=De,v.length-=De),v.length))break e;v.length=0,v.mode=ae;case ae:if(v.flags&2048){if(ee===0)break e;De=0;do it=me[d+De++],v.head&&it&&v.length<65536&&(v.head.name+=String.fromCharCode(it));while(it&&De<ee);if(v.flags&512&&(v.check=i(v.check,me,De,d)),ee-=De,d+=De,it)break e}else v.head&&(v.head.name=null);v.length=0,v.mode=Se;case Se:if(v.flags&4096){if(ee===0)break e;De=0;do it=me[d+De++],v.head&&it&&v.length<65536&&(v.head.comment+=String.fromCharCode(it));while(it&&De<ee);if(v.flags&512&&(v.check=i(v.check,me,De,d)),ee-=De,d+=De,it)break e}else v.head&&(v.head.comment=null);v.mode=fe;case fe:if(v.flags&512){for(;G<16;){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}if(O!==(v.check&65535)){U.msg="header crc mismatch",v.mode=D;break}O=0,G=0}v.head&&(v.head.hcrc=v.flags>>9&1,v.head.done=!0),U.adler=v.check=0,v.mode=le;break;case re:for(;G<32;){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}U.adler=v.check=ie(O),O=0,G=0,v.mode=Z;case Z:if(v.havedict===0)return U.next_out=J,U.avail_out=y,U.next_in=d,U.avail_in=ee,v.hold=O,v.bits=G,g;U.adler=v.check=1,v.mode=le;case le:if(se===f||se===m)break e;case $:if(v.last){O>>>=G&7,G-=G&7,v.mode=R;break}for(;G<3;){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}switch(v.last=O&1,O>>>=1,G-=1,O&3){case 0:v.mode=ne;break;case 1:if(Ye(v),v.mode=Y,se===m){O>>>=2,G-=2;break e}break;case 2:v.mode=I;break;case 3:U.msg="invalid block type",v.mode=D}O>>>=2,G-=2;break;case ne:for(O>>>=G&7,G-=G&7;G<32;){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}if((O&65535)!==(O>>>16^65535)){U.msg="invalid stored block lengths",v.mode=D;break}if(v.length=O&65535,O=0,G=0,v.mode=H,se===m)break e;case H:v.mode=A;case A:if(De=v.length,De){if(De>ee&&(De=ee),De>y&&(De=y),De===0)break e;t.arraySet(Ue,me,d,De,J),ee-=De,d+=De,y-=De,J+=De,v.length-=De;break}v.mode=le;break;case I:for(;G<14;){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}if(v.nlen=(O&31)+257,O>>>=5,G-=5,v.ndist=(O&31)+1,O>>>=5,G-=5,v.ncode=(O&15)+4,O>>>=4,G-=4,v.nlen>286||v.ndist>30){U.msg="too many length or distance symbols",v.mode=D;break}v.have=0,v.mode=F;case F:for(;v.have<v.ncode;){for(;G<3;){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}v.lens[Cs[v.have++]]=O&7,O>>>=3,G-=3}for(;v.have<19;)v.lens[Cs[v.have++]]=0;if(v.lencode=v.lendyn,v.lenbits=7,N={bits:v.lenbits},X=s(o,v.lens,0,19,v.lencode,0,v.work,N),v.lenbits=N.bits,X){U.msg="invalid code lengths set",v.mode=D;break}v.have=0,v.mode=z;case z:for(;v.have<v.nlen+v.ndist;){for(;Qe=v.lencode[O&(1<<v.lenbits)-1],Ve=Qe>>>24,rt=Qe>>>16&255,ft=Qe&65535,!(Ve<=G);){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}if(ft<16)O>>>=Ve,G-=Ve,v.lens[v.have++]=ft;else{if(ft===16){for(xt=Ve+2;G<xt;){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}if(O>>>=Ve,G-=Ve,v.have===0){U.msg="invalid bit length repeat",v.mode=D;break}it=v.lens[v.have-1],De=3+(O&3),O>>>=2,G-=2}else if(ft===17){for(xt=Ve+3;G<xt;){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}O>>>=Ve,G-=Ve,it=0,De=3+(O&7),O>>>=3,G-=3}else{for(xt=Ve+7;G<xt;){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}O>>>=Ve,G-=Ve,it=0,De=11+(O&127),O>>>=7,G-=7}if(v.have+De>v.nlen+v.ndist){U.msg="invalid bit length repeat",v.mode=D;break}for(;De--;)v.lens[v.have++]=it}}if(v.mode===D)break;if(v.lens[256]===0){U.msg="invalid code -- missing end-of-block",v.mode=D;break}if(v.lenbits=9,N={bits:v.lenbits},X=s(a,v.lens,0,v.nlen,v.lencode,0,v.work,N),v.lenbits=N.bits,X){U.msg="invalid literal/lengths set",v.mode=D;break}if(v.distbits=6,v.distcode=v.distdyn,N={bits:v.distbits},X=s(l,v.lens,v.nlen,v.ndist,v.distcode,0,v.work,N),v.distbits=N.bits,X){U.msg="invalid distances set",v.mode=D;break}if(v.mode=Y,se===m)break e;case Y:v.mode=ce;case ce:if(ee>=6&&y>=258){U.next_out=J,U.avail_out=y,U.next_in=d,U.avail_in=ee,v.hold=O,v.bits=G,r(U,Ce),J=U.next_out,Ue=U.output,y=U.avail_out,d=U.next_in,me=U.input,ee=U.avail_in,O=v.hold,G=v.bits,v.mode===le&&(v.back=-1);break}for(v.back=0;Qe=v.lencode[O&(1<<v.lenbits)-1],Ve=Qe>>>24,rt=Qe>>>16&255,ft=Qe&65535,!(Ve<=G);){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}if(rt&&(rt&240)===0){for(dt=Ve,jt=rt,zt=ft;Qe=v.lencode[zt+((O&(1<<dt+jt)-1)>>dt)],Ve=Qe>>>24,rt=Qe>>>16&255,ft=Qe&65535,!(dt+Ve<=G);){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}O>>>=dt,G-=dt,v.back+=dt}if(O>>>=Ve,G-=Ve,v.back+=Ve,v.length=ft,rt===0){v.mode=T;break}if(rt&32){v.back=-1,v.mode=le;break}if(rt&64){U.msg="invalid literal/length code",v.mode=D;break}v.extra=rt&15,v.mode=ve;case ve:if(v.extra){for(xt=v.extra;G<xt;){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}v.length+=O&(1<<v.extra)-1,O>>>=v.extra,G-=v.extra,v.back+=v.extra}v.was=v.length,v.mode=ye;case ye:for(;Qe=v.distcode[O&(1<<v.distbits)-1],Ve=Qe>>>24,rt=Qe>>>16&255,ft=Qe&65535,!(Ve<=G);){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}if((rt&240)===0){for(dt=Ve,jt=rt,zt=ft;Qe=v.distcode[zt+((O&(1<<dt+jt)-1)>>dt)],Ve=Qe>>>24,rt=Qe>>>16&255,ft=Qe&65535,!(dt+Ve<=G);){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}O>>>=dt,G-=dt,v.back+=dt}if(O>>>=Ve,G-=Ve,v.back+=Ve,rt&64){U.msg="invalid distance code",v.mode=D;break}v.offset=ft,v.extra=rt&15,v.mode=we;case we:if(v.extra){for(xt=v.extra;G<xt;){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}v.offset+=O&(1<<v.extra)-1,O>>>=v.extra,G-=v.extra,v.back+=v.extra}if(v.offset>v.dmax){U.msg="invalid distance too far back",v.mode=D;break}v.mode=ke;case ke:if(y===0)break e;if(De=Ce-y,v.offset>De){if(De=v.offset-De,De>v.whave&&v.sane){U.msg="invalid distance too far back",v.mode=D;break}De>v.wnext?(De-=v.wnext,He=v.wsize-De):He=v.wnext-De,De>v.length&&(De=v.length),wt=v.window}else wt=Ue,He=J-v.offset,De=v.length;De>y&&(De=y),y-=De,v.length-=De;do Ue[J++]=wt[He++];while(--De);v.length===0&&(v.mode=ce);break;case T:if(y===0)break e;Ue[J++]=v.length,y--,v.mode=ce;break;case R:if(v.wrap){for(;G<32;){if(ee===0)break e;ee--,O|=me[d++]<<G,G+=8}if(Ce-=y,U.total_out+=Ce,v.total+=Ce,Ce&&(U.adler=v.check=v.flags?i(v.check,Ue,Ce,J-Ce):n(v.check,Ue,Ce,J-Ce)),Ce=y,(v.flags?O:ie(O))!==v.check){U.msg="incorrect data check",v.mode=D;break}O=0,G=0}v.mode=pe;case pe:if(v.wrap&&v.flags){for(;G<32;){if(ee===0)break e;ee--,O+=me[d++]<<G,G+=8}if(O!==(v.total&4294967295)){U.msg="incorrect length check",v.mode=D;break}O=0,G=0}v.mode=E;case E:X=c;break e;case D:X=_;break e;case B:return P;case K:default:return x}return U.next_out=J,U.avail_out=y,U.next_in=d,U.avail_in=ee,v.hold=O,v.bits=G,(v.wsize||Ce!==U.avail_out&&v.mode<D&&(v.mode<R||se!==u))&&at(U,U.output,U.next_out,Ce-U.avail_out),Re-=U.avail_in,Ce-=U.avail_out,U.total_in+=Re,U.total_out+=Ce,v.total+=Ce,v.wrap&&Ce&&(U.adler=v.check=v.flags?i(v.check,Ue,Ce,U.next_out-Ce):n(v.check,Ue,Ce,U.next_out-Ce)),U.data_type=v.bits+(v.last?64:0)+(v.mode===le?128:0)+(v.mode===Y||v.mode===H?256:0),(Re===0&&Ce===0||se===u)&&X===h&&(X=S),X}function ge(U){if(!U||!U.state)return x;var se=U.state;return se.window&&(se.window=null),U.state=null,h}function _e(U,se){var v;return!U||!U.state||(v=U.state,(v.wrap&2)===0)?x:(v.head=se,se.done=!1,h)}function xe(U,se){var v=se.length,me,Ue,d;return!U||!U.state||(me=U.state,me.wrap!==0&&me.mode!==Z)?x:me.mode===Z&&(Ue=1,Ue=n(Ue,se,v,0),Ue!==me.check)?_:(d=at(U,se,v,v),d?(me.mode=B,P):(me.havedict=1,h))}e.inflateReset=be,e.inflateReset2=Pe,e.inflateResetKeep=Ee,e.inflateInit=Me,e.inflateInit2=Ae,e.inflate=k,e.inflateEnd=ge,e.inflateGetHeader=_e,e.inflateSetDictionary=xe,e.inflateInfo="pako inflate (from Nodeca project)"}}),tl=Te({"node_modules/jszip/node_modules/pako/lib/zlib/constants.js"(e,t){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}}}),Bd=Te({"node_modules/jszip/node_modules/pako/lib/zlib/gzheader.js"(e,t){function n(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}t.exports=n}}),Nd=Te({"node_modules/jszip/node_modules/pako/lib/inflate.js"(e){var t=Ud(),n=pn(),i=Qa(),r=tl(),s=ws(),o=el(),a=Bd(),l=Object.prototype.toString;function u(h){if(!(this instanceof u))return new u(h);this.options=n.assign({chunkSize:16384,windowBits:0,to:""},h||{});var c=this.options;c.raw&&c.windowBits>=0&&c.windowBits<16&&(c.windowBits=-c.windowBits,c.windowBits===0&&(c.windowBits=-15)),c.windowBits>=0&&c.windowBits<16&&!(h&&h.windowBits)&&(c.windowBits+=32),c.windowBits>15&&c.windowBits<48&&(c.windowBits&15)===0&&(c.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var g=t.inflateInit2(this.strm,c.windowBits);if(g!==r.Z_OK)throw new Error(s[g]);if(this.header=new a,t.inflateGetHeader(this.strm,this.header),c.dictionary&&(typeof c.dictionary=="string"?c.dictionary=i.string2buf(c.dictionary):l.call(c.dictionary)==="[object ArrayBuffer]"&&(c.dictionary=new Uint8Array(c.dictionary)),c.raw&&(g=t.inflateSetDictionary(this.strm,c.dictionary),g!==r.Z_OK)))throw new Error(s[g])}u.prototype.push=function(h,c){var g=this.strm,x=this.options.chunkSize,_=this.options.dictionary,P,S,b,w,L,j=!1;if(this.ended)return!1;S=c===~~c?c:c===!0?r.Z_FINISH:r.Z_NO_FLUSH,typeof h=="string"?g.input=i.binstring2buf(h):l.call(h)==="[object ArrayBuffer]"?g.input=new Uint8Array(h):g.input=h,g.next_in=0,g.avail_in=g.input.length;do{if(g.avail_out===0&&(g.output=new n.Buf8(x),g.next_out=0,g.avail_out=x),P=t.inflate(g,r.Z_NO_FLUSH),P===r.Z_NEED_DICT&&_&&(P=t.inflateSetDictionary(this.strm,_)),P===r.Z_BUF_ERROR&&j===!0&&(P=r.Z_OK,j=!1),P!==r.Z_STREAM_END&&P!==r.Z_OK)return this.onEnd(P),this.ended=!0,!1;g.next_out&&(g.avail_out===0||P===r.Z_STREAM_END||g.avail_in===0&&(S===r.Z_FINISH||S===r.Z_SYNC_FLUSH))&&(this.options.to==="string"?(b=i.utf8border(g.output,g.next_out),w=g.next_out-b,L=i.buf2string(g.output,b),g.next_out=w,g.avail_out=x-w,w&&n.arraySet(g.output,g.output,b,w,0),this.onData(L)):this.onData(n.shrinkBuf(g.output,g.next_out))),g.avail_in===0&&g.avail_out===0&&(j=!0)}while((g.avail_in>0||g.avail_out===0)&&P!==r.Z_STREAM_END);return P===r.Z_STREAM_END&&(S=r.Z_FINISH),S===r.Z_FINISH?(P=t.inflateEnd(this.strm),this.onEnd(P),this.ended=!0,P===r.Z_OK):(S===r.Z_SYNC_FLUSH&&(this.onEnd(r.Z_OK),g.avail_out=0),!0)},u.prototype.onData=function(h){this.chunks.push(h)},u.prototype.onEnd=function(h){h===r.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=n.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg};function f(h,c){var g=new u(c);if(g.push(h,!0),g.err)throw g.msg||s[g.err];return g.result}function m(h,c){return c=c||{},c.raw=!0,f(h,c)}e.Inflate=u,e.inflate=f,e.inflateRaw=m,e.ungzip=f}}),Fd=Te({"node_modules/jszip/node_modules/pako/index.js"(e,t){var n=pn().assign,i=Ld(),r=Nd(),s=tl(),o={};n(o,i,r,s),t.exports=o}}),jd=Te({"node_modules/jszip/lib/flate.js"(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",n=Fd(),i=ut(),r=Dt(),s=t?"uint8array":"array";e.magic="\b\0";function o(a,l){r.call(this,"FlateWorker/"+a),this._pako=null,this._pakoAction=a,this._pakoOptions=l,this.meta={}}i.inherits(o,r),o.prototype.processChunk=function(a){this.meta=a.meta,this._pako===null&&this._createPako(),this._pako.push(i.transformTo(s,a.data),!1)},o.prototype.flush=function(){r.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},o.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this._pako=null},o.prototype._createPako=function(){this._pako=new n[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var a=this;this._pako.onData=function(l){a.push({data:l,meta:a.meta})}},e.compressWorker=function(a){return new o("Deflate",a)},e.uncompressWorker=function(){return new o("Inflate",{})}}}),nl=Te({"node_modules/jszip/lib/compressions.js"(e){var t=Dt();e.STORE={magic:"\0\0",compressWorker:function(){return new t("STORE compression")},uncompressWorker:function(){return new t("STORE decompression")}},e.DEFLATE=jd()}}),il=Te({"node_modules/jszip/lib/signature.js"(e){e.LOCAL_FILE_HEADER="PK",e.CENTRAL_FILE_HEADER="PK",e.CENTRAL_DIRECTORY_END="PK",e.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",e.ZIP64_CENTRAL_DIRECTORY_END="PK",e.DATA_DESCRIPTOR="PK\x07\b"}}),zd=Te({"node_modules/jszip/lib/generate/ZipFileWorker.js"(e,t){var n=ut(),i=Dt(),r=bi(),s=bs(),o=il(),a=function(g,x){var _="",P;for(P=0;P<x;P++)_+=String.fromCharCode(g&255),g=g>>>8;return _},l=function(g,x){var _=g;return g||(_=x?16893:33204),(_&65535)<<16},u=function(g){return(g||0)&63},f=function(g,x,_,P,S,b){var w=g.file,L=g.compression,j=b!==r.utf8encode,M=n.transformTo("string",b(w.name)),W=n.transformTo("string",r.utf8encode(w.name)),V=w.comment,ae=n.transformTo("string",b(V)),Se=n.transformTo("string",r.utf8encode(V)),fe=W.length!==w.name.length,re=Se.length!==V.length,Z,le,$="",ne="",H="",A=w.dir,I=w.date,F={crc32:0,compressedSize:0,uncompressedSize:0};(!x||_)&&(F.crc32=g.crc32,F.compressedSize=g.compressedSize,F.uncompressedSize=g.uncompressedSize);var z=0;x&&(z|=8),!j&&(fe||re)&&(z|=2048);var Y=0,ce=0;A&&(Y|=16),S==="UNIX"?(ce=798,Y|=l(w.unixPermissions,A)):(ce=20,Y|=u(w.dosPermissions)),Z=I.getUTCHours(),Z=Z<<6,Z=Z|I.getUTCMinutes(),Z=Z<<5,Z=Z|I.getUTCSeconds()/2,le=I.getUTCFullYear()-1980,le=le<<4,le=le|I.getUTCMonth()+1,le=le<<5,le=le|I.getUTCDate(),fe&&(ne=a(1,1)+a(s(M),4)+W,$+="up"+a(ne.length,2)+ne),re&&(H=a(1,1)+a(s(ae),4)+Se,$+="uc"+a(H.length,2)+H);var ve="";ve+=`
\0`,ve+=a(z,2),ve+=L.magic,ve+=a(Z,2),ve+=a(le,2),ve+=a(F.crc32,4),ve+=a(F.compressedSize,4),ve+=a(F.uncompressedSize,4),ve+=a(M.length,2),ve+=a($.length,2);var ye=o.LOCAL_FILE_HEADER+ve+M+$,we=o.CENTRAL_FILE_HEADER+a(ce,2)+ve+a(ae.length,2)+"\0\0\0\0"+a(Y,4)+a(P,4)+M+$+ae;return{fileRecord:ye,dirRecord:we}},m=function(g,x,_,P,S){var b="",w=n.transformTo("string",S(P));return b=o.CENTRAL_DIRECTORY_END+"\0\0\0\0"+a(g,2)+a(g,2)+a(x,4)+a(_,4)+a(w.length,2)+w,b},h=function(g){var x="";return x=o.DATA_DESCRIPTOR+a(g.crc32,4)+a(g.compressedSize,4)+a(g.uncompressedSize,4),x};function c(g,x,_,P){i.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=x,this.zipPlatform=_,this.encodeFileName=P,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}n.inherits(c,i),c.prototype.push=function(g){var x=g.meta.percent||0,_=this.entriesCount,P=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,i.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:_?(x+100*(_-P-1))/_:100}}))},c.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var x=this.streamFiles&&!g.file.dir;if(x){var _=f(g,x,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:_.fileRecord,meta:{percent:0}})}else this.accumulate=!0},c.prototype.closedSource=function(g){this.accumulate=!1;var x=this.streamFiles&&!g.file.dir,_=f(g,x,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(_.dirRecord),x)this.push({data:h(g),meta:{percent:100}});else for(this.push({data:_.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},c.prototype.flush=function(){for(var g=this.bytesWritten,x=0;x<this.dirRecords.length;x++)this.push({data:this.dirRecords[x],meta:{percent:100}});var _=this.bytesWritten-g,P=m(this.dirRecords.length,_,g,this.zipComment,this.encodeFileName);this.push({data:P,meta:{percent:100}})},c.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},c.prototype.registerPrevious=function(g){this._sources.push(g);var x=this;return g.on("data",function(_){x.processChunk(_)}),g.on("end",function(){x.closedSource(x.previous.streamInfo),x._sources.length?x.prepareNextSource():x.end()}),g.on("error",function(_){x.error(_)}),this},c.prototype.resume=function(){if(!i.prototype.resume.call(this))return!1;if(!this.previous&&this._sources.length)return this.prepareNextSource(),!0;if(!this.previous&&!this._sources.length&&!this.generatedError)return this.end(),!0},c.prototype.error=function(g){var x=this._sources;if(!i.prototype.error.call(this,g))return!1;for(var _=0;_<x.length;_++)try{x[_].error(g)}catch{}return!0},c.prototype.lock=function(){i.prototype.lock.call(this);for(var g=this._sources,x=0;x<g.length;x++)g[x].lock()},t.exports=c}}),Hd=Te({"node_modules/jszip/lib/generate/index.js"(e){var t=nl(),n=zd(),i=function(r,s){var o=r||s,a=t[o];if(!a)throw new Error(o+" is not a valid compression method !");return a};e.generateWorker=function(r,s,o){var a=new n(s.streamFiles,o,s.platform,s.encodeFileName),l=0;try{r.forEach(function(u,f){l++;var m=i(f.options.compression,s.compression),h=f.options.compressionOptions||s.compressionOptions||{},c=f.dir,g=f.date;f._compressWorker(m,h).withStreamInfo("file",{name:u,dir:c,date:g,comment:f.comment||"",unixPermissions:f.unixPermissions,dosPermissions:f.dosPermissions}).pipe(a)}),a.entriesCount=l}catch(u){a.error(u)}return a}}}),Vd=Te({"node_modules/jszip/lib/nodejs/NodejsStreamInputAdapter.js"(e,t){var n=ut(),i=Dt();function r(s,o){i.call(this,"Nodejs stream input adapter for "+s),this._upstreamEnded=!1,this._bindStream(o)}n.inherits(r,i),r.prototype._bindStream=function(s){var o=this;this._stream=s,s.pause(),s.on("data",function(a){o.push({data:a,meta:{percent:0}})}).on("error",function(a){o.isPaused?this.generatedError=a:o.error(a)}).on("end",function(){o.isPaused?o._upstreamEnded=!0:o.end()})},r.prototype.pause=function(){return i.prototype.pause.call(this)?(this._stream.pause(),!0):!1},r.prototype.resume=function(){return i.prototype.resume.call(this)?(this._upstreamEnded?this.end():this._stream.resume(),!0):!1},t.exports=r}}),$d=Te({"node_modules/jszip/lib/object.js"(e,t){var n=bi(),i=ut(),r=Dt(),s=Ga(),o=Za(),a=ys(),l=Dd(),u=Hd(),f=pr(),m=Vd(),h=function(S,b,w){var L=i.getTypeOf(b),j,M=i.extend(w||{},o);M.date=M.date||new Date,M.compression!==null&&(M.compression=M.compression.toUpperCase()),typeof M.unixPermissions=="string"&&(M.unixPermissions=parseInt(M.unixPermissions,8)),M.unixPermissions&&M.unixPermissions&16384&&(M.dir=!0),M.dosPermissions&&M.dosPermissions&16&&(M.dir=!0),M.dir&&(S=g(S)),M.createFolders&&(j=c(S))&&x.call(this,j,!0);var W=L==="string"&&M.binary===!1&&M.base64===!1;(!w||typeof w.binary>"u")&&(M.binary=!W);var V=b instanceof a&&b.uncompressedSize===0;(V||M.dir||!b||b.length===0)&&(M.base64=!1,M.binary=!0,b="",M.compression="STORE",L="string");var ae=null;b instanceof a||b instanceof r?ae=b:f.isNode&&f.isStream(b)?ae=new m(S,b):ae=i.prepareContent(S,b,M.binary,M.optimizedBinaryString,M.base64);var Se=new l(S,ae,M);this.files[S]=Se},c=function(S){S.slice(-1)==="/"&&(S=S.substring(0,S.length-1));var b=S.lastIndexOf("/");return b>0?S.substring(0,b):""},g=function(S){return S.slice(-1)!=="/"&&(S+="/"),S},x=function(S,b){return b=typeof b<"u"?b:o.createFolders,S=g(S),this.files[S]||h.call(this,S,null,{dir:!0,createFolders:b}),this.files[S]};function _(S){return Object.prototype.toString.call(S)==="[object RegExp]"}var P={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(S){var b,w,L;for(b in this.files)L=this.files[b],w=b.slice(this.root.length,b.length),w&&b.slice(0,this.root.length)===this.root&&S(w,L)},filter:function(S){var b=[];return this.forEach(function(w,L){S(w,L)&&b.push(L)}),b},file:function(S,b,w){if(arguments.length===1)if(_(S)){var L=S;return this.filter(function(M,W){return!W.dir&&L.test(M)})}else{var j=this.files[this.root+S];return j&&!j.dir?j:null}else S=this.root+S,h.call(this,S,b,w);return this},folder:function(S){if(!S)return this;if(_(S))return this.filter(function(j,M){return M.dir&&S.test(j)});var b=this.root+S,w=x.call(this,b),L=this.clone();return L.root=w.name,L},remove:function(S){S=this.root+S;var b=this.files[S];if(b||(S.slice(-1)!=="/"&&(S+="/"),b=this.files[S]),b&&!b.dir)delete this.files[S];else for(var w=this.filter(function(j,M){return M.name.slice(0,S.length)===S}),L=0;L<w.length;L++)delete this.files[w[L].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(S){var b,w={};try{if(w=i.extend(S||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:n.utf8encode}),w.type=w.type.toLowerCase(),w.compression=w.compression.toUpperCase(),w.type==="binarystring"&&(w.type="string"),!w.type)throw new Error("No output type specified.");i.checkSupport(w.type),(w.platform==="darwin"||w.platform==="freebsd"||w.platform==="linux"||w.platform==="sunos")&&(w.platform="UNIX"),w.platform==="win32"&&(w.platform="DOS");var L=w.comment||this.comment||"";b=u.generateWorker(this,w,L)}catch(j){b=new r("error"),b.error(j)}return new s(b,w.type||"string",w.mimeType)},generateAsync:function(S,b){return this.generateInternalStream(S).accumulate(b)},generateNodeStream:function(S,b){return S=S||{},S.type||(S.type="nodebuffer"),this.generateInternalStream(S).toNodejsStream(b)}};t.exports=P}}),rl=Te({"node_modules/jszip/lib/reader/DataReader.js"(e,t){var n=ut();function i(r){this.data=r,this.length=r.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(r){this.checkIndex(this.index+r)},checkIndex:function(r){if(this.length<this.zero+r||r<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+r+"). Corrupted zip ?")},setIndex:function(r){this.checkIndex(r),this.index=r},skip:function(r){this.setIndex(this.index+r)},byteAt:function(){},readInt:function(r){var s=0,o;for(this.checkOffset(r),o=this.index+r-1;o>=this.index;o--)s=(s<<8)+this.byteAt(o);return this.index+=r,s},readString:function(r){return n.transformTo("string",this.readData(r))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var r=this.readInt(4);return new Date(Date.UTC((r>>25&127)+1980,(r>>21&15)-1,r>>16&31,r>>11&31,r>>5&63,(r&31)<<1))}},t.exports=i}}),sl=Te({"node_modules/jszip/lib/reader/ArrayReader.js"(e,t){var n=rl(),i=ut();function r(s){n.call(this,s);for(var o=0;o<this.data.length;o++)s[o]=s[o]&255}i.inherits(r,n),r.prototype.byteAt=function(s){return this.data[this.zero+s]},r.prototype.lastIndexOfSignature=function(s){for(var o=s.charCodeAt(0),a=s.charCodeAt(1),l=s.charCodeAt(2),u=s.charCodeAt(3),f=this.length-4;f>=0;--f)if(this.data[f]===o&&this.data[f+1]===a&&this.data[f+2]===l&&this.data[f+3]===u)return f-this.zero;return-1},r.prototype.readAndCheckSignature=function(s){var o=s.charCodeAt(0),a=s.charCodeAt(1),l=s.charCodeAt(2),u=s.charCodeAt(3),f=this.readData(4);return o===f[0]&&a===f[1]&&l===f[2]&&u===f[3]},r.prototype.readData=function(s){if(this.checkOffset(s),s===0)return[];var o=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,o},t.exports=r}}),qd=Te({"node_modules/jszip/lib/reader/StringReader.js"(e,t){var n=rl(),i=ut();function r(s){n.call(this,s)}i.inherits(r,n),r.prototype.byteAt=function(s){return this.data.charCodeAt(this.zero+s)},r.prototype.lastIndexOfSignature=function(s){return this.data.lastIndexOf(s)-this.zero},r.prototype.readAndCheckSignature=function(s){var o=this.readData(4);return s===o},r.prototype.readData=function(s){this.checkOffset(s);var o=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,o},t.exports=r}}),ol=Te({"node_modules/jszip/lib/reader/Uint8ArrayReader.js"(e,t){var n=sl(),i=ut();function r(s){n.call(this,s)}i.inherits(r,n),r.prototype.readData=function(s){if(this.checkOffset(s),s===0)return new Uint8Array(0);var o=this.data.subarray(this.zero+this.index,this.zero+this.index+s);return this.index+=s,o},t.exports=r}}),Wd=Te({"node_modules/jszip/lib/reader/NodeBufferReader.js"(e,t){var n=ol(),i=ut();function r(s){n.call(this,s)}i.inherits(r,n),r.prototype.readData=function(s){this.checkOffset(s);var o=this.data.slice(this.zero+this.index,this.zero+this.index+s);return this.index+=s,o},t.exports=r}}),al=Te({"node_modules/jszip/lib/reader/readerFor.js"(e,t){var n=ut(),i=hn(),r=sl(),s=qd(),o=Wd(),a=ol();t.exports=function(l){var u=n.getTypeOf(l);return n.checkSupport(u),u==="string"&&!i.uint8array?new s(l):u==="nodebuffer"?new o(l):i.uint8array?new a(n.transformTo("uint8array",l)):new r(n.transformTo("array",l))}}}),Gd=Te({"node_modules/jszip/lib/zipEntry.js"(e,t){var n=al(),i=ut(),r=ys(),s=bs(),o=bi(),a=nl(),l=hn(),u=0,f=3,m=function(c){for(var g in a)if(Object.prototype.hasOwnProperty.call(a,g)&&a[g].magic===c)return a[g];return null};function h(c,g){this.options=c,this.loadOptions=g}h.prototype={isEncrypted:function(){return(this.bitFlag&1)===1},useUTF8:function(){return(this.bitFlag&2048)===2048},readLocalPart:function(c){var g,x;if(c.skip(22),this.fileNameLength=c.readInt(2),x=c.readInt(2),this.fileName=c.readData(this.fileNameLength),c.skip(x),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(g=m(this.compressionMethod),g===null)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new r(this.compressedSize,this.uncompressedSize,this.crc32,g,c.readData(this.compressedSize))},readCentralPart:function(c){this.versionMadeBy=c.readInt(2),c.skip(2),this.bitFlag=c.readInt(2),this.compressionMethod=c.readString(2),this.date=c.readDate(),this.crc32=c.readInt(4),this.compressedSize=c.readInt(4),this.uncompressedSize=c.readInt(4);var g=c.readInt(2);if(this.extraFieldsLength=c.readInt(2),this.fileCommentLength=c.readInt(2),this.diskNumberStart=c.readInt(2),this.internalFileAttributes=c.readInt(2),this.externalFileAttributes=c.readInt(4),this.localHeaderOffset=c.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");c.skip(g),this.readExtraFields(c),this.parseZIP64ExtraField(c),this.fileComment=c.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var c=this.versionMadeBy>>8;this.dir=!!(this.externalFileAttributes&16),c===u&&(this.dosPermissions=this.externalFileAttributes&63),c===f&&(this.unixPermissions=this.externalFileAttributes>>16&65535),!this.dir&&this.fileNameStr.slice(-1)==="/"&&(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var c=n(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=c.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=c.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=c.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=c.readInt(4))}},readExtraFields:function(c){var g=c.index+this.extraFieldsLength,x,_,P;for(this.extraFields||(this.extraFields={});c.index+4<g;)x=c.readInt(2),_=c.readInt(2),P=c.readData(_),this.extraFields[x]={id:x,length:_,value:P};c.setIndex(g)},handleUTF8:function(){var c=l.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=o.utf8decode(this.fileName),this.fileCommentStr=o.utf8decode(this.fileComment);else{var g=this.findExtraFieldUnicodePath();if(g!==null)this.fileNameStr=g;else{var x=i.transformTo(c,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(x)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var P=i.transformTo(c,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(P)}}},findExtraFieldUnicodePath:function(){var c=this.extraFields[28789];if(c){var g=n(c.value);return g.readInt(1)!==1||s(this.fileName)!==g.readInt(4)?null:o.utf8decode(g.readData(c.length-5))}return null},findExtraFieldUnicodeComment:function(){var c=this.extraFields[25461];if(c){var g=n(c.value);return g.readInt(1)!==1||s(this.fileComment)!==g.readInt(4)?null:o.utf8decode(g.readData(c.length-5))}return null}},t.exports=h}}),Zd=Te({"node_modules/jszip/lib/zipEntries.js"(e,t){var n=al(),i=ut(),r=il(),s=Gd(),o=hn();function a(l){this.files=[],this.loadOptions=l}a.prototype={checkSignature:function(l){if(!this.reader.readAndCheckSignature(l)){this.reader.index-=4;var u=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(u)+", expected "+i.pretty(l)+")")}},isSignature:function(l,u){var f=this.reader.index;this.reader.setIndex(l);var m=this.reader.readString(4),h=m===u;return this.reader.setIndex(f),h},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var l=this.reader.readData(this.zipCommentLength),u=o.uint8array?"uint8array":"array",f=i.transformTo(u,l);this.zipComment=this.loadOptions.decodeFileName(f)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var l=this.zip64EndOfCentralSize-44,u=0,f,m,h;u<l;)f=this.reader.readInt(2),m=this.reader.readInt(4),h=this.reader.readData(m),this.zip64ExtensibleData[f]={id:f,length:m,value:h}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var l,u;for(l=0;l<this.files.length;l++)u=this.files[l],this.reader.setIndex(u.localHeaderOffset),this.checkSignature(r.LOCAL_FILE_HEADER),u.readLocalPart(this.reader),u.handleUTF8(),u.processAttributes()},readCentralDir:function(){var l;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(r.CENTRAL_FILE_HEADER);)l=new s({zip64:this.zip64},this.loadOptions),l.readCentralPart(this.reader),this.files.push(l);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var l=this.reader.lastIndexOfSignature(r.CENTRAL_DIRECTORY_END);if(l<0){var u=!this.isSignature(0,r.LOCAL_FILE_HEADER);throw u?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory")}this.reader.setIndex(l);var f=l;if(this.checkSignature(r.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,l=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR),l<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(l),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,r.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var m=this.centralDirOffset+this.centralDirSize;this.zip64&&(m+=20,m+=12+this.zip64EndOfCentralSize);var h=f-m;if(h>0)this.isSignature(f,r.CENTRAL_FILE_HEADER)||(this.reader.zero=h);else if(h<0)throw new Error("Corrupted zip: missing "+Math.abs(h)+" bytes.")},prepareReader:function(l){this.reader=n(l)},load:function(l){this.prepareReader(l),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=a}}),Kd=Te({"node_modules/jszip/lib/load.js"(e,t){var n=ut(),i=_i(),r=bi(),s=Zd(),o=Ya(),a=pr();function l(u){return new i.Promise(function(f,m){var h=u.decompressed.getContentWorker().pipe(new o);h.on("error",function(c){m(c)}).on("end",function(){h.streamInfo.crc32!==u.decompressed.crc32?m(new Error("Corrupted zip : CRC32 mismatch")):f()}).resume()})}t.exports=function(u,f){var m=this;return f=n.extend(f||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:r.utf8decode}),a.isNode&&a.isStream(u)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):n.prepareContent("the loaded zip file",u,!0,f.optimizedBinaryString,f.base64).then(function(h){var c=new s(f);return c.load(h),c}).then(function(c){var g=[i.Promise.resolve(c)],x=c.files;if(f.checkCRC32)for(var _=0;_<x.length;_++)g.push(l(x[_]));return i.Promise.all(g)}).then(function(c){for(var g=c.shift(),x=g.files,_=0;_<x.length;_++){var P=x[_],S=P.fileNameStr,b=n.resolve(P.fileNameStr);m.file(b,P.decompressed,{binary:!0,optimizedBinaryString:!0,date:P.date,dir:P.dir,comment:P.fileCommentStr.length?P.fileCommentStr:null,unixPermissions:P.unixPermissions,dosPermissions:P.dosPermissions,createFolders:f.createFolders}),P.dir||(m.file(b).unsafeOriginalName=S)}return g.zipComment.length&&(m.comment=g.zipComment),m})}}}),Yd=Te({"node_modules/jszip/lib/index.js"(e,t){function n(){if(!(this instanceof n))return new n;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var i=new n;for(var r in this)typeof this[r]!="function"&&(i[r]=this[r]);return i}}n.prototype=$d(),n.prototype.loadAsync=Kd(),n.support=hn(),n.defaults=Za(),n.version="3.10.1",n.loadAsync=function(i,r){return new n().loadAsync(i,r)},n.external=_i(),t.exports=n}}),Xd=Te({"node_modules/crc-32/crc32.js"(e){(function(t){typeof DO_NOT_EXPORT_CRC>"u"?typeof e=="object"?t(e):typeof define=="function"&&define.amd?define(function(){var n={};return t(n),n}):t({}):t({})})(function(t){t.version="0.3.0";function n(){for(var u=0,f=new Array(256),m=0;m!=256;++m)u=m,u=u&1?-306674912^u>>>1:u>>>1,u=u&1?-306674912^u>>>1:u>>>1,u=u&1?-306674912^u>>>1:u>>>1,u=u&1?-306674912^u>>>1:u>>>1,u=u&1?-306674912^u>>>1:u>>>1,u=u&1?-306674912^u>>>1:u>>>1,u=u&1?-306674912^u>>>1:u>>>1,u=u&1?-306674912^u>>>1:u>>>1,f[m]=u;return typeof Int32Array<"u"?new Int32Array(f):f}var i=n(),r=typeof Buffer<"u";function s(u){if(u.length>32768&&r)return a(new Buffer(u));for(var f=-1,m=u.length-1,h=0;h<m;)f=i[(f^u.charCodeAt(h++))&255]^f>>>8,f=i[(f^u.charCodeAt(h++))&255]^f>>>8;return h===m&&(f=f>>>8^i[(f^u.charCodeAt(h))&255]),f^-1}function o(u){if(u.length>1e4)return a(u);for(var f=-1,m=0,h=u.length-3;m<h;)f=f>>>8^i[(f^u[m++])&255],f=f>>>8^i[(f^u[m++])&255],f=f>>>8^i[(f^u[m++])&255],f=f>>>8^i[(f^u[m++])&255];for(;m<h+3;)f=f>>>8^i[(f^u[m++])&255];return f^-1}function a(u){for(var f=-1,m=0,h=u.length-7;m<h;)f=f>>>8^i[(f^u[m++])&255],f=f>>>8^i[(f^u[m++])&255],f=f>>>8^i[(f^u[m++])&255],f=f>>>8^i[(f^u[m++])&255],f=f>>>8^i[(f^u[m++])&255],f=f>>>8^i[(f^u[m++])&255],f=f>>>8^i[(f^u[m++])&255],f=f>>>8^i[(f^u[m++])&255];for(;m<h+7;)f=f>>>8^i[(f^u[m++])&255];return f^-1}function l(u){for(var f=-1,m=0,h=u.length,c,g;m<h;)c=u.charCodeAt(m++),c<128?f=f>>>8^i[(f^c)&255]:c<2048?(f=f>>>8^i[(f^(192|c>>6&31))&255],f=f>>>8^i[(f^(128|c&63))&255]):c>=55296&&c<57344?(c=(c&1023)+64,g=u.charCodeAt(m++)&1023,f=f>>>8^i[(f^(240|c>>8&7))&255],f=f>>>8^i[(f^(128|c>>2&63))&255],f=f>>>8^i[(f^(128|g>>6&15|c&3))&255],f=f>>>8^i[(f^(128|g&63))&255]):(f=f>>>8^i[(f^(224|c>>12&15))&255],f=f>>>8^i[(f^(128|c>>6&63))&255],f=f>>>8^i[(f^(128|c&63))&255]);return f^-1}t.table=i,t.bstr=s,t.buf=o,t.str=l})}}),Jd=Te({"node_modules/png-chunks-extract/index.js"(e,t){var n=Xd();t.exports=o;var i=new Uint8Array(4),r=new Int32Array(i.buffer),s=new Uint32Array(i.buffer);function o(a){if(a[0]!==137)throw new Error("Invalid .png file header");if(a[1]!==80)throw new Error("Invalid .png file header");if(a[2]!==78)throw new Error("Invalid .png file header");if(a[3]!==71)throw new Error("Invalid .png file header");if(a[4]!==13)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(a[5]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");if(a[6]!==26)throw new Error("Invalid .png file header");if(a[7]!==10)throw new Error("Invalid .png file header: possibly caused by DOS-Unix line ending conversion?");for(var l=!1,u=[],f=8;f<a.length;){i[3]=a[f++],i[2]=a[f++],i[1]=a[f++],i[0]=a[f++];var m=s[0]+4,h=new Uint8Array(m);h[0]=a[f++],h[1]=a[f++],h[2]=a[f++],h[3]=a[f++];var c=String.fromCharCode(h[0])+String.fromCharCode(h[1])+String.fromCharCode(h[2])+String.fromCharCode(h[3]);if(!u.length&&c!=="IHDR")throw new Error("IHDR header missing");if(c==="IEND"){l=!0,u.push({name:c,data:new Uint8Array(0)});break}for(var g=4;g<m;g++)h[g]=a[f++];i[3]=a[f++],i[2]=a[f++],i[1]=a[f++],i[0]=a[f++];var x=r[0],_=n.buf(h);if(_!==x)throw new Error("CRC values for "+c+" header do not match, PNG file is likely corrupted");var P=new Uint8Array(h.buffer.slice(4));u.push({name:c,data:P})}if(!l)throw new Error(".png file ended prematurely: no IEND header was found");return u}}}),Qd=Te({"node_modules/png-chunk-text/encode.js"(e,t){t.exports=n;function n(i,r){if(i=String(i),r=String(r),!/^[\x00-\xFF]+$/.test(i)||!/^[\x00-\xFF]+$/.test(r))throw new Error("Only Latin-1 characters are permitted in PNG tEXt chunks. You might want to consider base64 encoding and/or zEXt compression");if(i.length>=80)throw new Error('Keyword "'+i+'" is longer than the 79-character limit imposed by the PNG specification');for(var s=i.length+r.length+1,o=new Uint8Array(s),a=0,l,u=0;u<i.length;u++){if(!(l=i.charCodeAt(u)))throw new Error("0x00 character is not permitted in tEXt keywords");o[a++]=l}o[a++]=0;for(var f=0;f<r.length;f++){if(!(l=r.charCodeAt(f)))throw new Error("0x00 character is not permitted in tEXt content");o[a++]=l}return{name:"tEXt",data:o}}}}),ec=Te({"node_modules/png-chunk-text/decode.js"(e,t){t.exports=n;function n(i){i.data&&i.name&&(i=i.data);for(var r=!0,s="",o="",a=0;a<i.length;a++){var l=i[a];if(r)l?o+=String.fromCharCode(l):r=!1;else if(l)s+=String.fromCharCode(l);else throw new Error("Invalid NULL character found. 0x00 character is not permitted in tEXt content")}return{keyword:o,text:s}}}}),tc=Te({"node_modules/png-chunk-text/index.js"(e){e.encode=Qd(),e.decode=ec()}}),nc=_s(Yd()),ic={Accept:"*/*","Accept-Language":"en-US,en;q=0.5","Accept-Encoding":"gzip, deflate, br","Content-Type":"application/json",Host:"image.novelai.net",Origin:"https://novelai.net",Referer:"https://novelai.net",DNT:"1","Sec-GPC":"1",Connection:"keep-alive","Sec-Fetch-Dest":"empty","Sec-Fetch-Mode":"cors","Sec-Fetch-Site":"same-site",Priority:"u=0",Pragma:"no-cache","Cache-Control":"no-cache",TE:"trailers","User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:138.0) Gecko/20100101 Firefox/138.0"},ll=(e=>(e.WEB="https://image.novelai.net",e.API="https://api.novelai.net",e))(ll||{}),ul=(e=>(e.V3="nai-diffusion-3",e.V3_INP="nai-diffusion-3-inpainting",e.V4="nai-diffusion-4-full",e.V4_INP="nai-diffusion-4-full-inpainting",e.V4_CUR="nai-diffusion-4-curated-preview",e.V4_CUR_INP="nai-diffusion-4-curated-inpainting",e.V4_5="nai-diffusion-4-5-full",e.V4_5_INP="nai-diffusion-4-5-full-inpainting",e.V4_5_CUR="nai-diffusion-4-5-curated",e.V4_5_CUR_INP="nai-diffusion-4-5-curated-inpainting",e.FURRY="nai-diffusion-furry-3",e.FURRY_INP="nai-diffusion-furry-3-inpainting",e))(ul||{});function Hr(e){return e==="nai-diffusion-4-full"||e==="nai-diffusion-4-full-inpainting"||e==="nai-diffusion-4-curated-preview"||e==="nai-diffusion-4-curated-inpainting"||e==="nai-diffusion-4-5-full"||e==="nai-diffusion-4-5-full-inpainting"||e==="nai-diffusion-4-5-curated"||e==="nai-diffusion-4-5-curated-inpainting"}var fl=(e=>(e.PALETTESWAP="hed",e.FORMLOCK="midas",e.SCRIBBLER="fake_scribble",e.BUILDINGCONTROL="mlsd",e.LANDSCAPER="uniformer",e))(fl||{}),dl=(e=>(e.GENERATE="generate",e.INPAINT="infill",e.IMG2IMG="img2img",e))(dl||{}),cl=(e=>(e.SMALL_PORTRAIT="small_portrait",e.SMALL_LANDSCAPE="small_landscape",e.SMALL_SQUARE="small_square",e.NORMAL_PORTRAIT="normal_portrait",e.NORMAL_LANDSCAPE="normal_landscape",e.NORMAL_SQUARE="normal_square",e.LARGE_PORTRAIT="large_portrait",e.LARGE_LANDSCAPE="large_landscape",e.LARGE_SQUARE="large_square",e.WALLPAPER_PORTRAIT="wallpaper_portrait",e.WALLPAPER_LANDSCAPE="wallpaper_landscape",e))(cl||{}),hl=(e=>(e.EULER="k_euler",e.EULER_ANC="k_euler_ancestral",e.DPM2S_ANC="k_dpmpp_2s_ancestral",e.DPM2M="k_dpmpp_2m",e.DPMSDE="k_dpmpp_sde",e.DPM2MSDE="k_dpmpp_2m_sde",e.DDIM="ddim_v3",e))(hl||{}),pl=(e=>(e.NATIVE="native",e.KARRAS="karras",e.EXPONENTIAL="exponential",e.POLYEXPONENTIAL="polyexponential",e))(pl||{});function yi(){return typeof window>"u"}function xs(){if(yi())try{return{fs:Et("fs"),path:Et("path")}}catch(e){return console.warn("Failed to load Node.js modules:",e),{fs:null,path:null}}return{fs:null,path:null}}function rc(){const{path:e}=xs();return e}function mo(){try{return yi()?Et("canvas"):null}catch(e){return console.warn("Failed to load Node.js canvas module:",e),null}}function sc(e,t="png"){const n=new Date().toISOString().replace(/[-:]/g,"").replace("T","_").substring(0,15);return`${e?e+"_":""}${n}.${t}`}function Vr(e){if(yi()){const{fs:t}=xs();t&&!t.existsSync(e)&&t.mkdirSync(e,{recursive:!0})}}function oc(e,t){if(yi()){const{fs:n,path:i}=xs();if(!n||!i)throw new Error("File system modules not available");const r=i.dirname(t);Vr(r),n.writeFileSync(t,Buffer.from(e))}else throw new Error("Cannot save files directly in browser environment")}new TextEncoder;var ac=4096;function gl(e,t,n){let i=t;const r=i+n,s=[];let o="";for(;i<r;){const a=e[i++];if((a&128)===0)s.push(a);else if((a&224)===192){const l=e[i++]&63;s.push((a&31)<<6|l)}else if((a&240)===224){const l=e[i++]&63,u=e[i++]&63;s.push((a&31)<<12|l<<6|u)}else if((a&248)===240){const l=e[i++]&63,u=e[i++]&63,f=e[i++]&63;let m=(a&7)<<18|l<<12|u<<6|f;m>65535&&(m-=65536,s.push(m>>>10&1023|55296),m=56320|m&1023),s.push(m)}else s.push(a);s.length>=ac&&(o+=String.fromCharCode(...s),s.length=0)}return s.length>0&&(o+=String.fromCharCode(...s)),o}var lc=new TextDecoder,uc=200;function fc(e,t,n){const i=e.subarray(t,t+n);return lc.decode(i)}function dc(e,t,n){return n>uc?fc(e,t,n):gl(e,t,n)}var Ti=class{constructor(e,t){this.type=e,this.data=t}},Ut=class $r extends Error{constructor(t){super(t);const n=Object.create($r.prototype);Object.setPrototypeOf(this,n),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:$r.name})}},jn=4294967295;function cc(e,t,n){const i=Math.floor(n/4294967296),r=n;e.setUint32(t,i),e.setUint32(t+4,r)}function ml(e,t){const n=e.getInt32(t),i=e.getUint32(t+4);return n*4294967296+i}function hc(e,t){const n=e.getUint32(t),i=e.getUint32(t+4);return n*4294967296+i}var pc=-1,gc=4294967296-1,mc=17179869184-1;function vc({sec:e,nsec:t}){if(e>=0&&t>=0&&e<=mc)if(t===0&&e<=gc){const n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e),n}else{const n=e/4294967296,i=e&4294967295,r=new Uint8Array(8),s=new DataView(r.buffer);return s.setUint32(0,t<<2|n&3),s.setUint32(4,i),r}else{const n=new Uint8Array(12),i=new DataView(n.buffer);return i.setUint32(0,t),cc(i,4,e),n}}function _c(e){const t=e.getTime(),n=Math.floor(t/1e3),i=(t-n*1e3)*1e6,r=Math.floor(i/1e9);return{sec:n+r,nsec:i-r*1e9}}function bc(e){if(e instanceof Date){const t=_c(e);return vc(t)}else return null}function yc(e){const t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:t.getUint32(0),nsec:0};case 8:{const n=t.getUint32(0),i=t.getUint32(4),r=(n&3)*4294967296+i,s=n>>>2;return{sec:r,nsec:s}}case 12:{const n=ml(t,4),i=t.getUint32(0);return{sec:n,nsec:i}}default:throw new Ut(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${e.length}`)}}function wc(e){const t=yc(e);return new Date(t.sec*1e3+t.nsec/1e6)}var xc={type:pc,encode:bc,decode:wc},qr=class{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(xc)}register({type:e,encode:t,decode:n}){if(e>=0)this.encoders[e]=t,this.decoders[e]=n;else{const i=-1-e;this.builtInEncoders[i]=t,this.builtInDecoders[i]=n}}tryToEncode(e,t){for(let n=0;n<this.builtInEncoders.length;n++){const i=this.builtInEncoders[n];if(i!=null){const r=i(e,t);if(r!=null){const s=-1-n;return new Ti(s,r)}}}for(let n=0;n<this.encoders.length;n++){const i=this.encoders[n];if(i!=null){const r=i(e,t);if(r!=null){const s=n;return new Ti(s,r)}}}return e instanceof Ti?e:null}decode(e,t,n){const i=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return i?i(e,t,n):new Ti(t,e)}};qr.defaultCodec=new qr;function Sc(e){return e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer}function vo(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):Sc(e)?new Uint8Array(e):Uint8Array.from(e)}function Tr(e){return`${e<0?"-":""}0x${Math.abs(e).toString(16).padStart(2,"0")}`}var Ec=16,kc=16,Cc=class{constructor(e=Ec,t=kc){this.hit=0,this.miss=0,this.maxKeyLength=e,this.maxLengthPerKey=t,this.caches=[];for(let n=0;n<this.maxKeyLength;n++)this.caches.push([])}canBeCached(e){return e>0&&e<=this.maxKeyLength}find(e,t,n){const i=this.caches[n-1];e:for(const r of i){const s=r.bytes;for(let o=0;o<n;o++)if(s[o]!==e[t+o])continue e;return r.str}return null}store(e,t){const n=this.caches[e.length-1],i={bytes:e,str:t};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=i:n.push(i)}decode(e,t,n){const i=this.find(e,t,n);if(i!=null)return this.hit++,i;this.miss++;const r=gl(e,t,n),s=Uint8Array.prototype.slice.call(e,t,t+n);return this.store(s,r),r}},Wr="array",Jn="map_key",vl="map_value",Tc=e=>{if(typeof e=="string"||typeof e=="number")return e;throw new Ut("The type of key must be string or number but "+typeof e)},Ac=class{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(e){const t=this.getUninitializedStateFromPool();t.type=Wr,t.position=0,t.size=e,t.array=new Array(e)}pushMapState(e){const t=this.getUninitializedStateFromPool();t.type=Jn,t.readCount=0,t.size=e,t.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const e={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(e)}return this.stack[this.stackHeadPosition]}release(e){if(this.stack[this.stackHeadPosition]!==e)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(e.type===Wr){const n=e;n.size=0,n.array=void 0,n.position=0,n.type=void 0}if(e.type===Jn||e.type===vl){const n=e;n.size=0,n.map=void 0,n.readCount=0,n.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}},zn=-1,Ss=new DataView(new ArrayBuffer(0)),Ic=new Uint8Array(Ss.buffer);try{Ss.getInt8(0)}catch(e){if(!(e instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}var _o=new RangeError("Insufficient data"),Dc=new Cc,Pc=class _l{constructor(t){this.totalPos=0,this.pos=0,this.view=Ss,this.bytes=Ic,this.headByte=zn,this.stack=new Ac,this.entered=!1,this.extensionCodec=t?.extensionCodec??qr.defaultCodec,this.context=t?.context,this.useBigInt64=t?.useBigInt64??!1,this.rawStrings=t?.rawStrings??!1,this.maxStrLength=t?.maxStrLength??jn,this.maxBinLength=t?.maxBinLength??jn,this.maxArrayLength=t?.maxArrayLength??jn,this.maxMapLength=t?.maxMapLength??jn,this.maxExtLength=t?.maxExtLength??jn,this.keyDecoder=t?.keyDecoder!==void 0?t.keyDecoder:Dc,this.mapKeyConverter=t?.mapKeyConverter??Tc}clone(){return new _l({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=zn,this.stack.reset()}setBuffer(t){const n=vo(t);this.bytes=n,this.view=new DataView(n.buffer,n.byteOffset,n.byteLength),this.pos=0}appendBuffer(t){if(this.headByte===zn&&!this.hasRemaining(1))this.setBuffer(t);else{const n=this.bytes.subarray(this.pos),i=vo(t),r=new Uint8Array(n.length+i.length);r.set(n),r.set(i,n.length),this.setBuffer(r)}}hasRemaining(t){return this.view.byteLength-this.pos>=t}createExtraByteError(t){const{view:n,pos:i}=this;return new RangeError(`Extra ${n.byteLength-i} of ${n.byteLength} byte(s) found at buffer[${t}]`)}decode(t){if(this.entered)return this.clone().decode(t);try{this.entered=!0,this.reinitializeState(),this.setBuffer(t);const n=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return n}finally{this.entered=!1}}*decodeMulti(t){if(this.entered){yield*this.clone().decodeMulti(t);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(t);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(t){if(this.entered)return this.clone().decodeAsync(t);try{this.entered=!0;let n=!1,i;for await(const a of t){if(n)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(a);try{i=this.doDecodeSync(),n=!0}catch(l){if(!(l instanceof RangeError))throw l}this.totalPos+=this.pos}if(n){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return i}const{headByte:r,pos:s,totalPos:o}=this;throw new RangeError(`Insufficient data in parsing ${Tr(r)} at ${o} (${s} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(t){return this.decodeMultiAsync(t,!0)}decodeStream(t){return this.decodeMultiAsync(t,!1)}async*decodeMultiAsync(t,n){if(this.entered){yield*this.clone().decodeMultiAsync(t,n);return}try{this.entered=!0;let i=n,r=-1;for await(const s of t){if(n&&r===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(s),i&&(r=this.readArraySize(),i=!1,this.complete());try{for(;yield this.doDecodeSync(),--r!==0;);}catch(o){if(!(o instanceof RangeError))throw o}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const t=this.readHeadByte();let n;if(t>=224)n=t-256;else if(t<192)if(t<128)n=t;else if(t<144){const r=t-128;if(r!==0){this.pushMapState(r),this.complete();continue e}else n={}}else if(t<160){const r=t-144;if(r!==0){this.pushArrayState(r),this.complete();continue e}else n=[]}else{const r=t-160;n=this.decodeString(r,0)}else if(t===192)n=null;else if(t===194)n=!1;else if(t===195)n=!0;else if(t===202)n=this.readF32();else if(t===203)n=this.readF64();else if(t===204)n=this.readU8();else if(t===205)n=this.readU16();else if(t===206)n=this.readU32();else if(t===207)this.useBigInt64?n=this.readU64AsBigInt():n=this.readU64();else if(t===208)n=this.readI8();else if(t===209)n=this.readI16();else if(t===210)n=this.readI32();else if(t===211)this.useBigInt64?n=this.readI64AsBigInt():n=this.readI64();else if(t===217){const r=this.lookU8();n=this.decodeString(r,1)}else if(t===218){const r=this.lookU16();n=this.decodeString(r,2)}else if(t===219){const r=this.lookU32();n=this.decodeString(r,4)}else if(t===220){const r=this.readU16();if(r!==0){this.pushArrayState(r),this.complete();continue e}else n=[]}else if(t===221){const r=this.readU32();if(r!==0){this.pushArrayState(r),this.complete();continue e}else n=[]}else if(t===222){const r=this.readU16();if(r!==0){this.pushMapState(r),this.complete();continue e}else n={}}else if(t===223){const r=this.readU32();if(r!==0){this.pushMapState(r),this.complete();continue e}else n={}}else if(t===196){const r=this.lookU8();n=this.decodeBinary(r,1)}else if(t===197){const r=this.lookU16();n=this.decodeBinary(r,2)}else if(t===198){const r=this.lookU32();n=this.decodeBinary(r,4)}else if(t===212)n=this.decodeExtension(1,0);else if(t===213)n=this.decodeExtension(2,0);else if(t===214)n=this.decodeExtension(4,0);else if(t===215)n=this.decodeExtension(8,0);else if(t===216)n=this.decodeExtension(16,0);else if(t===199){const r=this.lookU8();n=this.decodeExtension(r,1)}else if(t===200){const r=this.lookU16();n=this.decodeExtension(r,2)}else if(t===201){const r=this.lookU32();n=this.decodeExtension(r,4)}else throw new Ut(`Unrecognized type byte: ${Tr(t)}`);this.complete();const i=this.stack;for(;i.length>0;){const r=i.top();if(r.type===Wr)if(r.array[r.position]=n,r.position++,r.position===r.size)n=r.array,i.release(r);else continue e;else if(r.type===Jn){if(n==="__proto__")throw new Ut("The key __proto__ is not allowed");r.key=this.mapKeyConverter(n),r.type=vl;continue e}else if(r.map[r.key]=n,r.readCount++,r.readCount===r.size)n=r.map,i.release(r);else{r.key=null,r.type=Jn;continue e}}return n}}readHeadByte(){return this.headByte===zn&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=zn}readArraySize(){const t=this.readHeadByte();switch(t){case 220:return this.readU16();case 221:return this.readU32();default:{if(t<160)return t-144;throw new Ut(`Unrecognized array type byte: ${Tr(t)}`)}}}pushMapState(t){if(t>this.maxMapLength)throw new Ut(`Max length exceeded: map length (${t}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(t)}pushArrayState(t){if(t>this.maxArrayLength)throw new Ut(`Max length exceeded: array length (${t}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(t)}decodeString(t,n){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(t,n):this.decodeBinary(t,n)}decodeUtf8String(t,n){if(t>this.maxStrLength)throw new Ut(`Max length exceeded: UTF-8 byte length (${t}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+n+t)throw _o;const i=this.pos+n;let r;return this.stateIsMapKey()&&this.keyDecoder?.canBeCached(t)?r=this.keyDecoder.decode(this.bytes,i,t):r=dc(this.bytes,i,t),this.pos+=n+t,r}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===Jn:!1}decodeBinary(t,n){if(t>this.maxBinLength)throw new Ut(`Max length exceeded: bin length (${t}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(t+n))throw _o;const i=this.pos+n,r=this.bytes.subarray(i,i+t);return this.pos+=n+t,r}decodeExtension(t,n){if(t>this.maxExtLength)throw new Ut(`Max length exceeded: ext length (${t}) > maxExtLength (${this.maxExtLength})`);const i=this.view.getInt8(this.pos+n),r=this.decodeBinary(t,n+1);return this.extensionCodec.decode(r,i,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const t=this.view.getUint8(this.pos);return this.pos++,t}readI8(){const t=this.view.getInt8(this.pos);return this.pos++,t}readU16(){const t=this.view.getUint16(this.pos);return this.pos+=2,t}readI16(){const t=this.view.getInt16(this.pos);return this.pos+=2,t}readU32(){const t=this.view.getUint32(this.pos);return this.pos+=4,t}readI32(){const t=this.view.getInt32(this.pos);return this.pos+=4,t}readU64(){const t=hc(this.view,this.pos);return this.pos+=8,t}readI64(){const t=ml(this.view,this.pos);return this.pos+=8,t}readU64AsBigInt(){const t=this.view.getBigUint64(this.pos);return this.pos+=8,t}readI64AsBigInt(){const t=this.view.getBigInt64(this.pos);return this.pos+=8,t}readF32(){const t=this.view.getFloat32(this.pos);return this.pos+=4,t}readF64(){const t=this.view.getFloat64(this.pos);return this.pos+=8,t}};function Rc(e,t){return new Pc(t).decode(e)}var Lc=class{constructor(){this.buffer=new Uint8Array(0),this.expectedMessageLength=null}async*feedChunk(e){const t=new Uint8Array(this.buffer.length+e.length);for(t.set(this.buffer),t.set(e,this.buffer.length),this.buffer=t;;){if(this.expectedMessageLength===null){if(this.buffer.length<4)break;const r=this.buffer.slice(0,4);this.expectedMessageLength=new DataView(r.buffer,r.byteOffset,4).getUint32(0,!1),this.buffer=this.buffer.slice(4)}if(this.buffer.length<this.expectedMessageLength)break;const n=this.buffer.slice(0,this.expectedMessageLength);this.buffer=this.buffer.slice(this.expectedMessageLength),this.expectedMessageLength=null;const i=bl(n);i&&(yield i)}}},Mc=class{constructor(){this.buffer=""}async*feedChunk(e){const t=new TextDecoder().decode(e);this.buffer+=t;const n=this.buffer.split(`

`);this.buffer=n.pop()||"";for(const i of n)if(i.trim()){const r=this.parseSSEEvent(i);r&&(yield r)}}parseSSEEvent(e){const t=e.split(`
`);let n={};for(const i of t){const r=i.trim();if(r.includes(":")){const s=r.indexOf(":"),o=r.substring(0,s).trim(),a=r.substring(s+1).trim();o==="data"?n.data=(n.data||"")+a:n[o]=a}}if(n.data)try{const i=JSON.parse(n.data);if(i.event_type)return ui(i)}catch(i){console.warn("Failed to parse SSE event data:",i)}return null}async*flush(){if(this.buffer.trim()){const e=this.parseSSEEvent(this.buffer);e&&(yield e),this.buffer=""}}};function Oc(e){const t=[],i=new TextDecoder().decode(e).split(`
`);let r={};for(const s of i){const o=s.trim();if(o===""){if(r.data)try{const a=JSON.parse(r.data);if(a.event_type){const l=ui(a);l&&t.push(l)}}catch(a){console.warn("Failed to parse SSE event data:",a)}r={}}else if(o.includes(":")){const a=o.indexOf(":"),l=o.substring(0,a).trim(),u=o.substring(a+1).trim();l==="data"?r.data=(r.data||"")+u:r[l]=u}}if(r.data)try{const s=JSON.parse(r.data);if(s.event_type){const o=ui(s);o&&t.push(o)}}catch(s){console.warn("Failed to parse final SSE event data:",s)}return t}function Uc(e){const t=new TextDecoder().decode(e.slice(0,100));return t.includes("event:")||t.includes("data:")?Oc(e):Bc(e)}function Bc(e){const t=[];let n=0;for(;n<e.length;)try{if(n+4>e.length)break;const i=e.slice(n,n+4),r=new DataView(i.buffer,i.byteOffset,4).getUint32(0,!1),s=n+4,o=Math.min(s+r,e.length);if(s>=e.length)break;const a=e.slice(s,o),l=bl(a);l&&t.push(l),n=s+r}catch{n+=1}return t}function bl(e){try{const t=Rc(e);if(typeof t=="object"&&t!==null&&"event_type"in t)return ui(t)}catch{try{const n=new TextDecoder().decode(e),i=JSON.parse(n);if(typeof i=="object"&&i!==null&&"event_type"in i)return ui(i)}catch(n){console.warn("JSON parsing also failed:",n)}}return null}function ui(e){let t;if(e.image instanceof Uint8Array)t=e.image;else if(typeof e.image=="string")try{t=new Uint8Array(atob(e.image).split("").map(a=>a.charCodeAt(0)))}catch(a){console.warn("Failed to decode base64 image data:",a),t=new Uint8Array(0)}else Array.isArray(e.image)?t=new Uint8Array(e.image):(console.warn("Unknown image data format in msgpack event"),t=new Uint8Array(0));let n="png";t.length>=2&&(t[0]===255&&t[1]===216?n="jpg":t.length>=4&&t[0]===137&&t[1]===80&&t[2]===78&&t[3]===71&&(n="png"));const i=e.event_type,r=new Date().toISOString().replace(/[-:]/g,"").replace("T","_").substring(0,15);let s;if(i==="final")s=`${r}_final.${n}`;else{const a=e.step_ix||0;s=`${r}_step_${a.toString().padStart(2,"0")}.${n}`}const o=new Kr({filename:s,data:t});return new lh({event_type:i==="final"?"final":"intermediate",samp_ix:e.samp_ix||0,step_ix:e.step_ix||0,gen_id:String(e.gen_id||""),sigma:e.sigma||0,image:o})}function Nc(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t="";for(let n=0;n<6;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}function Fc(){const e=new Date,t=String(e.getUTCMilliseconds()).padStart(3,"0");return e.toISOString().replace(/\.\d{3}Z$/,`.${t}Z`)}function bo(e){const t={...e};return t["x-correlation-id"]=Nc(),t["x-initiated-at"]=Fc(),t}async function jc(e){const t={};if(e.headers.forEach((n,i)=>{t[i]=n}),!e.ok){const n=new Error(`HTTP Error: ${e.status} ${e.statusText}`);throw n.status=e.status,n.statusText=e.statusText,n}if(e.headers.get("Content-Type")?.includes("application/zip")||e.headers.get("Content-Type")?.includes("application/octet-stream")||e.headers.get("Content-Type")?.includes("application/msgpack")){const i=await e.clone().arrayBuffer();return{statusCode:e.status,statusText:e.statusText,headers:t,data:i}}return{statusCode:e.status,statusText:e.statusText,headers:t,data:e.body}}var zc={enabled:!0,maxRetries:3,baseDelay:1e3,maxDelay:3e4,retryStatusCodes:[429]};async function yo(e,t){const n={...zc,...t||{}};if(!n.enabled)return e();let i=null;for(let r=0;r<=n.maxRetries;r++)try{return await e()}catch(s){if(i=s,!Hc(s,n,r)||r>=n.maxRetries)throw s;const a=Vc(r,n);console.warn(`Request failed with error: ${i.message}. Retrying in ${a}ms... (Attempt ${r+1}/${n.maxRetries})`),await new Promise(l=>setTimeout(l,a))}throw i||new Error("Failed after retries")}function Hc(e,t,n){return n>=t.maxRetries?!1:!!(e&&e.status&&t.retryStatusCodes.includes(e.status)||e instanceof TypeError&&e.message.includes("fetch")||e.name==="AbortError")}function Vc(e,t){const n=t.baseDelay*Math.pow(1.2,e),i=Math.random()*300;return Math.min(n+i,t.maxDelay)}function $c(e){let t="";const n=e.byteLength;for(let i=0;i<n;i++)t+=String.fromCharCode(e[i]);return btoa(t)}async function yl(e){return yi()?Bi(e):Ni(e)}async function Bi(e){if(typeof e=="string")try{const t=Et("fs"),n=mo();if(!n)throw new Error("Canvas module not available. Please install it with: npm install canvas");const{createCanvas:i,loadImage:r}=n,s=await r(e),o=i(s.width,s.height);o.getContext("2d").drawImage(s,0,0);const u=e.toLowerCase().endsWith(".jpg")||e.toLowerCase().endsWith(".jpeg")?"image/jpeg":"image/png",f=o.toDataURL(u).replace(new RegExp(`^data:${u};base64,`),"");return{width:s.width,height:s.height,base64:f}}catch(t){const n=t instanceof Error?t.message:"Unknown error";throw new Error(`Failed to load image from path: ${n}`)}else if(e instanceof Uint8Array){const t=mo();if(!t)throw new Error("Canvas module not available. Please install it with: npm install canvas");const{createCanvas:n,loadImage:i}=t,r=Buffer.from(e);try{const s=await i(r),o=n(s.width,s.height);o.getContext("2d").drawImage(s,0,0);const l=o.toDataURL("image/png").replace(/^data:image\/png;base64,/,"");return{width:s.width,height:s.height,base64:l}}catch(s){const o=s instanceof Error?s.message:"Unknown error";throw new Error(`Failed to load image from Uint8Array: ${o}`)}}else{if(e instanceof ArrayBuffer)return Bi(new Uint8Array(e));if(typeof e=="object"&&e!==null){if("data"in e&&e.data instanceof Uint8Array)return Bi(e.data);if("url"in e&&typeof e.url=="string")return Bi(e.url)}}throw new Error("Unsupported image input format in Node.js environment")}async function Ni(e){try{const t=document.createElement("canvas"),n=t.getContext("2d");if(!n)throw new Error("Failed to get canvas rendering context");let i=null;if(e instanceof HTMLImageElement)i=e;else{if(e instanceof HTMLCanvasElement)return{width:e.width,height:e.height,base64:e.toDataURL("image/png").replace(/^data:image\/png;base64,/,"")};if(typeof e=="string"){if(i=new Image,e.startsWith("data:")||e.startsWith("blob:")||e.startsWith("http"))i.src=e;else throw new Error("File paths are not supported in browser environment. Use a Blob, File, or Data URL instead.");await new Promise((r,s)=>{i?(i.onload=()=>r(),i.onerror=()=>s(new Error("Failed to load image from URL"))):s(new Error("Image element is not initialized"))})}else if(e instanceof Blob||e instanceof File){const r=URL.createObjectURL(e);i=new Image,i.src=r,await new Promise((s,o)=>{i?(i.onload=()=>s(),i.onerror=()=>o(new Error("Failed to load image from Blob/File"))):o(new Error("Image element is not initialized"))}),URL.revokeObjectURL(r)}else if(e instanceof ArrayBuffer||e instanceof Uint8Array){const r=e instanceof ArrayBuffer?new Uint8Array(e):e,s=new Blob([r],{type:"image/png"});return Ni(s)}else if(typeof e=="object"&&e!==null){if("data"in e&&e.data instanceof Uint8Array)return Ni(e.data);if("url"in e&&typeof e.url=="string")return Ni(e.url)}else throw new Error("Unsupported image input format")}if(!i)throw new Error("Failed to create image element");return t.width=i.width,t.height=i.height,n.drawImage(i,0,0),{width:i.width,height:i.height,base64:t.toDataURL("image/png").replace(/^data:image\/png;base64,/,"")}}catch(t){const n=t instanceof Error?t.message:"Unknown error";throw new Error(`Failed to parse image in browser: ${n}`)}}function qc(e){const t=JSON.parse(JSON.stringify(e,(i,r)=>r===void 0?void 0:r));return delete t.model,delete t.action,delete t.prompt,delete t.resPreset,{input:e.prompt,model:e.model,action:e.action,parameters:t}}function Wc(e,t=!1){const n=e.steps||28,i=e.n_samples||1,r=e.width||1024,s=e.height||1024,o=e.action==="img2img"&&e.strength?e.strength:1;let a=1;e.model==="nai-diffusion-4-full"||e.model==="nai-diffusion-4-curated-preview"||e.model==="nai-diffusion-4-5-curated"?e.autoSmea&&(a=1.2):e.sm_dyn?a=1.4:e.sm&&(a=1.2);const l=Math.max(r*s,65536);let u=l;l>832*1216&&l<=1024*1024&&(u=832*1216);let f=Math.ceil(2951823174884865e-21*u+5753298233447344e-22*u*n)*a;f=Math.max(Math.ceil(f*o),2);const m=t&&n<=28&&u<=1024*1024;return f*(i-(m?1:0))}function Ai(e){if(!e)return e;const t=new Set,n=[];for(const i of e.split(",")){const r=i.trim();if(!r)continue;const s=r.toLowerCase();t.has(s)||(t.add(s),n.push(r))}return n.join(", ")}function Un(e){let t=e.length;for(;--t>=0;)e[t]=0}var Gc=3,Zc=258,wl=29,Kc=256,Yc=Kc+1+wl,xl=30,Xc=512,Jc=new Array((Yc+2)*2);Un(Jc);var Qc=new Array(xl*2);Un(Qc);var eh=new Array(Xc);Un(eh);var th=new Array(Zc-Gc+1);Un(th);var nh=new Array(wl);Un(nh);var ih=new Array(xl);Un(ih);try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{}var Gr=new Uint8Array(256);for(let e=0;e<256;e++)Gr[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Gr[254]=Gr[254]=1;_s(Jd());_s(tc());function rh(){for(let e=1;e<arguments.length;e++)for(const t in arguments[e])arguments[0][t]=arguments[e][t];return arguments[0]}function Zr(e){return e.map(t=>String.fromCharCode(t)).join("")}function sh(e){if(e.length>=8){const t=Zr(e.slice(0,8));if(t==="ASCII\0\0\0")return Zr(e.slice(8));if(t==="JIS\0\0\0\0\0")return"[JIS encoded text]";if(t==="UNICODE\0")return"[Unicode encoded text]";if(t==="\0\0\0\0\0\0\0\0")return"[Undefined encoding]"}return"Undefined"}var st={ApertureValue:e=>Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2),ColorSpace(e){return e===1?"sRGB":e===65535?"Uncalibrated":"Unknown"},ComponentsConfiguration(e){return e.map(t=>{if(t===49)return"Y";if(t===50)return"Cb";if(t===51)return"Cr";if(t===52)return"R";if(t===53)return"G";if(t===54)return"B"}).join("")},Contrast(e){return e===0?"Normal":e===1?"Soft":e===2?"Hard":"Unknown"},CustomRendered(e){return e===0?"Normal process":e===1?"Custom process":"Unknown"},ExposureMode(e){return e===0?"Auto exposure":e===1?"Manual exposure":e===2?"Auto bracket":"Unknown"},ExposureProgram(e){return e===0?"Undefined":e===1?"Manual":e===2?"Normal program":e===3?"Aperture priority":e===4?"Shutter priority":e===5?"Creative program":e===6?"Action program":e===7?"Portrait mode":e===8?"Landscape mode":e===9?"Bulb":"Unknown"},ExposureTime(e){if(e[0]/e[1]>.25){const t=e[0]/e[1];return Number.isInteger(t)?""+t:t.toFixed(1)}return e[0]!==0?`1/${Math.round(e[1]/e[0])}`:`0/${e[1]}`},FNumber:e=>`f/${Number(e[0]/e[1]).toFixed(1)}`,FocalLength:e=>e[0]/e[1]+" mm",FocalPlaneResolutionUnit(e){return e===2?"inches":e===3?"centimeters":e===4?"millimeters":"Unknown"},LightSource:e=>e===1?"Daylight":e===2?"Fluorescent":e===3?"Tungsten (incandescent light)":e===4?"Flash":e===9?"Fine weather":e===10?"Cloudy weather":e===11?"Shade":e===12?"Daylight fluorescent (D 5700  7100K)":e===13?"Day white fluorescent (N 4600  5400K)":e===14?"Cool white fluorescent (W 3900  4500K)":e===15?"White fluorescent (WW 3200  3700K)":e===17?"Standard light A":e===18?"Standard light B":e===19?"Standard light C":e===20?"D55":e===21?"D65":e===22?"D75":e===23?"D50":e===24?"ISO studio tungsten":e===255?"Other light source":"Unknown",MeteringMode(e){return e===1?"Average":e===2?"CenterWeightedAverage":e===3?"Spot":e===4?"MultiSpot":e===5?"Pattern":e===6?"Partial":e===255?"Other":"Unknown"},ResolutionUnit(e){return e===2?"inches":e===3?"centimeters":"Unknown"},Saturation(e){return e===0?"Normal":e===1?"Low saturation":e===2?"High saturation":"Unknown"},FocalLengthIn35mmFilm(e){return e===0?"Unknown":e+" mm"},SceneCaptureType(e){return e===0?"Standard":e===1?"Landscape":e===2?"Portrait":e===3?"Night scene":"Unknown"},Sharpness(e){return e===0?"Normal":e===1?"Soft":e===2?"Hard":"Unknown"},ShutterSpeedValue(e){const t=Math.pow(2,e[0]/e[1]);return t<=1?`${Math.round(1/t)}`:`1/${Math.round(t)}`},WhiteBalance(e){return e===0?"Auto white balance":e===1?"Manual white balance":"Unknown"},XResolution:e=>""+Math.round(e[0]/e[1]),YResolution:e=>""+Math.round(e[0]/e[1])},oh={11:"ProcessingSoftware",254:{name:"SubfileType",description:e=>({0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image",3:"Single page of multi-page reduced-resolution image",4:"Transparency mask",5:"Transparency mask of reduced-resolution image",6:"Transparency mask of multi-page image",7:"Transparency mask of reduced-resolution multi-page image",65537:"Alternate reduced-resolution image",4294967295:"Invalid"})[e]||"Unknown"},255:{name:"OldSubfileType",description:e=>({0:"Full-resolution image",1:"Reduced-resolution image",2:"Single page of multi-page image"})[e]||"Unknown"},256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:{name:"Thresholding",description:e=>({1:"No dithering or halftoning",2:"Ordered dither or halfton",3:"Randomized dither"})[e]||"Unknown"},264:"CellWidth",265:"CellLength",266:{name:"FillOrder",description:e=>({1:"Normal",2:"Reversed"})[e]||"Unknown"},269:"DocumentName",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:{name:"Orientation",description:e=>e===1?"top-left":e===2?"top-right":e===3?"bottom-right":e===4?"bottom-left":e===5?"left-top":e===6?"right-top":e===7?"right-bottom":e===8?"left-bottom":"Undefined"},277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:{name:"XResolution",description:st.XResolution},283:{name:"YResolution",description:st.YResolution},284:"PlanarConfiguration",285:"PageName",286:{name:"XPosition",description:e=>""+Math.round(e[0]/e[1])},287:{name:"YPosition",description:e=>""+Math.round(e[0]/e[1])},290:{name:"GrayResponseUnit",description:e=>({1:"0.1",2:"0.001",3:"0.0001",4:"1e-05",5:"1e-06"})[e]||"Unknown"},296:{name:"ResolutionUnit",description:st.ResolutionUnit},297:"PageNumber",301:"TransferFunction",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",317:"Predictor",318:{name:"WhitePoint",description:e=>e.map(t=>`${t[0]}/${t[1]}`).join(", ")},319:{name:"PrimaryChromaticities",description:e=>e.map(t=>`${t[0]}/${t[1]}`).join(", ")},321:"HalftoneHints",322:"TileWidth",323:"TileLength",330:"A100DataOffset",332:{name:"InkSet",description:e=>({1:"CMYK",2:"Not CMYK"})[e]||"Unknown"},337:"TargetPrinter",338:{name:"ExtraSamples",description:e=>({0:"Unspecified",1:"Associated Alpha",2:"Unassociated Alpha"})[e]||"Unknown"},339:{name:"SampleFormat",description:e=>{const t={1:"Unsigned",2:"Signed",3:"Float",4:"Undefined",5:"Complex int",6:"Complex float"};return Array.isArray(e)?e.map(n=>t[n]||"Unknown").join(", "):"Unknown"}},513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",529:{name:"YCbCrCoefficients",description:e=>e.map(t=>""+t[0]/t[1]).join("/")},530:"YCbCrSubSampling",531:{name:"YCbCrPositioning",description:e=>e===1?"centered":e===2?"co-sited":"undefined "+e},532:{name:"ReferenceBlackWhite",description:e=>e.map(t=>""+t[0]/t[1]).join(", ")},700:"ApplicationNotes",18246:"Rating",18249:"RatingPercent",33432:{name:"Copyright",description:e=>e.join("; ")},33550:"PixelScale",33723:"IPTC-NAA",33920:"IntergraphMatrix",33922:"ModelTiePoint",34118:"SEMInfo",34264:"ModelTransform",34377:"PhotoshopSettings",34665:"Exif IFD Pointer",34675:"ICC_Profile",34735:"GeoTiffDirectory",34736:"GeoTiffDoubleParams",34737:"GeoTiffAsciiParams",34853:"GPS Info IFD Pointer",40091:{name:"XPTitle",description:Hn},40092:{name:"XPComment",description:Hn},40093:{name:"XPAuthor",description:Hn},40094:{name:"XPKeywords",description:Hn},40095:{name:"XPSubject",description:Hn},42112:"GDALMetadata",42113:"GDALNoData",50341:"PrintIM",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"DNGLensInfo",50739:"ShadowScale",50741:{name:"MakerNoteSafety",description:e=>({0:"Unsafe",1:"Safe"})[e]||"Unknown"},50778:{name:"CalibrationIlluminant1",description:st.LightSource},50779:{name:"CalibrationIlluminant2",description:st.LightSource},50781:"RawDataUniqueID",50827:"OriginalRawFileName",50828:"OriginalRawFileData",50831:"AsShotICCProfile",50832:"AsShotPreProfileMatrix",50833:"CurrentICCProfile",50834:"CurrentPreProfileMatrix",50879:"ColorimetricReference",50885:"SRawType",50898:"PanasonicTitle",50899:"PanasonicTitle2",50931:"CameraCalibrationSig",50932:"ProfileCalibrationSig",50933:"ProfileIFD",50934:"AsShotProfileName",50936:"ProfileName",50937:"ProfileHueSatMapDims",50938:"ProfileHueSatMapData1",50939:"ProfileHueSatMapData2",50940:"ProfileToneCurve",50941:{name:"ProfileEmbedPolicy",description:e=>({0:"Allow Copying",1:"Embed if Used",2:"Never Embed",3:"No Restrictions"})[e]||"Unknown"},50942:"ProfileCopyright",50964:"ForwardMatrix1",50965:"ForwardMatrix2",50966:"PreviewApplicationName",50967:"PreviewApplicationVersion",50968:"PreviewSettingsName",50969:"PreviewSettingsDigest",50970:{name:"PreviewColorSpace",description:e=>({1:"Gray Gamma 2.2",2:"sRGB",3:"Adobe RGB",4:"ProPhoto RGB"})[e]||"Unknown"},50971:"PreviewDateTime",50972:"RawImageDigest",50973:"OriginalRawFileDigest",50981:"ProfileLookTableDims",50982:"ProfileLookTableData",51043:"TimeCodes",51044:"FrameRate",51058:"TStop",51081:"ReelName",51089:"OriginalDefaultFinalSize",51090:"OriginalBestQualitySize",51091:"OriginalDefaultCropSize",51105:"CameraLabel",51107:{name:"ProfileHueSatMapEncoding",description:e=>({0:"Linear",1:"sRGB"})[e]||"Unknown"},51108:{name:"ProfileLookTableEncoding",description:e=>({0:"Linear",1:"sRGB"})[e]||"Unknown"},51109:"BaselineExposureOffset",51110:{name:"DefaultBlackRender",description:e=>({0:"Auto",1:"None"})[e]||"Unknown"},51111:"NewRawImageDigest",51112:"RawToPreviewGain"};function Hn(e){return new TextDecoder("utf-16").decode(new Uint8Array(e)).replace(/\u0000+$/,"")}var ah={33434:{name:"ExposureTime",description:st.ExposureTime},33437:{name:"FNumber",description:st.FNumber},34850:{name:"ExposureProgram",description:st.ExposureProgram},34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:{name:"OECF",description:()=>"[Raw OECF table data]"},34858:"TimeZoneOffset",34859:"SelfTimerMode",34864:{name:"SensitivityType",description:e=>({1:"Standard Output Sensitivity",2:"Recommended Exposure Index",3:"ISO Speed",4:"Standard Output Sensitivity and Recommended Exposure Index",5:"Standard Output Sensitivity and ISO Speed",6:"Recommended Exposure Index and ISO Speed",7:"Standard Output Sensitivity, Recommended Exposure Index and ISO Speed"})[e]||"Unknown"},34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:{name:"ExifVersion",description:e=>Zr(e)},36867:"DateTimeOriginal",36868:"DateTimeDigitized",36873:"GooglePlusUploadCode",36880:"OffsetTime",36881:"OffsetTimeOriginal",36882:"OffsetTimeDigitized",37121:{name:"ComponentsConfiguration",description:st.ComponentsConfiguration},37122:"CompressedBitsPerPixel",37377:{name:"ShutterSpeedValue",description:st.ShutterSpeedValue},37378:{name:"ApertureValue",description:st.ApertureValue},37379:"BrightnessValue",37380:"ExposureBiasValue",37381:{name:"MaxApertureValue",description:e=>Math.pow(Math.sqrt(2),e[0]/e[1]).toFixed(2)},37382:{name:"SubjectDistance",description:e=>e[0]/e[1]+" m"},37383:{name:"MeteringMode",description:st.MeteringMode},37384:{name:"LightSource",description:st.LightSource},37385:{name:"Flash",description:e=>e===0?"Flash did not fire":e===1?"Flash fired":e===5?"Strobe return light not detected":e===7?"Strobe return light detected":e===9?"Flash fired, compulsory flash mode":e===13?"Flash fired, compulsory flash mode, return light not detected":e===15?"Flash fired, compulsory flash mode, return light detected":e===16?"Flash did not fire, compulsory flash mode":e===24?"Flash did not fire, auto mode":e===25?"Flash fired, auto mode":e===29?"Flash fired, auto mode, return light not detected":e===31?"Flash fired, auto mode, return light detected":e===32?"No flash function":e===65?"Flash fired, red-eye reduction mode":e===69?"Flash fired, red-eye reduction mode, return light not detected":e===71?"Flash fired, red-eye reduction mode, return light detected":e===73?"Flash fired, compulsory flash mode, red-eye reduction mode":e===77?"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected":e===79?"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected":e===89?"Flash fired, auto mode, red-eye reduction mode":e===93?"Flash fired, auto mode, return light not detected, red-eye reduction mode":e===95?"Flash fired, auto mode, return light detected, red-eye reduction mode":"Unknown"},37386:{name:"FocalLength",description:st.FocalLength},37393:"ImageNumber",37394:{name:"SecurityClassification",description:e=>({C:"Confidential",R:"Restricted",S:"Secret",T:"Top Secret",U:"Unclassified"})[e]||"Unknown"},37395:"ImageHistory",37396:{name:"SubjectArea",description:e=>e.length===2?`Location; X: ${e[0]}, Y: ${e[1]}`:e.length===3?`Circle; X: ${e[0]}, Y: ${e[1]}, diameter: ${e[2]}`:e.length===4?`Rectangle; X: ${e[0]}, Y: ${e[1]}, width: ${e[2]}, height: ${e[3]}`:"Unknown"},37500:{name:"MakerNote",description:()=>"[Raw maker note data]"},37510:{name:"UserComment",description:sh},37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",37724:"ImageSourceData",37888:{name:"AmbientTemperature",description:e=>e[0]/e[1]+" C"},37889:{name:"Humidity",description:e=>e[0]/e[1]+" %"},37890:{name:"Pressure",description:e=>e[0]/e[1]+" hPa"},37891:{name:"WaterDepth",description:e=>e[0]/e[1]+" m"},37892:{name:"Acceleration",description:e=>e[0]/e[1]+" mGal"},37893:{name:"CameraElevationAngle",description:e=>e[0]/e[1]+" "},40960:{name:"FlashpixVersion",description:e=>e.map(t=>String.fromCharCode(t)).join("")},40961:{name:"ColorSpace",description:st.ColorSpace},40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",40965:"Interoperability IFD Pointer",41483:"FlashEnergy",41484:{name:"SpatialFrequencyResponse",description:()=>"[Raw SFR table data]"},41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:{name:"FocalPlaneResolutionUnit",description:st.FocalPlaneResolutionUnit},41492:{name:"SubjectLocation",description:([e,t])=>`X: ${e}, Y: ${t}`},41493:"ExposureIndex",41495:{name:"SensingMethod",description:e=>e===1?"Undefined":e===2?"One-chip color area sensor":e===3?"Two-chip color area sensor":e===4?"Three-chip color area sensor":e===5?"Color sequential area sensor":e===7?"Trilinear sensor":e===8?"Color sequential linear sensor":"Unknown"},41728:{name:"FileSource",description:e=>e===3?"DSC":"Unknown"},41729:{name:"SceneType",description:e=>e===1?"A directly photographed image":"Unknown"},41730:{name:"CFAPattern",description:()=>"[Raw CFA pattern table data]"},41985:{name:"CustomRendered",description:st.CustomRendered},41986:{name:"ExposureMode",description:st.ExposureMode},41987:{name:"WhiteBalance",description:st.WhiteBalance},41988:{name:"DigitalZoomRatio",description:e=>e[0]===0?"Digital zoom was not used":""+e[0]/e[1]},41989:{name:"FocalLengthIn35mmFilm",description:st.FocalLengthIn35mmFilm},41990:{name:"SceneCaptureType",description:st.SceneCaptureType},41991:{name:"GainControl",description:e=>e===0?"None":e===1?"Low gain up":e===2?"High gain up":e===3?"Low gain down":e===4?"High gain down":"Unknown"},41992:{name:"Contrast",description:st.Contrast},41993:{name:"Saturation",description:st.Saturation},41994:{name:"Sharpness",description:st.Sharpness},41995:{name:"DeviceSettingDescription",description:()=>"[Raw device settings table data]"},41996:{name:"SubjectDistanceRange",description:e=>e===1?"Macro":e===2?"Close view":e===3?"Distant view":"Unknown"},42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:{name:"LensSpecification",description:e=>{const t=parseFloat((e[0][0]/e[0][1]).toFixed(5)),n=parseFloat((e[1][0]/e[1][1]).toFixed(5)),i=`${t}-${n} mm`;if(e[3][1]===0)return`${i} f/?`;const r=1/(e[2][1]/e[2][1]/(e[3][0]/e[3][1]));return`${i} f/${parseFloat(r.toFixed(5))}`}},42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42080:{name:"CompositeImage",description:e=>({1:"Not a Composite Image",2:"General Composite Image",3:"Composite Image Captured While Shooting"})[e]||"Unknown"},42081:"SourceImageNumberOfCompositeImage",42082:"SourceExposureTimesOfCompositeImage",42240:"Gamma",59932:"Padding",59933:"OffsetSchema",65e3:"OwnerName",65001:"SerialNumber",65002:"Lens",65100:"RawFile",65101:"Converter",65102:"WhiteBalance",65105:"Exposure",65106:"Shadows",65107:"Brightness",65108:"Contrast",65109:"Saturation",65110:"Sharpness",65111:"Smoothness",65112:"MoireFilter"};rh({},oh,ah);var Kr=class{constructor(e){this.filename=e.filename,this.data=e.data}get size(){return this.data.byteLength}toBase64(){return $c(this.data)}toDataURL(){return`data:${this.filename.toLowerCase().endsWith(".png")?"image/png":"image/jpeg"};base64,${this.toBase64()}`}async save(e){if(typeof window<"u")throw new Error("save() is only available in Node.js environment");try{const t=rc();if(!t)throw new Error("Path module not available");let n;return e.endsWith("/")||!t.extname(e)?(Vr(e),n=t.join(e,this.filename)):(Vr(t.dirname(e)),n=e),oc(this.data,n),n}catch(t){throw new Error(`Failed to save image: ${t.message}`)}}toBlob(){if(typeof window>"u")throw new Error("toBlob() is only available in browser environment");const e=this.filename.toLowerCase().endsWith(".png")?"image/png":"image/jpeg";return new Blob([this.data],{type:e})}toFile(){if(typeof window>"u")throw new Error("toFile() is only available in browser environment");const e=this.filename.toLowerCase().endsWith(".png")?"image/png":"image/jpeg";return new File([this.data],this.filename,{type:e})}},Ki=(e=>(e.INTERMEDIATE="intermediate",e.FINAL="final",e))(Ki||{}),lh=class{constructor(e){this.event_type=e.event_type,this.samp_ix=e.samp_ix,this.step_ix=e.step_ix,this.gen_id=e.gen_id,this.sigma=e.sigma,this.image=e.image}toString(){return`MsgpackEvent(event_type=${this.event_type}, step_ix=${this.step_ix}, gen_id=${this.gen_id})`}},uh=class{processMetadata(e){const t=JSON.parse(JSON.stringify(e));return this.applyDefaultValues(t),this.handleResolution(t),this.handleUcPreset(t),this.handleQualityTags(t),t.prompt=t.prompt?Ai(t.prompt):"",t.negative_prompt=t.negative_prompt?Ai(t.negative_prompt):"",this.handleActionSpecificParameters(t),this.handleUseCoords(t),this.handleCharacterPrompts(t),this.handleStream(t),this.handleV4Prompt(t),this.handleV4NegativePrompt(t),this.handleModelSpecificSettings(t),this.handleSamplerSpecificSettings(t),this.handleInpaintImg2ImgStrength(t),t}applyDefaultValues(e){e.model=e.model??"nai-diffusion-4-5-full",e.action=e.action??"generate",e.resPreset=e.resPreset??"normal_portrait",e.ucPreset=e.ucPreset??0,e.qualityToggle=e.qualityToggle??!0,e.n_samples=e.n_samples??1,e.steps=e.steps??28,e.scale=e.scale??6,e.dynamic_thresholding=e.dynamic_thresholding??!1,e.seed=e.seed??Math.floor(Math.random()*4294967288),e.sampler=e.sampler??"k_euler_ancestral",e.cfg_rescale=e.cfg_rescale??0,e.noise_schedule=e.noise_schedule??"karras",e.controlnet_strength=e.controlnet_strength??1,e.add_original_image=e.add_original_image??!0,e.autoSmea=e.autoSmea??!1,e.params_version=e.params_version??3,e.prompt=e.prompt??"1girl, cute",e.negative_prompt=e.negative_prompt??"",e.characterPrompts=e.characterPrompts??[],e.skip_cfg_above_sigma=null,e.legacy_uc=e.legacy_uc??!1,e.legacy=e.legacy??!1,e.legacy_v3_extend=e.legacy_v3_extend??!1,e.normalize_reference_strength_multiple=e.normalize_reference_strength_multiple??!0,e.stream=void 0}handleStream(e){Hr(e.model)&&e.action=="generate"&&(e.stream="msgpack")}handleActionSpecificParameters(e){(e.action==="img2img"||e.action==="infill")&&(e.sm=!1,e.sm_dyn=!1,e.strength=e.strength||.3,e.noise=e.noise||0,e.extra_noise_seed=e.extra_noise_seed||Math.floor(Math.random()*4294967288))}handleModelSpecificSettings(e){const t=["nai-diffusion-4-full","nai-diffusion-4-full-inpainting","nai-diffusion-4-curated-preview","nai-diffusion-4-curated-inpainting","nai-diffusion-4-5-curated","nai-diffusion-4-5-curated-inpainting","nai-diffusion-4-5-full","nai-diffusion-4-5-full-inpainting"];e.model&&t.includes(e.model)&&(e.sm=void 0,e.sm_dyn=void 0)}handleSamplerSpecificSettings(e){e.sampler==="k_euler_ancestral"&&(e.deliberate_euler_ancestral_bug=!1,e.prefer_brownian=!0)}handleQualityTags(e){if(!e.qualityToggle)return;let t="";e.model==="nai-diffusion-4-5-full"||e.model==="nai-diffusion-4-5-full-inpainting"?t=", very aesthetic, masterpiece, no text":e.model==="nai-diffusion-4-5-curated"||e.model==="nai-diffusion-4-5-curated-inpainting"?t=", location, masterpiece, no text, -0.8::feet::, rating:general":e.model==="nai-diffusion-4-full"||e.model==="nai-diffusion-4-full-inpainting"?t=", no text, best quality, very aesthetic, absurdres":e.model==="nai-diffusion-4-curated-preview"||e.model==="nai-diffusion-4-curated-inpainting"?t=", rating:general, amazing quality, very aesthetic, absurdres":e.model==="nai-diffusion-3"||e.model==="nai-diffusion-3-inpainting"?t=", best quality, amazing quality, very aesthetic, absurdres":(e.model==="nai-diffusion-furry-3"||e.model==="nai-diffusion-furry-3-inpainting")&&(t=", {best quality}, {amazing quality}"),e.prompt+=t}handleUcPreset(e){let t="";e.model==="nai-diffusion-4-5-full"||e.model==="nai-diffusion-4-5-full-inpainting"?e.ucPreset===0?t=", nsfw, lowres, artistic error, film grain, scan artifacts, worst quality, bad quality, jpeg artifacts, very displeasing, chromatic aberration, dithering, halftone, screentone, multiple views, logo, too many watermarks, negative space, blank page":e.ucPreset===1?t=", nsfw, lowres, artistic error, scan artifacts, worst quality, bad quality, jpeg artifacts, multiple views, very displeasing, too many watermarks, negative space, blank page":e.ucPreset===2?t=", nsfw, {worst quality}, distracting watermark, unfinished, bad quality, {widescreen}, upscale, {sequence}, {{grandfathered content}}, blurred foreground, chromatic aberration, sketch, everyone, [sketch background], simple, [flat colors], ych (character), outline, multiple scenes, [[horror (theme)]], comic":e.ucPreset===3&&(t=", nsfw, lowres, artistic error, film grain, scan artifacts, worst quality, bad quality, jpeg artifacts, very displeasing, chromatic aberration, dithering, halftone, screentone, multiple views, logo, too many watermarks, negative space, blank page, @_@, mismatched pupils, glowing eyes, bad anatomy"):e.model==="nai-diffusion-4-5-curated"||e.model==="nai-diffusion-4-5-curated-inpainting"?e.ucPreset===0?t=", blurry, lowres, upscaled, artistic error, film grain, scan artifacts, worst quality, bad quality, jpeg artifacts, very displeasing, chromatic aberration, halftone, multiple views, logo, too many watermarks, negative space, blank page":e.ucPreset===1?t=", blurry, lowres, upscaled, artistic error, scan artifacts, jpeg artifacts, logo, too many watermarks, negative space, blank page":e.ucPreset===2&&(t=", blurry, lowres, upscaled, artistic error, film grain, scan artifacts, bad anatomy, bad hands, worst quality, bad quality, jpeg artifacts, very displeasing, chromatic aberration, halftone, multiple views, logo, too many watermarks, @_@, mismatched pupils, glowing eyes, negative space, blank page"):e.model==="nai-diffusion-4-full"||e.model==="nai-diffusion-4-full-inpainting"?e.ucPreset===0?t=", blurry, lowres, error, film grain, scan artifacts, worst quality, bad quality, jpeg artifacts, very displeasing, chromatic aberration, multiple views, logo, too many watermarks":e.ucPreset===1&&(t=", blurry, lowres, error, worst quality, bad quality, jpeg artifacts, very displeasing"):e.model==="nai-diffusion-4-curated-preview"||e.model==="nai-diffusion-4-curated-inpainting"?e.ucPreset===0?t=", blurry, lowres, error, film grain, scan artifacts, worst quality, bad quality, jpeg artifacts, very displeasing, chromatic aberration, logo, dated, signature, multiple views, gigantic breasts":e.ucPreset===1&&(t=", blurry, lowres, error, worst quality, bad quality, jpeg artifacts, very displeasing, logo, dated, signature"):e.model==="nai-diffusion-3"||e.model==="nai-diffusion-3-inpainting"?e.ucPreset===0?t=", lowres, {bad}, error, fewer, extra, missing, worst quality, jpeg artifacts, bad quality, watermark, unfinished, displeasing, chromatic aberration, signature, extra digits, artistic error, username, scan, [abstract],":e.ucPreset===1?t=", lowres, jpeg artifacts, worst quality, watermark, blurry, very displeasing,":e.ucPreset===2&&(t=", lowres, {bad}, error, fewer, extra, missing, worst quality, jpeg artifacts, bad quality, watermark, unfinished, displeasing, chromatic aberration, signature, extra digits, artistic error, username, scan, [abstract], bad anatomy, bad hands, @_@, mismatched pupils, heart-shaped pupils, glowing eyes,"):(e.model==="nai-diffusion-furry-3"||e.model==="nai-diffusion-furry-3-inpainting")&&(e.ucPreset===0?t=", {{worst quality}}, [displeasing], {unusual pupils}, guide lines, {{unfinished}}, {bad}, url, artist name, {{tall image}}, mosaic, {sketch page}, comic panel, impact (font), [dated], {logo}, ych, {what}, {where is your god now}, {distorted text}, repeated text, {floating head}, {1994}, {widescreen}, absolutely everyone, sequence, {compression artifacts}, hard translated, {cropped}, {commissioner name}, unknown text, high contrast,":e.ucPreset===1&&(t=", {worst quality}, guide lines, unfinished, bad, url, tall image, widescreen, compression artifacts, unknown text,")),e.negative_prompt=t+", "+e.negative_prompt}handleInpaintImg2ImgStrength(e){(e.model==="nai-diffusion-4-5-full"||e.model==="nai-diffusion-4-5-full-inpainting")&&(e.inpaintImg2ImgStrength=e.inpaintImg2ImgStrength||1)}handleUseCoords(e){if(!e.characterPrompts?.length){e.use_coords=!1;return}e.use_coords=e.characterPrompts.some(t=>t.center?.x!==.5||t.center?.y!==.5)}handleCharacterPrompts(e){e.characterPrompts?.length&&e.characterPrompts.forEach(t=>{t.enabled=t.enabled??!0,t.prompt=t.prompt?Ai(t.prompt):"1girl, cute",t.uc=t.uc?Ai(t.uc):"lowres, aliasing,",t.center=t.center||{x:.5,y:.5},t.center.x=t.center.x??.5,t.center.y=t.center.y??.5})}handleV4Prompt(e){if(e.v4_prompt)return;const t=["nai-diffusion-4-full","nai-diffusion-4-full-inpainting","nai-diffusion-4-curated-preview","nai-diffusion-4-curated-inpainting","nai-diffusion-4-5-curated","nai-diffusion-4-5-curated-inpainting","nai-diffusion-4-5-full","nai-diffusion-4-5-full-inpainting"];if(!e.model||!t.includes(e.model))return;const n=[];e.characterPrompts?.forEach(i=>{i.enabled&&n.push({char_caption:i.prompt,centers:[i.center]})}),e.v4_prompt={caption:{base_caption:e.prompt||"",char_captions:n},use_coords:e.use_coords||!1,use_order:!0}}handleV4NegativePrompt(e){if(e.v4_negative_prompt)return;const t=["nai-diffusion-4-full","nai-diffusion-4-full-inpainting","nai-diffusion-4-curated-preview","nai-diffusion-4-curated-inpainting","nai-diffusion-4-5-curated","nai-diffusion-4-5-curated-inpainting","nai-diffusion-4-5-full","nai-diffusion-4-5-full-inpainting"];if(!e.model||!t.includes(e.model))return;const n=[];e.characterPrompts?.forEach(i=>{i.enabled&&i.uc&&n.push({char_caption:i.uc,centers:[i.center]})}),e.v4_negative_prompt={caption:{base_caption:e.negative_prompt||"",char_captions:n},legacy_uc:e.legacy_uc||!1}}getResolutionDimensions(e){return{small_portrait:[512,768],small_landscape:[768,512],small_square:[640,640],normal_portrait:[832,1216],normal_landscape:[1216,832],normal_square:[1024,1024],large_portrait:[1024,1536],large_landscape:[1536,1024],large_square:[1472,1472],wallpaper_portrait:[1088,1920],wallpaper_landscape:[1920,1088]}[e]||[832,1216]}handleResolution(e){if(e.width==null||e.height==null)if(e.resPreset){const r=this.getResolutionDimensions(e.resPreset);e.width=r[0],e.height=r[1]}else e.width=832,e.height=1216;else e.width=Math.floor((e.width+63)/64)*64,e.height=Math.floor((e.height+63)/64)*64;const t=e.width*e.height,n=4096,i=3047424;if(t<n||t>i)throw new Error(`The maximum allowed total resolution is ${i} px, got ${e.width}x${e.height}=${t}.`)}},fh=new uh,dh=class{constructor(e){this.verbose=!1,this.vibeCache=new Map,this.token=e.token,this.host=e.host||"https://image.novelai.net",this.timeout=e.timeout||3e4,this.retryConfig=e.retry,this.verbose=e.verbose||!1,this.headers={...ic,Authorization:`Bearer ${this.token}`}}async generateImage(e,t=!1,n=!1){const i=this.processMetadata(e);if(this.verbose){const s=Wc(i,n);console.info(`Generating image... estimated Anlas cost: ${s}`)}await this.encodeVibe(i);const r=qc(i);return yo(async()=>i.model&&Hr(i.model)?t?this.streamV4Events(r):this.processV4Response(r):this.processV3Response(r),this.retryConfig)}async makeRequest(e,t){const n=new AbortController,i=setTimeout(()=>n.abort(),this.timeout),r=JSON.stringify(t),s=bo(this.headers);this.verbose&&(console.debug("[Headers] for image generation:",s),console.debug("[Payload] for image generation:",r));try{const o=await fetch(e,{method:"POST",headers:s,body:r,signal:n.signal});return await jc(o)}finally{clearTimeout(i)}}async processV3Response(e){try{const t=await this.makeRequest(`${this.host}/ai/generate-image`,e);return this.extractImagesFromZip(t)}catch(t){throw this.handleRequestError(t)}}async processV4Response(e){try{const t=await this.makeRequest(`${this.host}/ai/generate-image-stream`,e);return this.extractImagesFromMsgpack(t)}catch(t){throw this.handleRequestError(t)}}async extractImagesFromZip(e){const t=await this.getResponseBuffer(e),n=await nc.default.loadAsync(t),i=[],r=this.host.toLowerCase();let s=0;for(const o of Object.keys(n.files)){const a=n.files[o];if(!a.dir){const l=await a.async("uint8array"),u=this.generateTimestamp();i.push(new Kr({filename:`${u}_${r}_p${s}.png`,data:l})),s++}}return i}async extractImagesFromMsgpack(e){const t=await this.getResponseBuffer(e),n=new Uint8Array(t);return Uc(n).filter(r=>r.event_type==="final").map(r=>r.image)}async getResponseBuffer(e){if(e.data instanceof ArrayBuffer)return e.data;if(e.data)return await new Response(e.data).arrayBuffer();throw new Error("No data received from API")}generateTimestamp(){return new Date().toISOString().replace(/[-:]/g,"").replace("T","_").substring(0,15)}handleRequestError(e){return e.name==="AbortError"?new Error("Request timed out, please try again. If the problem persists, consider setting a higher 'timeout' value when initiating the NovelAI client."):e}processMetadata(e){return fh.processMetadata(e)}async useDirectorTool(e){return yo(async()=>{try{const t=await this.makeRequest(`${this.host}/ai/augment-image`,e);if(!t.data)throw new Error("Received empty response from the server.");const n=await this.getResponseBuffer(t);let i;try{i=(await this.extractImagesFromZip(t))[0]?.data||new Uint8Array(n)}catch{i=new Uint8Array(n)}return new Kr({filename:sc(e.req_type),data:i})}catch(t){throw this.handleRequestError(t)}},this.retryConfig)}async createDirectorRequest(e,t,n={}){const i=await yl(e),r={req_type:t,width:i.width,height:i.height,image:i.base64,...n};return this.useDirectorTool(r)}async lineArt(e){return this.createDirectorRequest(e,"lineart")}async sketch(e){return this.createDirectorRequest(e,"sketch")}async backgroundRemoval(e){return this.createDirectorRequest(e,"bg-removal")}async declutter(e){return this.createDirectorRequest(e,"declutter")}async colorize(e,t="",n=0){return this.createDirectorRequest(e,"colorize",{prompt:t,defry:n})}async changeEmotion(e,t="neutral",n="",i=0){const r=`${t};;${n}`;return this.createDirectorRequest(e,"emotion",{prompt:r,defry:i??0})}async encodeVibe(e){if(!e.model||!Hr(e.model)||!e.reference_image_multiple?.length)return;const t=[];for(let n=0;n<e.reference_image_multiple.length;n++){const i=e.reference_image_multiple[n],r=e.reference_information_extracted_multiple?.[n]??1,o=`${await this.getImageHash(i)}:${r}:${e.model}`;let a=this.vibeCache.get(o);a||(a=await this.fetchVibeToken(i,r,e.model),this.vibeCache.set(o,a)),t.push(a)}e.reference_image_multiple=t,e.reference_information_extracted_multiple=void 0}async fetchVibeToken(e,t,n){const i={image:e,information_extracted:t,model:n};try{const r=await this.makeRequest(`${this.host}/ai/encode-vibe`,i),s=await this.getResponseBuffer(r);return new TextDecoder().decode(s)}catch(r){throw this.handleRequestError(r)}}async getImageHash(e){if(typeof window>"u")try{const t=Et("crypto"),n=Buffer.from(e,"base64");return t.createHash("sha256").update(n).digest("hex")}catch(t){throw new Error("Failed to hash image: "+t)}else try{const t=atob(e),n=new Uint8Array(t.length);for(let s=0;s<t.length;s++)n[s]=t.charCodeAt(s);const i=await crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(i)).map(s=>s.toString(16).padStart(2,"0")).join("")}catch(t){throw new Error("Failed to hash image: "+t)}}async*streamV4Events(e){const t=new AbortController,n=setTimeout(()=>t.abort(),this.timeout),i=JSON.stringify(e),r=bo(this.headers);this.verbose&&(console.log("[Headers] for image generation:",r),console.info("[Payload] for image generation:",i));try{const s=await fetch(`${this.host}/ai/generate-image-stream`,{method:"POST",headers:r,body:i,signal:t.signal});if(!s.ok)throw new Error(`HTTP Error: ${s.status} ${s.statusText}`);if(!s.body)throw new Error("No response body available for streaming");console.log(`[Streaming] Started processing V4 events for action: ${e.action}`);const o=e.action==="infill"?new Mc:new Lc,a=s.body.getReader();try{for(;;){const{done:l,value:u}=await a.read();if(l)break;for await(const f of o.feedChunk(u))yield f}}finally{a.releaseLock()}}finally{clearTimeout(n)}}};const Tn={dark:{name:"Dark",colors:{primary:"#667eea",primaryHover:"#7a8ef0",primaryLight:"#8b9ef5",secondary:"#764ba2",secondaryHover:"#8650b8",background:"#1e1e1e",backgroundLight:"#2a2a2a",backgroundHover:"#353535",backgroundActive:"#404040",backgroundElevated:"#2f2f2f",text:"#ffffff",textMuted:"#b0b0b0",textDisabled:"#666666",textInverse:"#1a1a1a",border:"#555555",borderLight:"#666666",borderDark:"#404040",buttonBg:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",buttonHover:"linear-gradient(135deg, #7a8ef0 0%, #8650b8 100%)",buttonActive:"linear-gradient(135deg, #5a6ed8 0%, #6a3a92 100%)",buttonText:"#ffffff",navBg:"#2a2a2a",navBorder:"#555555",navHover:"#353535",panelBg:"#2a2a2a",panelBorder:"#555555",panelHeader:"#353535",inputBg:"#2a2a2a",inputBorder:"#555555",inputFocus:"#667eea",inputText:"#ffffff",inputPlaceholder:"#888888",cardBg:"#2a2a2a",cardBorder:"#555555",cardHover:"#353535",success:"#10b981",successBg:"#064e3b",warning:"#f59e0b",warningBg:"#78350f",error:"#ef4444",errorBg:"#7f1d1d",info:"#3b82f6",infoBg:"#1e3a8a",shadow:"rgba(0, 0, 0, 0.3)",shadowLight:"rgba(0, 0, 0, 0.1)"}},light:{name:"Light",colors:{primary:"#667eea",primaryHover:"#7a8ef0",primaryLight:"#8b9ef5",secondary:"#764ba2",secondaryHover:"#8650b8",background:"#ffffff",backgroundLight:"#f8f8f8",backgroundHover:"#eeeeee",backgroundActive:"#e0e0e0",backgroundElevated:"#f5f5f5",text:"#1a1a1a",textMuted:"#666666",textDisabled:"#999999",textInverse:"#ffffff",border:"#cccccc",borderLight:"#dddddd",borderDark:"#aaaaaa",buttonBg:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",buttonHover:"linear-gradient(135deg, #7a8ef0 0%, #8650b8 100%)",buttonActive:"linear-gradient(135deg, #5a6ed8 0%, #6a3a92 100%)",buttonText:"#ffffff",navBg:"#f8f8f8",navBorder:"#cccccc",navHover:"#eeeeee",panelBg:"#f8f8f8",panelBorder:"#cccccc",panelHeader:"#eeeeee",inputBg:"#ffffff",inputBorder:"#cccccc",inputFocus:"#667eea",inputText:"#1a1a1a",inputPlaceholder:"#999999",cardBg:"#ffffff",cardBorder:"#cccccc",cardHover:"#f5f5f5",success:"#059669",successBg:"#d1fae5",warning:"#d97706",warningBg:"#fef3c7",error:"#dc2626",errorBg:"#fee2e2",info:"#2563eb",infoBg:"#dbeafe",shadow:"rgba(0, 0, 0, 0.1)",shadowLight:"rgba(0, 0, 0, 0.05)"}},blue:{name:"Blue",colors:{primary:"#3b82f6",primaryHover:"#60a5fa",primaryLight:"#93c5fd",secondary:"#2563eb",secondaryHover:"#3b82f6",background:"#0f172a",backgroundLight:"#1e293b",backgroundHover:"#334155",backgroundActive:"#475569",backgroundElevated:"#1e293b",text:"#f8fafc",textMuted:"#cbd5e1",textDisabled:"#64748b",textInverse:"#0f172a",border:"#475569",borderLight:"#64748b",borderDark:"#334155",buttonBg:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",buttonHover:"linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%)",buttonActive:"linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%)",buttonText:"#ffffff",navBg:"#1e293b",navBorder:"#475569",navHover:"#334155",panelBg:"#1e293b",panelBorder:"#475569",panelHeader:"#334155",inputBg:"#1e293b",inputBorder:"#475569",inputFocus:"#3b82f6",inputText:"#f8fafc",inputPlaceholder:"#94a3b8",cardBg:"#1e293b",cardBorder:"#475569",cardHover:"#334155",success:"#10b981",successBg:"#064e3b",warning:"#f59e0b",warningBg:"#78350f",error:"#ef4444",errorBg:"#7f1d1d",info:"#3b82f6",infoBg:"#1e3a8a",shadow:"rgba(15, 23, 42, 0.4)",shadowLight:"rgba(15, 23, 42, 0.2)"}},green:{name:"Green",colors:{primary:"#10b981",primaryHover:"#34d399",primaryLight:"#6ee7b7",secondary:"#059669",secondaryHover:"#10b981",background:"#0a1f1a",backgroundLight:"#1a2e28",backgroundHover:"#2a3d36",backgroundActive:"#3a4c44",backgroundElevated:"#1a2e28",text:"#f0fdf4",textMuted:"#c6f6d5",textDisabled:"#86efac",textInverse:"#0a1f1a",border:"#3a4c44",borderLight:"#4a5d55",borderDark:"#2a3d36",buttonBg:"linear-gradient(135deg, #10b981 0%, #059669 100%)",buttonHover:"linear-gradient(135deg, #34d399 0%, #10b981 100%)",buttonActive:"linear-gradient(135deg, #059669 0%, #047857 100%)",buttonText:"#ffffff",navBg:"#1a2e28",navBorder:"#3a4c44",navHover:"#2a3d36",panelBg:"#1a2e28",panelBorder:"#3a4c44",panelHeader:"#2a3d36",inputBg:"#1a2e28",inputBorder:"#3a4c44",inputFocus:"#10b981",inputText:"#f0fdf4",inputPlaceholder:"#86efac",cardBg:"#1a2e28",cardBorder:"#3a4c44",cardHover:"#2a3d36",success:"#10b981",successBg:"#064e3b",warning:"#f59e0b",warningBg:"#78350f",error:"#ef4444",errorBg:"#7f1d1d",info:"#3b82f6",infoBg:"#1e3a8a",shadow:"rgba(10, 31, 26, 0.4)",shadowLight:"rgba(10, 31, 26, 0.2)"}},purple:{name:"Purple",colors:{primary:"#8b5cf6",primaryHover:"#a78bfa",primaryLight:"#c4b5fd",secondary:"#7c3aed",secondaryHover:"#8b5cf6",background:"#1a0f2e",backgroundLight:"#2a1f3e",backgroundHover:"#3a2f4e",backgroundActive:"#4a3f5e",backgroundElevated:"#2a1f3e",text:"#faf5ff",textMuted:"#e9d5ff",textDisabled:"#c084fc",textInverse:"#1a0f2e",border:"#4a3f5e",borderLight:"#5a4f6e",borderDark:"#3a2f4e",buttonBg:"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)",buttonHover:"linear-gradient(135deg, #a78bfa 0%, #8b5cf6 100%)",buttonActive:"linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%)",buttonText:"#ffffff",navBg:"#2a1f3e",navBorder:"#4a3f5e",navHover:"#3a2f4e",panelBg:"#2a1f3e",panelBorder:"#4a3f5e",panelHeader:"#3a2f4e",inputBg:"#2a1f3e",inputBorder:"#4a3f5e",inputFocus:"#8b5cf6",inputText:"#faf5ff",inputPlaceholder:"#c084fc",cardBg:"#2a1f3e",cardBorder:"#4a3f5e",cardHover:"#3a2f4e",success:"#10b981",successBg:"#064e3b",warning:"#f59e0b",warningBg:"#78350f",error:"#ef4444",errorBg:"#7f1d1d",info:"#3b82f6",infoBg:"#1e3a8a",shadow:"rgba(26, 15, 46, 0.4)",shadowLight:"rgba(26, 15, 46, 0.2)"}},red:{name:"Red",colors:{primary:"#ef4444",primaryHover:"#f87171",primaryLight:"#fca5a5",secondary:"#dc2626",secondaryHover:"#ef4444",background:"#1f0a0a",backgroundLight:"#2f1a1a",backgroundHover:"#3f2a2a",backgroundActive:"#4f3a3a",backgroundElevated:"#2f1a1a",text:"#fef2f2",textMuted:"#fee2e2",textDisabled:"#fca5a5",textInverse:"#1f0a0a",border:"#4f3a3a",borderLight:"#5f4a4a",borderDark:"#3f2a2a",buttonBg:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",buttonHover:"linear-gradient(135deg, #f87171 0%, #ef4444 100%)",buttonActive:"linear-gradient(135deg, #dc2626 0%, #b91c1c 100%)",buttonText:"#ffffff",navBg:"#2f1a1a",navBorder:"#4f3a3a",navHover:"#3f2a2a",panelBg:"#2f1a1a",panelBorder:"#4f3a3a",panelHeader:"#3f2a2a",inputBg:"#2f1a1a",inputBorder:"#4f3a3a",inputFocus:"#ef4444",inputText:"#fef2f2",inputPlaceholder:"#fca5a5",cardBg:"#2f1a1a",cardBorder:"#4f3a3a",cardHover:"#3f2a2a",success:"#10b981",successBg:"#064e3b",warning:"#f59e0b",warningBg:"#78350f",error:"#ef4444",errorBg:"#7f1d1d",info:"#3b82f6",infoBg:"#1e3a8a",shadow:"rgba(31, 10, 10, 0.4)",shadowLight:"rgba(31, 10, 10, 0.2)"}},orange:{name:"Orange",colors:{primary:"#f97316",primaryHover:"#fb923c",primaryLight:"#fdba74",secondary:"#ea580c",secondaryHover:"#f97316",background:"#1f0f0a",backgroundLight:"#2f1f1a",backgroundHover:"#3f2f2a",backgroundActive:"#4f3f3a",backgroundElevated:"#2f1f1a",text:"#fff7ed",textMuted:"#ffedd5",textDisabled:"#fdba74",textInverse:"#1f0f0a",border:"#4f3f3a",borderLight:"#5f4f4a",borderDark:"#3f2f2a",buttonBg:"linear-gradient(135deg, #f97316 0%, #ea580c 100%)",buttonHover:"linear-gradient(135deg, #fb923c 0%, #f97316 100%)",buttonActive:"linear-gradient(135deg, #ea580c 0%, #c2410c 100%)",buttonText:"#ffffff",navBg:"#2f1f1a",navBorder:"#4f3f3a",navHover:"#3f2f2a",panelBg:"#2f1f1a",panelBorder:"#4f3f3a",panelHeader:"#3f2f2a",inputBg:"#2f1f1a",inputBorder:"#4f3f3a",inputFocus:"#f97316",inputText:"#fff7ed",inputPlaceholder:"#fdba74",cardBg:"#2f1f1a",cardBorder:"#4f3f3a",cardHover:"#3f2f2a",success:"#10b981",successBg:"#064e3b",warning:"#f59e0b",warningBg:"#78350f",error:"#ef4444",errorBg:"#7f1d1d",info:"#3b82f6",infoBg:"#1e3a8a",shadow:"rgba(31, 15, 10, 0.4)",shadowLight:"rgba(31, 15, 10, 0.2)"}},pink:{name:"Pink",colors:{primary:"#ec4899",primaryHover:"#f472b6",primaryLight:"#f9a8d4",secondary:"#db2777",secondaryHover:"#ec4899",background:"#1f0a1a",backgroundLight:"#2f1a2a",backgroundHover:"#3f2a3a",backgroundActive:"#4f3a4a",backgroundElevated:"#2f1a2a",text:"#fdf2f8",textMuted:"#fce7f3",textDisabled:"#f9a8d4",textInverse:"#1f0a1a",border:"#4f3a4a",borderLight:"#5f4a5a",borderDark:"#3f2a3a",buttonBg:"linear-gradient(135deg, #ec4899 0%, #db2777 100%)",buttonHover:"linear-gradient(135deg, #f472b6 0%, #ec4899 100%)",buttonActive:"linear-gradient(135deg, #db2777 0%, #be185d 100%)",buttonText:"#ffffff",navBg:"#2f1a2a",navBorder:"#4f3a4a",navHover:"#3f2a3a",panelBg:"#2f1a2a",panelBorder:"#4f3a4a",panelHeader:"#3f2a3a",inputBg:"#2f1a2a",inputBorder:"#4f3a4a",inputFocus:"#ec4899",inputText:"#fdf2f8",inputPlaceholder:"#f9a8d4",cardBg:"#2f1a2a",cardBorder:"#4f3a4a",cardHover:"#3f2a3a",success:"#10b981",successBg:"#064e3b",warning:"#f59e0b",warningBg:"#78350f",error:"#ef4444",errorBg:"#7f1d1d",info:"#3b82f6",infoBg:"#1e3a8a",shadow:"rgba(31, 10, 26, 0.4)",shadowLight:"rgba(31, 10, 26, 0.2)"}},cyan:{name:"Cyan",colors:{primary:"#06b6d4",primaryHover:"#22d3ee",primaryLight:"#67e8f9",secondary:"#0891b2",secondaryHover:"#06b6d4",background:"#0a1f1f",backgroundLight:"#1a2f2f",backgroundHover:"#2a3f3f",backgroundActive:"#3a4f4f",backgroundElevated:"#1a2f2f",text:"#ecfeff",textMuted:"#cffafe",textDisabled:"#67e8f9",textInverse:"#0a1f1f",border:"#3a4f4f",borderLight:"#4a5f5f",borderDark:"#2a3f3f",buttonBg:"linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)",buttonHover:"linear-gradient(135deg, #22d3ee 0%, #06b6d4 100%)",buttonActive:"linear-gradient(135deg, #0891b2 0%, #0e7490 100%)",buttonText:"#ffffff",navBg:"#1a2f2f",navBorder:"#3a4f4f",navHover:"#2a3f3f",panelBg:"#1a2f2f",panelBorder:"#3a4f4f",panelHeader:"#2a3f3f",inputBg:"#1a2f2f",inputBorder:"#3a4f4f",inputFocus:"#06b6d4",inputText:"#ecfeff",inputPlaceholder:"#67e8f9",cardBg:"#1a2f2f",cardBorder:"#3a4f4f",cardHover:"#2a3f3f",success:"#10b981",successBg:"#064e3b",warning:"#f59e0b",warningBg:"#78350f",error:"#ef4444",errorBg:"#7f1d1d",info:"#3b82f6",infoBg:"#1e3a8a",shadow:"rgba(10, 31, 31, 0.4)",shadowLight:"rgba(10, 31, 31, 0.2)"}},auto:{name:"Auto",colors:null}};function Sl(e=null,t=null){let n=e;if(!n&&t&&(n=t.theme?.current||"dark"),n||(n="dark"),n==="auto"){if(typeof window<"u"&&window.matchMedia){const i=window.matchMedia("(prefers-color-scheme: dark)").matches;return Tn[i?"dark":"light"]}return Tn.dark}return Tn[n]||Tn.dark}function ch(e){return Ie(()=>Sl(null,e))}function hh(e=null,t=null){const n=Sl(e,t);if(!n||!n.colors){const i=Tn.dark;wo(i.colors);return}wo(n.colors)}function wo(e){const t=o=>{o&&(o.style.setProperty("--st-vision-primary",e.primary),o.style.setProperty("--st-vision-primary-hover",e.primaryHover),o.style.setProperty("--st-vision-primary-light",e.primaryLight),o.style.setProperty("--st-vision-secondary",e.secondary),o.style.setProperty("--st-vision-secondary-hover",e.secondaryHover),o.style.setProperty("--st-vision-bg",e.background),o.style.setProperty("--st-vision-bg-light",e.backgroundLight),o.style.setProperty("--st-vision-bg-hover",e.backgroundHover),o.style.setProperty("--st-vision-bg-active",e.backgroundActive),o.style.setProperty("--st-vision-bg-elevated",e.backgroundElevated),o.style.setProperty("--st-vision-text",e.text),o.style.setProperty("--st-vision-text-muted",e.textMuted),o.style.setProperty("--st-vision-text-disabled",e.textDisabled),o.style.setProperty("--st-vision-text-inverse",e.textInverse),o.style.setProperty("--st-vision-border",e.border),o.style.setProperty("--st-vision-border-light",e.borderLight),o.style.setProperty("--st-vision-border-dark",e.borderDark),o.style.setProperty("--st-vision-button-bg",e.buttonBg),o.style.setProperty("--st-vision-button-hover",e.buttonHover),o.style.setProperty("--st-vision-button-active",e.buttonActive),o.style.setProperty("--st-vision-button-text",e.buttonText),o.style.setProperty("--st-vision-nav-bg",e.navBg),o.style.setProperty("--st-vision-nav-border",e.navBorder),o.style.setProperty("--st-vision-nav-hover",e.navHover),o.style.setProperty("--st-vision-panel-bg",e.panelBg),o.style.setProperty("--st-vision-panel-border",e.panelBorder),o.style.setProperty("--st-vision-panel-header",e.panelHeader),o.style.setProperty("--st-vision-input-bg",e.inputBg),o.style.setProperty("--st-vision-input-border",e.inputBorder),o.style.setProperty("--st-vision-input-focus",e.inputFocus),o.style.setProperty("--st-vision-input-text",e.inputText),o.style.setProperty("--st-vision-input-placeholder",e.inputPlaceholder),o.style.setProperty("--st-vision-card-bg",e.cardBg),o.style.setProperty("--st-vision-card-border",e.cardBorder),o.style.setProperty("--st-vision-card-hover",e.cardHover),o.style.setProperty("--st-vision-success",e.success),o.style.setProperty("--st-vision-success-bg",e.successBg),o.style.setProperty("--st-vision-warning",e.warning),o.style.setProperty("--st-vision-warning-bg",e.warningBg),o.style.setProperty("--st-vision-error",e.error),o.style.setProperty("--st-vision-error-bg",e.errorBg),o.style.setProperty("--st-vision-info",e.info),o.style.setProperty("--st-vision-info-bg",e.infoBg),o.style.setProperty("--st-vision-shadow",e.shadow),o.style.setProperty("--st-vision-shadow-light",e.shadowLight),o.style.setProperty("--bg-primary",e.background),o.style.setProperty("--bg-secondary",e.backgroundLight),o.style.setProperty("--border-color",e.border),o.style.setProperty("--text-primary",e.text))};let n=document.getElementById("st-vision-app");if(n||(n=document.querySelector(".st-vision-app")),!n)return;t(n),[".st_vision_modal",".vision_popup_overlay",".st-vision-image-history-modal",".st-vision-settings-panel",".st-vision-confirm-dialog",".st-vision-input-dialog"].forEach(o=>{document.querySelectorAll(o).forEach(l=>{t(l)})}),n.querySelectorAll(".st-vision-inline-container").forEach(o=>{t(o)}),n.querySelectorAll(".st-vision-panel, .st-vision-card, .st-vision-modal-content").forEach(o=>{t(o)})}const Qn="st-paint",El=ul,ei=dl,kl=cl,Cl=hl,Tl=ll,Al=pl,ph=fl,Yi=Ki,gh={small_portrait:[512,768],small_landscape:[768,512],small_square:[640,640],normal_portrait:[832,1216],normal_landscape:[1216,832],normal_square:[1024,1024],large_portrait:[1024,1536],large_landscape:[1536,1024],large_square:[1472,1472],wallpaper_portrait:[1080,1920],wallpaper_landscape:[1920,1080]},Il={prompt:"",prompt_prefix:"",prompt_suffix:"",model:El.V4_5,action:ei.GENERATE,resPreset:kl.NORMAL_PORTRAIT,negative_prompt:"",qualityToggle:!1,ucPreset:0,width:832,height:1216,n_samples:1,steps:28,scale:6.6,dynamic_thresholding:!1,seed:-1,extra_noise_seed:-1,sampler:Cl.EULER_ANC,sm:!1,sm_dyn:!1,cfg_rescale:0,noise_schedule:Al.KARRAS,image:void 0,strength:void 0,noise:void 0,controlnet_strength:void 0,controlnet_condition:void 0,controlnet_model:void 0,add_original_image:void 0,mask:void 0,reference_image_multiple:void 0,reference_information_extracted_multiple:void 0,reference_strength_multiple:void 0,params_version:void 0,autoSmea:void 0,characterPrompts:void 0,v4_prompt:void 0,v4_negative_prompt:void 0,skip_cfg_above_sigma:void 0,use_coords:void 0,legacy_uc:void 0,normalize_reference_strength_multiple:void 0,deliberate_euler_ancestral_bug:void 0,prefer_brownian:void 0,inpaintImg2ImgStrength:void 0,legacy:void 0,legacy_v3_extend:void 0,stream:void 0},Dl={token:"",host:Tl.WEB,timeout:12e4,...Il},ze=ir({configs:{default:{...Dl}},currentConfigName:"default",modalVisible:!1,fabPosition:{x:null,y:null},chatImageGen:{enabled:!0,tagPrefix:"[img-gen]",tagSuffix:"[/img-gen]",useRequestQueue:!0,queueDelay:8},theme:{current:"dark"}}),mh=Ie(()=>ze.configs[ze.currentConfigName]),vh=ch(ze);function Yr(e=null){hh(e,ze)}function Pl(){try{const{extensionSettings:e}=SillyTavern.getContext();let t=e?.[Qn];if(console.log("[ST Vision] Loading state, tmp=",t),!t)e[Qn]=ze;else{for(const n in t)t[n]!==void 0&&(typeof t[n]=="object"&&t[n]!==null&&!Array.isArray(t[n])&&ze[n]&&typeof ze[n]=="object"?Object.assign(ze[n],t[n]):ze[n]=t[n]);e[Qn]=ze}console.log("[ST Vision] Load state done. Theme:",ze.theme)}catch(e){throw console.error("[ST Vision] Failed to load state:",e),new Error("extension_settings not available")}}async function wi(){try{const{extensionSettings:e}=SillyTavern.getContext(),{saveSettingsDebounced:t}=SillyTavern.getContext();e[Qn]=ze,t(),console.log("[ST Vision] Save state done. Theme:",ze.theme),console.log("[ST Vision] Saved extensionSettings:",e[Qn])}catch(e){throw console.error("[ST Vision] Failed to save state:",e),new Error("failed to save")}}const Xr="default";function _h(){return Object.keys(ze.configs)}async function Es(e,t){ze.configs||(ze.configs={});const n=JSON.parse(JSON.stringify(t));return ze.configs[e]=n,await wi(),console.log(`[ST Vision] Saved config: ${e}`),!0}function bh(e){const t=ze.configs?.[e];if(t){const n=JSON.parse(JSON.stringify(t));return console.log(`[ST Vision] Loaded config: ${e}`),n}return console.log(`[ST Vision] Config not found: ${e}`),null}async function Rl(e){if(e===Xr)throw new Error("Cannot delete default configuration");if(ze.configs?.[e])return delete ze.configs[e],ze.currentConfigName===e&&(ze.currentConfigName=Xr),await wi(),console.log(`[ST Vision] Deleted config: ${e}`),!0;throw new Error(`Configuration ${e} not found`)}async function Ll(e,t){if(e===Xr)throw new Error("Cannot rename default configuration");const n=ze.configs?.[e];if(!n)throw new Error(`Configuration ${e} not found`);return ze.configs[t]=n,delete ze.configs[e],ze.currentConfigName===e&&(ze.currentConfigName=t),await wi(),console.log(`[ST Vision] Renamed config: ${e} -> ${t}`),!0}function Ml(e,t=!1){const n=bh(e);if(!n)throw new Error(`Configuration ${e} not found`);const i={...n};t||(i.token="");const r=new Blob([JSON.stringify(i,null,2)],{type:"application/json"}),s=URL.createObjectURL(r),o=document.createElement("a");return o.href=s,o.download=`st-vision-config-${e}-${Date.now()}.json`,o.click(),URL.revokeObjectURL(s),!0}async function Ol(e,t=!1,n=""){const r=await(await new Promise((o,a)=>{const l=document.createElement("input");l.type="file",l.accept=".json",l.onchange=()=>l.files?.[0]?o(l.files[0]):a(new Error("Import cancelled")),l.click()})).text(),s=JSON.parse(r);t||(s.token=n),await Es(e,s)}async function yh(e){return ze.currentConfigName=e,await wi(),!0}async function wh(){return await Rl(ze.currentConfigName),!0}async function xh(e){return await Ll(ze.currentConfigName,e),!0}function Sh(e=!1){return Ml(ze.currentConfigName,e),!0}async function Eh(e=!1,t=""){return await Ol(ze.currentConfigName,e,t),!0}async function kh(e){return await Es(e,ze.configs[ze.currentConfigName]),!0}const Yt=()=>({state:ze,loadState:Pl,saveState:wi,Host:Tl,Model:El,Resolution:kl,RESOLUTION_DIMENSIONS:gh,Sampler:Cl,Noise:Al,Action:ei,Controlnet:ph,DEFAULT_CONFIG:Dl,Metadata:Il,currentConfig:mh,listConfigs:_h,saveConfig:Es,deleteConfig:Rl,renameConfig:Ll,exportConfig:Ml,importConfig:Ol,setCurrentConfigName:yh,exportCurrentConfig:Sh,importCurrentConfig:Eh,deleteCurrentConfig:wh,renameCurrentConfig:xh,duplicateCurrentConfig:kh,THEMES:Tn,currentTheme:vh,applyTheme:Yr});function Ch(){if(Pl(),ze.modalVisible=!1,ze.theme||(ze.theme={current:"dark"}),typeof window<"u"){const e=()=>{const t=ze.theme?.current||"dark";console.log("[ST Vision] Applying theme on init:",t),Yr(t)};if(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{setTimeout(e,200)}):setTimeout(e,200),window.matchMedia){const t=window.matchMedia("(prefers-color-scheme: dark)"),n=()=>{ze.theme?.current==="auto"&&(console.log("[ST Vision] System theme changed, applying auto theme"),Yr("auto"))};t.addEventListener("change",n)}}}Ch();const tn=(e,t)=>{const n=e.__vccOpts||e;for(const[i,r]of t)n[i]=r;return n},Th={__name:"FloatingButton",setup(e){const{state:t,saveState:n}=Yt();function i(){t.modalVisible=!t.modalVisible}function r(w,L){t.fabPosition={x:w,y:L},n()}const s=ct(null),o=ct(!1),a=ct(0);let l=0,u=0,f=0,m=0,h=0,c=0;function g(){if(!s.value)return;const w=s.value,L=w.offsetWidth,j=w.offsetHeight,M=window.innerWidth-L,W=window.innerHeight-j;if(t.fabPosition.x!==null&&t.fabPosition.y!==null){const V=Math.max(0,Math.min(t.fabPosition.x,M)),ae=Math.max(0,Math.min(t.fabPosition.y,W));w.style.left=V+"px",w.style.top=ae+"px",w.style.right="auto",w.style.bottom="auto",l=V,u=ae}else{const V=M-30,ae=W-80;w.style.left=V+"px",w.style.top=ae+"px",w.style.right="auto",w.style.bottom="auto",l=V,u=ae}}function x(w){if(!o.value)return;w.preventDefault(),w.type==="touchmove"?(h=w.touches[0].clientX-f,c=w.touches[0].clientY-m):(h=w.clientX-f,c=w.clientY-m),l=h,u=c;const L=s.value;if(!L)return;const j=L.offsetWidth,M=L.offsetHeight,W=window.innerWidth-j,V=window.innerHeight-M;l=Math.max(0,Math.min(l,W)),u=Math.max(0,Math.min(u,V)),L.style.left=l+"px",L.style.top=u+"px"}function _(){o.value&&(Date.now()-a.value<200?i():r(l,u),o.value=!1,S())}function P(){document.addEventListener("mousemove",x),document.addEventListener("mouseup",_),document.addEventListener("mouseleave",_),document.addEventListener("touchmove",x,{passive:!1}),document.addEventListener("touchend",_),document.addEventListener("touchcancel",_)}function S(){document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",_),document.removeEventListener("mouseleave",_),document.removeEventListener("touchmove",x),document.removeEventListener("touchend",_),document.removeEventListener("touchcancel",_)}function b(w){a.value=Date.now(),w.type==="touchstart"?(f=w.touches[0].clientX-l,m=w.touches[0].clientY-u):(f=w.clientX-l,m=w.clientY-u),o.value=!0,P()}return hi(()=>{g()}),pi(()=>{S()}),(w,L)=>(Ge(),Ke("div",{ref_key:"fab",ref:s,class:fn(["st_vision_fab",{st_vision_fab_dragging:o.value}]),title:"ST Vision - Image Generation (Drag to move)",onMousedown:b,onTouchstart:b},[...L[0]||(L[0]=[p("i",{class:"fa-solid fa-wand-magic-sparkles"},null,-1)])],34))}},Ah=tn(Th,[["__scopeId","data-v-befbdc82"]]),Ih={key:0,class:"vision_popup_overlay"},Dh={class:"vision_input_dialog"},Ph={class:"vision_input_dialog_header"},Rh={class:"vision_input_dialog_body"},Lh={__name:"InputDialog",props:{title:{type:String,default:"Input dialog title"},content:{type:String,default:"Input dialog content"},visible:{type:Boolean,default:!1},value:{type:String,default:""}},emits:["update:visible","confirm","cancel"],setup(e,{emit:t}){const n=e,i=t,r=ct(n.value);Zt(()=>n.value,l=>{r.value=l});function s(){i("update:visible",!1)}function o(){i("confirm",r.value),s()}function a(){i("cancel"),s()}return(l,u)=>(Ge(),fr(cs,{to:"body"},[nt(vs,{name:"popup"},{default:sr(()=>[n.visible?(Ge(),Ke("div",Ih,[p("div",Dh,[p("div",Ph,[p("h3",null,ot(n.title),1),p("p",null,ot(n.content),1)]),p("div",Rh,[he(p("input",{type:"text",class:"vision_input_dialog_input","onUpdate:modelValue":u[0]||(u[0]=f=>r.value=f)},null,512),[[$e,r.value]])]),p("div",{class:"vision_input_dialog_footer"},[p("button",{class:"vision_button",onClick:a},"Cancel"),p("button",{class:"vision_button vision_button_primary",onClick:o}," OK ")])])])):Sn("",!0)]),_:1})]))}},Mh=tn(Lh,[["__scopeId","data-v-2e8b38fd"]]),Oh={key:0,class:"vision_popup_overlay"},Uh={class:"vision_confirm_dialog"},Bh={class:"vision_confirm_dialog_header"},Nh={class:"vision_confirm_dialog_body"},Fh={__name:"ConfirmDialog",props:{title:{type:String,default:"Confirm dialog title"},content:{type:String,default:"Confirm dialog content"},visible:{type:Boolean,default:!1}},emits:["update:visible","confirm","cancel"],setup(e,{emit:t}){const n=e,i=t;function r(){i("update:visible",!1)}function s(){i("confirm"),r()}function o(){i("cancel"),r()}return(a,l)=>(Ge(),fr(cs,{to:"body"},[nt(vs,{name:"popup"},{default:sr(()=>[n.visible?(Ge(),Ke("div",Oh,[p("div",Uh,[p("div",Bh,[p("h3",null,ot(n.title),1),p("button",{class:"vision_popup_close",onClick:o},[...l[0]||(l[0]=[p("i",{class:"fa-solid fa-times"},null,-1)])])]),p("div",Nh,[p("p",null,ot(n.content),1)]),p("div",{class:"vision_confirm_dialog_footer"},[p("button",{class:"vision_button",onClick:o},"no"),p("button",{class:"vision_button vision_button_primary",onClick:s}," yes ")])])])):Sn("",!0)]),_:1})]))}},jh=tn(Fh,[["__scopeId","data-v-f9c40d8d"]]);async function zh(e){return await yl(e)}function Hh(e){return e===Ki.INTERMEDIATE?Yi.INTERMEDIATE:e===Ki.FINAL?Yi.FINAL:e}async function Ar(e){if(e.toDataURL)return e.toDataURL();throw new Error("Unable to convert image to data URL")}function Ul(){function e(u){if(!u.token)throw new Error("NovelAI token is not configured. Please set your token in the settings.");return new dh({token:u.token,host:u.host,timeout:u.timeout||12e4,retry:{enabled:!0,maxRetries:3,baseDelay:2e3,maxDelay:3e4,retryStatusCodes:[429,500,502,503,504]},verbose:!0})}async function t(u={},f=!1){console.log("[ST Vision] Streaming:",f);const{currentConfig:m}=Yt(),h=m.value,c=e(h),g=u.action||ei.GENERATE,x=g===ei.IMG2IMG,_=g===ei.INPAINT,P={prompt:u.prompt||h.prompt,model:u.model||h.model,width:u.width||h.width,height:u.height||h.height,scale:(()=>{const w=u.scale!==void 0?u.scale:h.scale;if(typeof w=="string"){const L=parseFloat(w);return isNaN(L)?5:L}return w})(),sampler:u.sampler||h.sampler,steps:u.steps||h.steps,n_samples:u.n_samples||h.n_samples,negative_prompt:u.negative_prompt||h.negative_prompt};(x||_)&&(P.action=g);const S=u.seed!==void 0?u.seed:h.seed;S!==void 0&&S!==-1&&(P.seed=S),h.sm!==void 0&&(P.sm=h.sm),h.sm_dyn!==void 0&&(P.sm_dyn=h.sm_dyn),h.dynamic_thresholding!==void 0&&(P.dynamic_thresholding=h.dynamic_thresholding),h.controlnet_strength!==void 0&&(P.controlnet_strength=h.controlnet_strength),h.legacy!==void 0&&(P.legacy=h.legacy),h.add_original_image!==void 0&&(P.add_original_image=h.add_original_image),h.noise_schedule&&(P.noise_schedule=h.noise_schedule),x&&(u.image&&(P.image=u.image),u.strength!==void 0&&(P.strength=u.strength),u.noise!==void 0&&(P.noise=u.noise)),_&&(u.image&&(P.image=u.image),u.mask&&(P.mask=u.mask)),u.characterPrompts&&u.characterPrompts.length>0&&(P.characterPrompts=u.characterPrompts,console.log("[ST Vision] Adding characterPrompts to request:",JSON.parse(JSON.stringify(P.characterPrompts)))),u.v4_prompt&&(P.v4_prompt=u.v4_prompt,console.log("[ST Vision] Adding v4_prompt to request:",JSON.parse(JSON.stringify(P.v4_prompt)))),u.v4_negative_prompt&&(P.v4_negative_prompt=u.v4_negative_prompt,console.log("[ST Vision] Adding v4_negative_prompt to request:",JSON.parse(JSON.stringify(P.v4_negative_prompt)))),console.log("[ST Vision] Generating with nekoai-js:",P);const b=await c.generateImage(P,f);if(f&&b&&typeof b[Symbol.asyncIterator]=="function")return(async function*(){for await(const w of b){const L=await Ar(w.image);yield{event_type:Hh(w.event_type),step_ix:w.step_ix,image:{dataURL:L,base64:w.image.base64}}}})();if(Array.isArray(b)){const w=await Promise.all(b.map(async L=>({dataURL:await Ar(L),filename:L.filename})));return console.log(w[0]),w}throw new Error("Unexpected response format from nekoai-js")}async function n(){const{currentConfig:u}=Yt(),f=u.value,m=f.prompt;if(!m)throw new Error("Please enter a prompt");if(!f.token)throw new Error("Please configure your NovelAI token in settings");{const h={prompt:m,model:f.model,width:f.width,height:f.height,steps:f.steps,scale:f.scale,sampler:f.sampler,seed:f.seed,negative_prompt:f.negative_prompt,sm:f.sm,sm_dyn:f.sm_dyn};if(f.characterPrompts&&f.characterPrompts.length>0){const g=f.characterPrompts.filter(x=>x.enabled!==!1).map(x=>{const _={prompt:x.prompt,uc:x.uc};return x.useCustomPosition===!0&&x.center&&(_.center=x.center),_});g.length>0&&(h.characterPrompts=g,console.log("[ST Vision] Raw config.characterPrompts:",JSON.parse(JSON.stringify(f.characterPrompts))),console.log("[ST Vision] Processed characterPrompts for nekoai-js:",JSON.parse(JSON.stringify(g))))}if(f.v4_prompt&&(h.v4_prompt=f.v4_prompt),f.v4_negative_prompt&&(h.v4_negative_prompt=f.v4_negative_prompt),f.enableStreaming){const g=await t(h,!0);if(g&&typeof g[Symbol.asyncIterator]=="function"){let x=null;for await(const _ of g)_.event_type===Yi.INTERMEDIATE||_.event_type===Yi.FINAL&&(x=_.image);if(x)return x}}else{const g=await t(h,!1);if(Array.isArray(g)&&g.length>0)return g[0]}}}async function i(u,f,m={}){const{currentConfig:h}=Yt(),c=h.value,g=e(c),_={"line-art":"lineArt","bg-removal":"backgroundRemoval",emotion:"changeEmotion",declutter:"declutter",colorize:"colorize"}[u];if(!_||!g[_])throw new Error(`Unknown director tool: ${u}`);let P;return u==="emotion"?P=await g.changeEmotion(f,m.emotion||"happy",m.prompt||"",m.defry||0):u==="declutter"?P=await g.declutter(f,m.prompt||"",m.defry||0):u==="colorize"?P=await g.colorize(f,m.prompt||"",m.defry||1):P=await g[_](f),{dataURL:await Ar(P),base64:P.base64}}return{generateImage:t,handleGenerate:n,lineArt:u=>i("line-art",u),backgroundRemoval:u=>i("bg-removal",u),changeEmotion:(u,f,m="",h=0)=>i("emotion",u,{emotion:f,prompt:m,defry:h}),declutter:(u,f="",m=0)=>i("declutter",u,{prompt:f,defry:m}),colorize:(u,f="",m=1)=>i("colorize",u,{prompt:f,defry:m}),parseImage:zh}}function Vh(e){const t=e.match(/^\{pos_([a-z]+)\}$/);return t&&{ttll:{x:.1,y:.1},ttl:{x:.2,y:.1},ttc:{x:.5,y:.1},ttr:{x:.8,y:.1},ttrr:{x:.9,y:.1},tll:{x:.1,y:.3},tl:{x:.2,y:.3},tc:{x:.5,y:.3},tr:{x:.8,y:.3},trr:{x:.9,y:.3},cll:{x:.1,y:.5},cl:{x:.2,y:.5},cc:{x:.5,y:.5},cr:{x:.8,y:.5},crr:{x:.9,y:.5},bll:{x:.1,y:.7},bl:{x:.2,y:.7},bc:{x:.5,y:.7},br:{x:.8,y:.7},brr:{x:.9,y:.7},bbll:{x:.1,y:.9},bbl:{x:.2,y:.9},bbc:{x:.5,y:.9},bbr:{x:.8,y:.9},bbrr:{x:.9,y:.9},c:{x:.5,y:.5},t:{x:.5,y:.3},b:{x:.5,y:.7},l:{x:.2,y:.5},r:{x:.8,y:.5}}[t[1]]||null}function $h(e){const t=/\{char\s+([\s\S]*?)\s+char\}/g,n=[];let i;for(;(i=t.exec(e))!==null;){let r=i[1].trim();const s={prompt:"",uc:"",center:{x:.5,y:.5},enabled:!0},o=r.match(/ntags\s*=\s*(?:\[([\s\S]*?)\]|([\s\S]*?)(?=char\}|$))/);if(o){let u=(o[1]||o[2]||"").trim();u=u.split(/\s*,\s*/).map(f=>f.trim()).filter(f=>f).join(", "),s.uc=u,r=r.replace(/ntags\s*=\s*[\s\S]*?(?=\{pos_|char\}|$)/g,"")}const a=r.split(/[,\n]/).map(u=>u.trim()).filter(u=>u),l=[];for(const u of a){if(!u||u.startsWith("ntags"))continue;const f=Vh(u);if(f){s.center=f;continue}l.push(u)}s.prompt=l.join(", "),n.push(s)}return n}function qh(e){const t=e.split(`
`),n=[];let i=0;for(const r of t)if(r.trim().startsWith("|")){const s=r.substring(1).trim();n.push({prompt:s,uc:"",center:{x:.3+i*.2,y:.5},enabled:!0}),i++}return n}function Wh(e){const t=e.match(/Text:\s*(.+)/);return t?t[1].trim():null}function Gh(e){if(!e||!e.trim())return"";let t=e.replace(/\{char[\s\S]*?char\}/g,"");t=t.replace(/\{char[\s\S]*$/g,"");const n=t.match(/\{ntags\s*=\s*([\s\S]*?)\}/);if(n){let i=n[1].trim();return i=i.replace(/[{}\[\]]/g,""),i=i.split(/\s*,\s*/).map(r=>r.trim()).filter(r=>r&&r.length>0).join(", "),i}return""}function Zh(e){if(!e||!e.trim())return e;const t=e.split(",").map(r=>r.trim()).filter(r=>r),n=new Set,i=[];for(let r of t){const s=r.match(/^(-?\d+(?:\.\d+)?)::(.*?)::$/);if(s){let o=parseFloat(s[1]);const a=s[2].trim();o>3?(console.warn(`[Prompt Optimizer] Capping weight ${o} to 3.0 for tag: ${a}`),o=3):o<-2&&(console.warn(`[Prompt Optimizer] Capping weight ${o} to -2.0 for tag: ${a}`),o=-2);const l=a.toLowerCase();n.has(l)?console.warn(`[Prompt Optimizer] Removing duplicate tag: ${r}`):(n.add(l),i.push(`${o}::${a}::`))}else{const o=r.toLowerCase();n.has(o)?console.warn(`[Prompt Optimizer] Removing duplicate tag: ${r}`):(n.add(o),i.push(r))}}return i.join(", ")}function xo(e){if(!e||!e.trim())return"";let t=e.replace(/\{char[\s\S]*?char\}/g,"");return t=t.replace(/\{char[\s\S]*$/g,""),t=t.replace(/\{ntags\s*=\s*[\s\S]*?\}/g,""),t=t.replace(/\{ntags[\s\S]*$/g,""),t=t.replace(/^\s*\|.*$/gm,""),t=t.replace(/Text:\s*.+/g,""),t=t.replace(/[{}\[\]]/g,""),t=t.replace(/,\s*,+/g,","),t=t.replace(/,\s*\n\s*,/g,","),t=t.replace(/\n+/g," "),t=t.replace(/\s+/g," "),t=t.replace(/^[\s,]+|[\s,]+$/g,""),t=Zh(t),t}function Kh(e,t=""){const n={prompt:"",negative_prompt:t,characterPrompts:null,v4_prompt:null,v4_negative_prompt:null,hasCharacters:!1,hasWeights:!1,hasText:!1,use_coords:!1};if(!e||!e.trim())return n;const i=$h(e),r=qh(e),s=[...i,...r];if(s.length>0){n.hasCharacters=!0,n.characterPrompts=s,n.use_coords=!0;const u=xo(e),f=s.map(m=>({char_caption:m.prompt,centers:[m.center]}));n.v4_prompt={caption:{base_caption:u,char_captions:f},use_coords:!0,use_order:!1},n.prompt=u}else n.prompt=xo(e);const o=Gh(e),a=[];if(o&&a.push(o),t&&t.trim()&&a.push(t.trim()),n.negative_prompt=a.join(", "),n.hasCharacters){const u=n.negative_prompt||"";n.v4_negative_prompt={caption:{base_caption:u,char_captions:[]},legacy_uc:!1}}return n.hasWeights=/(-?\d+(?:\.\d+)?)::(.*?)::/.test(e),Wh(e)&&(n.hasText=!0,n.prompt.includes("text")||(n.prompt+=", text, english text")),n}function Yh(e,t,n){const i=[];return e&&e.trim()&&i.push(e.trim()),t&&t.trim()&&i.push(t.trim()),n&&n.trim()&&i.push(n.trim()),i.join(", ")}function ks(e){return["nai-diffusion-4-full","nai-diffusion-4-full-inpainting","nai-diffusion-4-curated-preview","nai-diffusion-4-curated-inpainting","nai-diffusion-4-5-full","nai-diffusion-4-5-full-inpainting","nai-diffusion-4-5-curated","nai-diffusion-4-5-curated-inpainting"].includes(e)}function Xh(e,t){const n=[];if(!e.hasCharacters)return n;ks(t)||n.push("Model does not support multi-character generation (v4/v4.5 required)"),e.characterPrompts&&e.characterPrompts.length>4&&n.push(`Too many characters (${e.characterPrompts.length}). NovelAI works best with 2-3 characters. More than 4 may cause timeouts or quality issues.`),e.prompt&&e.prompt.length>500&&n.push(`Base prompt is very long (${e.prompt.length} chars). Consider moving character-specific details into {char...char} blocks.`);const r=["masterpiece","best quality","amazing quality","very aesthetic","absurdres"],s=(e.prompt||"").toLowerCase(),o=r.filter(l=>(s.match(new RegExp(l,"g"))||[]).length>1);o.length>0&&n.push(`Duplicate quality tags detected: ${o.join(", ")}. These have been deduplicated.`);const a=(e.prompt||"").match(/(\d+(?:\.\d+)?)::/g);return a&&a.filter(u=>parseFloat(u)>3).length>0&&n.push("Extreme weights detected (>3). These have been capped to 3.0 for stability."),e.characterPrompts&&e.characterPrompts.forEach((l,u)=>{l.prompt&&l.prompt.length>300&&n.push(`Character ${u+1} prompt is very long (${l.prompt.length} chars). This may affect generation quality.`)}),n}function Bl(e,t,n,i,r){const s=Yh(e,t,n),o=Kh(s,i),a=Xh(o,r);return a.length>0&&(console.warn("[Prompt Validation] Issues detected:"),a.forEach(u=>console.warn(`  - ${u}`)),o.warnings=a),!ks(r)&&o.hasCharacters?(console.warn("Character syntax detected but model does not support v4 features"),{prompt:s,negative_prompt:i,warnings:["Model does not support multi-character generation. Falling back to simple prompt."]}):o}const Jh={class:"vision_tab_content"},Qh={class:"vision_section"},ep={class:"vision_form_group"},tp=["disabled"],np={class:"vision_form_group"},ip=["disabled"],rp={class:"vision_form_group"},sp=["disabled"],op={class:"vision_form_group"},ap={class:"vision_checkbox_group"},lp=["disabled"],up={class:"vision_form_group"},fp={class:"vision_form_group"},dp=["value"],cp={class:"vision_form_row"},hp={class:"vision_form_group"},pp={class:"vision_checkbox_group"},gp=["disabled"],mp={class:"vision_form_group"},vp={class:"vision_checkbox_group"},_p=["disabled"],bp={class:"vision_form_group"},yp={class:"vision_checkbox_group"},wp=["disabled"],xp={class:"vision_form_group"},Sp={class:"vision_checkbox_group"},Ep=["disabled"],kp={class:"vision_section"},Cp={class:"vision_button_group"},Tp=["disabled"],Ap={class:"vision_result_container"},Ip={class:"vision_result_wrapper"},Dp=["src"],Pp={__name:"GenerateTab",emits:["image-generated"],setup(e,{emit:t}){const{currentConfig:n,Model:i,Action:r}=Yt(),{handleGenerate:s}=Ul(),o=Ie({get:()=>n.value.prompt,set:re=>n.value.prompt=re}),a=Ie({get:()=>n.value.prompt_prefix,set:re=>n.value.prompt_prefix=re}),l=Ie({get:()=>n.value.prompt_suffix,set:re=>n.value.prompt_suffix=re}),u=Ie(()=>{const re=[];return a.value&&a.value.trim()&&re.push(a.value.trim()),o.value&&o.value.trim()&&re.push(o.value.trim()),l.value&&l.value.trim()&&re.push(l.value.trim()),re.join(", ")}),f=Ie(()=>ks(h.value)),m=Ie({get:()=>n.value.negative_prompt,set:re=>n.value.negative_prompt=re}),h=Ie({get:()=>n.value.model,set:re=>n.value.model=re}),c=Ie({get:()=>n.value.height,set:re=>n.value.height=re}),g=Ie({get:()=>n.value.width,set:re=>n.value.width=re}),x=Ie({get:()=>n.value.steps,set:re=>n.value.steps=re}),_=Ie({get:()=>n.value.seed,set:re=>n.value.seed=re}),P=Ie({get:()=>n.value.action,set:re=>n.value.action=re}),S=Ie({get:()=>n.value.negative_prompt!==void 0,set:re=>{re?n.value.negative_prompt="":n.value.negative_prompt=void 0}}),b=Ie({get:()=>n.value.width!==void 0,set:re=>{re?n.value.width=832:n.value.width=void 0}}),w=Ie({get:()=>n.value.height!==void 0,set:re=>{re?n.value.height=1216:n.value.height=void 0}}),L=Ie({get:()=>n.value.steps!==void 0,set:re=>{re?n.value.steps=28:n.value.steps=void 0}}),j=Ie({get:()=>n.value.seed!==void 0,set:re=>{re?n.value.seed=-1:n.value.seed=void 0}}),M=ct(!1),W=ct(null),V=t;async function ae(){M.value=!0;try{const re=Bl(a.value,o.value,l.value,m.value,h.value);console.log("Parsed prompt:",re),re.warnings&&re.warnings.length>0&&(console.warn("[ST Vision] Validation warnings:"),re.warnings.forEach($=>console.warn(`  - ${$}`)));const Z=JSON.parse(JSON.stringify(n.value));re.hasCharacters&&f.value?(Z.prompt=re.prompt||u.value,Z.negative_prompt=re.negative_prompt,Z.characterPrompts=re.characterPrompts,Z.v4_prompt=re.v4_prompt,Z.v4_negative_prompt=re.v4_negative_prompt,Z.use_coords=re.use_coords):(Z.prompt=u.value,Z.negative_prompt=m.value,Z.characterPrompts=void 0,Z.v4_prompt=void 0,Z.v4_negative_prompt=void 0);const le=JSON.parse(JSON.stringify(n.value));Object.assign(n.value,Z);try{const $=await s();console.log($),W.value=$.dataURL,V("image-generated",$.dataURL),console.log("image generated")}finally{Object.assign(n.value,le)}}catch(re){throw console.error("Generation failed:",re),re}finally{M.value=!1}}function Se(){if(!W.value)return;const re=document.createElement("a");re.href=W.value,re.download=`st-vision-${Date.now()}.png`,re.click()}async function fe(){if(W.value)try{if(navigator.clipboard&&navigator.clipboard.write){const Z=await(await fetch(W.value)).blob(),le=new ClipboardItem({[Z.type]:Z});await navigator.clipboard.write([le]),console.log("Image copied to clipboard!");return}await navigator.clipboard.writeText(W.value),console.log("Image URL copied to clipboard!")}catch(re){console.error("Failed to copy image:",re),console.log("Failed to copy image. Please try again.")}}return(re,Z)=>(Ge(),Ke("div",Jh,[p("div",Qh,[Z[25]||(Z[25]=p("h3",null,[p("i",{class:"fa-solid fa-pen-fancy"}),qe(" Prompt")],-1)),p("div",ep,[Z[15]||(Z[15]=p("label",{for:"vision_prompt_prefix"},[qe(" Prompt Prefix "),p("span",{class:"vision_help_text"},"(Quality tags, style tags, etc.)")],-1)),he(p("textarea",{id:"vision_prompt_prefix","onUpdate:modelValue":Z[0]||(Z[0]=le=>a.value=le),rows:"2",disabled:M.value,placeholder:"masterpiece, best quality, high resolution, "},null,8,tp),[[$e,a.value]])]),p("div",np,[Z[16]||(Z[16]=p("label",{for:"vision_prompt"},[qe(" Main Prompt "),p("span",{class:"vision_help_text"},"(Describe what you want to generate)")],-1)),he(p("textarea",{id:"vision_prompt","onUpdate:modelValue":Z[1]||(Z[1]=le=>o.value=le),rows:"4",disabled:M.value,placeholder:"1boy, luffy, anime style, detailed background, "},null,8,ip),[[$e,o.value]])]),p("div",rp,[Z[17]||(Z[17]=p("label",{for:"vision_prompt_suffix"},[qe(" Prompt Suffix "),p("span",{class:"vision_help_text"},"(Additional details, lighting, etc.)")],-1)),he(p("textarea",{id:"vision_prompt_suffix","onUpdate:modelValue":Z[2]||(Z[2]=le=>l.value=le),rows:"2",disabled:M.value,placeholder:"cinematic lighting, detailed, vibrant colors, "},null,8,sp),[[$e,l.value]])]),p("div",op,[p("div",ap,[he(p("input",{id:"vision_enabled_negative_prompt","onUpdate:modelValue":Z[3]||(Z[3]=le=>S.value=le),type:"checkbox"},null,512),[[Le,S.value]]),Z[18]||(Z[18]=p("label",{for:"vision_enabled_negative_prompt"},[qe(" Negative Prompt "),p("span",{class:"vision_help_text"},"(What to avoid in the generation)")],-1))]),he(p("textarea",{id:"vision_negative_prompt","onUpdate:modelValue":Z[4]||(Z[4]=le=>m.value=le),disabled:!S.value,rows:"3",placeholder:"nsfw, lowres, bad anatomy, bad hands, "},null,8,lp),[[$e,m.value]])]),p("div",up,[Z[19]||(Z[19]=p("label",{for:"vision_model"},"Model",-1)),he(p("select",{id:"vision_model","onUpdate:modelValue":Z[5]||(Z[5]=le=>h.value=le)},[(Ge(!0),Ke(ht,null,ln(de(i),le=>(Ge(),Ke("option",null,ot(le),1))),256))],512),[[Tt,h.value]])]),p("div",fp,[Z[20]||(Z[20]=p("label",{for:"vision_action"},"Action",-1)),he(p("select",{id:"vision_action","onUpdate:modelValue":Z[6]||(Z[6]=le=>P.value=le)},[(Ge(!0),Ke(ht,null,ln(de(r),le=>(Ge(),Ke("option",{value:le},ot(le),9,dp))),256))],512),[[Tt,P.value]])]),p("div",cp,[p("div",hp,[p("div",pp,[he(p("input",{id:"vision_enabled_width_quick","onUpdate:modelValue":Z[7]||(Z[7]=le=>b.value=le),type:"checkbox"},null,512),[[Le,b.value]]),Z[21]||(Z[21]=p("label",{for:"vision_enabled_width_quick"},"Width",-1))]),he(p("input",{id:"vision_width_quick","onUpdate:modelValue":Z[8]||(Z[8]=le=>g.value=le),type:"number",min:"64",max:"2048",step:"64",disabled:!b.value},null,8,gp),[[$e,g.value]])]),p("div",mp,[p("div",vp,[he(p("input",{id:"vision_enabled_height_quick","onUpdate:modelValue":Z[9]||(Z[9]=le=>w.value=le),type:"checkbox"},null,512),[[Le,w.value]]),Z[22]||(Z[22]=p("label",{for:"vision_enabled_height_quick"},"Height",-1))]),he(p("input",{id:"vision_height_quick","onUpdate:modelValue":Z[10]||(Z[10]=le=>c.value=le),type:"number",min:"64",max:"2048",step:"64",disabled:!w.value},null,8,_p),[[$e,c.value]])])]),p("div",bp,[p("div",yp,[he(p("input",{id:"vision_enabled_steps_quick","onUpdate:modelValue":Z[11]||(Z[11]=le=>L.value=le),type:"checkbox"},null,512),[[Le,L.value]]),Z[23]||(Z[23]=p("label",{for:"vision_enabled_steps_quick"},"Steps",-1))]),he(p("input",{id:"vision_steps_quick","onUpdate:modelValue":Z[12]||(Z[12]=le=>x.value=le),type:"number",disabled:!L.value},null,8,wp),[[$e,x.value]])]),p("div",xp,[p("div",Sp,[he(p("input",{id:"vision_enabled_seed_quick","onUpdate:modelValue":Z[13]||(Z[13]=le=>j.value=le),type:"checkbox"},null,512),[[Le,j.value]]),Z[24]||(Z[24]=p("label",{for:"vision_enabled_seed_quick"},[qe(" Seed "),p("span",{class:"vision_help_text"},"(-1 for random)")],-1))]),he(p("input",{id:"vision_seed_quick","onUpdate:modelValue":Z[14]||(Z[14]=le=>_.value=le),type:"number",disabled:!j.value},null,8,Ep),[[$e,_.value]])])]),p("div",kp,[p("div",Cp,[p("button",{class:"vision_button primary",onClick:ae,disabled:M.value},[Z[26]||(Z[26]=p("i",{class:"fa-solid fa-wand-magic-sparkles"},null,-1)),qe(" "+ot(M.value?"Generating...":"Generate"),1)],8,Tp)]),he(p("div",Ap,[p("div",Ip,[p("img",{src:W.value,alt:"Generated Image"},null,8,Dp),p("div",{class:"vision_result_actions"},[p("button",{class:"vision_button",onClick:Se},[...Z[27]||(Z[27]=[p("i",{class:"fa-solid fa-download"},null,-1),qe(" Download ",-1)])]),p("button",{class:"vision_button",onClick:fe},[...Z[28]||(Z[28]=[p("i",{class:"fa-solid fa-copy"},null,-1),qe(" Copy ",-1)])])])])],512),[[Oi,W.value]])])]))}},Rp=tn(Pp,[["__scopeId","data-v-092ca6ac"]]),Lp={class:"vision_tab_content"},Mp={class:"vision_section"},Op={class:"vision_form_group"},Up={class:"vision_form_group"},Bp=["value"],Np=["value"],Fp={class:"vision_form_group"},jp={class:"vision_section"},zp={class:"vision_form_group"},Hp={class:"vision_button_group"},Vp=["value"],$p={class:"vision_button_group"},qp={class:"vision_section"},Wp={class:"vision_form_group"},Gp={class:"vision_checkbox_group"},Zp={class:"vision_form_group"},Kp=["disabled"],Yp={class:"vision_form_group"},Xp=["disabled"],Jp={class:"vision_form_group"},Qp={class:"vision_checkbox_group"},eg=["disabled"],tg={key:0,class:"vision_form_group"},ng={style:{display:"flex","align-items":"center",gap:"12px"}},ig=["disabled"],rg={style:{"min-width":"40px","text-align":"right",color:"var(--st-vision-primary, #667eea)","font-weight":"600"}},sg={class:"vision_form_group"},og={style:{background:"var(--st-vision-bg-light, rgba(0, 0, 0, 0.2))",padding:"12px",borderRadius:"6px",fontFamily:"monospace",fontSize:"0.9em"}},ag={style:{color:"var(--st-vision-primary, #667eea)"}},lg={style:{color:"var(--st-vision-primary, #667eea)"}},ug={class:"vision_section"},fg={class:"vision_form_group"},dg={class:"vision_info_block"},cg={style:{display:"flex","align-items":"center",gap:"8px"}},hg={style:{"margin-top":"8px","font-size":"0.9em"}},pg={__name:"PluginSettingsTab",emits:["rename-config","duplicate-config","delete-config","export-config","import-config"],setup(e,{emit:t}){const{state:n,currentConfig:i,Host:r,saveState:s,currentTheme:o,applyTheme:a}=Yt(),l=Ie({get:()=>i.value.token,set:x=>i.value.token=x}),u=Ie({get:()=>i.value.host,set:x=>i.value.host=x}),f=Ie({get:()=>i.value.timeout,set:x=>i.value.timeout=x}),m=Ie({get:()=>n.theme?.current||"dark",set:async x=>{console.log("[ST Vision] Theme changed to:",x),n.theme?n.theme.current=x:n.theme={current:x},a(x);try{await s(),console.log("[ST Vision] Theme saved successfully")}catch(_){console.error("[ST Vision] Failed to save theme:",_)}}});Zt(()=>n.theme?.current,x=>{x&&a(x)},{immediate:!0});function h(x){const _={dark:"Dark theme provides a comfortable viewing experience in low-light environments.",light:"Light theme offers a clean and bright interface for well-lit environments.",blue:"Blue theme features cool blue tones for a calming and professional look.",green:"Green theme uses natural green colors for a fresh and vibrant appearance.",purple:"Purple theme showcases rich purple hues for a creative and elegant feel.",red:"Red theme displays bold red accents for a passionate and energetic vibe.",orange:"Orange theme features warm orange tones for a friendly and inviting atmosphere.",pink:"Pink theme uses soft pink colors for a playful and modern aesthetic.",cyan:"Cyan theme showcases bright cyan shades for a fresh and tech-forward look.",teal:"Teal theme combines blue and green for a balanced and sophisticated style.",indigo:"Indigo theme features deep indigo colors for a mysterious and premium feel.",amber:"Amber theme uses golden amber tones for a warm and luxurious appearance.",emerald:"Emerald theme displays rich emerald greens for a natural and elegant vibe.",auto:"Auto theme automatically switches between dark and light based on your system preferences."};return _[x]||_.dark}function c(){window.dispatchEvent(new CustomEvent("st-vision-show-history"))}const g=t;return(x,_)=>(Ge(),Ke("div",Lp,[p("div",Mp,[_[18]||(_[18]=p("h3",null,[p("i",{class:"fa-solid fa-key"}),qe(" API Configuration")],-1)),p("div",Op,[_[15]||(_[15]=p("label",{for:"vision_plugin_token"},[qe(" NovelAI Token * "),p("span",{class:"vision_help_text"},"(Required - Get your token from NovelAI account settings)")],-1)),he(p("input",{id:"vision_plugin_token","onUpdate:modelValue":_[0]||(_[0]=P=>l.value=P),type:"password",placeholder:"Enter your NovelAI access token"},null,512),[[$e,l.value]])]),p("div",Up,[_[16]||(_[16]=p("label",{for:"vision_plugin_host"},"API Host",-1)),he(p("select",{id:"vision_plugin_host","onUpdate:modelValue":_[1]||(_[1]=P=>u.value=P)},[p("option",{value:de(r).WEB},"Web Host (Default)",8,Bp),p("option",{value:de(r).API},"API Host",8,Np)],512),[[Tt,u.value]])]),p("div",Fp,[_[17]||(_[17]=p("label",{for:"vision_plugin_timeout"},[qe(" Request Timeout (ms) "),p("span",{class:"vision_help_text"},"(Increase if you get timeout errors, default: 120000ms = 2 minutes)")],-1)),he(p("input",{id:"vision_plugin_timeout","onUpdate:modelValue":_[2]||(_[2]=P=>f.value=P),type:"number",min:"30000",max:"600000",step:"10000",placeholder:"120000"},null,512),[[$e,f.value,void 0,{number:!0}]])])]),p("div",jp,[_[25]||(_[25]=p("h3",null,[p("i",{class:"fa-solid fa-folder"}),qe(" Configuration Management")],-1)),p("div",zp,[_[19]||(_[19]=p("label",{for:"vision_plugin_config_select"},"Current Configuration",-1)),p("div",Hp,[he(p("select",{id:"vision_plugin_config_select","onUpdate:modelValue":_[3]||(_[3]=P=>de(n).currentConfigName=P),style:{flex:"1"}},[(Ge(!0),Ke(ht,null,ln(Object.keys(de(n).configs),P=>(Ge(),Ke("option",{key:P,value:P},ot(P),9,Vp))),128))],512),[[Tt,de(n).currentConfigName]])])]),p("div",$p,[p("button",{class:"vision_button",onClick:_[4]||(_[4]=P=>g("rename-config"))},[..._[20]||(_[20]=[p("i",{class:"fa-solid fa-edit"},null,-1),qe(" Rename ",-1)])]),p("button",{class:"vision_button",onClick:_[5]||(_[5]=P=>g("duplicate-config"))},[..._[21]||(_[21]=[p("i",{class:"fa-solid fa-clone"},null,-1),qe(" Duplicate ",-1)])]),p("button",{class:"vision_button",onClick:_[6]||(_[6]=P=>g("delete-config"))},[..._[22]||(_[22]=[p("i",{class:"fa-solid fa-trash"},null,-1),qe(" Delete ",-1)])]),p("button",{class:"vision_button",onClick:_[7]||(_[7]=P=>g("export-config"))},[..._[23]||(_[23]=[p("i",{class:"fa-solid fa-download"},null,-1),qe(" Export ",-1)])]),p("button",{class:"vision_button",onClick:_[8]||(_[8]=P=>g("import-config"))},[..._[24]||(_[24]=[p("i",{class:"fa-solid fa-upload"},null,-1),qe(" Import ",-1)])])])]),p("div",qp,[_[37]||(_[37]=p("h3",null,[p("i",{class:"fa-solid fa-comments"}),qe(" Chat Image Generation")],-1)),_[38]||(_[38]=p("p",{class:"vision_help_text",style:{"margin-bottom":"15px"}}," Configure automatic image generation in chat messages. Use custom tags to trigger image generation. ",-1)),p("div",Wp,[p("div",Gp,[he(p("input",{id:"vision_chat_image_enabled","onUpdate:modelValue":_[9]||(_[9]=P=>de(n).chatImageGen.enabled=P),type:"checkbox"},null,512),[[Le,de(n).chatImageGen.enabled]]),_[26]||(_[26]=p("label",{for:"vision_chat_image_enabled"},[qe(" Enable Chat Image Generation "),p("span",{class:"vision_help_text"},"(Automatically detect and generate images from chat messages)")],-1))])]),p("div",Zp,[_[27]||(_[27]=p("label",{for:"vision_chat_tag_prefix"},[qe(" Tag Prefix "),p("span",{class:"vision_help_text"},"(Opening tag for image prompts, e.g., [img-gen] or <image_prompt>)")],-1)),he(p("input",{id:"vision_chat_tag_prefix","onUpdate:modelValue":_[10]||(_[10]=P=>de(n).chatImageGen.tagPrefix=P),type:"text",placeholder:"[img-gen]",disabled:!de(n).chatImageGen.enabled},null,8,Kp),[[$e,de(n).chatImageGen.tagPrefix]])]),p("div",Yp,[_[28]||(_[28]=p("label",{for:"vision_chat_tag_suffix"},[qe(" Tag Suffix "),p("span",{class:"vision_help_text"},"(Closing tag for image prompts, e.g., [/img-gen] or </image_prompt>)")],-1)),he(p("input",{id:"vision_chat_tag_suffix","onUpdate:modelValue":_[11]||(_[11]=P=>de(n).chatImageGen.tagSuffix=P),type:"text",placeholder:"[/img-gen]",disabled:!de(n).chatImageGen.enabled},null,8,Xp),[[$e,de(n).chatImageGen.tagSuffix]])]),p("div",Jp,[p("div",Qp,[he(p("input",{id:"vision_chat_request_queue","onUpdate:modelValue":_[12]||(_[12]=P=>de(n).chatImageGen.useRequestQueue=P),type:"checkbox",disabled:!de(n).chatImageGen.enabled},null,8,eg),[[Le,de(n).chatImageGen.useRequestQueue]]),_[29]||(_[29]=p("label",{for:"vision_chat_request_queue"},[qe(" Use Request Queue "),p("span",{class:"vision_help_text"},"(Queue requests sequentially to avoid API rate limiting. Disable to allow concurrent requests.)")],-1))])]),de(n).chatImageGen.useRequestQueue?(Ge(),Ke("div",tg,[_[30]||(_[30]=p("label",{for:"vision_chat_queue_delay"},[qe(" Queue Delay (seconds) "),p("span",{class:"vision_help_text"},"(Delay between requests: 5-12 seconds recommended to prevent 429 errors)")],-1)),p("div",ng,[he(p("input",{id:"vision_chat_queue_delay","onUpdate:modelValue":_[13]||(_[13]=P=>de(n).chatImageGen.queueDelay=P),type:"range",min:"5",max:"12",step:"1",disabled:!de(n).chatImageGen.enabled||!de(n).chatImageGen.useRequestQueue,style:{flex:"1"}},null,8,ig),[[$e,de(n).chatImageGen.queueDelay,void 0,{number:!0}]]),p("span",rg,ot(de(n).chatImageGen.queueDelay)+"s ",1)]),_[31]||(_[31]=p("div",{style:{display:"flex","justify-content":"space-between","font-size":"0.85em",color:"var(--st-vision-text-muted, #888)","margin-top":"4px"}},[p("span",null,"5s"),p("span",null,"12s")],-1))])):Sn("",!0),p("div",sg,[_[35]||(_[35]=p("label",null,[p("i",{class:"fa-solid fa-info-circle"}),qe(" Usage Example ")],-1)),p("div",og,[_[32]||(_[32]=p("div",{style:{color:"var(--st-vision-text-muted, #888)","margin-bottom":"8px"}}," In your chat message: ",-1)),p("div",ag,ot(de(n).chatImageGen.tagPrefix),1),_[33]||(_[33]=p("div",{style:{color:"var(--st-vision-text, #eee)","margin-left":"20px"}}," 1girl, beautiful, detailed face, high quality ",-1)),p("div",lg,ot(de(n).chatImageGen.tagSuffix),1),_[34]||(_[34]=p("div",{style:{color:"var(--st-vision-text-muted, #888)","margin-top":"8px","font-size":"0.85em"}},[p("i",{class:"fa-solid fa-lightbulb"}),qe(' A "Generate Image" button will appear automatically ')],-1))])]),p("div",{class:"vision_form_group"},[p("div",{class:"vision_button_group"},[p("button",{class:"vision_button",onClick:c,style:{flex:"1"}},[..._[36]||(_[36]=[p("i",{class:"fa-solid fa-images"},null,-1),qe(" View Image History ",-1)])])])])]),p("div",ug,[_[43]||(_[43]=p("h3",null,[p("i",{class:"fa-solid fa-palette"}),qe(" Theme Settings")],-1)),_[44]||(_[44]=p("p",{class:"vision_help_text",style:{"margin-bottom":"15px"}}," Choose a theme for the chat image generator interface. The theme affects colors, backgrounds, and overall appearance. ",-1)),p("div",fg,[_[40]||(_[40]=p("label",{for:"vision_theme_select"},[qe(" Theme "),p("span",{class:"vision_help_text"},"(Select your preferred color theme)")],-1)),he(p("select",{id:"vision_theme_select","onUpdate:modelValue":_[14]||(_[14]=P=>m.value=P),style:{width:"100%"}},[..._[39]||(_[39]=[Ef('<option value="dark" data-v-0d43e344>Dark</option><option value="light" data-v-0d43e344>Light</option><option value="blue" data-v-0d43e344>Blue</option><option value="green" data-v-0d43e344>Green</option><option value="purple" data-v-0d43e344>Purple</option><option value="red" data-v-0d43e344>Red</option><option value="orange" data-v-0d43e344>Orange</option><option value="pink" data-v-0d43e344>Pink</option><option value="cyan" data-v-0d43e344>Cyan</option><option value="teal" data-v-0d43e344>Teal</option><option value="indigo" data-v-0d43e344>Indigo</option><option value="amber" data-v-0d43e344>Amber</option><option value="emerald" data-v-0d43e344>Emerald</option><option value="auto" data-v-0d43e344>Auto (Follow System)</option>',14)])],512),[[Tt,m.value]])]),p("div",dg,[p("div",cg,[_[42]||(_[42]=p("i",{class:"fa-solid fa-info-circle"},null,-1)),p("div",null,[_[41]||(_[41]=p("strong",null,"Theme Preview:",-1)),p("div",hg,[p("div",{style:tr({padding:"8px",background:de(o).colors?.background||"#2a2a2a",border:`1px solid ${de(o).colors?.border||"#404040"}`,borderRadius:"4px",color:de(o).colors?.text||"#e0e0e0"})},ot(h(m.value)),5)])])])])])]))}},gg=tn(pg,[["__scopeId","data-v-0d43e344"]]),mg={class:"vision_tab_content"},vg={class:"vision_section"},_g={class:"vision_form_group"},bg={class:"vision_checkbox_group"},yg=["disabled"],wg=["value"],xg={class:"vision_form_row"},Sg={class:"vision_form_group"},Eg={class:"vision_checkbox_group"},kg=["disabled"],Cg={class:"vision_form_group"},Tg={class:"vision_checkbox_group"},Ag=["disabled"],Ig={class:"vision_form_group"},Dg={class:"vision_checkbox_group"},Pg=["disabled"],Rg=["value"],Lg={class:"vision_form_group"},Mg={class:"vision_checkbox_group"},Og=["disabled"],Ug={class:"vision_form_group"},Bg={class:"vision_checkbox_group"},Ng=["disabled"],Fg=["value"],jg={class:"vision_form_group"},zg={class:"vision_checkbox_group"},Hg={class:"vision_slider_container"},Vg={class:"vision_slider_header"},$g={class:"vision_slider_value"},qg=["disabled"],Wg={class:"vision_form_group"},Gg={class:"vision_checkbox_group"},Zg=["disabled"],Kg={class:"vision_form_group"},Yg={class:"vision_checkbox_group"},Xg={class:"vision_slider_container"},Jg=["disabled"],Qg={class:"vision_form_group"},em={class:"vision_checkbox_group"},tm=["disabled"],nm={class:"vision_form_group"},im={class:"vision_checkbox_group"},rm=["disabled"],sm={class:"vision_form_group"},om={class:"vision_checkbox_group"},am=["disabled"],lm={class:"vision_form_group"},um={class:"vision_checkbox_group"},fm=["disabled"],dm={class:"vision_checkbox_group"},cm=["disabled"],hm={class:"vision_checkbox_group"},pm=["disabled"],gm={class:"vision_checkbox_group"},mm=["disabled"],vm={class:"vision_checkbox_group"},_m=["disabled"],bm={class:"vision_checkbox_group"},ym=["disabled"],wm={class:"vision_checkbox_group"},xm=["disabled"],Sm={class:"vision_checkbox_group"},Em=["disabled"],km={class:"vision_checkbox_group"},Cm=["disabled"],Tm={class:"vision_checkbox_group"},Am=["disabled"],Im={class:"vision_checkbox_group"},Dm=["disabled"],Pm={class:"vision_checkbox_group"},Rm=["disabled"],Lm={class:"vision_checkbox_group"},Mm=["disabled"],Om={class:"vision_form_group"},Um={class:"vision_checkbox_group"},Bm=["disabled"],Nm={class:"vision_form_group"},Fm={class:"vision_checkbox_group"},jm=["disabled"],zm={class:"vision_form_group"},Hm={class:"vision_checkbox_group"},Vm=["disabled"],$m={class:"vision_form_group"},qm={class:"vision_checkbox_group"},Wm=["disabled"],Gm={class:"vision_form_group"},Zm={class:"vision_checkbox_group"},Km=["disabled"],Ym={class:"vision_form_group"},Xm={class:"vision_checkbox_group"},Jm=["disabled"],Qm={class:"vision_form_group"},ev={class:"vision_checkbox_group"},tv=["disabled"],nv=["value"],iv={class:"vision_form_group"},rv={class:"vision_checkbox_group"},sv=["disabled"],ov={class:"vision_form_group"},av={class:"vision_checkbox_group"},lv=["disabled"],uv={class:"vision_form_group"},fv={class:"vision_checkbox_group"},dv=["disabled"],cv={class:"vision_form_group"},hv={class:"vision_checkbox_group"},pv=["disabled"],gv={class:"vision_form_group"},mv={class:"vision_checkbox_group"},vv=["disabled"],_v={class:"vision_form_group"},bv={class:"vision_checkbox_group"},yv=["disabled"],wv={class:"vision_form_group"},xv={class:"vision_checkbox_group"},Sv=["disabled"],Ev={class:"vision_form_group"},kv={class:"vision_checkbox_group"},Cv=["disabled"],Tv={class:"vision_form_group"},Av={class:"vision_checkbox_group"},Iv=["disabled"],Dv={key:0,class:"vision_form_group"},Pv={class:"vision_checkbox_group"},Rv=["disabled"],Lv={__name:"AdvancedTab",setup(e){const{currentConfig:t,Model:n,Resolution:i,RESOLUTION_DIMENSIONS:r,Sampler:s,Noise:o,Controlnet:a,Metadata:l}=Yt(),u=Ie({get:()=>t.value.model,set:X=>t.value.model=X}),f=Ie({get:()=>t.value.height,set:X=>t.value.height=X}),m=Ie({get:()=>t.value.width,set:X=>t.value.width=X}),h=Ie({get:()=>t.value.steps,set:X=>t.value.steps=X}),c=Ie({get:()=>t.value.scale,set:X=>t.value.scale=X}),g=Ie({get:()=>t.value.sampler,set:X=>t.value.sampler=X}),x=Ie({get:()=>t.value.seed,set:X=>t.value.seed=X}),_=Ie({get:()=>t.value.sm,set:X=>t.value.sm=X}),P=Ie({get:()=>t.value.sm_dyn,set:X=>t.value.sm_dyn=X}),S=Ie({get:()=>t.value.stream,set:X=>t.value.stream=X}),b=Ie({get:()=>t.value.noise,set:X=>t.value.noise=X}),w=Ie({get:()=>t.value.resPreset,set:X=>t.value.resPreset=X}),L=Ie({get:()=>t.value.qualityToggle,set:X=>t.value.qualityToggle=X}),j=Ie({get:()=>t.value.ucPreset,set:X=>t.value.ucPreset=X}),M=Ie({get:()=>t.value.n_samples,set:X=>t.value.n_samples=X}),W=Ie({get:()=>t.value.dynamic_thresholding,set:X=>t.value.dynamic_thresholding=X}),V=Ie({get:()=>t.value.extra_noise_seed,set:X=>t.value.extra_noise_seed=X}),ae=Ie({get:()=>t.value.cfg_rescale,set:X=>t.value.cfg_rescale=X}),Se=Ie({get:()=>t.value.noise_schedule,set:X=>t.value.noise_schedule=X}),fe=Ie({get:()=>t.value.image,set:X=>t.value.image=X}),re=Ie({get:()=>t.value.strength,set:X=>t.value.strength=X}),Z=Ie({get:()=>t.value.controlnet_strength,set:X=>t.value.controlnet_strength=X}),le=Ie({get:()=>t.value.controlnet_condition,set:X=>t.value.controlnet_condition=X}),$=Ie({get:()=>t.value.controlnet_model,set:X=>t.value.controlnet_model=X}),ne=Ie({get:()=>t.value.add_original_image,set:X=>t.value.add_original_image=X}),H=Ie({get:()=>t.value.mask,set:X=>t.value.mask=X}),A=Ie({get:()=>{const X=t.value.reference_image_multiple;return Array.isArray(X)?X.join(","):X||""},set:X=>{t.value.reference_image_multiple=X?X.split(",").map(C=>C.trim()).filter(C=>C):void 0}}),I=Ie({get:()=>{const X=t.value.reference_information_extracted_multiple;return Array.isArray(X)?X.join(","):X||""},set:X=>{t.value.reference_information_extracted_multiple=X?X.split(",").map(C=>parseFloat(C.trim())).filter(C=>!isNaN(C)):void 0}}),F=Ie({get:()=>{const X=t.value.reference_strength_multiple;return Array.isArray(X)?X.join(","):X||""},set:X=>{t.value.reference_strength_multiple=X?X.split(",").map(C=>parseFloat(C.trim())).filter(C=>!isNaN(C)):void 0}}),z=Ie({get:()=>t.value.params_version,set:X=>t.value.params_version=X}),Y=Ie({get:()=>t.value.autoSmea,set:X=>t.value.autoSmea=X}),ce=Ie({get:()=>{const X=t.value.characterPrompts;return X?JSON.stringify(X,null,2):""},set:X=>{try{t.value.characterPrompts=X?JSON.parse(X):void 0}catch(C){console.error("Invalid JSON for characterPrompts:",C)}}}),ve=Ie({get:()=>{const X=t.value.v4_prompt;return X?JSON.stringify(X,null,2):""},set:X=>{try{t.value.v4_prompt=X?JSON.parse(X):void 0}catch(C){console.error("Invalid JSON for v4_prompt:",C)}}}),ye=Ie({get:()=>{const X=t.value.v4_negative_prompt;return X?JSON.stringify(X,null,2):""},set:X=>{try{t.value.v4_negative_prompt=X?JSON.parse(X):void 0}catch(C){console.error("Invalid JSON for v4_negative_prompt:",C)}}}),we=Ie({get:()=>t.value.skip_cfg_above_sigma,set:X=>t.value.skip_cfg_above_sigma=X}),ke=Ie({get:()=>t.value.use_coords,set:X=>t.value.use_coords=X}),T=Ie({get:()=>t.value.legacy_uc,set:X=>t.value.legacy_uc=X}),R=Ie({get:()=>t.value.normalize_reference_strength_multiple,set:X=>t.value.normalize_reference_strength_multiple=X}),pe=Ie({get:()=>t.value.deliberate_euler_ancestral_bug,set:X=>t.value.deliberate_euler_ancestral_bug=X}),E=Ie({get:()=>t.value.prefer_brownian,set:X=>t.value.prefer_brownian=X}),D=Ie({get:()=>t.value.inpaintImg2ImgStrength,set:X=>t.value.inpaintImg2ImgStrength=X}),B=Ie({get:()=>t.value.legacy,set:X=>t.value.legacy=X}),K=Ie({get:()=>t.value.legacy_v3_extend,set:X=>t.value.legacy_v3_extend=X}),oe=Ie(()=>u.value==n.V4_CUR||u.value==n.V4||u.value==n.V4_5_CUR||u.value==n.V4_5);function q(X){return Ie({get:()=>t.value[X]!==void 0,set:C=>{if(!C)t.value[X]=void 0;else{const N=l[X];N!==void 0?t.value[X]=N:X==="skip_cfg_above_sigma"||X==="stream"?t.value[X]=null:typeof l[X]=="boolean"?t.value[X]=!1:typeof l[X]=="number"?t.value[X]=0:typeof l[X]=="string"?t.value[X]="":Array.isArray(l[X])?t.value[X]=[]:t.value[X]=null}}})}const Q=q("resPreset"),te=q("qualityToggle"),ie=q("ucPreset"),ue=q("width"),Ee=q("height"),be=q("n_samples"),Pe=q("steps"),Ae=q("scale"),Me=q("dynamic_thresholding"),Ne=q("seed"),Fe=q("extra_noise_seed"),We=q("sampler"),Ye=q("sm"),at=q("sm_dyn"),k=q("cfg_rescale"),ge=q("noise_schedule"),_e=q("image"),xe=q("strength"),U=q("noise"),se=q("controlnet_strength"),v=q("controlnet_condition"),me=q("controlnet_model"),Ue=q("add_original_image"),d=q("mask"),J=q("reference_image_multiple"),ee=q("reference_information_extracted_multiple"),y=q("reference_strength_multiple"),O=q("params_version"),G=q("autoSmea"),Re=q("characterPrompts"),Ce=q("v4_prompt"),De=q("v4_negative_prompt"),He=q("skip_cfg_above_sigma"),wt=q("use_coords"),Qe=q("legacy_uc"),Ve=q("normalize_reference_strength_multiple"),rt=q("deliberate_euler_ancestral_bug"),ft=q("prefer_brownian"),dt=q("inpaintImg2ImgStrength"),jt=q("legacy"),zt=q("legacy_v3_extend"),it=q("stream");return Zt([w,Q],([X,C])=>{if(C&&X&&r[X]){const[N,xt]=r[X];ue.value&&(m.value=N),Ee.value&&(f.value=xt)}}),(X,C)=>(Ge(),Ke("div",mg,[p("div",vg,[C[129]||(C[129]=p("h3",null,[p("i",{class:"fa-solid fa-sliders"}),qe(" Advanced Generation Settings")],-1)),p("div",_g,[p("div",bg,[he(p("input",{id:"vision_enabled_res_preset","onUpdate:modelValue":C[0]||(C[0]=N=>Oe(Q)?Q.value=N:null),type:"checkbox"},null,512),[[Le,de(Q)]]),C[84]||(C[84]=p("label",{for:"vision_enabled_res_preset"},"Resolution Preset",-1))]),he(p("select",{id:"vision_res_preset","onUpdate:modelValue":C[1]||(C[1]=N=>w.value=N),disabled:!de(Q)},[(Ge(!0),Ke(ht,null,ln(de(i),(N,xt)=>(Ge(),Ke("option",{key:xt,value:N},ot(N),9,wg))),128))],8,yg),[[Tt,w.value]])]),p("div",xg,[p("div",Sg,[p("div",Eg,[he(p("input",{id:"vision_enabled_width","onUpdate:modelValue":C[2]||(C[2]=N=>Oe(ue)?ue.value=N:null),type:"checkbox"},null,512),[[Le,de(ue)]]),C[85]||(C[85]=p("label",{for:"vision_enabled_width"},"Width",-1))]),he(p("input",{id:"vision_width","onUpdate:modelValue":C[3]||(C[3]=N=>m.value=N),type:"number",min:"64",max:"2048",step:"64",disabled:!de(ue)},null,8,kg),[[$e,m.value]])]),p("div",Cg,[p("div",Tg,[he(p("input",{id:"vision_enabled_height","onUpdate:modelValue":C[4]||(C[4]=N=>Oe(Ee)?Ee.value=N:null),type:"checkbox"},null,512),[[Le,de(Ee)]]),C[86]||(C[86]=p("label",{for:"vision_enabled_height"},"Height",-1))]),he(p("input",{id:"vision_height","onUpdate:modelValue":C[5]||(C[5]=N=>f.value=N),type:"number",min:"64",max:"2048",step:"64",disabled:!de(Ee)},null,8,Ag),[[$e,f.value]])])]),p("div",Ig,[p("div",Dg,[he(p("input",{id:"vision_enabled_sampler","onUpdate:modelValue":C[6]||(C[6]=N=>Oe(We)?We.value=N:null),type:"checkbox"},null,512),[[Le,de(We)]]),C[87]||(C[87]=p("label",{for:"vision_enabled_sampler"},"Sampler",-1))]),he(p("select",{id:"vision_sampler","onUpdate:modelValue":C[7]||(C[7]=N=>g.value=N),disabled:!de(We)},[(Ge(!0),Ke(ht,null,ln(de(s),N=>(Ge(),Ke("option",{value:N},ot(N),9,Rg))),256))],8,Pg),[[Tt,g.value]])]),p("div",Lg,[p("div",Mg,[he(p("input",{id:"vision_enabled_noise","onUpdate:modelValue":C[8]||(C[8]=N=>Oe(U)?U.value=N:null),type:"checkbox"},null,512),[[Le,de(U)]]),C[88]||(C[88]=p("label",{for:"vision_enabled_noise"},"Noise",-1))]),he(p("input",{id:"vision_noise","onUpdate:modelValue":C[9]||(C[9]=N=>b.value=N),type:"number",disabled:!de(U)},null,8,Og),[[$e,b.value]])]),p("div",Ug,[p("div",Bg,[he(p("input",{id:"vision_enabled_noise_schedule","onUpdate:modelValue":C[10]||(C[10]=N=>Oe(ge)?ge.value=N:null),type:"checkbox"},null,512),[[Le,de(ge)]]),C[89]||(C[89]=p("label",{for:"vision_enabled_noise_schedule"},"Noise Schedule",-1))]),he(p("select",{id:"vision_noise_schedule","onUpdate:modelValue":C[11]||(C[11]=N=>Se.value=N),disabled:!de(ge)},[(Ge(!0),Ke(ht,null,ln(de(o),N=>(Ge(),Ke("option",{value:N},ot(N),9,Fg))),256))],8,Ng),[[Tt,Se.value]])]),p("div",jg,[p("div",zg,[he(p("input",{id:"vision_enabled_steps","onUpdate:modelValue":C[12]||(C[12]=N=>Oe(Pe)?Pe.value=N:null),type:"checkbox"},null,512),[[Le,de(Pe)]]),C[90]||(C[90]=p("label",{for:"vision_enabled_steps"},"Steps",-1))]),p("div",Hg,[p("div",Vg,[p("span",$g,ot(h.value),1)]),he(p("input",{id:"vision_steps","onUpdate:modelValue":C[13]||(C[13]=N=>h.value=N),type:"number",disabled:!de(Pe)},null,8,qg),[[$e,h.value]])])]),p("div",Wg,[p("div",Gg,[he(p("input",{id:"vision_enabled_n_samples","onUpdate:modelValue":C[14]||(C[14]=N=>Oe(be)?be.value=N:null),type:"checkbox"},null,512),[[Le,de(be)]]),C[91]||(C[91]=p("label",{for:"vision_enabled_n_samples"},"N Samples",-1))]),he(p("input",{id:"vision_n_samples","onUpdate:modelValue":C[15]||(C[15]=N=>M.value=N),type:"number",disabled:!de(be)},null,8,Zg),[[$e,M.value]])]),p("div",Kg,[p("div",Yg,[he(p("input",{id:"vision_enabled_scale","onUpdate:modelValue":C[16]||(C[16]=N=>Oe(Ae)?Ae.value=N:null),type:"checkbox"},null,512),[[Le,de(Ae)]]),C[92]||(C[92]=p("label",{for:"vision_enabled_scale"},"Guidance Scale (CFG)",-1))]),p("div",Xg,[C[93]||(C[93]=p("div",{class:"vision_slider_header"},[p("span",{class:"vision_slider_value"})],-1)),he(p("input",{id:"vision_scale","onUpdate:modelValue":C[17]||(C[17]=N=>c.value=N),type:"text",disabled:!de(Ae)},null,8,Jg),[[$e,c.value]])])]),p("div",Qg,[p("div",em,[he(p("input",{id:"vision_enabled_cfg_rescale","onUpdate:modelValue":C[18]||(C[18]=N=>Oe(k)?k.value=N:null),type:"checkbox"},null,512),[[Le,de(k)]]),C[94]||(C[94]=p("label",{for:"vision_enabled_cfg_rescale"},"CFG Rescale",-1))]),he(p("input",{id:"vision_cfg_rescale","onUpdate:modelValue":C[19]||(C[19]=N=>ae.value=N),type:"number",disabled:!de(k)},null,8,tm),[[$e,ae.value]])]),p("div",nm,[p("div",im,[he(p("input",{id:"vision_enabled_seed","onUpdate:modelValue":C[20]||(C[20]=N=>Oe(Ne)?Ne.value=N:null),type:"checkbox"},null,512),[[Le,de(Ne)]]),C[95]||(C[95]=p("label",{for:"vision_enabled_seed"},[qe(" Seed "),p("span",{class:"vision_help_text"},"(-1 for random)")],-1))]),he(p("input",{id:"vision_seed","onUpdate:modelValue":C[21]||(C[21]=N=>x.value=N),type:"number",disabled:!de(Ne)},null,8,rm),[[$e,x.value]])]),p("div",sm,[p("div",om,[he(p("input",{id:"vision_enabled_extra_noise_seed","onUpdate:modelValue":C[22]||(C[22]=N=>Oe(Fe)?Fe.value=N:null),type:"checkbox"},null,512),[[Le,de(Fe)]]),C[96]||(C[96]=p("label",{for:"vision_enabled_extra_noise_seed"},"Extra Noise Seed",-1))]),he(p("input",{id:"vision_extra_noise_seed","onUpdate:modelValue":C[23]||(C[23]=N=>V.value=N),type:"number",disabled:!de(Fe)},null,8,am),[[$e,V.value]])]),p("div",lm,[p("div",um,[he(p("input",{id:"vision_enabled_sm","onUpdate:modelValue":C[24]||(C[24]=N=>Oe(Ye)?Ye.value=N:null),type:"checkbox"},null,512),[[Le,de(Ye)]]),he(p("input",{id:"vision_sm","onUpdate:modelValue":C[25]||(C[25]=N=>_.value=N),type:"checkbox",disabled:!de(Ye)},null,8,fm),[[Le,_.value]]),C[97]||(C[97]=p("label",{for:"vision_enabled_sm"},[qe(" SMEA "),p("span",{class:"vision_help_text"},"(Improved coherence)")],-1))]),p("div",dm,[he(p("input",{id:"vision_enabled_sm_dyn","onUpdate:modelValue":C[26]||(C[26]=N=>Oe(at)?at.value=N:null),type:"checkbox"},null,512),[[Le,de(at)]]),he(p("input",{id:"vision_sm_dyn","onUpdate:modelValue":C[27]||(C[27]=N=>P.value=N),type:"checkbox",disabled:!de(at)},null,8,cm),[[Le,P.value]]),C[98]||(C[98]=p("label",{for:"vision_enabled_sm_dyn"},[qe(" SMEA DYN "),p("span",{class:"vision_help_text"},"(Dynamic SMEA for better details)")],-1))]),p("div",hm,[he(p("input",{id:"vision_enabled_quality_toggle","onUpdate:modelValue":C[28]||(C[28]=N=>Oe(te)?te.value=N:null),type:"checkbox"},null,512),[[Le,de(te)]]),he(p("input",{id:"vision_quality_toggle","onUpdate:modelValue":C[29]||(C[29]=N=>L.value=N),type:"checkbox",disabled:!de(te)},null,8,pm),[[Le,L.value]]),C[99]||(C[99]=p("label",{for:"vision_enabled_quality_toggle"},"Quality Toggle",-1))]),p("div",gm,[he(p("input",{id:"vision_enabled_dynamic_thresholding","onUpdate:modelValue":C[30]||(C[30]=N=>Oe(Me)?Me.value=N:null),type:"checkbox"},null,512),[[Le,de(Me)]]),he(p("input",{id:"vision_dynamic_thresholding","onUpdate:modelValue":C[31]||(C[31]=N=>W.value=N),type:"checkbox",disabled:!de(Me)},null,8,mm),[[Le,W.value]]),C[100]||(C[100]=p("label",{for:"vision_enabled_dynamic_thresholding"},"Dynamic Thresholding",-1))]),p("div",vm,[he(p("input",{id:"vision_enabled_auto_smea","onUpdate:modelValue":C[32]||(C[32]=N=>Oe(G)?G.value=N:null),type:"checkbox"},null,512),[[Le,de(G)]]),he(p("input",{id:"vision_auto_smea","onUpdate:modelValue":C[33]||(C[33]=N=>Y.value=N),type:"checkbox",disabled:!de(G)},null,8,_m),[[Le,Y.value]]),C[101]||(C[101]=p("label",{for:"vision_enabled_auto_smea"},"Auto SMEA",-1))]),p("div",bm,[he(p("input",{id:"vision_enabled_add_original_image","onUpdate:modelValue":C[34]||(C[34]=N=>Oe(Ue)?Ue.value=N:null),type:"checkbox"},null,512),[[Le,de(Ue)]]),he(p("input",{id:"vision_add_original_image","onUpdate:modelValue":C[35]||(C[35]=N=>ne.value=N),type:"checkbox",disabled:!de(Ue)},null,8,ym),[[Le,ne.value]]),C[102]||(C[102]=p("label",{for:"vision_enabled_add_original_image"},"Add Original Image",-1))]),p("div",wm,[he(p("input",{id:"vision_enabled_use_coords","onUpdate:modelValue":C[36]||(C[36]=N=>Oe(wt)?wt.value=N:null),type:"checkbox"},null,512),[[Le,de(wt)]]),he(p("input",{id:"vision_use_coords","onUpdate:modelValue":C[37]||(C[37]=N=>ke.value=N),type:"checkbox",disabled:!de(wt)},null,8,xm),[[Le,ke.value]]),C[103]||(C[103]=p("label",{for:"vision_enabled_use_coords"},"Use Coords",-1))]),p("div",Sm,[he(p("input",{id:"vision_enabled_legacy_uc","onUpdate:modelValue":C[38]||(C[38]=N=>Oe(Qe)?Qe.value=N:null),type:"checkbox"},null,512),[[Le,de(Qe)]]),he(p("input",{id:"vision_legacy_uc","onUpdate:modelValue":C[39]||(C[39]=N=>T.value=N),type:"checkbox",disabled:!de(Qe)},null,8,Em),[[Le,T.value]]),C[104]||(C[104]=p("label",{for:"vision_enabled_legacy_uc"},"Legacy UC",-1))]),p("div",km,[he(p("input",{id:"vision_enabled_normalize_reference_strength_multiple","onUpdate:modelValue":C[40]||(C[40]=N=>Oe(Ve)?Ve.value=N:null),type:"checkbox"},null,512),[[Le,de(Ve)]]),he(p("input",{id:"vision_normalize_reference_strength_multiple","onUpdate:modelValue":C[41]||(C[41]=N=>R.value=N),type:"checkbox",disabled:!de(Ve)},null,8,Cm),[[Le,R.value]]),C[105]||(C[105]=p("label",{for:"vision_enabled_normalize_reference_strength_multiple"},"Normalize Reference Strength Multiple",-1))]),p("div",Tm,[he(p("input",{id:"vision_enabled_deliberate_euler_ancestral_bug","onUpdate:modelValue":C[42]||(C[42]=N=>Oe(rt)?rt.value=N:null),type:"checkbox"},null,512),[[Le,de(rt)]]),he(p("input",{id:"vision_deliberate_euler_ancestral_bug","onUpdate:modelValue":C[43]||(C[43]=N=>pe.value=N),type:"checkbox",disabled:!de(rt)},null,8,Am),[[Le,pe.value]]),C[106]||(C[106]=p("label",{for:"vision_enabled_deliberate_euler_ancestral_bug"},"Deliberate Euler Ancestral Bug",-1))]),p("div",Im,[he(p("input",{id:"vision_enabled_prefer_brownian","onUpdate:modelValue":C[44]||(C[44]=N=>Oe(ft)?ft.value=N:null),type:"checkbox"},null,512),[[Le,de(ft)]]),he(p("input",{id:"vision_prefer_brownian","onUpdate:modelValue":C[45]||(C[45]=N=>E.value=N),type:"checkbox",disabled:!de(ft)},null,8,Dm),[[Le,E.value]]),C[107]||(C[107]=p("label",{for:"vision_enabled_prefer_brownian"},"Prefer Brownian",-1))]),p("div",Pm,[he(p("input",{id:"vision_enabled_legacy","onUpdate:modelValue":C[46]||(C[46]=N=>Oe(jt)?jt.value=N:null),type:"checkbox"},null,512),[[Le,de(jt)]]),he(p("input",{id:"vision_legacy","onUpdate:modelValue":C[47]||(C[47]=N=>B.value=N),type:"checkbox",disabled:!de(jt)},null,8,Rm),[[Le,B.value]]),C[108]||(C[108]=p("label",{for:"vision_enabled_legacy"},"Legacy",-1))]),p("div",Lm,[he(p("input",{id:"vision_enabled_legacy_v3_extend","onUpdate:modelValue":C[48]||(C[48]=N=>Oe(zt)?zt.value=N:null),type:"checkbox"},null,512),[[Le,de(zt)]]),he(p("input",{id:"vision_legacy_v3_extend","onUpdate:modelValue":C[49]||(C[49]=N=>K.value=N),type:"checkbox",disabled:!de(zt)},null,8,Mm),[[Le,K.value]]),C[109]||(C[109]=p("label",{for:"vision_enabled_legacy_v3_extend"},"Legacy V3 Extend",-1))])]),p("div",Om,[p("div",Um,[he(p("input",{id:"vision_enabled_uc_preset","onUpdate:modelValue":C[50]||(C[50]=N=>Oe(ie)?ie.value=N:null),type:"checkbox"},null,512),[[Le,de(ie)]]),C[110]||(C[110]=p("label",{for:"vision_enabled_uc_preset"},"UC Preset",-1))]),he(p("select",{id:"vision_uc_preset","onUpdate:modelValue":C[51]||(C[51]=N=>j.value=N),disabled:!de(ie)},[...C[111]||(C[111]=[p("option",{value:0},"0",-1),p("option",{value:1},"1",-1),p("option",{value:2},"2",-1),p("option",{value:3},"3",-1)])],8,Bm),[[Tt,j.value]])]),p("div",Nm,[p("div",Fm,[he(p("input",{id:"vision_enabled_params_version","onUpdate:modelValue":C[52]||(C[52]=N=>Oe(O)?O.value=N:null),type:"checkbox"},null,512),[[Le,de(O)]]),C[112]||(C[112]=p("label",{for:"vision_enabled_params_version"},"Params Version",-1))]),he(p("select",{id:"vision_params_version","onUpdate:modelValue":C[53]||(C[53]=N=>z.value=N),disabled:!de(O)},[...C[113]||(C[113]=[p("option",{value:1},"1",-1),p("option",{value:2},"2",-1),p("option",{value:3},"3",-1)])],8,jm),[[Tt,z.value]])]),p("div",zm,[p("div",Hm,[he(p("input",{id:"vision_enabled_image","onUpdate:modelValue":C[54]||(C[54]=N=>Oe(_e)?_e.value=N:null),type:"checkbox"},null,512),[[Le,de(_e)]]),C[114]||(C[114]=p("label",{for:"vision_enabled_image"},"Image",-1))]),he(p("input",{id:"vision_image","onUpdate:modelValue":C[55]||(C[55]=N=>fe.value=N),type:"text",disabled:!de(_e)},null,8,Vm),[[$e,fe.value]])]),p("div",$m,[p("div",qm,[he(p("input",{id:"vision_enabled_strength","onUpdate:modelValue":C[56]||(C[56]=N=>Oe(xe)?xe.value=N:null),type:"checkbox"},null,512),[[Le,de(xe)]]),C[115]||(C[115]=p("label",{for:"vision_enabled_strength"},"Strength",-1))]),he(p("input",{id:"vision_strength","onUpdate:modelValue":C[57]||(C[57]=N=>re.value=N),type:"number",step:"0.01",disabled:!de(xe)},null,8,Wm),[[$e,re.value]])]),p("div",Gm,[p("div",Zm,[he(p("input",{id:"vision_enabled_inpaint_img2img_strength","onUpdate:modelValue":C[58]||(C[58]=N=>Oe(dt)?dt.value=N:null),type:"checkbox"},null,512),[[Le,de(dt)]]),C[116]||(C[116]=p("label",{for:"vision_enabled_inpaint_img2img_strength"},"Inpaint Img2Img Strength",-1))]),he(p("input",{id:"vision_inpaint_img2img_strength","onUpdate:modelValue":C[59]||(C[59]=N=>D.value=N),type:"number",step:"0.01",disabled:!de(dt)},null,8,Km),[[$e,D.value]])]),p("div",Ym,[p("div",Xm,[he(p("input",{id:"vision_enabled_mask","onUpdate:modelValue":C[60]||(C[60]=N=>Oe(d)?d.value=N:null),type:"checkbox"},null,512),[[Le,de(d)]]),C[117]||(C[117]=p("label",{for:"vision_enabled_mask"},"Mask",-1))]),he(p("input",{id:"vision_mask","onUpdate:modelValue":C[61]||(C[61]=N=>H.value=N),type:"text",disabled:!de(d)},null,8,Jm),[[$e,H.value]])]),p("div",Qm,[p("div",ev,[he(p("input",{id:"vision_enabled_controlnet_model","onUpdate:modelValue":C[62]||(C[62]=N=>Oe(me)?me.value=N:null),type:"checkbox"},null,512),[[Le,de(me)]]),C[118]||(C[118]=p("label",{for:"vision_enabled_controlnet_model"},"Controlnet Model",-1))]),he(p("select",{id:"vision_controlnet_model","onUpdate:modelValue":C[63]||(C[63]=N=>$.value=N),disabled:!de(me)},[(Ge(!0),Ke(ht,null,ln(de(a),N=>(Ge(),Ke("option",{value:N},ot(N),9,nv))),256))],8,tv),[[Tt,$.value]])]),p("div",iv,[p("div",rv,[he(p("input",{id:"vision_enabled_controlnet_strength","onUpdate:modelValue":C[64]||(C[64]=N=>Oe(se)?se.value=N:null),type:"checkbox"},null,512),[[Le,de(se)]]),C[119]||(C[119]=p("label",{for:"vision_enabled_controlnet_strength"},"Controlnet Strength",-1))]),he(p("input",{id:"vision_controlnet_strength","onUpdate:modelValue":C[65]||(C[65]=N=>Z.value=N),type:"number",step:"0.01",disabled:!de(se)},null,8,sv),[[$e,Z.value]])]),p("div",ov,[p("div",av,[he(p("input",{id:"vision_enabled_controlnet_condition","onUpdate:modelValue":C[66]||(C[66]=N=>Oe(v)?v.value=N:null),type:"checkbox"},null,512),[[Le,de(v)]]),C[120]||(C[120]=p("label",{for:"vision_enabled_controlnet_condition"},"Controlnet Condition",-1))]),he(p("input",{id:"vision_controlnet_condition","onUpdate:modelValue":C[67]||(C[67]=N=>le.value=N),type:"text",disabled:!de(v)},null,8,lv),[[$e,le.value]])]),p("div",uv,[p("div",fv,[he(p("input",{id:"vision_enabled_skip_cfg_above_sigma","onUpdate:modelValue":C[68]||(C[68]=N=>Oe(He)?He.value=N:null),type:"checkbox"},null,512),[[Le,de(He)]]),C[121]||(C[121]=p("label",{for:"vision_enabled_skip_cfg_above_sigma"},"Skip CFG Above Sigma",-1))]),he(p("input",{id:"vision_skip_cfg_above_sigma","onUpdate:modelValue":C[69]||(C[69]=N=>we.value=N),type:"number",disabled:!de(He)},null,8,dv),[[$e,we.value]])]),p("div",cv,[p("div",hv,[he(p("input",{id:"vision_enabled_reference_image_multiple","onUpdate:modelValue":C[70]||(C[70]=N=>Oe(J)?J.value=N:null),type:"checkbox"},null,512),[[Le,de(J)]]),C[122]||(C[122]=p("label",{for:"vision_enabled_reference_image_multiple"},"Reference Image Multiple",-1))]),he(p("textarea",{id:"vision_reference_image_multiple","onUpdate:modelValue":C[71]||(C[71]=N=>A.value=N),disabled:!de(J),placeholder:"Enter image URLs separated by commas"},null,8,pv),[[$e,A.value]])]),p("div",gv,[p("div",mv,[he(p("input",{id:"vision_enabled_reference_information_extracted_multiple","onUpdate:modelValue":C[72]||(C[72]=N=>Oe(ee)?ee.value=N:null),type:"checkbox"},null,512),[[Le,de(ee)]]),C[123]||(C[123]=p("label",{for:"vision_enabled_reference_information_extracted_multiple"},"Reference Information Extracted Multiple",-1))]),he(p("input",{id:"vision_reference_information_extracted_multiple","onUpdate:modelValue":C[73]||(C[73]=N=>I.value=N),type:"text",disabled:!de(ee),placeholder:"Enter numbers separated by commas"},null,8,vv),[[$e,I.value]])]),p("div",_v,[p("div",bv,[he(p("input",{id:"vision_enabled_reference_strength_multiple","onUpdate:modelValue":C[74]||(C[74]=N=>Oe(y)?y.value=N:null),type:"checkbox"},null,512),[[Le,de(y)]]),C[124]||(C[124]=p("label",{for:"vision_enabled_reference_strength_multiple"},"Reference Strength Multiple",-1))]),he(p("input",{id:"vision_reference_strength_multiple","onUpdate:modelValue":C[75]||(C[75]=N=>F.value=N),type:"text",disabled:!de(y),placeholder:"Enter numbers separated by commas"},null,8,yv),[[$e,F.value]])]),p("div",wv,[p("div",xv,[he(p("input",{id:"vision_enabled_character_prompts","onUpdate:modelValue":C[76]||(C[76]=N=>Oe(Re)?Re.value=N:null),type:"checkbox"},null,512),[[Le,de(Re)]]),C[125]||(C[125]=p("label",{for:"vision_enabled_character_prompts"},"Character Prompts",-1))]),he(p("textarea",{id:"vision_character_prompts","onUpdate:modelValue":C[77]||(C[77]=N=>ce.value=N),disabled:!de(Re),placeholder:"JSON format"},null,8,Sv),[[$e,ce.value]])]),p("div",Ev,[p("div",kv,[he(p("input",{id:"vision_enabled_v4_prompt","onUpdate:modelValue":C[78]||(C[78]=N=>Oe(Ce)?Ce.value=N:null),type:"checkbox"},null,512),[[Le,de(Ce)]]),C[126]||(C[126]=p("label",{for:"vision_enabled_v4_prompt"},"V4 Prompt",-1))]),he(p("textarea",{id:"vision_v4_prompt","onUpdate:modelValue":C[79]||(C[79]=N=>ve.value=N),disabled:!de(Ce),placeholder:"JSON format"},null,8,Cv),[[$e,ve.value]])]),p("div",Tv,[p("div",Av,[he(p("input",{id:"vision_enabled_v4_negative_prompt","onUpdate:modelValue":C[80]||(C[80]=N=>Oe(De)?De.value=N:null),type:"checkbox"},null,512),[[Le,de(De)]]),C[127]||(C[127]=p("label",{for:"vision_enabled_v4_negative_prompt"},"V4 Negative Prompt",-1))]),he(p("textarea",{id:"vision_v4_negative_prompt","onUpdate:modelValue":C[81]||(C[81]=N=>ye.value=N),disabled:!de(De),placeholder:"JSON format"},null,8,Iv),[[$e,ye.value]])]),oe.value?(Ge(),Ke("div",Dv,[p("div",Pv,[he(p("input",{id:"vision_enabled_stream","onUpdate:modelValue":C[82]||(C[82]=N=>Oe(it)?it.value=N:null),type:"checkbox"},null,512),[[Le,de(it)]]),he(p("input",{id:"vision_stream","onUpdate:modelValue":C[83]||(C[83]=N=>S.value=N),type:"checkbox",disabled:!de(it)},null,8,Rv),[[Le,S.value]]),C[128]||(C[128]=p("label",{for:"vision_enabled_stream"},[qe(" Enable Streaming "),p("span",{class:"vision_help_text"},"(Watch generation progress in real-time)")],-1))])])):Sn("",!0)])]))}},Mv=tn(Lv,[["__scopeId","data-v-cb36d767"]]),Ov={class:"st_vision_modal_content"},Uv={class:"st_vision_modal_header"},Bv={class:"st_vision_modal_body"},Nv={class:"st_vision_settings"},Fv={class:"vision_tabs"},jv={__name:"VisionModal",setup(e){const{state:t,currentConfig:n,duplicateCurrentConfig:i,renameCurrentConfig:r,deleteCurrentConfig:s,saveState:o,exportCurrentConfig:a,importConfig:l,applyTheme:u}=Yt(),f=ct("generate"),m=ct(!1),h=ct("Input dialog title"),c=ct("Input dialog content"),g=ct("");let x=null;const _=ct(!1),P=ct("Confirm dialog title"),S=ct("Confirm dialog content");let b=null;function w(){t.modalVisible=!1}function L(H){H.target.classList.contains("st_vision_modal")&&w()}function j(H){H.key==="Escape"&&t.modalVisible&&w()}function M(H,A,I=""){return new Promise((F,z)=>{h.value=H,c.value=A,g.value=I,m.value=!0,x=F})}function W(H,A=""){return new Promise(I=>{P.value=H,S.value=A,_.value=!0,b=I})}function V(H){x&&(x(H),x=null)}function ae(){x&&(x(null),x=null)}function Se(){b&&(b(!0),b=null)}function fe(){b&&(b(!1),b=null)}async function re(H){try{console.log("openInputDialog-rename");const A=await M("Rename",`Enter new name for ${H}:`,H);if(!A||!A.trim()){console.log("Empty input, rename cancelled");return}await r(A.trim()),console.log("user input",A)}catch(A){A&&A.message?(console.error("Rename failed:",A.message),alert(`Failed to rename: ${A.message}`)):console.log("user cancel input")}}async function Z(H){try{console.log("openInputDialog-duplicate");const A=await M("New name",`Enter new name for ${H}:`,"");if(!A||!A.trim()){console.log("Empty input");return}await i(A.trim()),console.log("user input",A)}catch(A){A&&A.message?(console.error("dupl failed:",A.message),alert(`Failed to dupl: ${A.message}`)):console.log("user cancel input")}}async function le(){try{if(console.log("openConfirmDialog-delete"),!await W("Delete Configuration",`Delete current configuration "${t.currentConfigName}"? This cannot be undone.`)){console.log("Delete cancelled");return}await s(),console.log("config deleted")}catch(H){H&&H.message?(console.error("Delete failed:",H.message),alert(`Failed to delete: ${H.message}`)):console.log("user cancel confirm")}}async function $(){try{const A=await W("Export Configuration",`Do you want to include your API token in the exported configuration?

Click "yes" to include token, "no" to exclude it.`)===!0;a(A),alert(`Configuration "${t.currentConfigName}" exported successfully!`)}catch(H){H&&H.message?(console.error("Export failed:",H.message),alert(`Failed to export: ${H.message}`)):console.log("Export cancelled")}}async function ne(){try{const H=await M("Import Configuration","Enter a name for the imported configuration:",t.currentConfigName);if(!H||!H.trim()){console.log("Empty input, import cancelled");return}const I=await W("Import API Token",`Do you want to import the API token from the file?

Click "yes" to import token from file, "no" to keep your current token.`)===!0,F=n.value.token||"";await l(H.trim(),I,F),alert(`Configuration "${H.trim()}" imported successfully!`)}catch(H){H&&H.message?(console.error("Import failed:",H.message),alert(`Failed to import: ${H.message}`)):console.log("Import cancelled")}}return Zt(()=>t.modalVisible,async H=>{H&&(await fs(),setTimeout(()=>{const A=t.theme?.current||"dark";u(A)},50))}),hi(()=>{document.addEventListener("keydown",j)}),pi(()=>{document.removeEventListener("keydown",j)}),(H,A)=>(Ge(),fr(cs,{to:"body"},[nt(vs,{name:"modal"},{default:sr(()=>[de(t).modalVisible?(Ge(),Ke("div",{key:0,class:"st_vision_modal",onClick:L},[p("div",Ov,[p("div",Uv,[p("button",{class:"vision_button vision_button_primary vision_button_save",onClick:A[0]||(A[0]=(...I)=>de(o)&&de(o)(...I))},[...A[8]||(A[8]=[p("i",{class:"fa-solid fa-save"},null,-1),p("span",null,"Save Plugin Settings",-1)])]),p("button",{class:"st_vision_modal_close",onClick:w},[...A[9]||(A[9]=[p("i",{class:"fa-solid fa-times"},null,-1)])])]),p("div",Bv,[nt(Mh,{title:h.value,content:c.value,visible:m.value,value:g.value,"onUpdate:visible":A[1]||(A[1]=I=>m.value=I),onConfirm:V,onCancel:ae},null,8,["title","content","visible","value"]),nt(jh,{title:P.value,content:S.value,visible:_.value,"onUpdate:visible":A[2]||(A[2]=I=>_.value=I),onConfirm:Se,onCancel:fe},null,8,["title","content","visible"]),p("div",Nv,[p("div",Fv,[p("button",{class:fn(["vision_tab",{active:f.value==="generate"}]),onClick:A[3]||(A[3]=I=>f.value="generate")},[...A[10]||(A[10]=[p("i",{class:"fa-solid fa-wand-magic-sparkles"},null,-1),p("span",null,"Generate",-1)])],2),p("button",{class:fn(["vision_tab",{active:f.value==="plugin"}]),onClick:A[4]||(A[4]=I=>f.value="plugin")},[...A[11]||(A[11]=[p("i",{class:"fa-solid fa-cog"},null,-1),p("span",null,"Plugin Settings",-1)])],2),p("button",{class:fn(["vision_tab",{active:f.value==="advanced"}]),onClick:A[5]||(A[5]=I=>f.value="advanced")},[...A[12]||(A[12]=[p("i",{class:"fa-solid fa-sliders"},null,-1),p("span",null,"Advanced",-1)])],2)]),he(nt(Rp,null,null,512),[[Oi,f.value==="generate"]]),he(nt(gg,{onRenameConfig:A[6]||(A[6]=I=>re("config")),onDuplicateConfig:A[7]||(A[7]=I=>Z("config")),onDeleteConfig:le,onExportConfig:$,onImportConfig:ne},null,512),[[Oi,f.value==="plugin"]]),he(nt(Mv,null,null,512),[[Oi,f.value==="advanced"]])])])])])):Sn("",!0)]),_:1})]))}},zv=tn(jv,[["__scopeId","data-v-87b92f01"]]);function Nl(){try{const e=SillyTavern.getContext();if(e?.getRequestHeaders)return e.getRequestHeaders()}catch(e){console.warn("[ST Vision] Failed to get request headers:",e)}return{"Content-Type":"application/json"}}function Hv(e){const t=e.indexOf(",");if(t===-1)throw new Error("Invalid dataURL format");return e.substring(t+1)}function Vv(e){const t=e.match(/data:image\/(\w+);base64,/);return t?t[1]:"png"}async function $v(e,t=null,n=null){try{const i=Hv(e),r=Vv(e),s={image:i,format:r};t&&(s.ch_name=t),n&&(s.filename=n);const o=await fetch("/api/images/upload",{method:"POST",headers:Nl(),body:JSON.stringify(s)});if(!o.ok){const l=await o.json().catch(()=>({error:"Unknown error"}));throw new Error(l.error||`Upload failed: ${o.status}`)}return{path:(await o.json()).path,format:r}}catch(i){throw console.error("[ST Vision] Failed to upload image:",i),i}}async function So(e){try{const t=await fetch("/api/images/delete",{method:"POST",headers:Nl(),body:JSON.stringify({path:e})});if(!t.ok){const n=await t.json().catch(()=>({error:"Unknown error"}));throw new Error(n.error||`Delete failed: ${t.status}`)}}catch(t){throw console.error("[ST Vision] Failed to delete image:",t),t}}function Fi(e){return e?e.startsWith("/")?e:`/${e}`:null}const qv={style:{display:"none"}},Wv={__name:"ChatImageGenerator",setup(e){const{currentConfig:t,state:n,applyTheme:i}=Yt(),{generateImage:r}=Ul();Zt(()=>n.theme?.current,$=>{$&&i($)},{immediate:!0});let s=null,o=null;const a=new Set,l=new Set,u=[];let f=!1;function m($,ne=null){const H=o?.chatId||"chat",A=$?.id??$?._stVisionMesId??ne??"no-id";return`${H}::${A}`}function h($,ne,H=null){return`${m($,H)}::${ne.trim()}`}function c($,ne,H){const A=o?.extensionSettings?.st_vision?.imageHistory||[],I=$?.extra?.st_vision_images||[],F=[],z=new Set;return I.filter(Y=>Y.promptKey===ne).forEach(Y=>{const ce=S(Y.imageId);ce&&!z.has(ce.imageId)&&(ce.path&&!ce.dataURL&&(ce.dataURL=Fi(ce.path)),F.push(ce),z.add(ce.imageId))}),A.filter(Y=>Y.promptKey===ne).forEach(Y=>{z.has(Y.imageId)||(Y.path&&!Y.dataURL&&(Y.dataURL=Fi(Y.path)),F.push(Y),z.add(Y.imageId))}),F.sort((Y,ce)=>(ce.timestamp||0)-(Y.timestamp||0)),F}function g($,ne=[],H=0){const A=document.getElementById("st-vision-fullscreen-viewer");A&&A.remove();const I=document.createElement("div");I.id="st-vision-fullscreen-viewer",I.style.cssText=`
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 99999;
    background: rgba(0, 0, 0, 0.95);
    backdrop-filter: blur(8px);
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
    box-sizing: border-box;
    overflow: hidden;
    touch-action: none;
    -webkit-overflow-scrolling: touch;
  `;const F=document.createElement("div");F.style.cssText=`
    position: relative;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-sizing: border-box;
    overflow: hidden;
  `;const z=document.createElement("img");z.src=$,z.style.cssText=`
    max-width: 100%;
    max-height: 100%;
    width: auto;
    height: auto;
    object-fit: contain;
    border-radius: 8px;
    user-select: none;
    -webkit-user-select: none;
    display: block;
    margin: auto;
    position: relative;
    z-index: 1;
    visibility: visible;
    opacity: 1;
  `,z.onload=()=>{if(z.style.display="block",z.style.visibility="visible",z.style.opacity="1",window.innerWidth<=768){const Q=F.clientWidth,te=F.clientHeight,ie=z.naturalWidth/z.naturalHeight,ue=Q/te;ie>ue?(z.style.width=`${Q}px`,z.style.height="auto"):(z.style.width="auto",z.style.height=`${te}px`)}},z.onerror=()=>{console.error("[ST Vision] Failed to load image:",$),z.style.display="none";const Q=document.createElement("div");Q.textContent="Failed to load image",Q.style.cssText=`
      color: white;
      text-align: center;
      padding: 20px;
      font-size: 16px;
    `,F.appendChild(Q)};const Y=document.createElement("button");Y.type="button",Y.setAttribute("tabindex","-1"),Y.innerHTML='<i class="fa-solid fa-times"></i>',Y.style.cssText=`
    position: absolute;
    top: max(20px, env(safe-area-inset-top));
    right: max(20px, env(safe-area-inset-right));
    width: 48px;
    height: 48px;
    min-width: 48px;
    min-height: 48px;
    border-radius: 50%;
    border: none;
    background: rgba(255, 255, 255, 0.2);
    color: white;
    cursor: pointer;
    font-size: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s ease;
    z-index: 100;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    outline: none;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  `,Y.addEventListener("focus",Q=>{Q.preventDefault(),Y.blur()}),Y.addEventListener("mouseenter",()=>{Y.style.background="rgba(255, 255, 255, 0.3)",Y.style.transform="scale(1.1)"}),Y.addEventListener("mouseleave",()=>{Y.style.background="rgba(255, 255, 255, 0.2)",Y.style.transform="scale(1)"});let ce=null,ve=null,ye=null,we=null,ke=H;if(ne.length>1){ce=document.createElement("div"),ce.style.cssText=`
      position: absolute;
      bottom: max(20px, env(safe-area-inset-bottom));
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      align-items: center;
      gap: 16px;
      background: rgba(0, 0, 0, 0.6);
      padding: 12px 20px;
      border-radius: 24px;
      z-index: 100;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    `,ve=document.createElement("button"),ve.type="button",ve.setAttribute("tabindex","-1"),ve.innerHTML='<i class="fa-solid fa-chevron-left"></i>',ve.style.cssText=`
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: none;
      background: rgba(255, 255, 255, 0.2);
      color: white;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
      touch-action: manipulation;
      outline: none;
    `,ve.addEventListener("focus",ie=>{ie.preventDefault(),ve.blur()}),we=document.createElement("span"),we.style.cssText=`
      color: white;
      font-size: 14px;
      min-width: 60px;
      text-align: center;
    `,we.textContent=`${ke+1} / ${ne.length}`,ye=document.createElement("button"),ye.type="button",ye.setAttribute("tabindex","-1"),ye.innerHTML='<i class="fa-solid fa-chevron-right"></i>',ye.style.cssText=ve.style.cssText,ye.addEventListener("focus",ie=>{ie.preventDefault(),ye.blur()});const Q=ie=>{ke=(ie+ne.length)%ne.length,z.src=ne[ke].dataURL,we.textContent=`${ke+1} / ${ne.length}`},te=(ie,ue)=>{ie.preventDefault(),ie.stopPropagation(),document.activeElement&&document.activeElement.blur(),Q(ke+ue)};ve.addEventListener("click",ie=>te(ie,-1)),ye.addEventListener("click",ie=>te(ie,1)),ve.addEventListener("touchend",ie=>{ie.preventDefault(),ie.stopPropagation(),te(ie,-1)},{passive:!1}),ye.addEventListener("touchend",ie=>{ie.preventDefault(),ie.stopPropagation(),te(ie,1)},{passive:!1}),ce.appendChild(ve),ce.appendChild(we),ce.appendChild(ye)}const T=document.body.style.overflow,R=document.body.style.position,pe=document.body.style.width,E=document.body.style.height,D=()=>{I.remove(),document.body.style.overflow=T||"",window.innerWidth<=768&&(document.body.style.position=R||"",document.body.style.width=pe||"",document.body.style.height=E||""),document.activeElement&&document.activeElement.blur()};Y.addEventListener("click",Q=>{Q.preventDefault(),Q.stopPropagation(),document.activeElement&&document.activeElement.blur(),D()}),Y.addEventListener("touchend",Q=>{Q.preventDefault(),Q.stopPropagation(),document.activeElement&&document.activeElement.blur(),D()},{passive:!1}),I.addEventListener("click",Q=>{(Q.target===I||Q.target===F)&&D()});let B=0,K=0;I.addEventListener("touchstart",Q=>{(Q.target===I||Q.target===F)&&(B=Q.touches[0].clientY,K=Q.touches[0].clientX)},{passive:!0}),I.addEventListener("touchend",Q=>{if(Q.target===I||Q.target===F){const te=Q.changedTouches[0].clientY,ie=Q.changedTouches[0].clientX,ue=Math.abs(te-B),Ee=Math.abs(ie-K);ue<10&&Ee<10&&(Q.preventDefault(),D())}},{passive:!1});const oe=Q=>{Q.key==="Escape"?(D(),document.removeEventListener("keydown",oe)):ne.length>1&&(Q.key==="ArrowLeft"?updateImage(ke-1):Q.key==="ArrowRight"&&updateImage(ke+1))};document.addEventListener("keydown",oe),document.body.style.overflow="hidden";const q=window.innerWidth<=768;q&&(document.body.style.position="fixed",document.body.style.width="100%",document.body.style.height="100%"),q&&(I.style.padding="0",I.style.width="100vw",I.style.height="100vh",I.style.maxWidth="100vw",I.style.maxHeight="100vh",F.style.width="100vw",F.style.height="100vh",F.style.maxWidth="100vw",F.style.maxHeight="100vh",F.style.padding="max(20px, env(safe-area-inset-top)) max(20px, env(safe-area-inset-right)) max(20px, env(safe-area-inset-bottom)) max(20px, env(safe-area-inset-left))",z.style.maxWidth="calc(100vw - max(40px, calc(env(safe-area-inset-left) + env(safe-area-inset-right))))",z.style.maxHeight="calc(100vh - max(40px, calc(env(safe-area-inset-top) + env(safe-area-inset-bottom))))",z.style.width="auto",z.style.height="auto"),F.appendChild(z),ce&&F.appendChild(ce),F.appendChild(Y),I.appendChild(F),document.body.appendChild(I),requestAnimationFrame(()=>{q&&(z.style.display="none",requestAnimationFrame(()=>{z.style.display="block"}))})}function x($){let ne=$.querySelector(".st-vision-image-wrapper");ne?ne.style.cssText="display: flex; flex-direction: column; align-items: center; gap: 8px; width: 100%;":(ne=document.createElement("div"),ne.className="st-vision-image-wrapper",ne.style.cssText="display: flex; flex-direction: column; align-items: center; gap: 8px; width: 100%;",$.appendChild(ne));const H=()=>{const ve=$._stVisionImages||[],ye=parseInt($.dataset.currentIndex||"0",10)||0,we=ve[ye];we?.dataURL&&g(we.dataURL,ve,ye)},A=ve=>{ve.addEventListener("click",ye=>{if(ve._stVisionTapOpenedAt&&Date.now()-ve._stVisionTapOpenedAt<400){delete ve._stVisionTapOpenedAt;return}H()}),ve.addEventListener("touchstart",ye=>{const we=ye.touches[0];ve._stVisionTouchStart={x:we.clientX,y:we.clientY,time:Date.now()},ve._stVisionTouchMoved=!1},{passive:!0}),ve.addEventListener("touchmove",ye=>{if(!ve._stVisionTouchStart)return;const we=ye.touches[0],ke=we.clientX-ve._stVisionTouchStart.x,T=we.clientY-ve._stVisionTouchStart.y;(Math.abs(ke)>10||Math.abs(T)>10)&&(ve._stVisionTouchMoved=!0)},{passive:!0}),ve.addEventListener("touchend",ye=>{if(!ve._stVisionTouchStart)return;const we=ve._stVisionTouchMoved,ke=Date.now()-ve._stVisionTouchStart.time;ve._stVisionTouchStart=null,!(we||ke>=500)&&(ye.preventDefault(),ye.stopPropagation(),ve._stVisionTapOpenedAt=Date.now(),H())},{passive:!1})};let I=ne.querySelector(".st-vision-image");I?(I.style.margin="0 auto",I._stVisionClickBound||(A(I),I._stVisionClickBound=!0)):(I=document.createElement("img"),I.className="st-vision-image",I.style.cssText="max-width: 400px; max-height: 400px; width: auto; height: auto; object-fit: contain; border-radius: 8px; display: block; cursor: pointer; margin: 0 auto; touch-action: manipulation;",I.title="Click to view full size",A(I),ne.appendChild(I));let F=ne.querySelector(".st-vision-nav"),z=ne.querySelector(".st-vision-image-indicator"),Y=ne.querySelector(".st-vision-prev"),ce=ne.querySelector(".st-vision-next");if(!F)F=document.createElement("div"),F.className="st-vision-nav",F.style.cssText="display: none; align-items: center; justify-content: center; gap: 8px; width: 100%; max-width: 400px; margin: 0 auto;",Y=document.createElement("button"),Y.className="st-vision-prev",Y.textContent=" Prev",Y.style.cssText="padding: 6px 12px; border-radius: 4px; border: 1px solid var(--st-vision-nav-border, #555); background: var(--st-vision-nav-bg, #3a3a3a); color: var(--st-vision-text, #e0e0e0); cursor: pointer; transition: all 0.2s ease; touch-action: manipulation; -webkit-tap-highlight-color: transparent;",ce=document.createElement("button"),ce.className="st-vision-next",ce.textContent="Next ",ce.style.cssText="padding: 6px 12px; border-radius: 4px; border: 1px solid var(--st-vision-nav-border, #555); background: var(--st-vision-nav-bg, #3a3a3a); color: var(--st-vision-text, #e0e0e0); cursor: pointer; transition: all 0.2s ease; touch-action: manipulation; -webkit-tap-highlight-color: transparent;",z=document.createElement("span"),z.className="st-vision-image-indicator",z.style.cssText="font-size: 0.9em; color: var(--st-vision-text-muted, #b0b0b0);",F.appendChild(Y),F.appendChild(z),F.appendChild(ce),ne.appendChild(F);else{const ve=F.style.display||"none";F.style.cssText=`display: ${ve}; align-items: center; justify-content: center; gap: 8px; width: 100%; max-width: 400px; margin: 0 auto;`,Y&&(Y.style.cssText="padding: 6px 12px; border-radius: 4px; border: 1px solid var(--st-vision-nav-border, #555); background: var(--st-vision-nav-bg, #3a3a3a); color: var(--st-vision-text, #e0e0e0); cursor: pointer; transition: all 0.2s ease; touch-action: manipulation; -webkit-tap-highlight-color: transparent;"),ce&&(ce.style.cssText="padding: 6px 12px; border-radius: 4px; border: 1px solid var(--st-vision-nav-border, #555); background: var(--st-vision-nav-bg, #3a3a3a); color: var(--st-vision-text, #e0e0e0); cursor: pointer; transition: all 0.2s ease; touch-action: manipulation; -webkit-tap-highlight-color: transparent;"),z&&(z.style.cssText="font-size: 0.9em; color: var(--st-vision-text-muted, #b0b0b0);")}return Y._stVisionBound||(Y.addEventListener("click",()=>P($,-1)),Y._stVisionBound=!0),ce._stVisionBound||(ce.addEventListener("click",()=>P($,1)),ce._stVisionBound=!0),{img:I,nav:F,indicator:z}}function _($,ne,H=0){$._stVisionImages=ne;const{img:A,nav:I,indicator:F}=x($);if(!ne||ne.length===0){A.style.display="none",I.style.display="none",F.textContent="",$.dataset.currentIndex="0";return}const z=Math.max(0,Math.min(H,ne.length-1)),Y=ne[z];A.style.display="block",A.src=Y.dataURL,A.dataset.imageId=Y.imageId,$.dataset.currentIndex=String(z),F.textContent=`${z+1}/${ne.length}`,I.style.display=ne.length>1?"flex":"none"}function P($,ne){const H=$._stVisionImages||[];if(!H.length)return;const I=((parseInt($.dataset.currentIndex||"0",10)||0)+ne+H.length)%H.length;_($,H,I)}function S($){try{const A=(SillyTavern.getContext().extensionSettings?.st_vision?.imageHistory||[]).find(I=>I.imageId===$);return A&&A.path&&!A.dataURL&&(A.dataURL=Fi(A.path)),A}catch(ne){return console.error("[ST Vision] Failed to get image from history:",ne),null}}const b=()=>{const $=n.chatImageGen.tagPrefix.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),ne=n.chatImageGen.tagSuffix.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return new RegExp(`${$}([\\s\\S]*?)${ne}`,"g")};async function w(){if(f||u.length===0)return;f=!0;let $=n.chatImageGen.queueDelay||8;$<5&&($=5),$>12&&($=12);const ne=$*1e3;for(;u.length>0;){const H=u.shift();try{await H.fn()}catch(A){console.error("[ST Vision] Queue request failed:",A)}u.length>0&&await new Promise(A=>setTimeout(A,ne))}f=!1}async function L($,ne,H){const A=H?.dataset.promptKey||`${$||"no-id"}::${ne.trim()}`;if(l.has(A))return;if(!H){console.error("[ST Vision] No container element provided");return}const I=H.querySelector(".st-vision-generate-btn");if(!I){console.error("[ST Vision] Button not found in container");return}if(I.disabled)return;l.add(A),I.disabled=!0;const F=I.dataset.originalHtml||I.innerHTML;I.dataset.originalHtml||(I.dataset.originalHtml=F),I.innerHTML='<i class="fa-solid fa-spinner fa-spin"></i> Generating...';const z=async()=>{try{const Y=t.value,ce=Bl(Y.prompt_prefix||"",ne.trim(),Y.prompt_suffix||"",Y.negative_prompt||"",Y.model);let ve={};if(ce.hasCharacters?ve={prompt:ce.prompt||ne.trim(),negative_prompt:ce.negative_prompt,v4_prompt:ce.v4_prompt,v4_negative_prompt:ce.v4_negative_prompt,use_coords:ce.use_coords,characterPrompts:ce.characterPrompts}:ve={prompt:ce.prompt||ne.trim(),negative_prompt:ce.negative_prompt},typeof r!="function")throw new Error("generateImage is not a function. Check if NovelAIUtils is properly initialized.");const ye=await r(ve,!1);let we=null;if(Array.isArray(ye)&&ye.length>0?we=ye[0]:ye&&ye.dataURL&&(we=ye),!we||!we.dataURL)throw new Error("Failed to generate image");const ke=await j($,we.dataURL,ne,H?.dataset.mesid??null),T=ke?.imageEntry||{imageId:ke?.imageRef?.imageId,prompt:ne.trim(),dataURL:we.dataURL,timestamp:Date.now(),promptKey:A,messageId:$},pe=[...H._stVisionImages||[],T].filter(D=>D&&D.imageId);I.disabled=!1;const E=I.dataset.originalHtml||F||'<i class="fa-solid fa-wand-magic-sparkles"></i> Generate Image';I.innerHTML=E,_(H,pe,pe.length-1)}catch(Y){console.error("[ST Vision] Failed to generate image:",Y),I.disabled=!1,I.innerHTML='<i class="fa-solid fa-exclamation-triangle"></i> Retry',I.dataset.originalHtml||(I.dataset.originalHtml=F||'<i class="fa-solid fa-wand-magic-sparkles"></i> Generate Image'),alert("Failed to generate image: "+Y.message)}finally{l.delete(A)}};n.chatImageGen.useRequestQueue?(u.push({fn:z}),w()):z()}async function j($,ne,H,A=null){try{if(!o||!o.chat)return;let I=null;if($!=null&&(I=o.chat.find(ye=>ye.id===$)),!I){const ye=A!==null?parseInt(String(A),10):NaN;!Number.isNaN(ye)&&ye>=0&&ye<o.chat.length&&(I=o.chat[ye])}if(!I){console.warn("[ST Vision] Message not found for messageId:",$);return}const F=Date.now(),z=`st-vision-${F}-${Math.random().toString(36).substring(7)}`,Y=h(I,H,A),ce=await M(z,ne,H,I,Y);I.extra||(I.extra={}),I.extra.st_vision_images||(I.extra.st_vision_images=[]);const ve={imageId:z,prompt:H,promptKey:Y,timestamp:F};return I.extra.st_vision_images.push(ve),o.saveChat&&await o.saveChat(),{imageEntry:ce,imageRef:ve}}catch(I){console.error("[ST Vision] Failed to save image to chat:",I)}}async function M($,ne,H,A,I){try{const F=SillyTavern.getContext(),z=F.extensionSettings;z.st_vision||(z.st_vision={}),z.st_vision.imageHistory||(z.st_vision.imageHistory=[]);const Y=A.name||null,ce=`${$}.png`,ve=await $v(ne,Y,ce),ye={imageId:$,prompt:H,path:ve.path,timestamp:Date.now(),promptKey:I,characterName:A.name,chatId:F.chatId,messageId:A.id,isUser:A.is_user},we=z.st_vision.imageHistory.findIndex(ke=>ke.imageId===$);return we>=0?z.st_vision.imageHistory[we]=ye:z.st_vision.imageHistory.unshift(ye),z.st_vision.imageHistory.length>1e3&&(z.st_vision.imageHistory=z.st_vision.imageHistory.slice(0,1e3)),F.saveSettingsDebounced&&F.saveSettingsDebounced(),{...ye,dataURL:ne}}catch(F){throw console.error("[ST Vision] Failed to save to global history:",F),F}}function W($,ne,H,A){if(!$||!A){console.error("[ST Vision] Cannot rebind events: missing button or container");return}if($.type="button",$.setAttribute("tabindex","-1"),!$.dataset.originalHtml){const Y='<i class="fa-solid fa-wand-magic-sparkles"></i> Generate Image';$.innerHTML.includes("Retry")||$.innerHTML.includes("exclamation-triangle")?$.dataset.originalHtml=Y:$.dataset.originalHtml=$.innerHTML||Y}$.addEventListener("focus",Y=>{Y.preventDefault(),$.blur()}),$.addEventListener("focusin",Y=>{Y.preventDefault(),$.blur()});const I=Y=>{if(Y&&(Y.preventDefault(),Y.stopPropagation()),document.activeElement&&document.activeElement.blur(),$.blur(),!$.disabled)try{L(ne.id,H,A)}catch(ce){console.error("[ST Vision] Error in button click handler:",ce),alert("Error generating image: "+ce.message)}};$.addEventListener("click",I,!1);let F=0,z=!1;$.addEventListener("touchstart",Y=>{Y.preventDefault(),Y.stopPropagation(),F=Date.now(),z=!1,$.style.opacity="0.8",document.activeElement&&document.activeElement!==$&&document.activeElement.blur()},{passive:!1}),$.addEventListener("touchmove",Y=>{z=!0},{passive:!0}),$.addEventListener("touchend",Y=>{Y.preventDefault(),Y.stopPropagation();const ce=Date.now()-F;!z&&ce<500&&I(Y),ce<300?setTimeout(()=>{$.style.opacity="1"},150):$.style.opacity="1",$.blur(),document.activeElement&&document.activeElement.blur()},{passive:!1}),$.addEventListener("touchcancel",Y=>{Y.preventDefault(),$.style.opacity="1",$.blur()},{passive:!1})}function V($,ne,H,A,I){const F=document.createElement("div");F.className="st-vision-inline-container",F.style.cssText=`
    display: inline-block;
    margin: 8px 0;
    padding: 12px;
    border: 1px solid var(--st-vision-border, #404040);
    border-radius: 8px;
    background: var(--st-vision-bg, #2a2a2a);
    max-width: 424px;
    width: 100%;
    box-sizing: border-box;
  `,F.dataset.promptKey=$,F.dataset.messageId=A.id??"",F.dataset.mesid=I??"";const z=document.createElement("button");z.type="button",z.className="st-vision-generate-btn",z.setAttribute("tabindex","-1"),z.style.cssText=`
    background: var(--st-vision-button-bg, linear-gradient(135deg, #667eea 0%, #764ba2 100%));
    color: white;
    border: none;
    padding: 8px 12px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.9em;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    margin-bottom: 8px;
    width: 100%;
    box-sizing: border-box;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
    position: relative;
    z-index: 1;
    pointer-events: auto;
    user-select: none;
    -webkit-user-select: none;
    outline: none;
  `;const Y='<i class="fa-solid fa-wand-magic-sparkles"></i> Generate Image';z.innerHTML=Y,z.dataset.originalHtml=Y,z.title=`Generate image: ${ne.trim().substring(0,50)}...`,z.dataset.prompt=ne.trim(),z.dataset.originalTag=H,z.addEventListener("focus",ke=>{ke.preventDefault(),z.blur()}),z.addEventListener("focusin",ke=>{ke.preventDefault(),z.blur()}),window.matchMedia("(hover: hover)").matches&&(z.addEventListener("mouseenter",()=>{z.style.background="var(--st-vision-button-hover, linear-gradient(135deg, #7a8ef0 0%, #8650b8 100%))",z.style.transform="scale(1.02)",z.style.boxShadow="0 2px 8px rgba(102, 126, 234, 0.4)"}),z.addEventListener("mouseleave",()=>{z.style.background="var(--st-vision-button-bg, linear-gradient(135deg, #667eea 0%, #764ba2 100%))",z.style.transform="scale(1)",z.style.boxShadow="none"}));const ce=ke=>{if(ke&&(ke.preventDefault(),ke.stopPropagation()),document.activeElement&&document.activeElement.blur(),z.blur(),!z.disabled)try{L(A.id,ne,F)}catch(T){console.error("[ST Vision] Error in button click handler:",T),alert("Error generating image: "+T.message)}};let ve=0,ye=!1;z.addEventListener("touchstart",ke=>{ke.preventDefault(),ke.stopPropagation(),ve=Date.now(),ye=!1,z.style.opacity="0.8",document.activeElement&&document.activeElement!==z&&document.activeElement.blur()},{passive:!1}),z.addEventListener("touchmove",ke=>{ye=!0},{passive:!0}),z.addEventListener("touchend",ke=>{ke.preventDefault(),ke.stopPropagation();const T=Date.now()-ve;!ye&&T<500&&ce(ke),T<300?setTimeout(()=>{z.style.opacity="1"},150):z.style.opacity="1",z.blur(),document.activeElement&&document.activeElement.blur()},{passive:!1}),z.addEventListener("touchcancel",ke=>{ke.preventDefault(),z.style.opacity="1",z.blur()},{passive:!1}),z.addEventListener("click",ce,!1),F.appendChild(z);const we=c(A,$);return _(F,we,0),F}function ae($,ne){if(!$||!ne)return;const H=ne.getAttribute("mesid");$._stVisionMesId=H;const A=`${o?.chatId||"chat"}_${H??$.id??"no-id"}_${$.mes?.length||0}`;if(a.has(A)||!n.chatImageGen.enabled)return;const I=ne.querySelector(".mes_text");if(!I)return;const F=$.mes||"",z=b(),Y=[...F.matchAll(z)];if(Y.length===0)return;const ce=I.querySelectorAll(".st-vision-inline-container");if(ce.length>0){let ye=!0;if(ce.forEach(we=>{we.querySelector("img")||(ye=!1)}),ce.length===Y.length&&ye){a.add(A);return}ce.forEach(we=>we.remove())}a.add(A);let ve=I.innerHTML;Y.reverse().forEach(ye=>{const we=ye[0],ke=ye[1]||ye[0],T=h($,ke,H),R=V(T,ke,we,$,H),E=(I.textContent||"").indexOf(we);if(E===-1){console.warn("[ST Vision] Tag not found in DOM text content, may have been modified by regex");return}const D=document.createRange(),B=document.createTreeWalker(I,NodeFilter.SHOW_TEXT,null);let K=0,oe=null,q=0,Q=null,te=0,ie;for(;ie=B.nextNode();){const ue=ie.textContent||"",Ee=K,be=K+ue.length;if(!oe&&E>=Ee&&E<be&&(oe=ie,q=E-Ee),oe&&E+we.length>Ee&&E+we.length<=be){Q=ie,te=E+we.length-Ee;break}K=be}if(oe&&Q)D.setStart(oe,q),D.setEnd(Q,te),D.deleteContents(),D.insertNode(R);else{const ue=document.createElement("div"),Ee=R.cloneNode(!0);ue.appendChild(Ee);const be=ue.innerHTML,Pe=ve.replace(we,be);I.innerHTML=Pe;const Ae=I.querySelector(`.st-vision-inline-container[data-prompt-key="${T}"]`),Me=Ae?.querySelector(".st-vision-generate-btn");if(Me&&Ae){W(Me,$,ke,Ae);const Ne=Ae.querySelector(".st-vision-prev"),Fe=Ae.querySelector(".st-vision-next");Ne&&!Ne._stVisionBound&&(Ne.addEventListener("click",()=>P(Ae,-1)),Ne._stVisionBound=!0),Fe&&!Fe._stVisionBound&&(Fe.addEventListener("click",()=>P(Ae,1)),Fe._stVisionBound=!0)}else console.error("[ST Vision] Could not find inserted button/container for event rebinding")}})}function Se(){if(!o)return;o=SillyTavern.getContext();const $=o.chat;let ne=[];if($)for(let A of $)ne.push(A);const H=document.querySelectorAll(".mes");ne.length===0||H.length===0||ne.forEach((A,I)=>{let F=null;for(const z of H){const Y=z.getAttribute("mesid");if(Y!==null&&parseInt(Y)===I){F=z;break}}F&&ae(A,F)})}const fe={MESSAGE_SENT:{clearProcessed:!1,delay:500,logPrefix:"MESSAGE_SENT"},MESSAGE_RECEIVED:{clearProcessed:!1,delay:500,logPrefix:"MESSAGE_RECEIVED"},MESSAGE_EDITED:{clearProcessed:!0,delay:100,logPrefix:"MESSAGE_EDITED"},MESSAGE_UPDATED:{clearProcessed:!0,delay:100,logPrefix:"MESSAGE_UPDATED"},MESSAGE_DELETED:{clearProcessed:!0,delay:100,logPrefix:"MESSAGE_DELETED"},MESSAGE_SWIPED:{clearProcessed:!0,delay:100,logPrefix:"MESSAGE_SWIPED"},MESSAGE_SWIPE_DELETED:{clearProcessed:!0,delay:100,logPrefix:"MESSAGE_SWIPE_DELETED"},MESSAGE_FILE_EMBEDDED:{clearProcessed:!0,delay:200,logPrefix:"MESSAGE_FILE_EMBEDDED"},MESSAGE_REASONING_EDITED:{clearProcessed:!1,delay:100,logPrefix:"MESSAGE_REASONING_EDITED"},MESSAGE_REASONING_DELETED:{clearProcessed:!1,delay:100,logPrefix:"MESSAGE_REASONING_DELETED"},MORE_MESSAGES_LOADED:{clearProcessed:!0,delay:500,logPrefix:"MORE_MESSAGES_LOADED"},USER_MESSAGE_RENDERED:{clearProcessed:!0,delay:100,logPrefix:"USER_MESSAGE_RENDERED"},CHARACTER_MESSAGE_RENDERED:{clearProcessed:!0,delay:100,logPrefix:"CHARACTER_MESSAGE_RENDERED"},CHAT_CHANGED:{clearProcessed:!0,delay:2e3,logPrefix:"CHAT_CHANGED"},CHAT_LOADED:{clearProcessed:!0,delay:1e3,logPrefix:"CHAT_LOADED"},CHAT_CREATED:{clearProcessed:!0,delay:1e3,logPrefix:"CHAT_CREATED"},CHAT_DELETED:{clearProcessed:!0,delay:500,logPrefix:"CHAT_DELETED"},GROUP_CHAT_CREATED:{clearProcessed:!0,delay:1e3,logPrefix:"GROUP_CHAT_CREATED"},GROUP_CHAT_DELETED:{clearProcessed:!0,delay:500,logPrefix:"GROUP_CHAT_DELETED"}};function re($,ne){const H=fe[$];H&&(H.clearProcessed&&a.clear(),o=SillyTavern.getContext(),setTimeout(()=>{Se()},H.delay))}function Z(){try{if(n.theme?.current&&i(n.theme.current),o=SillyTavern.getContext(),s=o.eventSource,!s){console.error("[ST Vision] Event source not available");return}const{eventTypes:$}=o,ne=new Map;Object.keys(fe).forEach(H=>{const A=$[H];if(A){const I=F=>re(H,F);s.on(A,I),ne.set(H,{eventName:A,handler:I})}}),o._stVisionEventHandlers=ne,o.chat&&o.chat.length>0&&setTimeout(()=>{Se()},2e3)}catch($){console.error("[ST Vision] Failed to initialize:",$)}}function le(){s&&o&&o._stVisionEventHandlers&&(o._stVisionEventHandlers.forEach(({eventName:ne,handler:H})=>{s.off(ne,H)}),delete o._stVisionEventHandlers)}return hi(()=>{Z()}),pi(()=>{le()}),($,ne)=>(Ge(),Ke("div",qv))}},Gv={key:0,class:"st-vision-image-history-modal"},Zv={class:"modal-content"},Kv={class:"modal-body"},Yv={class:"filters"},Xv={class:"stats"},Jv={key:0,class:"image-grid"},Qv={class:"image-wrapper"},e_=["src","alt","onClick","onTouchstart"],t_=["onClick"],n_=["onClick"],i_=["onClick"],r_={class:"image-info"},s_={class:"prompt"},o_={class:"meta"},a_={class:"character"},l_={class:"time"},u_={key:1,class:"empty-state"},f_={key:2,class:"pagination"},d_=["disabled"],c_=["disabled"],Ii=20,h_={__name:"ImageHistory",props:{visible:{type:Boolean,default:!1}},emits:["close"],setup(e,{emit:t}){const n=t,i=ct(""),r=ct("newest"),s=ct(1),o=ct(-1);let a=null;const l=Ie(()=>{try{return(SillyTavern.getContext().extensionSettings?.st_vision?.imageHistory||[]).map(W=>W.path&&!W.dataURL?{...W,dataURL:Fi(W.path)}:W)}catch(j){return console.error("[ST Vision] Failed to get image history:",j),[]}}),u=Ie(()=>{let j=[...l.value];if(i.value){const M=i.value.toLowerCase();j=j.filter(W=>W.prompt?.toLowerCase().includes(M)||W.characterName?.toLowerCase().includes(M))}return r.value==="newest"?j.sort((M,W)=>W.timestamp-M.timestamp):r.value==="oldest"?j.sort((M,W)=>M.timestamp-W.timestamp):r.value==="character"&&j.sort((M,W)=>(M.characterName||"").localeCompare(W.characterName||"")),j}),f=Ie(()=>Math.ceil(u.value.length/Ii)),m=Ie(()=>{const j=(s.value-1)*Ii;return u.value.slice(j,j+Ii)});Zt([i,r],()=>{s.value=1});function h(){n("close")}function c(j,M){a=setTimeout(()=>{o.value=M,setTimeout(()=>{o.value=-1},3e3)},500)}function g(){a&&(clearTimeout(a),a=null)}function x(j,M=60){return j?j.length>M?j.substring(0,M)+"...":j:""}function _(j){if(!j)return"";const M=new Date(j),V=new Date-M;return V<6e4?"Just now":V<36e5?`${Math.floor(V/6e4)}m ago`:V<864e5?`${Math.floor(V/36e5)}h ago`:M.toLocaleDateString()}function P(j){window.open(j.dataURL,"_blank")}function S(j){navigator.clipboard.writeText(j).then(()=>{console.log("[ST Vision] Prompt copied to clipboard")}).catch(M=>{console.error("[ST Vision] Failed to copy prompt:",M)})}function b(j){const M=document.createElement("a");M.href=j.dataURL;const W=j.imageId?`${j.imageId}.png`:`st-vision-${j.timestamp||Date.now()}.png`;M.download=W,M.click()}async function w(j){if(confirm("Delete this image from history?"))try{const M=SillyTavern.getContext(),W=(s.value-1)*Ii+j,V=u.value[W];if(V.path)try{await So(V.path)}catch(ae){console.error("[ST Vision] Failed to delete image from server:",ae)}M.extensionSettings.st_vision.imageHistory.splice(W,1),M.saveSettingsDebounced&&M.saveSettingsDebounced(),m.value.length===0&&s.value>1&&s.value--}catch(M){console.error("[ST Vision] Failed to delete image:",M)}}async function L(){if(confirm("Clear all image history? This cannot be undone."))try{const j=SillyTavern.getContext(),W=(j.extensionSettings.st_vision.imageHistory||[]).filter(V=>V.path).map(V=>So(V.path).catch(ae=>{console.error(`[ST Vision] Failed to delete image ${V.path}:`,ae)}));await Promise.all(W),j.extensionSettings.st_vision.imageHistory=[],j.saveSettingsDebounced&&j.saveSettingsDebounced(),s.value=1}catch(j){console.error("[ST Vision] Failed to clear history:",j)}}return(j,M)=>e.visible?(Ge(),Ke("div",Gv,[p("div",{class:"modal-overlay",onClick:h}),p("div",Zv,[p("div",{class:"modal-header"},[M[5]||(M[5]=p("h2",null,[p("i",{class:"fa-solid fa-images"}),qe(" Image History")],-1)),p("button",{class:"close-btn",onClick:h},[...M[4]||(M[4]=[p("i",{class:"fa-solid fa-times"},null,-1)])])]),p("div",Kv,[p("div",Yv,[he(p("input",{"onUpdate:modelValue":M[0]||(M[0]=W=>i.value=W),type:"text",placeholder:"Search by prompt or character...",class:"search-input"},null,512),[[$e,i.value]]),he(p("select",{"onUpdate:modelValue":M[1]||(M[1]=W=>r.value=W),class:"sort-select"},[...M[6]||(M[6]=[p("option",{value:"newest"},"Newest First",-1),p("option",{value:"oldest"},"Oldest First",-1),p("option",{value:"character"},"By Character",-1)])],512),[[Tt,r.value]]),p("button",{onClick:L,class:"clear-btn"},[...M[7]||(M[7]=[p("i",{class:"fa-solid fa-trash"},null,-1),qe(" Clear All ",-1)])])]),p("div",Xv,[p("span",null,"Total: "+ot(u.value.length)+" images",1)]),u.value.length>0?(Ge(),Ke("div",Jv,[(Ge(!0),Ke(ht,null,ln(m.value,(W,V)=>(Ge(),Ke("div",{key:V,class:"image-card"},[p("div",Qv,[p("img",{src:W.dataURL,alt:W.prompt,onClick:ae=>P(W),onTouchstart:ae=>c(ae,V),onTouchend:g},null,40,e_),p("div",{class:fn(["image-overlay",{"show-overlay":o.value===V}])},[p("button",{onClick:Cr(ae=>S(W.prompt),["stop"]),title:"Copy prompt"},[...M[8]||(M[8]=[p("i",{class:"fa-solid fa-copy"},null,-1)])],8,t_),p("button",{onClick:Cr(ae=>b(W),["stop"]),title:"Download"},[...M[9]||(M[9]=[p("i",{class:"fa-solid fa-download"},null,-1)])],8,n_),p("button",{onClick:Cr(ae=>w(V),["stop"]),title:"Delete"},[...M[10]||(M[10]=[p("i",{class:"fa-solid fa-trash"},null,-1)])],8,i_)],2)]),p("div",r_,[p("div",s_,ot(x(W.prompt)),1),p("div",o_,[p("span",a_,ot(W.characterName),1),p("span",l_,ot(_(W.timestamp)),1)])])]))),128))])):(Ge(),Ke("div",u_,[...M[11]||(M[11]=[p("i",{class:"fa-solid fa-image"},null,-1),p("p",null,"No images generated yet",-1)])])),f.value>1?(Ge(),Ke("div",f_,[p("button",{onClick:M[2]||(M[2]=W=>s.value--),disabled:s.value===1},[...M[12]||(M[12]=[p("i",{class:"fa-solid fa-chevron-left"},null,-1)])],8,d_),p("span",null,"Page "+ot(s.value)+" / "+ot(f.value),1),p("button",{onClick:M[3]||(M[3]=W=>s.value++),disabled:s.value===f.value},[...M[13]||(M[13]=[p("i",{class:"fa-solid fa-chevron-right"},null,-1)])],8,c_)])):Sn("",!0)])])])):Sn("",!0)}},p_=tn(h_,[["__scopeId","data-v-4c3a0d3e"]]),g_={id:"st-vision-app",class:"st-vision-app"},m_={__name:"App",setup(e){const t=ct(!1);return typeof window<"u"&&window.addEventListener("st-vision-show-history",()=>{t.value=!0}),(n,i)=>(Ge(),Ke("div",g_,[nt(Ah),nt(zv),nt(Wv),nt(p_,{visible:t.value,onClose:i[0]||(i[0]=r=>t.value=!1)},null,8,["visible"])]))}},v_=tn(m_,[["__scopeId","data-v-8478365b"]]),Eo=document.getElementById("st-vision-app")||document.getElementById("app");Eo?fd(v_).mount(Eo):console.error("[ST Vision] Mount point not found");
